{"version":3,"sources":["webpack:///dhtmlxgantt.js","webpack:///webpack/bootstrap 1cc7feb9aaf70c7ba1d2","webpack:///./sources/utils/utils.js","webpack:///./sources/utils/dom_helpers.js","webpack:///./sources/utils/eventable.js","webpack:///./sources/utils/extends.js","webpack:///./sources/utils/date_helpers.js","webpack:///./sources/core/ui/layout/cell.js","webpack:///./sources/utils/env.js","webpack:///./sources/utils/helpers.js","webpack:///./sources/core/ui/grid/grid.js","webpack:///./sources/core/ui/mouse_event_container.js","webpack:///./sources/utils/timeout.js","webpack:///./sources/utils/dom_event_scope.js","webpack:///./sources/core/ui/layout/layout.js","webpack:///./sources/core/ui/timeline/timeline.js","webpack:///./sources/core/ui/timeline/scales_ignore.js","webpack:///./sources/core/ui/resouce_store_mixin.js","webpack:///./sources/core/datastore/datastore.js","webpack:///./sources/core/datastore/power_array.js","webpack:///./sources/core/datastore/treedatastore.js","webpack:///./sources/core/gantt_data_range.js","webpack:///./sources/utils/task_tree_helpers.js","webpack:///./sources/core/worktime/calendar_arguments_helper.js","webpack:///./sources/dhtmlxgantt.enterprise.js","webpack:///./sources/core/gantt_factory.js","webpack:///./sources/core/gantt.js","webpack:///./sources/core/common/import.js","webpack:///./sources/core/common/services.js","webpack:///./sources/core/common/config.js","webpack:///./sources/core/common/ajax.js","webpack:///./sources/core/common/date.js","webpack:///./sources/core/common/dnd.js","webpack:///./sources/core/common/templates.js","webpack:///./sources/core/common/state.js","webpack:///./sources/core/message.js","webpack:///./sources/core/ui/index.js","webpack:///./sources/core/ui/ui_factory.js","webpack:///./sources/core/ui/configurable.js","webpack:///./sources/core/ui/mouse.js","webpack:///./sources/core/ui/gantt_layers.js","webpack:///./sources/core/ui/render/layer_engine.js","webpack:///./sources/core/ui/render/render_factory.js","webpack:///./sources/core/ui/layout/view_layout.js","webpack:///./sources/core/ui/layout/view_cell.js","webpack:///./sources/core/ui/layout/resizer_cell.js","webpack:///./sources/core/ui/layout/scrollbar_cell.js","webpack:///./sources/core/ui/timeline/scales.js","webpack:///./sources/core/ui/timeline/tasks_canvas_render.js","webpack:///./sources/core/ui/grid/grid_resize.js","webpack:///./sources/core/ui/grid/resource_grid.js","webpack:///./sources/core/ui/timeline/resource_timeline.js","webpack:///./sources/core/ui/render/task_bar_render.js","webpack:///./sources/core/ui/render/task_bg_render.js","webpack:///./sources/core/ui/render/link_render.js","webpack:///./sources/core/ui/render/task_grid_line_render.js","webpack:///./sources/core/ui/grid/main_grid_initializer.js","webpack:///./sources/core/ui/grid/tasks_grid_dnd.js","webpack:///./sources/core/ui/timeline/main_timeline_initializer.js","webpack:///./sources/core/ui/timeline/tasks_dnd.js","webpack:///./sources/core/ui/timeline/links_dnd.js","webpack:///./sources/core/ui/main_layout_initializer.js","webpack:///./sources/core/data_task_layers.js","webpack:///./sources/core/facades/layout.js","webpack:///./sources/core/datastore/datastore_hooks.js","webpack:///./sources/core/facades/datastore.js","webpack:///./sources/core/facades/datastore_tasks.js","webpack:///./sources/core/facades/datastore_links.js","webpack:///./sources/core/datastore/select.js","webpack:///./sources/core/datastore/datastore_render.js","webpack:///./sources/core/dataprocessor/hooks.js","webpack:///./sources/core/dataprocessor/live_update_hooks.js","webpack:///./sources/core/dataprocessor/dataprocessor.js","webpack:///./sources/core/plugins/index.js","webpack:///./sources/core/plugins/autoscroll.js","webpack:///./sources/core/plugins/batch_update.js","webpack:///./sources/core/plugins/wbs.js","webpack:///./sources/core/plugins/jquery_hooks.js","webpack:///./sources/core/plugins/dhtmlx_hooks.js","webpack:///./sources/core/plugins/resources.js","webpack:///./sources/core/dynamic_loading.js","webpack:///./sources/core/grid_column_api.js","webpack:///./sources/core/grid_column_api.gpl.js","webpack:///./sources/core/wai_aria.js","webpack:///./sources/core/tasks.js","webpack:///./sources/core/load.js","webpack:///./sources/core/worktime/work_time.js","webpack:///./sources/core/worktime/calendar_manager.js","webpack:///./sources/core/worktime/strategy/calendar_strategy.js","webpack:///./sources/core/worktime/strategy/calendar_workunit_cache.js","webpack:///./sources/core/worktime/time_calculator.js","webpack:///./sources/core/worktime/strategy/no_work_time.js","webpack:///./sources/core/facades/worktime_calendars.js","webpack:///./sources/core/data.js","webpack:///./sources/core/lightbox.js","webpack:///./sources/core/lightbox_optional_time.js","webpack:///./sources/core/data_task_types.js","webpack:///./sources/core/cached_functions.js","webpack:///./sources/core/skin.js","webpack:///./sources/css/skins/skyblue.js","webpack:///./sources/css/skins/meadow.js","webpack:///./sources/css/skins/terrace.js","webpack:///./sources/css/skins/broadway.js","webpack:///./sources/css/skins/material.js","webpack:///./sources/css/skins/contrast_black.js","webpack:///./sources/css/skins/contrast_white.js","webpack:///./sources/core/touch.js","webpack:///./sources/locale/locale.js","webpack:///./sources/core/gantt_core.js","webpack:///./sources/core/common/assert.js","webpack:///./sources/core/destructor.js","webpack:///./sources/core/deprecated_warnings.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","copy","t","result","Array","Number","String","Boolean","length","dateHelper","isDate","Date","apply","mixin","target","source","force","f","undefined","defined","obj","uid","seed","valueOf","bind","functor","arguments","event","el","handler","capture","addEventListener","attachEvent","eventRemove","removeEventListener","detachEvent","elementPosition","elem","top","left","right","bottom","getBoundingClientRect","box","body","document","docElem","documentElement","parentNode","scrollTop","window","pageYOffset","scrollLeft","pageXOffset","clientTop","clientLeft","offsetWidth","offsetHeight","parseInt","offsetTop","offsetLeft","offsetParent","y","Math","round","x","width","height","isVisible","node","display","visibility","getComputedStyle","style","currentStyle","hasNonNegativeTabIndex","isNaN","getAttribute","hasHref","a","area","nodeName","loLowerCase","isEnabled","input","select","textarea","button","toLowerCase","hasAttribute","getFocusableNodes","root","nodes","querySelectorAll","join","nodesArray","slice","splice","getScrollSize","div","createElement","cssText","appendChild","clientWidth","removeChild","getClassName","className","baseVal","indexOf","_trimString","addClassName","removeClassName","split","regEx","RegExp","replace","toNode","getElementById","querySelector","insert","newone","_slave","innerHTML","child","firstChild","remove","getChildren","css","ch","childNodes","len","out","push","getTargetNode","e","trg","tagName","srcElement","locateAttribute","attribute","str","trim","this","locateClassName","classname","strict","ind","charAt","getRelativeEventPosition","ev","pageX","pageY","pos","clientX","clientY","isChildOf","parent","getNodePosition","insertNode","removeNode","getChildNodes","makeEventable","eventHost","EventHost","catcher","callObj","createEventStorage","addEvent","attachAll","callback","callEvent","arg0","_silent_mode","handlerName","concat","checkEvent","id","list","removeEvent","detachAllEvents","_connected","_silentStart","_silentEnd","dhx_catch","z","res","zr","b","__","constructor","create","getFullYear","getMonth","getDate","utils","eventable","domHelpers","Cell","config","factory","gantt","$container","$parent","$config","headerHeight","$gantt","$domEvents","_createDomEventScope","$id","$name","$factory","destructor","$view","$services","getService","detach","_headerClickHandler","detachAll","cell","scrollTo","clear","getNode","padding","resize","final","$preResize","topCont","topSize","getSize","minWidth","maxWidth","minHeight","maxHeight","setSize","hide","_hide","show","mode","index","cellIndex","moveView","hidden","$toHTML","content","header","raw","html","collapseIcon","canCollapse","$fill","init","self","toggle","delegate","collapsed","size","gravity","getContentSize","$lastSize","contentX","contentY","_getBorderSizes","borders","horizontal","vertical","_currentBorders","_borders","_sizeHeader","_sizeContent","_setBorders","view","cssHash","xLayout","floor","transform","env","isIE","navigator","userAgent","isIE6","XMLHttpRequest","isIE7","isIE8","isOpera","isChrome","isKHTML","isFF","isIPad","search","isEdge","getSecondsInUnit","unit","units","hour","forEach","arr","workArray","arrayMap","map","resArray","second","minute","day","week","month","quarter","year","gridResize","Grid","$state","container","gridAriaAttr","_waiAria","gridAttrString","gridDataAriaAttr","gridDataAttrString","$grid","gridScaleRowAttrString","$grid_scale","$grid_data","attr","$getConfig","item_attribute","layers","_createLayerConfig","resizer","_renderHeaderResizers","doOnRender","_mouseDelegates","_addLayers","_initEvents","columns","getGridColumns","innerWidth","outerWidth","scrollable","_setColumnsWidth","grid_width","dataHeight","max","scale_height","refresh","store","rowStore","contentHeight","row_height","countVisible","contentWidth","_getGridWidth","scrollHeight","scrollWidth","getDatastore","_initSmartRenderingPlaceholder","_calculateGridWidth","_renderGridHeader","getItemTop","getIndexById","getItemHeight","renderer","$ui","gridLine","filter","_taskLayers","taskRenderer","getDataRender","createDataRender","defaultContainer","taskLayers","layer","host","bar_layer","addLayer","_staticBgHandler","item","smart_rendering","$rowsPlaceholder","placeholder","close","open","_clearLayers","removeLayer","_getColumnWidth","column","min_width","min_grid_column_width","new_width","max_width","min","_getGridWidthLimits","min_limit","max_limit","newWidth","start_index","columns_width","final_width","extra_width","start_width","col","share","iterator","curExtra","_getColsTotalWidth","cols_width","v","parseFloat","unknown","gridWidth","autofit","diff","delta","changed","_setContentSize","locale","templates","rtl","reverse","cells","labels","lineHeigth","last","colWidth","sort","_sort","direction","cssClass","grid_header_class","label","ariaAttrs","gridScaleCellAttrString","lineHeight","events","mouseEvents","h","checkTimeout","updPerSecond","_on_timeout","timeout","ceil","setTimeout","createScope","handlers","attach","element","extend","__extends","Layout","_super","_this","$root","_parseConfig","$cells","_resizeScrollbars","autosize","scrollbars","showScrollbar","scrollbar","scrollChanged","visibleScrollbars","hideScrollbar","hiddenSrollbars","scroll","shouldHide","shouldShow","visibleGroups","group","_syncCellSizes","groupName","newSize","groups","_eachChild","_syncGroupSize","_xLayout","getNextSibling","ownSize","resizeSibling","getPrevSibling","siblingSize","totalGravity","totalSize","k","mainGrid","getView","$content","startStage","mainCall","_resizeInProgress","contentViews","getCellsByType","setContentSize","_getAutosizeMode","code","isChild","type","children","cellId","sub","alert","insertBefore","rows","cols","views","initUI","getCells","render","cellSize","_cleanElSize","value","toString","_getBoxStyles","computed","clientHeight","properties","styles","boxSizing","MozBoxSizing","horPaddings","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","vertPaddings","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth","borderBox","innerHeight","outerHeight","boxSizes","contentSizes","_sizes","margin","_calcFreeSpace","side","_free","_gravity","_calcSize","_configureBorders","borderClass","lastVisibleIndex","lastCell","borderColorClass","_updateCellVisibility","oldVisibleCells","_visibleCells","firstCall","visibleCells","cellView","marginSide","dx","dy","_findBinary","array","prev","low","high","ScaleHelper","canvasRender","Timeline","$scaleHelper","$task","$task_scale","$task_data","$task_bg","$task_links","$task_bars","_tasks","col_width","full_width","trace_x","rendered","linksAttr","bindLinks","link_attribute","tasks","linkLayers","links","_attachLayers","backgroundImage","scale","data_els","_refreshScales","smart_scales","scales","_scales","_getScaleChunkHtml","taskFilter","expose","taskBar","taskBg","static_background","link","_linkLayers","_taskRenderer","getLayer","_initStaticBackgroundRender","linkStore","linkRenderer","linkLayer","_linkRenderer","staticRender","getScale","_render_tasks_scales","scales_html","outer_width","state","getState","helpers","_getScales","availWidth","autosize_min_width","cfgs","prepareConfigs","min_column_width","min_date","max_date","cfg","fromPos","toPos","scale_row_class","tplClass","_prepareScaleHtml","globalConfig","globalTemplates","date","template","date_to_str","startIndex","endIndex","count","inherit_scale_class","scale_cell_class","cssclass","ariaAttr","getTimelineCellAttr","dateFromPos","summ","part","_getColumnDuration","posFromDate","columnIndexByDate","assert","wholeCells","partCell","days","trace_x_ascending","ignores","ignore_x","day_ind","transition","trace_index_transition","getItemPosition","task","start_date","end_date","xLeft","xRight","task_height","offset","task_height_offset","getRowTop","task_id","primaryScale","subscales","sortScales","add","step","ScaleIgnoreHelper","helper","processIgnores","display_count","ignore_time","skip_off_time","ignore","_ignore_time_config","ignored_colls","createMixin","_linkToTaskStore","$data","tasksStore","ownStore","updateDelay","requestAnimationFrame","cancelAnimationFrame","powerArray","DataStore","pull","$initItem","initItem","visibleOrder","$create","fullOrder","_skip_refresh","_filterRule","_searchVisibleOrder","_parseInner","data","loaded","parse","getItem","_updateOrder","updateItem","_removeItemInner","$remove","removeItem","_addItemInner","exists","silent","order","data_size","$find","$insertAt","getVisibleItems","getIndexRange","addItem","_changeIdInner","oldId","newId","changeId","_moveInner","sindex","tindex","getIdByIndex","$removeAt","move","clearAll","master","arraysEqual","arr1","arr2","quick","oldOrder","serialize","eachItem","rule","filteredOrder","from","to","Infinity","ret","getItems","_getNullIfUndefined","getFirst","getLast","getNext","getPrev","$powerArray","$each","$map","$filter","TreeDataStore","_branches","$parentProperty","parentProperty","rootId","$getRootId","val","$openInitially","openInitially","eachParent","$open","_buildTree","setParent","getParent","_add_branch","$level","calculateItemLevel","parentIndex","targetIndex","_move_branch","$rendered_parent","_replace_branch_child","_traverseBranches","branch","itemId","taskId","items","sid","getBranchIndex","source_pid","tbranch","hasChild","childId","parentId","pid","getSiblings","siblings","level","_setParentInner","new_pid","startItem","added_already","old_parent","new_parent","old_id","new_id","newbranch","field","desc","criteria","original_criteria","els","temp","dateRangeResolver","getSubtaskDates","defaultRangeResolver","resolveConfigRange","range","end","start_interval","_scale_range_unit","scale_unit","scale_offset_minimal","_init_tasks_range","calculateEndDate","duration","_min_date","_max_date","_adjust_scales","fit_tasks","old_min","old_max","copyLinkIdsArray","linkIds","targetHash","isLinkExists","getLink","copyLinkIds","$source","$target","getSubtreeLinks","isTaskExists","getTask","eachTask","getSubtreeTasks","IsWorkTimeArgument","calendar","ClosestWorkTimeArgument","dir","CalculateEndDateArgument","GetDurationArgument","start","calendarArgumentsHelper","getWorkHoursArguments","setWorkTimeArguments","unsetWorkTimeArguments","isWorkTimeArguments","processedConfig","duration_unit","getClosestWorkTimeArguments","arg","_getStartEndConfig","param","argumentType","duration_step","getDurationArguments","hasDurationArguments","calculateEndDateArguments","Gantt","getGanttInstance","_seed","plugin","_ganttPlugin","_internal_id","$syncFactory","DHXGantt","version","keys","edit_save","edit_cancel","$inject","ajax","dnd","setService","templatesLoader","StateService","stateService","registerProvider","selected_task","getSelectedId","domEvents","_eventRemoveAll","uiApi","$mouseEvents","layersApi","layersService","createLayoutFacade","register","services","service","layout","scrollX","scrollY","finish_to_start","start_to_start","finish_to_finish","start_to_finish","types","project","milestone","work_time","correct_work_time","cascade_delete","autoscroll","autoscroll_speed","show_links","show_task_cells","branch_loading","branch_loading_property","show_loading","show_chart","show_grid","min_duration","xml_date","api_date","start_on_monday","server_utc","show_progress","select_task","scroll_on_click","preserve_scroll","readonly","date_grid","drag_links","drag_progress","drag_resize","drag_project","drag_move","drag_mode","progress","round_dnd_dates","link_wrapper_width","root_id","tree","align","time_step","date_scale","task_date","time_picker","task_attribute","layer_attribute","buttons_left","_migrate_buttons","dhx_save_btn","dhx_cancel_btn","dhx_delete_btn","buttons_right","lightbox","sections","map_to","focus","project_sections","milestone_sections","single_date","drag_lightbox","details_on_create","details_on_dblclick","initial_scroll","task_scroll_offset","order_branch","order_branch_free","grid_resizer_column_attribute","grid_resizer_attribute","keep_grid_width","grid_resize","show_unscheduled","readonly_property","editable_property","calendar_property","resource_calendars","type_renderers","open_tree_initially","optimize_render","prevent_default_scroll","show_errors","wai_aria_attributes","cache","method","DOMParser","parseFromString","ActiveXObject","async","loadXML","xmltop","tagname","xhr","status","xml","responseXML","responseText","getElementsByTagName","xpath","xpathExp","docObj","selectNodes","first","ownerDocument","evaluate","XPathResult","ANY_TYPE","iterateNext","query","_call","url","headers","onLoad","getSync","put","postData","del","post","postSync","getLong","postLong","longParams","isQt","match","onreadystatechange","readyState","xmlDoc","filePath","getTime","key","setRequestHeader","toUpperCase","send","urlSeparator","month_short","month_short_hash","month_full","month_full_hash","date_part","old","setHours","hour_start","getHours","setTime","time_part","getTimezoneOffset","week_start","shift","getDay","month_start","setDate","quarter_start","res_month","setMonth","year_start","day_start","getMinutes","setMinutes","minute_start","getSeconds","setSeconds","getMilliseconds","setMilliseconds","_add_days","inc","ndate","setYear","add_quarter","to_fixed","num","format","utc","dateToStr","Function","getISOWeek","getWeek","str_to_date","splt","mask","strToDate","dateString","_getWeekNumber","isoWeek","nday","first_thursday","year_number","ordinal_date","getUTCISOWeek","convert_to_utc","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","parseDate","copyDomEvent","metaKey","shiftKey","ctrlKey","altKey","DnD","_obj","_settings","inputMethods","getInputMethods","_drag_start_timer","clearDragTimer","down","accessor","original_target","touch","dragStart","touch_drag","up","traceDragEvents","domElement","inputMethod","mousemove","dragMove","limited_mousemove","dragScroll","preventDefault","cancelBubble","updates_per_second","mouseup","dragEnd","checkPositionChange","diff_x","diff_y","sqrt","pow","abs","sensitivity","initDnDMarker","marker","backupEventTarget","domEvent","getEvent","cloneNode","backup_element","touchEventsSupported","createEvent","touches","elementFromPoint","pointerEnabled","pointerType","msPointerEnabled","MSPOINTER_TYPE_MOUSE","clearTimeout","started","getPosition","_prevent_touch_scroll","_touch_feedback","initTemplate","initial","template_name","regTemplates","initTemplates","gantt_save_btn","icon_save","gantt_cancel_btn","icon_cancel","gantt_delete_btn","icon_delete","xml_format","progress_text","task_text","text","task_class","grid_row_class","task_row_class","task_cell_class","grid_indent","grid_folder","grid_file","grid_open","grid_blank","isUnscheduledTask","task_unscheduled_time","grid_date_format","task_time","link_class","link_description","drag_link","from_start","to_start","link_start","link_end","drag_link_class","isLinkAllowed","tooltip_date_format","tooltip_text","stateProviders","internal","provider","unregisterProvider","usercall","modalBox","_dhx_msg_cfg","modal_key","which","keyCode","messageBox","keyboard","click","modality","cover","onkeydown","buttonAriaAttrs","messageButtonAttrString","info","position","message","onclick","messageInfoAttr","expire","timers","getFirstDefined","values","_boxStructure","ok","cancel","contentId","messageModalAttr","setAttribute","boxAttribute","inner","title","message_ok","message_cancel","buttons","btn","_createBox","alertPopup","confirmPopup","boxPopup","box_params","params","alertBox","confirmBox","focusable","hideAll","popups","confirm","modalbox","attachInitializer","initializer","ext","onCreated","onInitialized","onDestroyed","uiFactory","createFactory","registerView","Resizer","Scrollbar","mainLayoutInitializer","ViewCell","ViewLayout","mainTimelineInitializer","mainGridInitializer","ResourceGrid","ResourceTimeline","layersEngine","createLayers","gridRenderer","renderTaskBg","renderTaskBar","renderLink","ui","parentView","createView","creator","createdViews","configure","reset","viewConstructor","ViewSettings","extendSettings","parentSettings","own","parentConfig","parentTemplates","$getTemplates","createMouseHandler","addEventTarget","eventHandlers","callHandler","eventName","args","onClick","locate","findEventHandlers","callEventHandlers","multiselect","selectTask","onContextMenu","src","linkId","returnValue","hash","delegateHandlers","handlerResult","onDoubleClick","doubleclick","showLightbox","onMouseMove","_last_move_event","contextMenu","global","createLayerFactory","createLayerEngine","previusSiblingContainer","defaultContainerSibling","createGroup","filters","addTaskLayer","_getTaskLayers","getLayers","removeTaskLayer","_clearTaskLayers","addLinkLayer","_getLinkLayers","removeLinkLayer","_clearLinkLayers","mergeFilters","filter_methods","filter_method","renderFactoryProvider","layerFactory","renderFactory","get_container","rel_root","defaultFilters","renderGroup","tempCollection","renderers","_add","pending","topmost","rel","getRenderer","eachLayer","rendererFactory","task_area_renderers","renderOne","render_item","remove_item","dom","append","task_area_pulls","clear_container","render_items","buffer","createDocumentFragment","vis","replace_item","item_id","newNode","replaceChild","restore","change_id","oldid","newid","clearRenderers","$cell","sizes","byMaxSize","otherCell","childConfig","$initialized","unload","outerX","outerY","childSize","ResizerCell","startBackSize","startFrontSize","_moveHandler","_moveResizer","_resizer","_upHandler","newSizes","_getNewSizes","back","front","_setSizes","_setBackground","_clearResizer","_clearListeneres","_startOnMove","_cancelDND","_callStartDNDEvent","_xMode","_behind","_front","_startDND","stop","_eachGroupItem","_getSiblings","_isPosChanged","_downHandler","_setResizer","_positions","timestamp","now","next","classes","overflow","_getDirection","_getResizePosition","behindSide","behindMin","frontSide","frontMin","newBehindSide","newFrontSide","_getGroupName","resizers","_getGroupResizePosition","positions","minMax","av","nextX","nextY","_setGravity","frontSize","behindSize","frontG","behindG","newFrontG","newBehindG","_assignNewSizes","$layout","ScrollbarCell","_scrollHorizontalHandler","_scrollVerticalHandler","_outerScrollVerticalHandler","_outerScrollHorizontalHandler","_mouseWheelHandler","scroll_size","_isHorizontal","scrollPosition","eachCell","_isVertical","_initVertical","_initHorizontal","_initMouseWheel","_initLinkedViews","_getRootParent","_eachView","_getLinkedViews","$scroll_hor","$scroll_ver","_updateLinkedViews","scrollHorizontally","_scrolling","codeScrollLeft","oldSize","scrollVertically","_wheel_time","_touch_scroll_active","_oldLeft","_getScrollSize","scrollSize","outerSize","isHorizontal","linked","scrollProperty","innerSizeProperty","outerProperty","_getScrollOffset","cellScrollSize","nonScrollableSize","scrollableViewPortSize","outerScroll","innerScroll","getScrollState","visible","scrollSizes","_setScrollSize","toggleVisibility","_getScaleOffset","parentLayout","vparent","_oldTop","_checkWheelTarget","targetNode","connectedViews","ff","wx","deltaX","wheelDeltaX","wy","deltaY","wheelDelta","oldLeft","detail","oldTop","getSum","setSumWidth","sum_width","parts","oldWidth","adjustSize","splitSize","full","shared","min_coll_width","container_width","minDate","maxDate","heights","configs","main_scale","initScaleConfig","initColSizes","limitVisibleRange","unshift","alineScaleColumns","reverseScale","setPosSettings","indexes","trace_indexes","skip","probe","isWorkTime","min_col_width","line_height","cont_width","column_count","eachColumn","iterateScales","lower_scale","upper_scale","upper_dates","lower_dates","prevUpper","target_index","upper_start","upper_end","lower_start","lower_end","targetWidth","curr","tzOffset","_correct_dst_change","dates","lastDate","outDate","createStaticBgHelper","renderBgCanvas","totalHeight","getContext","styleParams","getCellStyles","png","createBackgroundTiles","bgDivs","createBgDivs","fragment","getColumnWidths","widths","differentWidths","parseRgb","rgbCss","exec","r","g","getUrlFromCache","canvasBgCache","getHashKey","cellStyles","bottomBorderColor","rightBorderColor","getStyleElement","staticBgStyleId","cacheUrl","generateBgUrl","drawDot","color","matrix","rowLength","canvas","context","rowHeight","image","createImageData","imageSmoothingEnabled","verticalLineWidth","rightBorderWidth","verticalLineColor","w","horizontalLineWidth","bottomBorderWidth","horizontalLineColor","row","putImageData","toDataURL","getCssClass","styleHTML","bgImage","bgTiles","tile","prevCell","divs","prevWidth","leftPos","maxTileSize","appVersion","currentTop","tileWidth","currentHeight","whiteSpace","rowStyles","getPropertyValue","createResizer","grid","_render_grid_header_resize","totalWidth","resize_el","gridSeparatorAttr","_grid_resize","column_before_start","column_index","column_after_start","drag_index","column_drag_move","dd","target_column","pointerPosition","minPointerPosition","maxPointerPosition","markerStartPosition","marker_width","limit_max","column_drag_end","dnd_sensitivity","resourceStoreMixin","resource_store","resourceRow","createTaskRenderer","_render_task_element","painters","getTaskType","defaultRenderer","_task_default_render","_isAllowedUnscheduledTask","taskType","padd","link_line_width","_render_task_progress","_render_task_content","textColor","_combine_item_class","progressColor","_render_leftside_content","_render_rightside_content","setTaskBarAttr","isReadonly","isSummaryTask","_render_pair","outer","showLinkPoints","link_source_id","_render_side_content","_get_link_crossing_css","leftside_text","rightside_text","cond","_get_conditions","ln","tp","done","pr","backgroundColor","opacity","wrapper","drag","markerPos","leftside","basic","drag_id","link_target_id","highlight_critical_path","isCriticalTask","link_landing_area","from_id","link_from_start","link_to_start","allowDrag","dragClass","createTaskBgRender","_render_bg_line","j","cssTemplate","odd","getGlobalTaskIndex","createLinkRender","_render_link_element","dots","path_builder","get_points","lines","drawer","get_lines","isCriticalLink","link_arrow_size","render_line","endpoint","_render_link_arrow","borderColor","linkAttr","point","line_width","dirs","getMilestonePosition","milestoneHeight","getTaskHeight","milestoneWidth","current_pos","path","line_to","get_path","line","_get_line","get_wrapper_sizes","wrapper_size","get_line_sizes","line_size","marginTop","marginLeft","innerPos","get_direction","vect","current","point_to","pt","get_endpoint","xy","e_y","e_x","shiftX","lineType","get_line_type","forward","sign","createGridLineRender","_render_grid_item","has_child","textValue","aria","gridAddButtonAttrString","gridCellAttrString","$dataprocessor_class","css_template","taskRowAttr","rowDnd","extendGantt","initEvents","extendDom","clearEvents","_is_icon_open_click","showDate","conf","sorting_method","createTask","_init_dnd","getStore","hideQuickInfo","_hideQuickInfo","datastore","initial_open_state","outerHTML","$transparent","refreshData","lastTaskOfLevel","last_item","_getGridPos","gridHeight","_getTargetY","_getTaskByY","dropIndex","allowedLevel","over","targetY","nextId","prevId","$drop_target","taskDnD","linkDnD","timeline","_linksDnD","createLinkDND","_tasksDnD","createTaskDND","_attachDomEvents","_attachStateProvider","_clearDomEvents","_clearStateProvider","_delete_link_handler","question","confirm_link_deleting","_dhtmlx_confirm","deleteLink","coll","coll_date","scale_step","dragMultiple","_events","before_start","before_finish","after_finish","_handlers","_domEvents","clear_drag_state","set_actions","drag_from_start","evs","stage","_move","_resize","_resize_progress","on_mouse_move","on_mouse_down","on_mouse_up","start_x","start_y","coords_x","_drag_task_coords","_init_task_timing","diffValue","_find_max_shift","dragItems","correctShift","minX","maxX","maxShift","minShift","new_start","new_end","obj_s_x","obj_e_x","_mouse_position_change","oldPos","newPos","_is_number","isFinite","start_drag","sX","sY","_start_dnd","_update_on_move","_update_item_on_move","original","refreshTask","curr_date","initialDrag","childDrag","_update_parents","_get_drag_mode","_fix_dnd_scale_time","fixStart","roundDate","_fix_working_times","getClosestWorkTime","correctTaskWorkTime","_finalize_mouse_up","_fireEvent","updateTask","_dhx_changed","modes","dragProperty","trigger","round_task_dates","drag_state","initTaskDND","_tasks_dnd","roundTaskDates","initLinksDND","getVisibleMilestoneWidth","origWidth","isMilestone","getDndState","_link_source_task","_link_target_task","_link_source_task_start","_link_target_task_start","_link_landing","getLinePos","isStart","taskPos","getTaskPosition","xEnd","yEnd","updateMarkedHtml","advanceMarker","resetDndState","showDirectingLine","s_x","s_y","getDirectionLine","link_direction_class","dist","tan","angle","atan","coordinateCircleQuarter","PI","sin","cos","ieTransform","shiftLeft","shiftTop","eX","eY","_direction","removeDirectionLine","_dir_start","landing","prevTarget","prevLanding","prevToStart","targ","_dir_end","targetChanged","_get_link_type","addLink","getVerticalScrollbar","getHorizontalScrollbar","_legacyGridResizerClass","gridResizer","mainTimeline","showGrid","colsWidth","grid_limits","original_grid_width","skinSettings","skins","skin","_getVerticalScrollbar","_getHorizontalScrollbar","scrollState","_findGridResizer","gridFirst","resizeInfo","initialWidth","prevCellWidth","nextCellWidth","viewCell","limits","newBehindSize","newFrontSize","oldBackSize","oldFrontSize","newBackSize","getTimeline","getGrid","tryCall","fallback","DEFAULT_VALUE","getTaskTop","getTaskNode","getLinkNode","oldH","oldV","newV","newH","date_x","scroll_to","showTask","_scroll_state","x_pos","y_pos","x_inner","y_inner","scrollVer","scrollHor","horState","verState","inner_width","inner_height","initDataStores","sync_link","sourceTask","targetTask","sync_link_delete","sync_links","linksStore","mapEvents","mapFrom","mapTo","sourceEvent","targetEvent","_init_task","_set_default_task_timing","_init_link","facade","facadeFactory","createDatastore","$index","resetProjectDates","_update_flags","action","batch_update","oldState","calculateScaleRange","newState","isTaskVisible","treeHelper","deletedLinks","onItemLoading","onBeforeAdd","onAfterAdd","onBeforeUpdate","onAfterUpdate","onBeforeDelete","onAfterDelete","onIdChange","onBeforeItemMove","onAfterItemMove","onFilterItem","onItemOpen","onItemClose","onBeforeSelect","onAfterSelect","onAfterUnselect","getDatastores","storeNames","createFacade","createDatastoreFacade","createTasksFacade","createLinksFacade","createDatastoreSelect","datastoreRender","$StoreType","storeList","bindDataStore","stores","refresh_links","refreshLink","userdata","_clear_data","unselectTask","unselect","createTasksDatastoreFacade","getTaskByTime","addTask","deleteTask","getTaskCount","getVisibleTaskCount","getTaskIndex","startTask","changeTaskId","calculateTaskLevel","getTaskByIndex","moveTask","createLinksStoreFacade","getLinkCount","getLinks","updateLink","changeLinkId","createDataStoreSelectMixin","selectedId","deleteItem","storeRenderCreator","skipRepaint","refreshId","renders","itemRepainter","renderItem","renderItems","addDataProcessorHooks","detachDataProcessor","dp","setGanttMode","_getRowData","afterUpdate","oldAfterUpdate","_dp","_change_id","_row_style","_delete_task","_sendTaskOrder","dataProcessorHandlers","extendDataProcessor","_ganttMode","_in_progress","_invalid","updatedRows","reqUrl","_tMode","pref","substr","taskTiming","_get_task_timing_mode","$no_start","$no_end","action_param","getUserData","row_id","setUpdated","attachDataProcessorEvents","clientSideDelete","updated","clientOnly","getTaskLinks","cascadeDelete","dpMode","updateMode","setUpdateMode","cascade","sendAllData","_tSend","_waitMode","itemLinks","batchUpdate","_serverProcessor","substring","serverProcessor","dataProcessor","_dp_init","setTransactionMode","inserted","deleted","invalid","error","_methods","liveUpdateHooks","setUserData","insertCallback","upd","_xmlNodeToJSON","methods","isExist","deleteCallback","delete","patchDataProcessor","dataprocessor","serverProcessorURL","autoUpdate","_headers","_payload","post_delim","mandatoryFields","messages","invalid_cell","enableUTFencoding","total","payload","_endnm","escape","_utf","encodeURIComponent","setDataColumns","_columns","getSyncState","enableDataNames","enablePartialDataSend","_changed","rowId","findRow","existing","set_invalid","is_invalid","_clearUpdateFlag","markRow","sendData","details","checkBeforeUpdate","mytype","_h2","editStop","_beforeSendData","_sendData","serialize_one","stack","security_key","_applyPayload","a1","that","ids","a3","_user","a4","gr_id","JSON","stringify","valid","_getAllData","has_one","setVerificator","verifFunction","clearVerificator","pattern","defineAction","_uActions","afterUpdateCallback","tid","btag","correct","soid","tag","finalizeUpdate","cleanUpdate","atag","anObj","setOnAfterUpdate","enableDebug","setOnBeforeUpdateHandler","func","setAutoUpdate","interval","user","_need_update","_update_busy","xml_node","afterAutoUpdate","fullSync","setInterval","loadUpdate","getUpdates","_v","nodeValue","_a","vers","upds","getAutoscrollContainer","isScrollState","dragMarker","isResize","isLink","isMove","defineDelayTimeout","delayTimeout","speed","tick","scrollSpeed","autoscroll_delay","scrollDelay","defineScrollInterval","startPos","eventPos","clearInterval","autoscrollInterval","isScroll","posX","posY","need_scroll","currentScrollTop","scrollOuterHeight","scrollInnerHeight","currentScrollLeft","scrollOuterWidth","scrollInnerWidth","autoscroll_step","scrollStep","boxSize","startCoord","scrollRange","createMethod","disableMethod","methodName","dummyMethod","restoreMethod","disableMethods","methodsHash","restoreMethods","batchUpdatePayload","console","isActive","noRedraw","dp_mode","call_dp","resetProjects","createWbs","_needRecalc","_isRecalcNeeded","_isGroupSort","_groups","is_active","_getWBSCode","_calcWBS","$virtual","$wbs","_setWBSCode","getWBSCode","_isFirst","_prevSibling","_wbs","_parent","wbs","jQuery","$","fn","dhx_gantt","each","newgantt","dhtmlx","attaches","attachGantt","cmp","attachObject","dataType","dataObj","vs","border","gridId","gridObj","dhtmlXCellObject","createResourceMethods","getTaskBy","propertyName","propertyValue","filterResourceTasks","getResourceTasks","resourceIds","cacheKey","resourceHash","resourceTaskCache","getResourceLoad","resourceId","resourceProperty","calculateResourceLoad","timegrid","currDate","timetable","resource_render_empty_cells","renderResourceLine","resource","resource_property","resource_cell_class","resource_cell_value","resourceLoadCache","renderLine","filterTasks","needLoading","_load_url","old_has_children","load","_load_type","visibleColumns","getGridColumn","stripHTMLLite","htmlText","htmlTags","extraSpaces","escapeQuotes","singleQuotes","isDisabled","getAttributeString","attributes","aria-label","_taskCommonAttr","isSelectedTask","linkTypes","toStart","fromStart","lightboxHiddenAttr","lightboxVisibleAttr","lightboxAttr","lightboxButtonAttrString","buttonName","role","tabindex","lightboxHeader","headerText","lightboxSelectAttrString","time_option","years","months","hours","minutes","lightboxDurationInputAttrString","section","column_duration","aria-valuemin","attrs","new_task","buttonLabel","quickInfoAttr","quickInfoHeaderAttrString","quickInfoHeader","quickInfoButtonAttrString","tooltipAttr","tooltipVisibleAttr","tooltipHiddenAttr","cl","on_load","resp","_process_loading","collections","_load_collections","firstTask","collections_loaded","collection","serverList","option","option_key","$ignore","json","dhx_security","serializeTask","_copyObject","serializeLink","_copyLink","rawLinks","attrs_only","nodeType","_getCollections","loader","opts","itms","itm","_getXML","toptag","getXMLTopNode","skey","oldxml","startdate","est","enddate","predecessortasks","CalendarManager","TimeCalculator","worktimeFacadeFactory","manager","timeCalculator","_calendars","createArgumentsHelper","CalendarWorktimeStrategy","_getDayHoursForMultiple","calendars","currPos","is_work_hour","reduce","acc","_is_work_hour","mergeCalendars","newCalendar","createCalendar","worktime","_convertWorktimeSettings","settings","parentCalendar","defaults","fulltime","apiCore","_tryChangeCalendarSettings","getCalendar","createDefaultCalendars","getCalendars","getTaskCalendar","calendarId","addCalendar","worktimes","deleteCalendar","restoreConfigCalendars","CalendarWorkTimeStrategy","argumentsHelper","_workingUnitsCache","Cache","_getUnitOrder","_timestamp","UTC","_checkIfWorkingUnit","_isWorkTime","_is_work_day","_getWorkHours","_internDatesPull","_nextDate","_getWorkUnitsBetweenGeneric","stepStart","stepEnd","checkFirst","checkLast","isLastStep","_getHoursPerDay","_getWorkHoursForRange","_getWorkUnitsBetweenHours","firstDayStart","firstDayEnd","lastDayStart","lastDayEnd","startPart","endPart","hourRange","_getCalendar","_setCalendar","backup","_isEmptyCalendar","datesArray","isFullWeekSet","checkFullArray","getWorkHours","setWorkTime","unsetWorkTime","reset_calendar","is_work_unit","calculateDuration","hasDuration","mult","_calculateEndDate","added","_getClosestWorkTime","future_target","prev_target","both_directins","unitOrder","biggerTimeUnit","biggerTimeUnitSettings","WorkUnitsCache","_cache","time","calendarManager","$disabledCalendar","NoWorkTimeCalendar","CalendarDisabledTimeStrategy","_calculateDuration","fixedUnits","createWorktimeFacade","_hasDuration","unscheduled","_defaultTaskDate","parent_id","startDate","$new","_lightbox_id","task_type","$rendered_type","task_mode","dirty","taskMode","_assign_project_dates","getSubtaskDuration","has_changed","oldStart","oldEnd","steps","upper","lower","colIndex","_is_chart_visible","_get_type_name","type_value","_lightbox_methods","_lightbox_template","getLightbox","_center_lightbox","showCover","_fill_lightbox","_get_timepicker_step","getLabel","_get_typed_lightbox_config","options","updateCollection","list_name","resetLightbox","getLightboxType","_lightbox_type","_lightbox","_is_lightbox_timepicker","wide_form","onmousedown","_ready_to_dnd","onselectstart","cursor","_init_dnd_events","sns","_render_sections","ds","t_ds","labelBlock","inputBlock","nextSibling","inputId","resizeLightbox","_init_lightbox_events","block","form_blocks","con","lightbox_additional_height","scroll_top","scroll_left","view_height","_cover","_document_height","_scroll_height","lightbox_events","_save_lightbox","$click","hideLightbox","_cancel_lightbox","sec","button_click","previousSibling","buttonTarget","getLightboxValues","_resolve_default_mapping","mapping","time_optional","duration_optional","get_value","hideCover","_custom_lightbox","_set_lightbox_values","lightbox_header","default_value","set_value","getLightboxSection","getValue","setValue","get_template_control","control","get_select_control","get_textarea_control","get_time_control","_move_while_dnd","_finish_dnd","_dnd_start_lb","gantt_unselectable","lb","_lb_start","_focus","getTimePicker","time_format","_time_format_order","dt","limit_time_select","last_hour","first_hour","start_year","end_year","year_range","tdate","_time_values","_fill_lightbox_select","_get_input","_dhx_onchange","onchange","_time_format_size","auto_end_date","_update_lightbox_select","mapped_fields","singleDate","_calc_date","_get_start_date","_get_duration","endspan","_change_duration","inps","btns","charCode","duration_val","_filter","_display","allow_root","root_label","tmpDom","newOptions","onselect","_silent_redraw_lightbox","oldType","formData","updTask","_extend_to_optional","lightbox_block","optional_time","disable","enable","disabled","update_block","button_text","checkType","typeselect","oldOnChange","changeLightboxType","activate","_cached_functions","update_if_changed","active","critical_path_mode","wrap_methods","_prefetch_originals","prefetch","methodname","optimizer","argumentsArray","get_arguments_hash","cached_values","has_cached_value","get_cached_value","cache_value","arguments_hash","is_date","stringify_argument","deactivate","setup","override_gantt","gantt_methods","deactivTimeout","_configure","_get_skin","href","skinset","_second_column_width","_third_column_width","_redefine_lightbox_buttons","resetSkin","skyblue","meadow","terrace","broadway","_config_buttons_left","_config_buttons_right","material","indx","getTaskDND","touch_feedback","touch_feedback_duration","vibrate","_touch_events","touchHandlers","names","block_action","cloneTaskRendered","current_target","scroll_state","dblclicktime","action_mode","scroll_mode","action_start","long_tap_timer","new_scroll_state","_locate_css","_touch_drag","day_full","day_short","icon_details","icon_edit","confirm_closing","confirm_deleting","section_description","section_time","section_type","column_wbs","column_text","column_start_date","column_add","type_task","type_project","type_milestone","weeks","resizeDelay","_reinit","edit","confirm_deleting_title","visible_date","new_pos","setSizes","targetAttribute","_locateHTML","getTaskRowNode","prevOffset","time_unit","offsetChanged","check","deprecated","badCode","goodCode","formatting","log","warn","dhtmlxMethods","dynMethods"],"mappings":"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","file":"dhtmlxgantt.js","sourcesContent":["/*!\n * @license\r\n * \r\n * dhtmlxGantt v.5.1.5 Professional\r\n * This software is covered by DHTMLX Enterprise License. Usage without proper license is prohibited.\r\n * \r\n * (c) Dinamenta, UAB.\r\n * \n */\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 22);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar dateHelper = __webpack_require__(4);\r\n\r\nfunction copy(object) {\r\n\tvar i, t, result; // iterator, types array, result\r\n\r\n\tif (object && typeof object == \"object\") {\r\n\t\tresult = {};\r\n\t\tt = [Array,Number,String,Boolean];\r\n\t\tfor (i=0; i<t.length; i++) {\r\n\t\t\tif (object instanceof t[i])\r\n\t\t\t\tresult = i ? new t[i](object) : new t[i](); // first one is array\r\n\t\t}\r\n\r\n\t\tif (dateHelper.isDate(object)) {\r\n\t\t\tresult = new Date(object);\r\n\t\t}\r\n\r\n\t\tfor (i in object) {\r\n\t\t\tif (Object.prototype.hasOwnProperty.apply(object, [i]))\r\n\t\t\t\tresult[i] = copy(object[i]);\r\n\t\t}\r\n\t}\r\n\treturn result || object;\r\n}\r\n\r\nfunction mixin (target, source, force){\r\n\tfor (var f in source)\r\n\t\tif (((target[f] === undefined) || force)) target[f]=source[f];\r\n\treturn target;\r\n}\r\n\r\nfunction defined(obj) {\r\n\treturn typeof(obj) != \"undefined\";\r\n}\r\n\r\nvar seed;\r\nfunction uid() {\r\n\tif (!seed)\r\n\t\tseed = (new Date()).valueOf();\r\n\r\n\tseed++;\r\n\treturn seed;\r\n}\r\n\r\n//creates function with specified \"this\" pointer\r\nfunction bind(functor, object){\r\n\tif(functor.bind)\r\n\t\treturn functor.bind(object);\r\n\telse\r\n\t\treturn function(){ return functor.apply(object,arguments); };\r\n}\r\n\r\nfunction event(el, event, handler, capture){\r\n\tif (el.addEventListener)\r\n\t\tel.addEventListener(event, handler, capture === undefined ? false : capture);\r\n\r\n\telse if (el.attachEvent)\r\n\t\tel.attachEvent(\"on\"+event, handler);\r\n}\r\n\r\nfunction eventRemove(el, event, handler, capture){\r\n\tif (el.removeEventListener)\r\n\t\tel.removeEventListener(event, handler, capture === undefined ? false : capture);\r\n\r\n\telse if (el.detachEvent)\r\n\t\tel.detachEvent(\"on\"+event, handler);\r\n}\r\n\r\n\r\nmodule.exports = {\r\n\tcopy: copy,\r\n\tdefined: defined,\r\n\tmixin: mixin,\r\n\tuid: uid,\r\n\tbind: bind,\r\n\tevent: event,\r\n\teventRemove: eventRemove\r\n};\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n//returns position of html element on the page\r\nfunction elementPosition(elem) {\r\n\tvar top=0, left=0, right=0, bottom=0;\r\n\tif (elem.getBoundingClientRect) { //HTML5 method\r\n\t\tvar box = elem.getBoundingClientRect();\r\n\t\tvar body = document.body;\r\n\t\tvar docElem = (document.documentElement ||\r\n\t\t\tdocument.body.parentNode ||\r\n\t\t\tdocument.body);\r\n\r\n\t\tvar scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;\r\n\t\tvar scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;\r\n\t\tvar clientTop = docElem.clientTop || body.clientTop || 0;\r\n\t\tvar clientLeft = docElem.clientLeft || body.clientLeft || 0;\r\n\t\ttop  = box.top +  scrollTop - clientTop;\r\n\t\tleft = box.left + scrollLeft - clientLeft;\r\n\r\n\t\tright = document.body.offsetWidth - box.right;\r\n\t\tbottom = document.body.offsetHeight - box.bottom;\r\n\t} else { //fallback to naive approach\r\n\t\twhile(elem) {\r\n\t\t\ttop = top + parseInt(elem.offsetTop,10);\r\n\t\t\tleft = left + parseInt(elem.offsetLeft,10);\r\n\t\t\telem = elem.offsetParent;\r\n\t\t}\r\n\r\n\t\tright = document.body.offsetWidth - elem.offsetWidth - left;\r\n\t\tbottom = document.body.offsetHeight - elem.offsetHeight - top;\r\n\t}\r\n\treturn { y: Math.round(top), x: Math.round(left), width:elem.offsetWidth, height:elem.offsetHeight, right: Math.round(right), bottom: Math.round(bottom) };\r\n}\r\n\r\nfunction isVisible(node){\r\n\tvar display = false,\r\n\t\tvisibility = false;\r\n\tif(window.getComputedStyle){\r\n\t\tvar style = window.getComputedStyle(node, null);\r\n\t\tdisplay = style[\"display\"];\r\n\t\tvisibility = style[\"visibility\"];\r\n\t}else if(node.currentStyle){\r\n\t\tdisplay = node.currentStyle[\"display\"];\r\n\t\tvisibility = node.currentStyle[\"visibility\"];\r\n\t}\r\n\treturn (display != \"none\" && visibility != \"hidden\");\r\n}\r\n\r\nfunction hasNonNegativeTabIndex(node){\r\n\treturn !isNaN(node.getAttribute(\"tabindex\")) && (node.getAttribute(\"tabindex\")*1 >= 0);\r\n}\r\n\r\nfunction hasHref(node){\r\n\tvar canHaveHref = {\"a\": true, \"area\": true};\r\n\tif(canHaveHref[node.nodeName.loLowerCase()]){\r\n\t\treturn !!node.getAttribute(\"href\");\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nfunction isEnabled(node){\r\n\tvar canDisable = {\"input\":true, \"select\":true, \"textarea\":true, \"button\":true, \"object\":true};\r\n\tif(canDisable[node.nodeName.toLowerCase()]){\r\n\t\treturn !node.hasAttribute(\"disabled\");\r\n\t}\r\n\r\n\treturn true;\r\n}\r\n\r\nfunction getFocusableNodes(root){\r\n\tvar nodes = root.querySelectorAll([\r\n\t\t\"a[href]\",\r\n\t\t\"area[href]\",\r\n\t\t\"input\",\r\n\t\t\"select\",\r\n\t\t\"textarea\",\r\n\t\t\"button\",\r\n\t\t\"iframe\",\r\n\t\t\"object\",\r\n\t\t\"embed\",\r\n\t\t\"[tabindex]\",\r\n\t\t\"[contenteditable]\"\r\n\t].join(\", \"));\r\n\r\n\tvar nodesArray = Array.prototype.slice.call(nodes, 0);\r\n\tfor(var i = 0; i < nodesArray.length; i++){\r\n\t\tvar node = nodesArray[i];\r\n\t\tvar isValid = (hasNonNegativeTabIndex(node)  || isEnabled(node) || hasHref(node)) && isVisible(node);\r\n\t\tif(!isValid){\r\n\t\t\tnodesArray.splice(i, 1);\r\n\t\t\ti--;\r\n\t\t}\r\n\t}\r\n\treturn nodesArray;\r\n}\r\n\r\nfunction getScrollSize(){\r\n\tvar div = document.createElement(\"div\");\r\n\tdiv.style.cssText=\"visibility:hidden;position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;height:110px;min-height:100px;overflow-y:scroll;\";\r\n\r\n\tdocument.body.appendChild(div);\r\n\tvar width = div.offsetWidth-div.clientWidth;\r\n\tdocument.body.removeChild(div);\r\n\r\n\treturn width;\r\n}\r\n\r\nfunction getClassName(node){\r\n\tif(!node) return \"\";\r\n\r\n\tvar className = node.className || \"\";\r\n\tif(className.baseVal)//'className' exist but not a string - IE svg element in DOM\r\n\t\tclassName = className.baseVal;\r\n\r\n\tif(!className.indexOf)\r\n\t\tclassName = '';\r\n\r\n\treturn _trimString(className);\r\n}\r\n\r\nfunction addClassName(node, className){\r\n\tif (className && node.className.indexOf(className) === -1) {\r\n\t\tnode.className += \" \" + className;\r\n\t}\r\n}\r\n\r\nfunction removeClassName(node, name) {\r\n\tname = name.split(\" \");\r\n\tfor (var i = 0; i < name.length; i++) {\r\n\t\tvar regEx = new RegExp('\\\\s?\\\\b' + name[i] + '\\\\b(?![-_\\.])', \"\");\r\n\t\tnode.className = node.className.replace(regEx, \"\");\r\n\t}\r\n}\r\n\r\nfunction toNode(node) {\r\n\tif (typeof node === \"string\") {\r\n\t\treturn (document.getElementById(node) || document.querySelector(node) || document.body);\r\n\t}\r\n\treturn node || document.body;\r\n}\r\n\r\nvar _slave = document.createElement(\"div\");\r\nfunction insert(node, newone) {\r\n\t_slave.innerHTML = newone;\r\n\tvar child = _slave.firstChild;\r\n\tnode.appendChild(child);\r\n\treturn child;\r\n}\r\n\r\nfunction remove(node) {\r\n\tif (node && node.parentNode) {\r\n\t\tnode.parentNode.removeChild(node);\r\n\t}\r\n}\r\n\r\nfunction getChildren(node, css) {\r\n\tvar ch = node.childNodes;\r\n\tvar len = ch.length;\r\n\tvar out = [];\r\n\tfor (var i = 0; i < len; i++) {\r\n\t\tvar obj = ch[i];\r\n\t\tif (obj.className && obj.className.indexOf(css) !== -1) {\r\n\t\t\tout.push(obj);\r\n\t\t}\r\n\t}\r\n\treturn out;\r\n}\r\n\r\nfunction getTargetNode(e){\r\n\tvar trg;\r\n\tif (e.tagName)\r\n\t\ttrg = e;\r\n\telse {\r\n\t\te=e||window.event;\r\n\t\ttrg=e.target||e.srcElement;\r\n\t}\r\n\treturn trg;\r\n}\r\n\r\nfunction locateAttribute(e, attribute) {\r\n\tif(!attribute) return;\r\n\r\n\tvar trg = getTargetNode(e);\r\n\r\n\twhile (trg){\r\n\t\tif (trg.getAttribute){\t//text nodes has not getAttribute\r\n\t\t\tvar test = trg.getAttribute(attribute);\r\n\t\t\tif (test) return trg;\r\n\t\t}\r\n\t\ttrg=trg.parentNode;\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nfunction _trimString(str){\r\n\tvar func = String.prototype.trim || function(){ return this.replace(/^\\s+|\\s+$/g, \"\"); };\r\n\treturn func.apply(str);\r\n}\r\n\r\nfunction locateClassName(e, classname, strict){\r\n\tif(strict === undefined)\r\n\t\tstrict = true;\r\n\r\n\tvar trg = getTargetNode(e);\r\n\tvar css = '';\r\n\tvar test = false;\r\n\twhile (trg){\r\n\t\tcss = getClassName(trg);\r\n\r\n\t\tif(css){\r\n\t\t\tvar ind = css.indexOf(classname);\r\n\t\t\tif (ind >= 0){\r\n\t\t\t\tif (!strict)\r\n\t\t\t\t\treturn trg;\r\n\r\n\t\t\t\t//check that we have exact match\r\n\t\t\t\tvar left = (ind === 0) || (!_trimString(css.charAt(ind - 1)));\r\n\t\t\t\tvar right = ((ind + classname.length >= css.length)) || (!_trimString(css.charAt(ind + classname.length)));\r\n\r\n\t\t\t\tif (left && right)\r\n\t\t\t\t\treturn trg;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttrg=trg.parentNode;\r\n\t}\r\n\treturn null;\r\n}\r\n\r\n/*\r\nevent position relatively to DOM element\r\n */\r\nfunction getRelativeEventPosition(ev, node){\r\n\tif (ev.pageX || ev.pageY)\r\n\t\tvar pos = {x: ev.pageX, y: ev.pageY};\r\n\r\n\tvar d = document.documentElement;\r\n\tvar pos = {\r\n\t\tx: ev.clientX + d.scrollLeft - d.clientLeft,\r\n\t\ty: ev.clientY + d.scrollTop - d.clientTop\r\n\t};\r\n\r\n\tvar box = elementPosition(node);\r\n\tpos.x = pos.x - box.x + node.scrollLeft;\r\n\tpos.y = pos.y - box.y + node.scrollTop;\r\n\treturn pos;\r\n}\r\n\r\n\r\nfunction isChildOf(child, parent){\r\n\tif(!child || !parent){\r\n\t\treturn false;\r\n\t}\r\n\r\n\twhile(child && child != parent) {\r\n\t\tchild = child.parentNode;\r\n\t}\r\n\r\n\treturn child === parent;\r\n}\r\n\r\nmodule.exports = {\r\n\tgetNodePosition: elementPosition,\r\n\tgetFocusableNodes: getFocusableNodes,\r\n\tgetScrollSize: getScrollSize,\r\n\tgetClassName: getClassName,\r\n\taddClassName: addClassName,\r\n\tremoveClassName: removeClassName,\r\n\tinsertNode: insert,\r\n\tremoveNode: remove,\r\n\tgetChildNodes: getChildren,\r\n\ttoNode: toNode,\r\n\tlocateClassName:locateClassName,\r\n\tlocateAttribute: locateAttribute,\r\n\tgetTargetNode: getTargetNode,\r\n\tgetRelativeEventPosition: getRelativeEventPosition,\r\n\tisChildOf: isChildOf,\r\n};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\nvar EventHost = function(){\r\n\tthis._connected = [];\r\n\tthis._silent_mode = false;\r\n};\r\n\r\nEventHost.prototype = {\r\n\t_silentStart: function() {\r\n\t\tthis._silent_mode = true;\r\n\t},\r\n\t_silentEnd: function() {\r\n\t\tthis._silent_mode = false;\r\n\t}\r\n};\r\n\r\nvar\tcreateEventStorage = function(obj) {\r\n\tvar dhx_catch = [];\r\n\tvar z = function(){\r\n\t\tvar res = true;\r\n\t\tfor (var i = 0; i < dhx_catch.length; i++){\r\n\t\t\tif (dhx_catch[i]){\r\n\t\t\t\tvar zr = dhx_catch[i].apply(obj, arguments);\r\n\t\t\t\tres=res&&zr;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\tz.addEvent=function(ev){\r\n\t\tif (typeof (ev) == \"function\")\r\n\t\t\treturn dhx_catch.push(ev)-1;\r\n\t\treturn false;\r\n\t};\r\n\tz.removeEvent=function(id){\r\n\t\tdhx_catch[id]=null;\r\n\t};\r\n\treturn z;\r\n};\r\n\r\nfunction makeEventable(obj){\r\n\r\n\tvar eventHost = new EventHost();\r\n\tobj.attachEvent=function(name, catcher, callObj){\r\n\t\tname='ev_'+name.toLowerCase();\r\n\t\tif (!eventHost[name])\r\n\t\t\teventHost[name] = createEventStorage(callObj||this);\r\n\r\n\t\treturn(name+':'+eventHost[name].addEvent(catcher)); //return ID (event name & event ID)\r\n\t};\r\n\tobj.attachAll = function(callback, callObj){\r\n\t\tthis.attachEvent('listen_all', callback, callObj);\r\n\t};\r\n\r\n\tobj.callEvent=function(name, arg0, callObj){\r\n\t\tif (eventHost._silent_mode) return true;\r\n\r\n\t\tvar handlerName = 'ev_'+name.toLowerCase();\r\n\r\n\t\tif (eventHost['ev_listen_all']){\r\n\t\t\teventHost['ev_listen_all'].apply(callObj || this, [name].concat(arg0));\r\n\t\t}\r\n\r\n\t\tif (eventHost[handlerName])\r\n\t\t\treturn eventHost[handlerName].apply(callObj || this, arg0);\r\n\t\treturn true;\r\n\t};\r\n\tobj.checkEvent=function(name){\r\n\t\treturn (!!eventHost['ev_'+name.toLowerCase()]);\r\n\t};\r\n\tobj.detachEvent=function(id){\r\n\t\tif (id){\r\n\t\t\tvar list = id.split(':');           //get EventName and ID\r\n\t\t\teventHost[list[0]].removeEvent(list[1]); //remove event\r\n\t\t}\r\n\t};\r\n\tobj.detachAllEvents = function(){\r\n\t\tfor (var name in eventHost){\r\n\t\t\tif (name.indexOf(\"ev_\") === 0)\r\n\t\t\t\tdelete eventHost[name];\r\n\t\t}\r\n\t};\r\n\r\n}\r\n\r\nmodule.exports = makeEventable;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\nmodule.exports = function (d, b) {\r\n\tfor (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\tfunction __() { this.constructor = d; }\r\n\td.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\nfunction isDate(obj) {\r\n\tif (obj && typeof obj == \"object\") {\r\n\t\treturn !!(obj.getFullYear && obj.getMonth && obj.getDate);\r\n\t} else {\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nmodule.exports = {\r\n\tisDate: isDate\r\n};\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0),\r\n\tdomEventsScope = __webpack_require__(11),\r\n\teventable = __webpack_require__(2),\r\n\tdomHelpers = __webpack_require__(1);\r\n\r\nvar Cell = (function () {\r\n\t\"use strict\";\r\n\r\n\tfunction Cell(parent, config, factory, gantt) {\r\n\t\tif (parent) {\r\n\t\t\tthis.$container = domHelpers.toNode(parent);\r\n\t\t\tthis.$parent = parent;\r\n\t\t}\r\n\t\t// save config\r\n\t\tthis.$config = utils.mixin(config, {\r\n\t\t\theaderHeight: 33\r\n\t\t});\r\n\t\tthis.$gantt = gantt;\r\n\t\tthis.$domEvents = gantt._createDomEventScope();\r\n\t\t// set id\r\n\t\tthis.$id = config.id || \"c\" + utils.uid();\r\n\r\n\t\tthis.$name = \"cell\";\r\n\t\tthis.$factory = factory;\r\n\r\n\t\teventable(this);\r\n\r\n\t}\r\n\r\n\tCell.prototype.destructor = function () {\r\n\t\tthis.$parent = this.$container = this.$view = null;\r\n\t\tvar mouse = this.$gantt.$services.getService(\"mouseEvents\");\r\n\t\tmouse.detach(\"click\", \"gantt_header_arrow\", this._headerClickHandler);\r\n\t\tthis.$domEvents.detachAll();\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\t};\r\n\tCell.prototype.cell = function (id) {\r\n\t\treturn null;\r\n\t};\r\n\r\n\tCell.prototype.scrollTo = function(left, top){\r\n\r\n\t\tif (left*1 == left){\r\n\t\t\tthis.$view.scrollLeft = left;\r\n\t\t}\r\n\t\tif(top*1 == top){\r\n\t\t\tthis.$view.scrollTop = top;\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype.clear = function(){\r\n\t\tthis.getNode().innerHTML = \"\";\r\n\t\tthis.getNode().className = \"gantt_layout_content\";\r\n\t\tthis.getNode().style.padding = \"0\";\r\n\t};\r\n\r\n\tCell.prototype.resize = function (final) {\r\n\t\tif (this.$parent) {\r\n\t\t\treturn this.$parent.resize(final);\r\n\t\t}\r\n\r\n\t\tif(final === false){\r\n\t\t\tthis.$preResize = true;\r\n\t\t}\r\n\r\n\t\tvar topCont = this.$container;\r\n\t\tvar x = topCont.offsetWidth;\r\n\t\tvar y = topCont.offsetHeight;\r\n\t\tvar topSize = this.getSize();\r\n\t\tif (topCont === document.body) {\r\n\t\t\tx = document.body.offsetWidth;\r\n\t\t\ty = document.body.offsetHeight;\r\n\t\t}\r\n\t\tif (x < topSize.minWidth) {\r\n\t\t\tx = topSize.minWidth;\r\n\t\t}\r\n\t\tif (x > topSize.maxWidth) {\r\n\t\t\tx = topSize.maxWidth;\r\n\t\t}\r\n\t\tif (y < topSize.minHeight) {\r\n\t\t\ty = topSize.minHeight;\r\n\t\t}\r\n\t\tif (y > topSize.maxHeight) {\r\n\t\t\ty = topSize.maxHeight;\r\n\t\t}\r\n\t\tthis.setSize(x, y);\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tif(!this.$preResize){\r\n\t\t//\tself.callEvent(\"onResize\", [x, y]);\r\n\t\t}\r\n\t\tthis.$preResize = false;\r\n\t};\r\n\r\n\tCell.prototype.hide = function () {\r\n\t\tthis._hide(true);\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype.show = function (force) {\r\n\t\tthis._hide(false);\r\n\t\tif (force && this.$parent) {\r\n\t\t\tthis.$parent.show();\r\n\t\t}\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype._hide = function (mode) {\r\n\t\tif (mode === true && this.$view.parentNode) {\r\n\t\t\tthis.$view.parentNode.removeChild(this.$view);\r\n\t\t}\r\n\t\telse if (mode === false && !this.$view.parentNode) {\r\n\t\t\tvar index = this.$parent.cellIndex(this.$id);\r\n\t\t\tthis.$parent.moveView(this, index);\r\n\t\t}\r\n\t\tthis.$config.hidden = mode;\r\n\t};\r\n\tCell.prototype.$toHTML = function (content, css) {\r\n\t\tif (content === void 0) { content = \"\"; }\r\n\t\tcss = [(css || \"\"), (this.$config.css || \"\")].join(\" \");\r\n\t\tvar obj = this.$config;\r\n\t\tvar header = \"\";\r\n\t\tif (obj.raw) {\r\n\t\t\tcontent = typeof obj.raw === \"string\" ? obj.raw : \"\";\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (!content) {\r\n\t\t\t\tcontent = \"<div class='gantt_layout_content' \"+(css ? \" class='\"+css+\"' \" : \"\")+\" >\" + (obj.html || \"\") + \"</div>\";\r\n\t\t\t}\r\n\t\t\tif (obj.header) {\r\n\t\t\t\tvar collapseIcon = obj.canCollapse ? \"<div class='gantt_layout_header_arrow'></div>\" : \"\";\r\n\t\t\t\theader = \"<div class='gantt_layout_header'>\" + collapseIcon + \"<div class='gantt_layout_header_content'>\" + obj.header + \"</div></div>\";\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"<div class='gantt_layout_cell \" + css + \"' data-cell-id='\" + this.$id + \"'>\" + header + content + \"</div>\";\r\n\t};\r\n\tCell.prototype.$fill = function (node, parent) {\r\n\t\tthis.$view = node;\r\n\t\tthis.$parent = parent;\r\n\t\tthis.init();\r\n\t};\r\n\tCell.prototype.getNode = function () {\r\n\t\treturn (this.$view.querySelector(\"gantt_layout_cell\") || this.$view);\r\n\t};\r\n\tCell.prototype.init = function () {\r\n\t\t// [NOT-GOOD] code is executed for each component, while it still has only one handler, it is no good\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tthis._headerClickHandler = function(e){\r\n\t\t\tvar cellId = domHelpers.locateAttribute(e, \"data-cell-id\");\r\n\t\t\tif(cellId == self.$id){\r\n\t\t\t\tself.toggle();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar mouse = this.$gantt.$services.getService(\"mouseEvents\");\r\n\t\tmouse.delegate(\"click\", \"gantt_header_arrow\", this._headerClickHandler);\r\n\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t};\r\n\tCell.prototype.toggle = function () {\r\n\t\tthis.$config.collapsed = !this.$config.collapsed;\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype.getSize = function () {\r\n\t\tvar size = {\r\n\t\t\theight: this.$config.height || 0,\r\n\t\t\twidth: this.$config.width || 0,\r\n\t\t\tgravity: this.$config.gravity || 1,\r\n\t\t\tminHeight: this.$config.minHeight || 0,\r\n\t\t\tminWidth: this.$config.minWidth || 0,\r\n\t\t\tmaxHeight: this.$config.maxHeight || 100000,\r\n\t\t\tmaxWidth: this.$config.maxWidth || 100000\r\n\t\t};\r\n\t\tif (this.$config.collapsed) {\r\n\t\t\tvar mode = this.$config.mode === \"x\";\r\n\t\t\tsize[mode ? \"width\" : \"height\"] = size[mode ? \"maxWidth\" : \"maxHeight\"] = this.$config.headerHeight;\r\n\t\t}\r\n\t\treturn size;\r\n\t};\r\n\r\n\tCell.prototype.getContentSize = function(){\r\n\r\n\t\tvar width = this.$lastSize.contentX;\r\n\t\tif(width !== width*1){\r\n\t\t\twidth = this.$lastSize.width;\r\n\t\t}\r\n\r\n\t\tvar height = this.$lastSize.contentY;\r\n\t\tif(height !== height*1){\r\n\t\t\theight = this.$lastSize.height;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\twidth: width,\r\n\t\t\theight: height\r\n\t\t};\r\n\t};\r\n\r\n\tCell.prototype._getBorderSizes = function(){\r\n\t\tvar borders = {\r\n\t\t\ttop: 0,\r\n\t\t\tright: 0,\r\n\t\t\tbottom: 0,\r\n\t\t\tleft: 0,\r\n\t\t\thorizontal: 0,\r\n\t\t\tvertical: 0\r\n\t\t};\r\n\t\tif(this._currentBorders){\r\n\t\t\tif(this._currentBorders[this._borders.left]){\r\n\t\t\t\tborders.left = 1;\r\n\t\t\t\tborders.horizontal++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.right]){\r\n\t\t\t\tborders.right = 1;\r\n\t\t\t\tborders.horizontal++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.top]){\r\n\t\t\t\tborders.top = 1;\r\n\t\t\t\tborders.vertical++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.bottom]){\r\n\t\t\t\tborders.bottom = 1;\r\n\t\t\t\tborders.vertical++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn borders;\r\n\r\n\t};\r\n\r\n\tCell.prototype.setSize = function (x, y) {\r\n\t\tthis.$view.style.width = x + \"px\";\r\n\t\tthis.$view.style.height = y + \"px\";\r\n\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tvar contentY = y - borders.vertical;\r\n\t\tvar contentX = x - borders.horizontal;\r\n\r\n\t\tthis.$lastSize = { x: x, y: y, contentX: contentX, contentY: contentY };\r\n\t\tif (this.$config.header) {\r\n\t\t\tthis._sizeHeader();\r\n\t\t}else{\r\n\t\t\tthis._sizeContent();\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype._borders = {\r\n\t\t\"left\":\"gantt_layout_cell_border_left\",\r\n\t\t\"right\":\"gantt_layout_cell_border_right\",\r\n\t\t\"top\":\"gantt_layout_cell_border_top\",\r\n\t\t\"bottom\":\"gantt_layout_cell_border_bottom\"\r\n\t};\r\n\r\n\tCell.prototype._setBorders = function(css, view){\r\n\t\tif(!view) {\r\n\t\t\tview = this;\r\n\t\t}\r\n\t\tvar node = view.$view;\r\n\r\n\t\tfor( var i in this._borders){\r\n\t\t\tdomHelpers.removeClassName(node, this._borders[i]);\r\n\t\t}\r\n\r\n\t\tif(typeof css == \"string\"){\r\n\t\t\tcss = [css];\r\n\t\t}\r\n\r\n\t\tvar cssHash = {};\r\n\r\n\t\tfor(var i = 0; i < css.length; i++){\r\n\t\t\tdomHelpers.addClassName(node, css[i]);\r\n\t\t\tcssHash[css[i]] = true;\r\n\t\t}\r\n\r\n\t\tview._currentBorders = cssHash;\r\n\t};\r\n\r\n\r\n\tCell.prototype._sizeContent = function(){\r\n\t\tvar content = this.$view.childNodes[0];\r\n\t\tif(content && content.className == \"gantt_layout_content\"){\r\n\t\t\tcontent.style.height = this.$lastSize.contentY + \"px\";\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype._sizeHeader = function () {\r\n\t\tvar size = this.$lastSize;\r\n\t\tsize.contentY -= this.$config.headerHeight;\r\n\t\tvar header = this.$view.childNodes[0];\r\n\t\tvar content = this.$view.childNodes[1];\r\n\t\tvar xLayout = this.$config.mode === \"x\";\r\n\t\tif (this.$config.collapsed) {\r\n\t\t\tcontent.style.display = \"none\";\r\n\t\t\tif (xLayout) {\r\n\t\t\t\theader.className = \"gantt_layout_header collapsed_x\";\r\n\t\t\t\theader.style.width = size.y + \"px\";\r\n\t\t\t\tvar d = Math.floor(size.y / 2 - size.x / 2);\r\n\t\t\t\theader.style.transform = \"rotate(90deg) translate(\" + d + \"px, \" + d + \"px)\";\r\n\t\t\t\tcontent.style.display = \"none\";\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\theader.className = \"gantt_layout_header collapsed_y\";\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (xLayout) {\r\n\t\t\t\theader.className = \"gantt_layout_header\";\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\theader.className = \"gantt_layout_header vertical\";\r\n\t\t\t}\r\n\t\t\theader.style.width = 'auto';\r\n\t\t\theader.style.transform = '';\r\n\t\t\tcontent.style.display = \"\";\r\n\t\t\tcontent.style.height = size.contentY + \"px\";\r\n\t\t}\r\n\t\theader.style.height = this.$config.headerHeight + \"px\";\r\n\t};\r\n\treturn Cell;\r\n}());\r\n\r\nmodule.exports = Cell;\r\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\nvar env = {\r\n\tisIE: (navigator.userAgent.indexOf(\"MSIE\") >= 0 || navigator.userAgent.indexOf(\"Trident\") >= 0),\r\n\tisIE6: (!window.XMLHttpRequest && navigator.userAgent.indexOf(\"MSIE\") >= 0),\r\n\tisIE7: (navigator.userAgent.indexOf(\"MSIE 7.0\") >= 0 && navigator.userAgent.indexOf(\"Trident\") < 0),\r\n\tisIE8: (navigator.userAgent.indexOf(\"MSIE 8.0\") >= 0 && navigator.userAgent.indexOf(\"Trident\") >= 0),\r\n\tisOpera: (navigator.userAgent.indexOf(\"Opera\") >= 0),\r\n\tisChrome: (navigator.userAgent.indexOf(\"Chrome\") >= 0),\r\n\tisKHTML: (navigator.userAgent.indexOf(\"Safari\") >= 0 || navigator.userAgent.indexOf(\"Konqueror\") >= 0),\r\n\tisFF: (navigator.userAgent.indexOf(\"Firefox\") >= 0),\r\n\tisIPad: (navigator.userAgent.search(/iPad/gi) >= 0),\r\n\tisEdge: (navigator.userAgent.indexOf(\"Edge\")!=-1)\r\n};\r\n\r\nmodule.exports = env;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\nvar units = {\r\n\t\"second\": 1,\r\n\t\"minute\": 60,\r\n\t\"hour\": 60 * 60,\r\n\t\"day\": 60 * 60 * 24,\r\n\t\"week\": 60 * 60 * 24 * 7,\r\n\t\"month\": 60 * 60 * 24 * 30,\r\n\t\"quarter\": 60 * 60 * 24 * 30 * 3,\r\n\t\"year\": 60 * 60 * 24 * 365\r\n};\r\nfunction getSecondsInUnit(unit){\r\n\treturn units[unit] || units.hour;\r\n}\r\n\r\nfunction forEach(arr, callback){\r\n\tif(arr.forEach){\r\n\t\tarr.forEach(callback);\r\n\t}else{\r\n\t\tvar workArray = arr.slice();\r\n\t\tfor(var i = 0; i < workArray.length; i++){\r\n\t\t\tcallback(workArray[i], i);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction arrayMap(arr, callback){\r\n\tif(arr.map){\r\n\t\treturn arr.map(callback);\r\n\t}else{\r\n\t\tvar workArray = arr.slice();\r\n\t\tvar resArray = [];\r\n\r\n\t\tfor(var i = 0; i < workArray.length; i++){\r\n\t\t\tresArray.push(callback(workArray[i], i));\r\n\t\t}\r\n\r\n\t\treturn resArray;\r\n\t}\r\n\r\n}\r\n\r\nmodule.exports = {\r\n\tgetSecondsInUnit: getSecondsInUnit,\r\n\tforEach: forEach,\r\n\tarrayMap: arrayMap\r\n};\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar domHelpers = __webpack_require__(1),\r\n\tutils = __webpack_require__(0),\r\n\teventable = __webpack_require__(2),\r\n\tgridResize = __webpack_require__(48);\r\n\r\nvar Grid = function(parent, config, factory, gantt){\r\n\tthis.$config = utils.mixin({}, config || {});\r\n\tthis.$gantt = gantt;\r\n\tthis.$parent = parent;\r\n\teventable(this);\r\n\tthis.$state = {};\r\n};\r\n\r\nGrid.prototype = {\r\n\tinit: function(container){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar gridAriaAttr = gantt._waiAria.gridAttrString();\r\n\t\tvar gridDataAriaAttr = gantt._waiAria.gridDataAttrString();\r\n\r\n\t\tcontainer.innerHTML = \"<div class='gantt_grid' style='height:inherit;width:inherit;' \"+gridAriaAttr+\"></div>\";\r\n\t\tthis.$grid = container.childNodes[0];\r\n\r\n\t\tthis.$grid.innerHTML = \"<div class='gantt_grid_scale' \"+\r\n\t\t\tgantt._waiAria.gridScaleRowAttrString()+\"></div><div class='gantt_grid_data' \"+gridDataAriaAttr+\"></div>\";\r\n\r\n\t\tthis.$grid_scale = this.$grid.childNodes[0];\r\n\t\tthis.$grid_data = this.$grid.childNodes[1];\r\n\r\n\t\tvar attr = this.$getConfig()[this.$config.bind + \"_attribute\"];\r\n\t\tif(!attr && this.$config.bind){\r\n\t\t\tattr = this.$config.bind + \"_id\";\r\n\t\t}\r\n\t\tthis.$config.item_attribute = attr || null;\r\n\t\t\r\n\t\tif(!this.$config.layers){\r\n\t\t\tvar layers = this._createLayerConfig();\r\n\t\t\tthis.$config.layers = layers;\r\n\t\t}\r\n\r\n\t\tvar resizer = gridResize(gantt, this);\r\n\t\tresizer.init();\r\n\t\tthis._renderHeaderResizers = resizer.doOnRender;\r\n\t\tthis._mouseDelegates = __webpack_require__(9)(gantt);\r\n\r\n\t\tthis._addLayers(this.$gantt);\r\n\t\tthis._initEvents();\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\t//this.refresh();\r\n\t},\r\n\tsetSize: function(width, height){\r\n\t\tthis.$config.width = this.$state.width = width;\r\n\t\tthis.$state.height = height;\r\n\r\n\t\t// TODO: maybe inherit and override in a subclass instead of extending here\r\n\r\n\t\tvar columns = this.getGridColumns(),\r\n\t\t\tinnerWidth = 0;\r\n\r\n\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\tinnerWidth += columns[i].width*1;\r\n\t\t}\r\n\r\n\t\tvar outerWidth;\r\n\t\tif(isNaN(innerWidth) || !this.$config.scrollable){\r\n\t\t\touterWidth = this._setColumnsWidth(width + 1);\r\n\t\t\tinnerWidth = outerWidth;\r\n\t\t}\r\n\r\n\t\tif(this.$config.scrollable){\r\n\t\t\tthis.$grid_scale.style.width = innerWidth + \"px\";\r\n\t\t\tthis.$grid_data.style.width = innerWidth + \"px\";\r\n\t\t}else{\r\n\t\t\tthis.$grid_scale.style.width = \"inherit\";\r\n\t\t\tthis.$grid_data.style.width = \"inherit\";\r\n\t\t}\r\n\t\tthis.$config.width -= 1;\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tif(outerWidth !== width){\r\n\t\t\tconfig.grid_width = outerWidth;\r\n\t\t\tthis.$config.width = outerWidth - 1;\r\n\t\t}\r\n\r\n\t\tvar dataHeight = Math.max(this.$state.height - config.scale_height, 0);\r\n\t\tthis.$grid_data.style.height = dataHeight + \"px\";\r\n\t\tthis.refresh();\r\n\t},\r\n\tgetSize: function(){\r\n\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tvar store = this.$config.rowStore;\r\n\r\n\t\tvar contentHeight = store ? config.row_height * store.countVisible() : 0,\r\n\t\t\tcontentWidth = this._getGridWidth();\r\n\r\n\t\tvar size = {\r\n\t\t\tx: this.$state.width,\r\n\t\t\ty: this.$state.height,\r\n\t\t\tcontentX: this.isVisible() ? contentWidth: 0,\r\n\t\t\tcontentY: this.isVisible() ? (config.scale_height + contentHeight) : 0,\r\n\t\t\tscrollHeight: this.isVisible() ? contentHeight: 0,\r\n\t\t\tscrollWidth: this.isVisible() ? contentWidth : 0\r\n\t\t};\r\n\r\n\t\treturn size;\r\n\t},\r\n\trefresh: function(){\r\n\t\tif(this.$config.bind)\r\n\t\t\tthis.$config.rowStore = this.$gantt.getDatastore(this.$config.bind);\r\n\r\n\t\tthis._initSmartRenderingPlaceholder();\r\n\r\n\t\tthis._calculateGridWidth();\r\n\t\tthis._renderGridHeader();\r\n\t},\r\n\tscrollTo: function(left, top){\r\n\t\tif(!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tif (left*1 == left){\r\n\t\t\tthis.$state.scrollLeft = this.$grid.scrollLeft = left;\r\n\t\t}\r\n\r\n\t\t// var config = this.$getConfig();\r\n\t\tif(top*1 == top){\r\n\t\t\tthis.$state.scrollTop = this.$grid_data.scrollTop = top;\r\n\t\t}\r\n\t},\r\n\tgetGridColumns: function(){\r\n\t\tvar config = this.$getConfig();\r\n\t\treturn config.columns.slice();\r\n\t},\r\n\tisVisible: function(){\r\n\t\tif(this.$parent && this.$parent.$config){\r\n\t\t\treturn !this.$parent.$config.hidden;\r\n\t\t}else{\r\n\t\t\treturn this.$grid.offsetWidth;\r\n\t\t}\r\n\t},\r\n\r\n\tgetItemTop: function(id){\r\n\t\tif(this.$config.rowStore){\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif(!store) return 0;\r\n\r\n\t\t\treturn store.getIndexById(id) * this.$getConfig().row_height;\r\n\r\n\t\t}else{\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t},\r\n\r\n\tgetItemHeight: function(){\r\n\t\tvar config = this.$getConfig();\r\n\t\treturn config.row_height;\r\n\t},\r\n\r\n\t_createLayerConfig: function(){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar self = this;\r\n\t\tvar layers = [\r\n\t\t\t{\r\n\t\t\t\trenderer: gantt.$ui.layers.gridLine,\r\n\t\t\t\tcontainer: this.$grid_data,\r\n\t\t\t\tfilter: [function(){\r\n\t\t\t\t\treturn self.isVisible();\r\n\t\t\t\t}]\r\n\t\t\t}\r\n\t\t];\r\n\t\treturn layers;\r\n\t},\r\n\r\n\t_addLayers: function(gantt){\r\n\t\tif(!this.$config.bind)\r\n\t\t\treturn;\r\n\r\n\t\tthis._taskLayers = [];\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\tif(!taskRenderer){\r\n\t\t\ttaskRenderer = layers.createDataRender({\r\n\t\t\t\tname: this.$config.bind,\r\n\t\t\t\tdefaultContainer: function(){ return self.$grid_data;}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tvar taskLayers = this.$config.layers;\r\n\t\tfor(var i = 0; taskLayers && i < taskLayers.length; i++){\r\n\t\t\tvar layer = taskLayers[i];\r\n\t\t\tlayer.host = this;\r\n\t\t\tvar bar_layer = taskRenderer.addLayer(layer);\r\n\t\t\tthis._taskLayers.push(bar_layer);\r\n\t\t}\r\n\r\n\t\tif(this.$config.bind)\r\n\t\t\tthis.$config.rowStore = this.$gantt.getDatastore(this.$config.bind);\r\n\r\n\t\tthis._initSmartRenderingPlaceholder();\r\n\t},\r\n\r\n\t_initSmartRenderingPlaceholder: function(){\r\n\t\tvar self = this;\r\n\t\tvar store = this.$config.rowStore;\r\n\t\tif(!store){\r\n\t\t\treturn;\r\n\t\t}else{\r\n\t\t\tthis._initSmartRenderingPlaceholder = function(){};\r\n\t\t}\r\n\t\tthis._staticBgHandler = store.attachEvent(\"onStoreUpdated\", function(id, item, mode){\r\n\t\t\tif(id !== null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!self.isVisible())\r\n\t\t\t\treturn;\r\n\t\t\tvar config = self.$getConfig();\r\n\t\t\tif(config.smart_rendering) {\r\n\t\t\t\tvar contentHeight = store ? config.row_height * store.countVisible() : 0;\r\n\t\t\t\tif(contentHeight){\r\n\t\t\t\t\tif(self.$rowsPlaceholder && self.$rowsPlaceholder.parentNode){\r\n\t\t\t\t\t\tself.$rowsPlaceholder.parentNode.removeChild(self.$rowsPlaceholder);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar placeholder = self.$rowsPlaceholder = document.createElement(\"div\");\r\n\t\t\t\t\tplaceholder.style.visibility = \"hidden\";\r\n\t\t\t\t\tplaceholder.style.height = contentHeight + \"px\";\r\n\t\t\t\t\tplaceholder.style.width = \"1px\";\r\n\t\t\t\t\tself.$grid_data.appendChild(placeholder);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t_initEvents: function(){\r\n\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_close\", gantt.bind(function (e, id, trg) {\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif(!store) return true;\r\n\r\n\t\t\tvar target = domHelpers.locateAttribute(e, this.$config.item_attribute);\r\n\t\t\tif(target){\r\n\t\t\t\tstore.close(target.getAttribute(this.$config.item_attribute));\r\n\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}, this), this.$grid);\r\n\r\n\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_open\", gantt.bind(function (e, id, trg) {\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif(!store) return true;\r\n\r\n\t\t\tvar target = domHelpers.locateAttribute(e, this.$config.item_attribute);\r\n\t\t\tif(target){\r\n\t\t\t\tstore.open(target.getAttribute(this.$config.item_attribute));\r\n\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}, this), this.$grid);\r\n\t},\r\n\r\n\t_clearLayers: function(gantt){\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\tfor(var i = 0; i < this._taskLayers.length; i++){\r\n\t\t\ttaskRenderer.removeLayer(this._taskLayers[i]);\r\n\t\t}\r\n\r\n\t\tthis._taskLayers = [];\r\n\t},\r\n\r\n\t_getColumnWidth: function(column, config, width) {\r\n\t\tvar min_width = column.min_width || config.min_grid_column_width;\r\n\t\tvar new_width = Math.max(width, min_width || 10);\r\n\t\tif (column.max_width)\r\n\t\t\tnew_width = Math.min(new_width, column.max_width);\r\n\t\treturn new_width;\r\n\t},\r\n\t// return min and max possible grid width according to restricts\r\n\t_getGridWidthLimits: function() {\r\n\t\tvar config = this.$getConfig(),\r\n\t\t\tcolumns = this.getGridColumns(),\r\n\t\t\tmin_limit = 0,\r\n\t\t\tmax_limit = 0;\r\n\r\n\t\t\tfor (var i=0; i<columns.length; i++) {\r\n\t\t\t\tmin_limit += columns[i].min_width ? columns[i].min_width : config.min_grid_column_width;\r\n\t\t\t\tif (max_limit !== undefined) {\r\n\t\t\t\t\tmax_limit = columns[i].max_width ? (max_limit + columns[i].max_width) : undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn [min_limit, max_limit];\r\n\t},\r\n\t// resize columns to get total newWidth, starting from columns[start_index]  \r\n\t_setColumnsWidth: function(newWidth, start_index) {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar columns = this.getGridColumns(),\r\n\t\t\tcolumns_width = 0,\r\n\t\t\tfinal_width = newWidth;\r\n\r\n\t\tstart_index = !window.isNaN(start_index) ? start_index : -1;\r\n\r\n\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\tcolumns_width += columns[i].width*1;\r\n\t\t}\r\n\r\n\t\tif (window.isNaN(columns_width)) {\r\n\t\t\tthis._calculateGridWidth(); \r\n\t\t\tcolumns_width = 0;\r\n\t\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\t\tcolumns_width += columns[i].width*1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar extra_width = final_width - columns_width;\r\n\r\n\t\tvar start_width = 0;\r\n\t\tfor (var i=0; i<start_index+1; i++) {\r\n\t\t\tstart_width += columns[i].width;\r\n\t\t}\r\n\r\n\t\tcolumns_width -= start_width;\r\n\r\n\t\tfor (var i=start_index+1; i<columns.length; i++) {\r\n\r\n\t\t\tvar col = columns[i];\r\n\t\t\tvar\tshare = Math.round(extra_width * (col.width / columns_width));\r\n\r\n\t\t\t// columns have 2 additional restrict fields - min_width & max_width that are set by user\r\n\t\t\tif (extra_width < 0) {\r\n\t\t\t\tif (col.min_width && col.width+share < col.min_width)\r\n\t\t\t\t\tshare = col.min_width - col.width;\r\n\t\t\t\telse if (!col.min_width && config.min_grid_column_width && col.width+share < config.min_grid_column_width)\r\n\t\t\t\t\tshare = config.min_grid_column_width - col.width;\r\n\t\t\t} else if (col.max_width && col.width+share > col.max_width)\r\n\t\t\t\tshare = col.max_width - col.width;\r\n\r\n\t\t\tcolumns_width -= col.width;\r\n\t\t\tcol.width += share;\r\n\t\t\textra_width -= share;\r\n\r\n\t\t}\r\n\r\n\t\tvar iterator = extra_width > 0 ? 1 : -1;\r\n\t\twhile ((extra_width > 0 && iterator === 1) || (extra_width < 0 && iterator === -1)) {\r\n\t\t\tvar curExtra = extra_width;\r\n\t\t\tfor (i = start_index+1; i<columns.length; i++) {\r\n\t\t\t\tvar new_width = columns[i].width + iterator;\r\n\r\n\t\t\t\tif (new_width == this._getColumnWidth(columns[i], config, new_width)) {\r\n\t\t\t\t\textra_width -= iterator;\r\n\t\t\t\t\tcolumns[i].width = new_width;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!extra_width)\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif (curExtra == extra_width)\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\t// if impossible to resize the right-side columns, resize the start column\r\n\t\tif (extra_width && start_index > -1) {\r\n\t\t\tvar new_width = columns[start_index].width + extra_width;\r\n\t\t\tif (new_width == this._getColumnWidth(columns[start_index], config, new_width))\r\n\t\t\t\tcolumns[start_index].width = new_width;\r\n\t\t}\r\n\r\n\t\t//if (this.callEvent(\"onGridResizeEnd\", [config.grid_width, final_width]) === false)\r\n\t\t//\treturn;\r\n\r\n\t\treturn this._getColsTotalWidth();\r\n\t},\r\n\r\n\t_getColsTotalWidth: function(){\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tvar cols_width = 0;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar v = parseFloat(columns[i].width);\r\n\t\t\tif (window.isNaN(v)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tcols_width += v;\r\n\t\t}\r\n\t\treturn cols_width;\r\n\t},\r\n\t_calculateGridWidth: function() {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tvar cols_width = 0;\r\n\t\tvar unknown = [];\r\n\t\tvar width = [];\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar v = parseFloat(columns[i].width);\r\n\t\t\tif (window.isNaN(v)) {\r\n\t\t\t\tv = config.min_grid_column_width || 10;\r\n\t\t\t\tunknown.push(i);\r\n\t\t\t}\r\n\t\t\twidth[i] = v;\r\n\t\t\tcols_width += v;\r\n\t\t}\r\n\t\tvar gridWidth = this._getGridWidth() + 1;\r\n\t\tif (config.autofit || unknown.length) {\r\n\t\t\tvar diff = gridWidth - cols_width;\r\n\t\t\t// TODO: logic may be improved for proportional changing of width\r\n\t\t\tif (config.autofit) {\r\n\t\t\t\t// delta must be added for all columns\r\n\t\t\t\tfor (var i = 0; i < width.length; i++) {\r\n\t\t\t\t\tvar delta = Math.round(diff / (width.length-i));\r\n\t\t\t\t\twidth[i] += delta;\r\n\t\t\t\t\tvar new_width = this._getColumnWidth(columns[i], config, width[i]);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (new_width != width[i]) {\r\n\t\t\t\t\t\tdelta = new_width - width[i];\r\n\t\t\t\t\t\twidth[i] = new_width;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdiff -= delta;\r\n\t\t\t\t}\r\n\t\t\t} else if (unknown.length) {\r\n\t\t\t\t// there are several columns with undefined width\r\n\t\t\t\tfor (var i = 0; i < unknown.length; i++) {\r\n\t\t\t\t\tvar delta = Math.round(diff / (unknown.length-i)); // no float values, just integer\r\n\t\t\t\t\tvar index = unknown[i];\r\n\t\t\t\t\twidth[index] += delta;\r\n\t\t\t\t\tvar new_width = this._getColumnWidth(columns[index], config, width[index]);\r\n\t\t\t\t\tif (new_width != width[index]) {\r\n\t\t\t\t\t\tdelta = new_width - width[index];\r\n\t\t\t\t\t\twidth[index] = new_width;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdiff -= delta;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < width.length; i++) {\r\n\t\t\t\tcolumns[i].width = width[i];\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar changed = (gridWidth != cols_width);\r\n\t\t\tthis.$config.width = cols_width - 1;\r\n\t\t\tconfig.grid_width = cols_width;\r\n\t\t\tif(changed){\r\n\t\t\t\tthis.$parent._setContentSize(this.$config.width, this.$config.height);\r\n//\t\t\t\tthis.$parent.$config.width = cols_width;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_renderGridHeader: function(){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar locale = this.$gantt.locale;\r\n\t\tvar templates = this.$gantt.templates;\r\n\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tif(config.rtl){\r\n\t\t\tcolumns = columns.reverse();\r\n\t\t}\r\n\t\tvar cells = [];\r\n\t\tvar width = 0,\r\n\t\t\tlabels = locale.labels;\r\n\r\n\t\tvar lineHeigth = config.scale_height - 1;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar last = i == columns.length - 1;\r\n\t\t\tvar col = columns[i];\r\n\r\n\t\t\t// ensure columns have non-empty names\r\n\t\t\tif (!col.name) {\r\n\t\t\t\tcol.name = gantt.uid() + \"\";\r\n\t\t\t}\r\n\r\n\t\t\tvar colWidth = col.width * 1;\r\n\r\n\t\t\tvar gridWidth = this._getGridWidth();\r\n\t\t\tif (last && gridWidth > width + colWidth)\r\n\t\t\t\tcol.width = colWidth = gridWidth - width;\r\n\t\t\twidth += colWidth;\r\n\t\t\tvar sort = (gantt._sort && col.name == gantt._sort.name) ? (\"<div class='gantt_sort gantt_\" + gantt._sort.direction + \"'></div>\") : \"\";\r\n\t\t\tvar cssClass = [\"gantt_grid_head_cell\",\r\n\t\t\t\t(\"gantt_grid_head_\" + col.name),\r\n\t\t\t\t(last ? \"gantt_last_cell\" : \"\"),\r\n\t\t\t\ttemplates.grid_header_class(col.name, col)].join(\" \");\r\n\r\n\t\t\tvar style = \"width:\" + (colWidth - (last ? 1 : 0)) + \"px;\";\r\n\t\t\tvar label = (col.label || labels[\"column_\" + col.name]);\r\n\t\t\tlabel = label || \"\";\r\n\r\n\t\t\tvar ariaAttrs = gantt._waiAria.gridScaleCellAttrString(col, label);\r\n\r\n\t\t\tvar cell = \"<div class='\" + cssClass + \"' style='\" + style + \"' \" + ariaAttrs + \" data-column-id='\" + col.name + \"' column_id='\" + col.name + \"'>\" + label + sort + \"</div>\";\r\n\t\t\tcells.push(cell);\r\n\t\t}\r\n\t\tthis.$grid_scale.style.height = (config.scale_height) + \"px\";\r\n\t\tthis.$grid_scale.style.lineHeight = lineHeigth + \"px\";\r\n\t\t//this.$grid_scale.style.width = \"inherit\";\r\n\t\tthis.$grid_scale.innerHTML = cells.join(\"\");\r\n\r\n\t\tif(this._renderHeaderResizers){\r\n\t\t\tthis._renderHeaderResizers();\r\n\t\t}\r\n\t},\r\n\r\n\t_getGridWidth: function(){\r\n\t\t// TODO: refactor/remove/comment some of _getGridWidth/this.$config.width/this.$state.width, it's not clear what they do\r\n\t\treturn this.$config.width;\r\n\t},\r\n\r\n\tdestructor: function(){\r\n\t\tthis._clearLayers(this.$gantt);\r\n\t\tthis._mouseDelegates.destructor();\r\n\t\tthis._mouseDelegates = null;\r\n\t\tthis.$grid = null;\r\n\t\tthis.$grid_scale = null;\r\n\t\tthis.$grid_data = null;\r\n\t\tthis.$gantt = null;\r\n\r\n\t\tif(this.$config.rowStore){\r\n\t\t\tthis.$config.rowStore.detachEvent(this._staticBgHandler);\r\n\t\t\tthis.$config.rowStore = null;\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\t}\r\n};\r\n\r\nmodule.exports = Grid;\r\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports) {\n\nfunction create(gantt){\r\n\tvar events = [];\r\n\r\n\treturn {\r\n\t\tdelegate:function(event, className, handler, root) {\r\n\t\t\tevents.push([event, className, handler, root]);\r\n\r\n\t\t\tvar helper = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\thelper.delegate(event, className, handler, root);\r\n\t\t},\r\n\t\tdestructor: function(){\r\n\t\t\tvar mouseEvents = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\tfor(var i = 0; i < events.length; i++){\r\n\t\t\t\tvar h = events[i];\r\n\t\t\t\tmouseEvents.detach(h[0], h[1], h[2], h[3]);\r\n\t\t\t}\r\n\t\t\tevents = [];\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = create;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports) {\n\nfunction checkTimeout(host, updPerSecond){\r\n\tif (!updPerSecond)\r\n\t\treturn true;\r\n\t\r\n\tif (host._on_timeout)\r\n\t\treturn false;\r\n\t\r\n\tvar timeout = Math.ceil(1000/updPerSecond);\r\n\tif (timeout < 2) return true;\r\n\r\n\tsetTimeout(function(){\r\n\t\tdelete host._on_timeout;\r\n\t}, timeout);\r\n\r\n\thost._on_timeout = true;\r\n\treturn true;\r\n}\r\n\r\nmodule.exports = checkTimeout;\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\n\r\nfunction createScope(addEvent, removeEvent){\r\n\taddEvent = addEvent || utils.event;\r\n\tremoveEvent = removeEvent || utils.eventRemove;\r\n\r\n\tvar handlers = [];\r\n\r\n\treturn {\r\n\t\tattach: function(el, event, handler, capture){\r\n\t\t\thandlers.push({element: el, event:event, callback: handler, capture: capture});\r\n\t\t\taddEvent(el, event, handler, capture);\r\n\t\t},\r\n\t\tdetach: function(el, event, handler, capture){\r\n\t\t\tremoveEvent(el, event, handler, capture);\r\n\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\tvar handler = handlers[i];\r\n\t\t\t\tif(handler.element === el && handler.event === event && handler.callback === handler && handler.capture === capture){\r\n\t\t\t\t\thandlers.splice(i, 1);\r\n\t\t\t\t\ti--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tdetachAll: function(){\r\n\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\tremoveEvent(handlers[i].element, handlers[i].event, handlers[i].callback, handlers[i].capture);\r\n\t\t\t\tremoveEvent(handlers[i].element, handlers[i].event, handlers[i].callback, undefined);\r\n\t\t\t\tremoveEvent(handlers[i].element, handlers[i].event, handlers[i].callback, false);\r\n\t\t\t\tremoveEvent(handlers[i].element, handlers[i].event, handlers[i].callback, true);\r\n\t\t\t}\r\n\t\t\thandlers = [];\r\n\t\t},\r\n\t\textend: function(){\r\n\t\t\treturn createScope(this.event, this.eventRemove);\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = createScope;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = __webpack_require__(3),\r\n\tdomHelpers = __webpack_require__(1),\r\n\tutils = __webpack_require__(0),\r\n\tCell = __webpack_require__(5);\r\n\r\nvar Layout = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(Layout, _super);\r\n\tfunction Layout(parent, config, factory) {\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\r\n\t\tif(parent)\r\n\t\t\t_this.$root = true;\r\n\r\n\t\t_this._parseConfig(config);\r\n\t\t_this.$name = \"layout\";\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tLayout.prototype.destructor = function () {\r\n\t\tif (this.$container && this.$view) {\r\n\t\t\tdomHelpers.removeNode(this.$view);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tvar child = this.$cells[i];\r\n\t\t\tchild.destructor();\r\n\t\t}\r\n\t\tthis.$cells = [];\r\n\r\n\t\t_super.prototype.destructor.call(this);\r\n\t};\r\n\r\n\tLayout.prototype._resizeScrollbars = function(autosize, scrollbars){\r\n\t\tvar scrollChanged = false;\r\n\t\tvar visibleScrollbars = [],\r\n\t\t\thiddenSrollbars = [];\r\n\r\n\t\tfunction showScrollbar(scrollbar){\r\n\t\t\tscrollbar.$parent.show();\r\n\t\t\tscrollChanged = true;\r\n\t\t\tvisibleScrollbars.push(scrollbar);\r\n\t\t}\r\n\t\tfunction hideScrollbar(scrollbar){\r\n\t\t\tscrollbar.$parent.hide();\r\n\t\t\tscrollChanged = true;\r\n\t\t\thiddenSrollbars.push(scrollbar);\r\n\t\t}\r\n\r\n\t\tvar scrollbar;\r\n\t\tfor(var i = 0; i < scrollbars.length; i++){\r\n\t\t\tscrollbar = scrollbars[i];\r\n\r\n\t\t\tif(autosize[scrollbar.$config.scroll]) {\r\n\t\t\t\thideScrollbar(scrollbar);\r\n\t\t\t}else if(scrollbar.shouldHide()){\r\n\t\t\t\thideScrollbar(scrollbar);\r\n\t\t\t}else if(scrollbar.shouldShow()){\r\n\t\t\t\tshowScrollbar(scrollbar);\r\n\t\t\t}else{\r\n\t\t\t\tif(scrollbar.isVisible()){\r\n\t\t\t\t\tvisibleScrollbars.push(scrollbar);\r\n\t\t\t\t}else{\r\n\t\t\t\t\thiddenSrollbars.push(scrollbar);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar visibleGroups = {};\r\n\t\tfor(var i = 0; i < visibleScrollbars.length; i++){\r\n\t\t\tif(visibleScrollbars[i].$config.group){\r\n\t\t\t\tvisibleGroups[visibleScrollbars[i].$config.group] = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor(var i = 0; i < hiddenSrollbars.length; i++){\r\n\t\t\tscrollbar = hiddenSrollbars[i];\r\n\r\n\t\t\tif(scrollbar.$config.group && visibleGroups[scrollbar.$config.group]){\r\n\t\t\t\tshowScrollbar(scrollbar);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn scrollChanged;\r\n\t};\r\n\r\n\tLayout.prototype._syncCellSizes = function(groupName, newSize){\r\n\t\tif(!groupName)\r\n\t\t\treturn;\r\n\r\n\t\tvar groups = {};\r\n\r\n\t\tthis._eachChild(function(cell){\r\n\t\t\tif(cell.$config.group && cell.$name != \"scrollbar\" && cell.$name != \"resizer\"){\r\n\t\t\t\tif(!groups[cell.$config.group]){\r\n\t\t\t\t\tgroups[cell.$config.group] = [];\r\n\t\t\t\t}\r\n\t\t\t\tgroups[cell.$config.group].push(cell);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(groups[groupName]){\r\n\t\t\tthis._syncGroupSize(groups[groupName], newSize);\r\n\t\t}\r\n\t\treturn groups[groupName];\r\n\t};\r\n\r\n\tLayout.prototype._syncGroupSize = function(cells, newSize){\r\n\t\tif(!cells.length) return;\r\n\r\n\t\tvar property = cells[0].$parent._xLayout ? \"width\" : \"height\";\r\n\t\tvar direction = cells[0].$parent.getNextSibling(cells[0].$id) ? 1 : -1;\r\n\r\n\t\tfor(var i = 0; i < cells.length; i++){\r\n\t\t\tvar ownSize = cells[i].getSize();\r\n\r\n\t\t\tvar resizeSibling = direction > 0 ? cells[i].$parent.getNextSibling(cells[i].$id) : cells[i].$parent.getPrevSibling(cells[i].$id);\r\n\t\t\tif(resizeSibling.$name == \"resizer\"){\r\n\t\t\t\tresizeSibling = direction > 0 ? resizeSibling.$parent.getNextSibling(resizeSibling.$id) : resizeSibling.$parent.getPrevSibling(resizeSibling.$id);\r\n\t\t\t}\r\n\t\t\tvar siblingSize = resizeSibling.getSize();\r\n\r\n\t\t\tif(resizeSibling[property]){\r\n\t\t\t\tvar totalGravity = ownSize.gravity + siblingSize.gravity;\r\n\t\t\t\tvar totalSize = ownSize[property] + siblingSize[property];\r\n\t\t\t\tvar k = totalGravity / totalSize;\r\n\t\t\t\tcells[i].$config.gravity = k * newSize;\r\n\r\n\t\t\t\tresizeSibling.$config[property] = totalSize - newSize;\r\n\t\t\t\tresizeSibling.$config.gravity = totalGravity - k * newSize;\r\n\t\t\t}else{\r\n\r\n\r\n\t\t\t\tcells[i].$config[property] = newSize;\r\n\t\t\t}\r\n\r\n\t\t\tvar mainGrid = this.$gantt.$ui.getView(\"grid\");\r\n\t\t\tif(mainGrid && cells[i].$content === mainGrid && !mainGrid.$config.scrollable){\r\n\t\t\t\tthis.$gantt.config.grid_width = newSize;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.resize = function(startStage){\r\n\t\tvar mainCall = false;\r\n\t\tif(this.$root && !this._resizeInProgress){\r\n\t\t\tthis.callEvent(\"onBeforeResize\", []);\r\n\t\t\tmainCall = true;\r\n\t\t\tthis._resizeInProgress = true;\r\n\t\t}\r\n\r\n\t\t_super.prototype.resize.call(this, true);\r\n\t\t_super.prototype.resize.call(this, false);\r\n\r\n\t\tif(mainCall){\r\n\r\n\t\t\tvar contentViews = [];\r\n\t\t\tcontentViews = contentViews.concat(this.getCellsByType(\"viewCell\"));\r\n\t\t\tcontentViews = contentViews.concat(this.getCellsByType(\"viewLayout\"));\r\n\t\t\tcontentViews = contentViews.concat(this.getCellsByType(\"hostCell\"));\r\n\r\n\t\t\tvar scrollbars = this.getCellsByType(\"scroller\");\r\n\r\n\t\t\tfor(var i = 0; i < contentViews.length; i++){\r\n\t\t\t\tif(!contentViews[i].$config.hidden)\r\n\t\t\t\t\tcontentViews[i].setContentSize();\r\n\t\t\t}\r\n\r\n\t\t\tvar autosize = this._getAutosizeMode(this.$config.autosize);\r\n\r\n\t\t\tvar scrollChanged = this._resizeScrollbars(autosize, scrollbars);\r\n\r\n\t\t\tif(this.$config.autosize){\r\n\t\t\t\tthis.autosize(this.$config.autosize);\r\n\t\t\t\tscrollChanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif(scrollChanged){\r\n\t\t\t\tthis.resize();\r\n\t\t\t\tfor(var i = 0; i < contentViews.length; i++){\r\n\t\t\t\t\tif(!contentViews[i].$config.hidden)\r\n\t\t\t\t\t\tcontentViews[i].setContentSize();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.callEvent(\"onResize\", []);\r\n\t\t}\r\n\t\tif(mainCall){\r\n\t\t\tthis._resizeInProgress = false;\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype._eachChild = function(code, cell){\r\n\t\tcell = cell || this;\r\n\t\tcode(cell);\r\n\t\tif(cell.$cells){\r\n\t\t\tfor(var i = 0; i < cell.$cells.length; i++){\r\n\t\t\t\tthis._eachChild(code, cell.$cells[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.isChild = function(view){\r\n\t\tvar res = false;\r\n\t\tthis._eachChild(function(child){\r\n\t\t\tif(child === view || child.$content === view){\r\n\t\t\t\tres = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn res;\r\n\t};\r\n\r\n\tLayout.prototype.getCellsByType = function(type){\r\n\t\tvar res = [];\r\n\t\tif(type === this.$name){\r\n\t\t\tres.push(this);\r\n\t\t}\r\n\r\n\t\tif(this.$content && this.$content.$name == type){\r\n\t\t\tres.push(this.$content);\r\n\t\t}\r\n\r\n\t\tif(this.$cells){\r\n\t\t\tfor(var i = 0; i < this.$cells.length; i++){\r\n\t\t\t\tvar children = Layout.prototype.getCellsByType.call(this.$cells[i], type);\r\n\t\t\t\tif(children.length){\r\n\t\t\t\t\tres.push.apply(res, children);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\tLayout.prototype.getNextSibling = function(cellId){\r\n\t\tvar index = this.cellIndex(cellId);\r\n\t\tif(index >= 0 && this.$cells[index + 1]){\r\n\t\t\treturn this.$cells[index + 1];\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.getPrevSibling = function(cellId){\r\n\t\tvar index = this.cellIndex(cellId);\r\n\t\tif(index >= 0 && this.$cells[index - 1]){\r\n\t\t\treturn this.$cells[index - 1];\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tLayout.prototype.cell = function (id) {\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tvar child = this.$cells[i];\r\n\t\t\tif (child.$id === id) {\r\n\t\t\t\treturn child;\r\n\t\t\t}\r\n\t\t\tvar sub = child.cell(id);\r\n\t\t\tif (sub) {\r\n\t\t\t\treturn sub;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.cellIndex = function (id) {\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tif (this.$cells[i].$id === id) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t};\r\n\tLayout.prototype.moveView = function (view, ind) {\r\n\t\tif (this.$cells[ind] !== view) {\r\n\t\t\treturn window.alert(\"Not implemented\");\r\n\t\t}\r\n\t\telse {\r\n\t\t\tind += this.$config.header ? 1 : 0;\r\n\t\t\tvar node = this.$view;\r\n\t\t\tif (ind >= node.childNodes.length) {\r\n\t\t\t\tnode.appendChild(view.$view);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tnode.insertBefore(view.$view, node.childNodes[ind]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype._parseConfig = function (config) {\r\n\t\tthis.$cells = [];\r\n\t\tthis._xLayout = !config.rows;\r\n\t\tvar cells = config.rows || config.cols || config.views;\r\n\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\tvar cell = cells[i];\r\n\t\t\tcell.mode = this._xLayout ? \"x\" : \"y\";\r\n\t\t\tvar $content = this.$factory.initUI(cell, this);\r\n\t\t\tif(!$content){\r\n\t\t\t\tcells.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}else{\r\n\t\t\t\t$content.$parent = this;\r\n\t\t\t\tthis.$cells.push($content);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.getCells = function () {\r\n\t\treturn this.$cells;\r\n\t};\r\n\tLayout.prototype.render = function () {\r\n\t\tvar view = domHelpers.insertNode(this.$container, this.$toHTML());\r\n\t\tthis.$fill(view, null);\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\tthis.resize();\r\n\r\n\t\t// do simple repaint after the first call\r\n\t\tthis.render = this.resize;\r\n\t};\r\n\tLayout.prototype.$fill = function (node, parent) {\r\n\t\tthis.$view = node;\r\n\t\tthis.$parent = parent;\r\n\t\tvar cells = domHelpers.getChildNodes(node, \"gantt_layout_cell\");\r\n\t\tfor (var i = cells.length - 1; i >= 0; i--) {\r\n\t\t\tvar sub = this.$cells[i];\r\n\t\t\tsub.$fill(cells[i], this);\r\n\t\t\t// initially hidden cell\r\n\t\t\tif (sub.$config.hidden) {\r\n\t\t\t\tsub.$view.parentNode.removeChild(sub.$view);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.$toHTML = function () {\r\n\t\tvar mode = this._xLayout ? \"x\" : \"y\";\r\n\t\tvar html = [];\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\thtml.push(this.$cells[i].$toHTML());\r\n\t\t}\r\n\t\treturn _super.prototype.$toHTML.call(this, html.join(\"\"), (this.$root ? \"gantt_layout_root \" : \"\") + \"gantt_layout gantt_layout_\" + mode);\r\n\t};\r\n\r\n\tLayout.prototype.getContentSize = function(mode){\r\n\t\tvar contentWidth = 0,\r\n\t\t\tcontentHeight = 0;\r\n\r\n\t\tvar cellSize, cell, borders;\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\t\t\tif(cell.$config.hidden)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tcellSize = cell.getContentSize(mode);\r\n\r\n\t\t\tif(cell.$config.view === \"scrollbar\" && mode[cell.$config.scroll]){\r\n\t\t\t\tcellSize.height = 0;\r\n\t\t\t\tcellSize.width = 0;\r\n\t\t\t}\r\n\r\n\t\t\tif(cell.$config.resizer){\r\n\t\t\t\tif(this._xLayout){\r\n\t\t\t\t\tcellSize.height = 0;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcellSize.width = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tborders = cell._getBorderSizes();\r\n\r\n\t\t\tif(this._xLayout){\r\n\t\t\t\tcontentWidth += (cellSize.width + borders.horizontal);\r\n\t\t\t\tcontentHeight = Math.max(contentHeight, (cellSize.height + borders.vertical));\r\n\t\t\t}else{\r\n\t\t\t\tcontentWidth = Math.max(contentWidth, cellSize.width + borders.horizontal);\r\n\t\t\t\tcontentHeight += cellSize.height + borders.vertical;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tborders = this._getBorderSizes();\r\n\t\tcontentWidth += borders.horizontal;\r\n\t\tcontentHeight += borders.vertical;\r\n\r\n\t\tif(this.$root){\r\n\t\t\tcontentWidth += 1;\r\n\t\t\tcontentHeight += 1;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\twidth: contentWidth,\r\n\t\t\theight: contentHeight\r\n\t\t};\r\n\t};\r\n\r\n\tLayout.prototype._cleanElSize = function(value){\r\n\t\treturn ((value || \"\").toString().replace(\"px\", \"\") * 1 || 0);\r\n\t};\r\n\tLayout.prototype._getBoxStyles = function(div){\r\n\t\tvar computed = null;\r\n\t\tif(window.getComputedStyle){\r\n\t\t\tcomputed = window.getComputedStyle(div, null);\r\n\t\t}else{\r\n\t\t\t//IE with elem.currentStyle does not calculate sizes from %, so will use the default approach\r\n\t\t\tcomputed = {\r\n\t\t\t\t\"width\":div.clientWidth,\r\n\t\t\t\t\"height\":div.clientHeight\r\n\t\t\t};\r\n\t\t}\r\n\t\tvar properties = [\r\n\t\t\t\"width\",\r\n\t\t\t\"height\",\r\n\r\n\t\t\t\"paddingTop\",\r\n\t\t\t\"paddingBottom\",\r\n\t\t\t\"paddingLeft\",\r\n\t\t\t\"paddingRight\",\r\n\r\n\t\t\t\"borderLeftWidth\",\r\n\t\t\t\"borderRightWidth\",\r\n\t\t\t\"borderTopWidth\",\r\n\t\t\t\"borderBottomWidth\"\r\n\t\t];\r\n\t\tvar styles = {\r\n\t\t\tboxSizing:(computed.boxSizing == \"border-box\")\r\n\t\t};\r\n\r\n\t\tif(computed.MozBoxSizing){\r\n\t\t\tstyles.boxSizing = (computed.MozBoxSizing == \"border-box\");\r\n\t\t}\r\n\t\tfor(var i =0; i < properties.length; i++){\r\n\t\t\tstyles[properties[i]] = computed[properties[i]] ? this._cleanElSize(computed[properties[i]]) : 0;\r\n\t\t}\r\n\r\n\r\n\t\tvar box = {\r\n\t\t\thorPaddings : (styles.paddingLeft + styles.paddingRight + styles.borderLeftWidth + styles.borderRightWidth),\r\n\t\t\tvertPaddings : (styles.paddingTop + styles.paddingBottom + styles.borderTopWidth + styles.borderBottomWidth),\r\n\t\t\tborderBox: styles.boxSizing,\r\n\t\t\tinnerWidth : styles.width,\r\n\t\t\tinnerHeight : styles.height,\r\n\t\t\touterWidth : styles.width,\r\n\t\t\touterHeight : styles.height\r\n\t\t};\r\n\r\n\r\n\t\tif(box.borderBox){\r\n\t\t\tbox.innerWidth -= box.horPaddings;\r\n\t\t\tbox.innerHeight -= box.vertPaddings;\r\n\t\t}else{\r\n\t\t\tbox.outerWidth += box.horPaddings;\r\n\t\t\tbox.outerHeight += box.vertPaddings;\r\n\t\t}\r\n\r\n\t\treturn box;\r\n\t};\r\n\r\n\tLayout.prototype._getAutosizeMode = function(config){\r\n\t\tvar res = {x:false, y:false};\r\n\t\tif(config === \"xy\"){\r\n\t\t\tres.x = res.y = true;\r\n\t\t}else if(config === \"y\" || config === true){\r\n\t\t\tres.y = true;\r\n\t\t}else if(config === \"x\"){\r\n\t\t\tres.x = true;\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\tLayout.prototype.autosize = function(mode) {\r\n\t\tvar res = this._getAutosizeMode(mode);\r\n\t\tvar boxSizes = this._getBoxStyles(this.$container);\r\n\t\tvar contentSizes = this.getContentSize(mode);\r\n\r\n\t\tvar node = this.$container;\r\n\t\tif(res.x){\r\n\t\t\tif(boxSizes.borderBox){\r\n\t\t\t\tcontentSizes.width += boxSizes.horPaddings;\r\n\t\t\t}\r\n\t\t\tnode.style.width = contentSizes.width + \"px\";\r\n\t\t}\r\n\t\tif(res.y){\r\n\t\t\tif(boxSizes.borderBox){\r\n\t\t\t\tcontentSizes.height += boxSizes.vertPaddings;\r\n\t\t\t}\r\n\t\t\tnode.style.height = contentSizes.height + \"px\";\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.getSize = function () {\r\n\t\tthis._sizes = [];\r\n\t\tvar width = 0;\r\n\t\tvar minWidth = 0;\r\n\t\tvar maxWidth = 100000;\r\n\t\tvar height = 0;\r\n\t\tvar maxHeight = 100000;\r\n\t\tvar minHeight = 0;\r\n\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\r\n\t\t\tvar size = this._sizes[i] = this.$cells[i].getSize();\r\n\t\t\tif (this.$cells[i].$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tif (!size.width && size.minWidth) {\r\n\t\t\t\t\twidth += size.minWidth;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\twidth += size.width;\r\n\t\t\t\t}\r\n\t\t\t\tmaxWidth += size.maxWidth;\r\n\t\t\t\tminWidth += size.minWidth;\r\n\t\t\t\theight = Math.max(height, size.height);\r\n\t\t\t\tmaxHeight = Math.min(maxHeight, size.maxHeight); // min of maxHeight\r\n\t\t\t\tminHeight = Math.max(minHeight, size.minHeight); // max of minHeight\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (!size.height && size.minHeight) {\r\n\t\t\t\t\theight += size.minHeight;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\theight += size.height;\r\n\t\t\t\t}\r\n\t\t\t\tmaxHeight += size.maxHeight;\r\n\t\t\t\tminHeight += size.minHeight;\r\n\t\t\t\twidth = Math.max(width, size.width);\r\n\t\t\t\tmaxWidth = Math.min(maxWidth, size.maxWidth); // min of maxWidth\r\n\t\t\t\tminWidth = Math.max(minWidth, size.minWidth); // max of minWidth\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar self = _super.prototype.getSize.call(this);\r\n\t\t// maxWidth\r\n\t\tif (self.maxWidth >= 100000) {\r\n\t\t\tself.maxWidth = maxWidth;\r\n\t\t}\r\n\t\t// maxHeight\r\n\t\tif (self.maxHeight >= 100000) {\r\n\t\t\tself.maxHeight = maxHeight;\r\n\t\t}\r\n\t\t// minWidth\r\n\t\tself.minWidth = self.minWidth !== self.minWidth ? 0 : self.minWidth;// || self.width || Math.max(minWidth, width);\r\n\t\t// minHeight\r\n\t\tself.minHeight = self.minHeight !== self.minHeight ? 0 : self.minHeight;//self.minHeight || self.height || Math.max(minHeight, height);\r\n\t\t// sizes with paddings and margins\r\n\t\tif (this._xLayout) {\r\n\t\t\tself.minWidth += this.$config.margin * (this.$cells.length) || 0;\r\n\t\t\tself.minWidth += this.$config.padding * 2 || 0;\r\n\t\t\tself.minHeight += (this.$config.padding * 2) || 0;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tself.minHeight += this.$config.margin * (this.$cells.length) || 0;\r\n\t\t\tself.minHeight += (this.$config.padding * 2) || 0;\r\n\t\t}\r\n\t\t\r\n\t\treturn self;\r\n\t};\r\n\t// calc total gravity and free space\r\n\tLayout.prototype._calcFreeSpace = function (s, cell, xLayout) {\r\n\t\tvar min = xLayout ? cell.minWidth : cell.minHeight;\r\n\t\tvar max = xLayout ? cell.maxWidth : cell.maxWidth;\r\n\t\tvar side = s;\r\n\t\tif (!side) {\r\n\t\t\tside = Math.floor(this._free / this._gravity * cell.gravity);\r\n\t\t\tif (side > max) {\r\n\t\t\t\tside = max;\r\n\t\t\t\tthis._free -= side;\r\n\t\t\t\tthis._gravity -= cell.gravity;\r\n\t\t\t}\r\n\t\t\tif (side < min) {\r\n\t\t\t\tside = min;\r\n\t\t\t\tthis._free -= side;\r\n\t\t\t\tthis._gravity -= cell.gravity;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (side > max) {\r\n\t\t\t\tside = max;\r\n\t\t\t}\r\n\t\t\tif (side < min) {\r\n\t\t\t\tside = min;\r\n\t\t\t}\r\n\t\t\tthis._free -= side;\r\n\t\t}\r\n\t\treturn side;\r\n\t};\r\n\tLayout.prototype._calcSize = function (s, size, xLayout) {\r\n\t\tvar side = s;\r\n\t\tvar min = xLayout ? size.minWidth : size.minHeight;\r\n\t\tvar max = xLayout ? size.maxWidth : size.maxHeight;\r\n\t\tif (!side) {\r\n\t\t\tside = Math.floor(this._free / this._gravity * size.gravity);\r\n\t\t}\r\n\t\tif (side > max) {\r\n\t\t\tside = max;\r\n\t\t}\r\n\t\tif (side < min) {\r\n\t\t\tside = min;\r\n\t\t}\r\n\t\treturn side;\r\n\t};\r\n\r\n\tLayout.prototype._configureBorders = function(){\r\n\t\tif(this.$root){\r\n\t\t\tthis._setBorders([\r\n\t\t\t\tthis._borders.left,\r\n\t\t\t\tthis._borders.top,\r\n\t\t\t\tthis._borders.right,\r\n\t\t\t\tthis._borders.bottom\r\n\t\t\t],\r\n\t\t\tthis);\r\n\t\t}\r\n\r\n\t\tvar borderClass = this._xLayout ? this._borders.right : this._borders.bottom;\r\n\r\n\t\tvar cells = this.$cells;\r\n\r\n\t\tvar lastVisibleIndex = cells.length - 1;\r\n\t\tfor(var i = lastVisibleIndex; i >= 0; i--){\r\n\t\t\tif (!cells[i].$config.hidden) {\r\n\t\t\t\tlastVisibleIndex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\tif (cells[i].$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tvar lastCell = i >= lastVisibleIndex;\r\n\t\t\tvar borderColorClass = \"\";\r\n\t\t\tif(!lastCell && cells[i + 1]){\r\n\t\t\t\tif(cells[i + 1].$config.view == \"scrollbar\"){\r\n\t\t\t\t\tif(this._xLayout){\r\n\t\t\t\t\t\tlastCell = true;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tborderColorClass = \"gantt_layout_cell_border_transparent\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tthis._setBorders(lastCell ? [] : [borderClass, borderColorClass], cells[i]);\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype._updateCellVisibility = function(){\r\n\t\tvar oldVisibleCells = this._visibleCells || {};\r\n\t\tvar firstCall = !this._visibleCells;\r\n\t\tvar visibleCells = {};\r\n\t\tvar cell;\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (!firstCall && cell.$config.hidden && oldVisibleCells[cell.$id]) {\r\n\t\t\t\tcell._hide(true);\r\n\t\t\t}else if(!cell.$config.hidden && !oldVisibleCells[cell.$id]){\r\n\t\t\t\tcell._hide(false);\r\n\t\t\t}\r\n\r\n\t\t\tif(!cell.$config.hidden){\r\n\t\t\t\tvisibleCells[cell.$id] = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._visibleCells = visibleCells;\r\n\t};\r\n\r\n\tLayout.prototype.setSize = function (x, y) {\r\n\t\tthis._configureBorders();\r\n\t\t_super.prototype.setSize.call(this, x, y);\r\n\t\ty = this.$lastSize.contentY;\r\n\t\tx = this.$lastSize.contentX;\r\n\r\n\t\tvar padding = (this.$config.padding || 0);\r\n\t\tthis.$view.style.padding = padding + \"px\";\r\n\t\tthis._gravity = 0;\r\n\t\tthis._free = this._xLayout ? x : y;\r\n\t\tthis._free -= padding * 2;\r\n\t\t// calc all gravity\r\n\r\n\t\tvar cell,\r\n\t\t\tsize;\r\n\r\n\t\tthis._updateCellVisibility();\r\n\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tvar margin = (this.$config.margin || 0);\r\n\t\t\tif(cell.$name == \"resizer\" && !margin){\r\n\t\t\t\tmargin = -1;\r\n\t\t\t}\r\n\r\n\t\t\t// set margins to child cell\r\n\t\t\tvar cellView = cell.$view;\r\n\r\n\t\t\tvar marginSide = this._xLayout ? \"marginRight\" : \"marginBottom\";\r\n\t\t\tif (i !== this.$cells.length - 1) {\r\n\t\t\t\tcellView.style[marginSide] = margin + \"px\";\r\n\t\t\t\tthis._free -= margin; // calc free space without margin\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tif (!size.width) {\r\n\t\t\t\t\tthis._gravity += size.gravity;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (!size.height) {\r\n\t\t\t\t\tthis._gravity += size.gravity;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tvar width = size.width;\r\n\t\t\tvar height = size.height;\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tthis._calcFreeSpace(width, size, true);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._calcFreeSpace(height, size, false);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tvar dx = void 0;\r\n\t\t\tvar dy = void 0;\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tdx = this._calcSize(size.width, size, true);\r\n\t\t\t\tdy = y - padding * 2; // layout height without paddings\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tdx = x - padding * 2; // layout width without paddings\r\n\t\t\t\tdy = this._calcSize(size.height, size, false);\r\n\t\t\t}\r\n\r\n\t\t\tcell.setSize(dx, dy);\r\n\t\t}\r\n\r\n\t};\r\n\r\n\treturn Layout;\r\n}(Cell));\r\n\r\nmodule.exports = Layout;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar ScaleHelper = __webpack_require__(14);\r\nvar eventable = __webpack_require__(2);\r\nvar utils = __webpack_require__(0);\r\n\r\nvar canvasRender = __webpack_require__(47);\r\n\r\nvar Timeline = function(parent, config, factory, gantt){\r\n\tthis.$config = utils.mixin({}, config || {});\r\n\tthis.$scaleHelper = new ScaleHelper(gantt);\r\n\tthis.$gantt = gantt;\r\n\teventable(this);\r\n};\r\n\r\nTimeline.prototype = {\r\n\tinit: function(container){\r\n\t\tcontainer.innerHTML += \"<div class='gantt_task' style='width:inherit;height:inherit;'></div>\";\r\n\t\tthis.$task = container.childNodes[0];\r\n\r\n\t\tthis.$task.innerHTML = \"<div class='gantt_task_scale'></div><div class='gantt_data_area'></div>\";\r\n\t\tthis.$task_scale = this.$task.childNodes[0];\r\n\r\n\t\tthis.$task_data = this.$task.childNodes[1];\r\n\t\tthis.$task_data.innerHTML = \"<div class='gantt_task_bg'></div><div class='gantt_links_area'></div><div class='gantt_bars_area'></div>\";\r\n\t\tthis.$task_bg = this.$task_data.childNodes[0];\r\n\t\tthis.$task_links = this.$task_data.childNodes[1];\r\n\t\tthis.$task_bars = this.$task_data.childNodes[2];\r\n\r\n\t\tthis._tasks = {\r\n\t\t\tcol_width: 0,\r\n\t\t\twidth: [], // width of each column\r\n\t\t\tfull_width: 0, // width of all columns\r\n\t\t\ttrace_x: [],\r\n\t\t\trendered: {}\r\n\t\t};\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar attr = config[this.$config.bind + \"_attribute\"];\r\n\t\tvar linksAttr = config[this.$config.bindLinks + \"_attribute\"];\r\n\t\tif(!attr && this.$config.bind){\r\n\t\t\tattr = this.$config.bind + \"_id\";\r\n\t\t}\r\n\t\tif(!linksAttr && this.$config.bindLinks){\r\n\t\t\tlinksAttr = this.$config.bindLinks + \"_id\";\r\n\t\t}\r\n\t\tthis.$config.item_attribute = attr || null;\r\n\t\tthis.$config.link_attribute = linksAttr || null;\r\n\r\n\t\tvar layers = this._createLayerConfig();\r\n\t\tif(!this.$config.layers){\r\n\t\t\tthis.$config.layers = layers.tasks;\r\n\t\t}\r\n\t\tif(!this.$config.linkLayers){\r\n\t\t\tthis.$config.linkLayers = layers.links;\r\n\t\t}\r\n\r\n\t\tthis._attachLayers(this.$gantt);\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\t//this.refresh();\r\n\t},\r\n\r\n\tsetSize: function(width, height){\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tif(width*1 === width){\r\n\t\t\tthis.$config.width = width;\r\n\t\t}\r\n\t\tif(height*1 === height){\r\n\r\n\t\t\tthis.$config.height = height;\r\n\t\t\tvar dataHeight = Math.max(this.$config.height - config.scale_height);\r\n\t\t\tthis.$task_data.style.height = dataHeight + 'px';\r\n\t\t}\r\n\r\n\t\tthis.refresh();\r\n\t\tthis.$task_bg.style.backgroundImage = \"\";\r\n\r\n\t\tif(config.smart_rendering && this.$config.rowStore){\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tthis.$task_bg.style.height = config.row_height * store.countVisible() +\"px\";\r\n\t\t}else{\r\n\t\t\tthis.$task_bg.style.height = \"\";\r\n\t\t}\r\n\r\n\t\tvar scale = this._tasks;\r\n\t\t//timeline area layers\r\n\t\tvar data_els = this.$task_data.childNodes;\r\n\t\tfor(var i= 0, len = data_els.length; i < len; i++){\r\n\t\t\tvar el = data_els[i];\r\n\t\t\tif(el.hasAttribute(\"data-layer\") && el.style)\r\n\t\t\t\tel.style.width = scale.full_width + \"px\";\r\n\t\t}\r\n\t},\r\n\r\n\tisVisible: function(){\r\n\t\tif(this.$parent && this.$parent.$config){\r\n\t\t\treturn !this.$parent.$config.hidden;\r\n\t\t}else{\r\n\t\t\treturn this.$task.offsetWidth;\r\n\t\t}\r\n\t},\r\n\r\n\tgetSize: function(){\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar store = this.$config.rowStore;\r\n\r\n\t\tvar contentHeight = store ? config.row_height * store.countVisible() : 0,\r\n\t\t\tcontentWidth = this._tasks.full_width;\r\n\r\n\t\treturn {\r\n\t\t\tx: this.$config.width,\r\n\t\t\ty: this.$config.height,\r\n\t\t\tcontentX: this.isVisible() ? contentWidth : 0,\r\n\t\t\tcontentY: this.isVisible() ? (config.scale_height + contentHeight) : 0,\r\n\t\t\tscrollHeight: this.isVisible() ? contentHeight : 0,\r\n\t\t\tscrollWidth: this.isVisible() ? contentWidth : 0\r\n\t\t};\r\n\t},\r\n\r\n\tscrollTo: function(left, top){\r\n\t\tif(!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tif(top*1 === top){\r\n\t\t\tthis.$config.scrollTop = top;\r\n\t\t\tthis.$task_data.scrollTop = this.$config.scrollTop;\r\n\t\t}\r\n\t\tif (left*1 === left){\r\n\t\t\tthis.$task.scrollLeft = left;\r\n\t\t\tthis.$config.scrollLeft = this.$task.scrollLeft;\r\n\t\t\tthis._refreshScales();\r\n\t\t}\r\n\t},\r\n\r\n\t_refreshScales: function _refreshScales() {\r\n\t\tif(!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tif (!config.smart_scales) return;\r\n\r\n\t\tvar x = this.$config.scrollLeft;\r\n\t\tvar width = this.$config.width;\r\n\r\n\t\tvar scales = this._scales;\r\n\t\tthis.$task_scale.innerHTML = this._getScaleChunkHtml(scales, x, x + width);\r\n\t},\r\n\t_createLayerConfig: function(){\r\n\t\tvar self = this;\r\n\t\tvar taskFilter = function(){\r\n\t\t\treturn self.isVisible();\r\n\t\t};\r\n\r\n\t\tvar taskLayers = [\r\n\t\t\t{\r\n\t\t\t\texpose: true,\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.taskBar,\r\n\t\t\t\tcontainer: this.$task_bars,\r\n\t\t\t\tfilter: [taskFilter]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.taskBg,\r\n\t\t\t\tcontainer: this.$task_bg,\r\n\t\t\t\tfilter: [\r\n\t\t\t\t\tfunction(){\r\n\t\t\t\t\t\treturn !self.$getConfig().static_background;\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttaskFilter\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\tvar linkLayers = [\r\n\t\t\t{\r\n\t\t\t\texpose: true,\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.link,\r\n\t\t\t\tcontainer: this.$task_links,\r\n\t\t\t\tfilter: [taskFilter]\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\treturn {\r\n\t\t\ttasks: taskLayers,\r\n\t\t\tlinks: linkLayers\r\n\t\t};\r\n\r\n\t},\r\n\r\n\t_attachLayers: function(gantt){\r\n\t\tthis._taskLayers = [];\r\n\t\tthis._linkLayers = [];\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\r\n\t\tif(this.$config.bind){\r\n\r\n\t\t\tself.$config.rowStore = self.$gantt.getDatastore(self.$config.bind);\r\n\r\n\t\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\t\tif(!taskRenderer){\r\n\t\t\t\ttaskRenderer = layers.createDataRender({\r\n\t\t\t\t\tname: this.$config.bind,\r\n\t\t\t\t\tdefaultContainer: function(){ return self.$task_data;}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\ttaskRenderer.container = function(){ return self.$task_data;};\r\n\r\n\t\t\tvar taskLayers = this.$config.layers;\r\n\t\t\tfor(var i = 0; taskLayers && i < taskLayers.length; i++){\r\n\t\t\t\tvar layer = taskLayers[i];\r\n\r\n\t\t\t\tif(typeof layer == \"string\"){\r\n\t\t\t\t\tlayer = this.$gantt.$ui.layers[layer];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(typeof layer == \"function\"){\r\n\t\t\t\t\tlayer = {renderer: layer};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlayer.host = this;\r\n\t\t\t\tvar bar_layer = taskRenderer.addLayer(layer);\r\n\t\t\t\tthis._taskLayers.push(bar_layer);\r\n\t\t\t\tif(layer.expose){\r\n\t\t\t\t\tthis._taskRenderer = taskRenderer.getLayer(bar_layer);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._initStaticBackgroundRender();\r\n\t\t}\r\n\r\n\t\tif(this.$config.bindLinks){\r\n\t\t\tself.$config.linkStore = self.$gantt.getDatastore(self.$config.bindLinks);\r\n\r\n\t\t\tvar linkRenderer = layers.getDataRender(this.$config.bindLinks);\r\n\r\n\t\t\tif(!linkRenderer){\r\n\t\t\t\tlinkRenderer = layers.createDataRender({\r\n\t\t\t\t\tname: this.$config.bindLinks,\r\n\t\t\t\t\tdefaultContainer: function(){ return self.$task_data;}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tvar linkLayers = this.$config.linkLayers;\r\n\t\t\tfor(var i = 0; linkLayers && i < linkLayers.length; i++){\r\n\r\n\t\t\t\tif(typeof layer == \"string\"){\r\n\t\t\t\t\tlayer = this.$gantt.$ui.layers[layer];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar layer = linkLayers[i];\r\n\t\t\t\tlayer.host = this;\r\n\t\t\t\tvar linkLayer = linkRenderer.addLayer(layer);\r\n\t\t\t\tthis._taskLayers.push(linkLayer);\r\n\t\t\t\tif(linkLayers[i].expose){\r\n\t\t\t\t\tthis._linkRenderer = linkRenderer.getLayer(linkLayer);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_initStaticBackgroundRender: function(){\r\n\t\tvar self = this;\r\n\t\tvar staticRender = canvasRender.create();\r\n\t\tvar store = self.$config.rowStore;\r\n\t\tif(!store) return;\r\n\r\n\t\tthis._staticBgHandler = store.attachEvent(\"onStoreUpdated\", function(id, item, mode){\r\n\t\t\tif(id !== null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!self.isVisible())\r\n\t\t\t\treturn;\r\n\t\t\tvar config = self.$getConfig();\r\n\t\t\tif(config.static_background) {\r\n\t\t\t\tvar store = self.$gantt.getDatastore(self.$config.bind);\r\n\t\t\t\tif (store) {\r\n\t\t\t\t\tstaticRender.render(self.$task_bg, config, self.getScale(), config.row_height * store.countVisible());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis._initStaticBackgroundRender = function(){};//init once\r\n\t},\r\n\r\n\t_clearLayers: function(gantt){\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\t\tvar linkRenderer = layers.getDataRender(this.$config.bindLinks);\r\n\r\n\t\tfor(var i = 0; i < this._taskLayers.length; i++){\r\n\t\t\ttaskRenderer.removeLayer(this._taskLayers[i]);\r\n\t\t}\r\n\t\tfor(var i = 0; i < this._linkLayers.length; i++){\r\n\t\t\tlinkRenderer.removeLayer(this._linkLayers[i]);\r\n\t\t}\r\n\r\n\t\tthis._linkLayers = [];\r\n\t\tthis._taskLayers = [];\r\n\t},\r\n\r\n\t_render_tasks_scales: function _render_tasks_scales() {\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tvar scales_html = \"\",\r\n\t\t\touter_width = 0,\r\n\t\t\tscale_height = 0;\r\n\r\n\t\tvar state = this.$gantt.getState();\r\n\r\n\t\tif (this.isVisible()) {\r\n\t\t\tvar helpers = this.$scaleHelper;\r\n\t\t\tvar scales = this._getScales();\r\n\t\t\tscale_height = config.scale_height;\r\n\r\n\t\t\tvar availWidth = this.$config.width;\r\n\t\t\tif(config.autosize == \"x\" || config.autosize == \"xy\"){\r\n\t\t\t\tavailWidth = Math.max(config.autosize_min_width, 0);\r\n\t\t\t}\r\n\r\n\t\t\tvar cfgs = helpers.prepareConfigs(scales, config.min_column_width, availWidth, scale_height - 1, state.min_date, state.max_date, config.rtl);\r\n\t\t\tvar cfg = this._tasks = cfgs[cfgs.length - 1];\r\n\t\t\tthis._scales = cfgs;\r\n\r\n\t\t\tscales_html = this._getScaleChunkHtml(cfgs, 0, this.$config.width);\r\n\r\n\t\t\touter_width = cfg.full_width + \"px\";//cfg.full_width + (this._scroll_sizes().y ? scrollSizes.scroll_size : 0) + \"px\";\r\n\t\t\tscale_height += \"px\";\r\n\t\t}\r\n\r\n\t\tthis.$task_scale.style.height = scale_height;\r\n\r\n\t\tthis.$task_data.style.width =\r\n\t\t\tthis.$task_scale.style.width = outer_width;\r\n\r\n\t\tthis.$task_scale.innerHTML = scales_html;\r\n\r\n\t},\r\n\r\n\t_getScaleChunkHtml: function _get_scale_chunk_html (scales, fromPos, toPos) {\r\n\t\tvar templates = this.$gantt.$services.templates();\r\n\t\tvar html = [];\r\n\r\n\t\tvar css = templates.scale_row_class;\r\n\t\tfor (var i = 0; i < scales.length; i++) {\r\n\t\t\tvar cssClass = \"gantt_scale_line\";\r\n\t\t\tvar tplClass = css(scales[i]);\r\n\t\t\tif (tplClass) {\r\n\t\t\t\tcssClass += \" \" + tplClass;\r\n\t\t\t}\r\n\r\n\t\t\thtml.push(\"<div class=\\\"\" + cssClass + \"\\\" style=\\\"height:\" + (scales[i].height) +\r\n\t\t\t\t\"px;position:relative;line-height:\" + (scales[i].height) + \"px\\\">\" + this._prepareScaleHtml(scales[i], fromPos, toPos) + \"</div>\");\r\n\t\t}\r\n\r\n\t\treturn html.join(\"\");\r\n\t},\r\n\t_prepareScaleHtml: function _prepare_scale_html(config, fromPos, toPos) {\r\n\t\tvar globalConfig = this.$getConfig();\r\n\t\tvar globalTemplates = this.$gantt.$services.templates();\r\n\r\n\t\tvar cells = [];\r\n\t\tvar date = null, content = null, css = null;\r\n\r\n\t\tif (config.template || config.date) {\r\n\t\t\tcontent = config.template || this.$gantt.date.date_to_str(config.date);\r\n\t\t}\r\n\r\n\t\tvar startIndex = 0,\r\n\t\t\tendIndex = config.count;\r\n\r\n\t\tif (globalConfig.smart_scales && (!isNaN(fromPos) && !isNaN(toPos))) {\r\n\t\t\tstartIndex = _findBinary(config.left, fromPos);\r\n\t\t\tendIndex = _findBinary(config.left, toPos) + 1;\r\n\t\t}\r\n\r\n\t\tcss = config.css || function () {\r\n\t\t\t};\r\n\t\tif (!config.css && globalConfig.inherit_scale_class) {\r\n\t\t\tcss = globalTemplates.scale_cell_class;\r\n\t\t}\r\n\r\n\t\tfor (var i = startIndex; i < endIndex; i++) {\r\n\t\t\tif (!config.trace_x[i]) break;\r\n\r\n\t\t\tdate = new Date(config.trace_x[i]);\r\n\t\t\tvar value = content.call(this, date),\r\n\t\t\t\twidth = config.width[i],\r\n\t\t\t\theight = config.height,\r\n\t\t\t\tleft = config.left[i],\r\n\t\t\t\tstyle = \"\",\r\n\t\t\t\ttemplate = \"\",\r\n\t\t\t\tcssclass = \"\";\r\n\r\n\t\t\tif (width) {\r\n\t\t\t\tvar position = globalConfig.smart_scales ? (\"position:absolute;left:\" + left + \"px\") : \"\";\r\n\r\n\t\t\t\tstyle = \"width:\" + (width) + \"px;height:\" + height + \"px;\" + position;\r\n\t\t\t\tcssclass = \"gantt_scale_cell\" + (i == config.count - 1 ? \" gantt_last_cell\" : \"\");\r\n\r\n\t\t\t\ttemplate = css.call(this, date);\r\n\t\t\t\tif (template) cssclass += \" \" + template;\r\n\r\n\t\t\t\tvar ariaAttr = this.$gantt._waiAria.getTimelineCellAttr(value);\r\n\t\t\t\tvar cell = \"<div class='\" + cssclass + \"'\" + ariaAttr + \" style='\" + style + \"'>\" + value + \"</div>\";\r\n\t\t\t\tcells.push(cell);\r\n\t\t\t} else {\r\n\t\t\t\t//do not render ignored cells\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn cells.join(\"\");\r\n\t},\r\n\tdateFromPos: function dateFromPos(x) {\r\n\t\tvar scale = this._tasks;\r\n\t\tif (x < 0 || x > scale.full_width || !scale.full_width) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tvar ind = _findBinary(this._tasks.left, x);\r\n\t\tvar summ = this._tasks.left[ind];\r\n\r\n\t\tvar col_width = scale.width[ind] || scale.col_width;\r\n\t\tvar part = 0;\r\n\t\tif (col_width) {\r\n\t\t\tpart = (x - summ) / col_width;\r\n\t\t\tif(scale.rtl){\r\n\t\t\t\tpart = 1 - part;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar unit = 0;\r\n\t\tif (part) {\r\n\t\t\tunit = this._getColumnDuration(scale, scale.trace_x[ind]);\r\n\t\t}\r\n\r\n\t\tvar date = new Date(scale.trace_x[ind].valueOf() + Math.round(part * unit));\r\n\t\treturn date;\r\n\t},\r\n\tposFromDate: function posFromDate(date) {\r\n\t\tif (!this.isVisible())\r\n\t\t\treturn 0;\r\n\r\n\t\tvar ind = this.columnIndexByDate(date);\r\n\t\tthis.$gantt.assert(ind >= 0, \"Invalid day index\");\r\n\r\n\t\tvar wholeCells = Math.floor(ind);\r\n\t\tvar partCell = ind % 1;\r\n\r\n\t\tvar pos = this._tasks.left[Math.min(wholeCells, this._tasks.width.length - 1)];\r\n\t\tif (wholeCells == this._tasks.width.length)\r\n\t\t\tpos += this._tasks.width[this._tasks.width.length - 1];\r\n\t\t//for(var i=1; i <= wholeCells; i++)\r\n\t\t//\tpos += gantt._tasks.width[i-1];\r\n\r\n\t\tif (partCell) {\r\n\t\t\tif (wholeCells < this._tasks.width.length) {\r\n\t\t\t\tpos += this._tasks.width[wholeCells] * (partCell % 1);\r\n\t\t\t} else {\r\n\t\t\t\tpos += 1;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn Math.round(pos);\r\n\t},\r\n\tcolumnIndexByDate: function columnIndexByDate(date) {\r\n\t\tvar pos = new Date(date).valueOf();\r\n\t\tvar days = this._tasks.trace_x_ascending,\r\n\t\t\tignores = this._tasks.ignore_x;\r\n\r\n\t\tvar state = this.$gantt.getState();\r\n\r\n\t\tif (pos <= state.min_date) {\r\n\t\t\tif(this._tasks.rtl){\r\n\t\t\t\treturn days.length;\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif (pos >= state.max_date) {\r\n\t\t\tif(this._tasks.rtl){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn days.length;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*var day = null;\r\n\t\t for (var xind = 0, length = days.length-1; xind < length; xind++) {\r\n\t\t // | 8:00, 8:30 | 8:15 should be checked against 8:30\r\n\t\t // clicking at the most left part of the cell, say 8:30 should create event in that cell, not previous one\r\n\t\t day = +days[xind+1];\r\n\t\t if (pos < day && !ignores[day])\r\n\t\t break;\r\n\t\t }*/\r\n\r\n\t\tvar day_ind = _findBinary(days, pos);\r\n\t\tvar day = +days[day_ind];\r\n\t\twhile (ignores[day]) {\r\n\t\t\tday = +days[++day_ind];\r\n\t\t}\r\n\r\n\t\tvar transition = this._tasks.trace_index_transition;\r\n\t\tvar index = day_ind;\r\n\t\tif(!day){\r\n\t\t\tif(transition){\r\n\t\t\t\treturn transition[0];\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar part = ((date - days[day_ind]) / this._getColumnDuration(this._tasks, days[day_ind]));\r\n\t\tif(transition){\r\n\t\t\treturn transition[index] + (1 - part);\r\n\t\t}else{\r\n\t\t\treturn index + part;\r\n\t\t}\r\n\r\n\t\t//return day_ind + ((date - days[day_ind]) / this._getColumnDuration(this._tasks, days[day_ind]));\r\n\t},\r\n\tgetItemPosition:function (task, start_date, end_date) {\r\n\t\tvar xLeft, xRight, width;\r\n\t\tif(this._tasks.rtl){\r\n\t\t\txRight = this.posFromDate(start_date || task.start_date);\r\n\t\t\txLeft = this.posFromDate(end_date || task.end_date);\r\n\t\t}else{\r\n\t\t\txLeft = this.posFromDate(start_date || task.start_date);\r\n\t\t\txRight = this.posFromDate(end_date || task.end_date);\r\n\t\t}\r\n\t\twidth =  Math.max((xRight - xLeft), 0);\r\n\r\n\t\tvar y = this.getItemTop(task.id);\r\n\t\tvar height = this.getItemHeight();\r\n\t\treturn {\r\n\t\t\tleft: xLeft,\r\n\t\t\ttop: y,\r\n\t\t\theight: height,\r\n\t\t\twidth: width\r\n\t\t};\r\n\t},\r\n\r\n\tgetItemHeight: function(){\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\t// height of the bar item\r\n\t\tvar height = config.task_height;\r\n\r\n\t\tif (height == \"full\") {\r\n\t\t\tvar offset = config.task_height_offset || 5;\r\n\t\t\theight = config.row_height - offset;\r\n\t\t}\r\n\t\t//item height cannot be bigger than row height\r\n\t\theight = Math.min(height, config.row_height);\r\n\t\treturn Math.max(height, 0);\r\n\t},\r\n\r\n\tgetRowTop: function(index){\r\n\t\treturn index * this.$getConfig().row_height;\r\n\t},\r\n\r\n\tgetItemTop: function (task_id) {\r\n\t\tif(this.$config.rowStore){\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif(!store) return 0;\r\n\r\n\t\t\treturn store.getIndexById(task_id) * this.$getConfig().row_height;\r\n\r\n\t\t}else{\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetScale: function(){\r\n\t\treturn this._tasks;\r\n\t},\r\n\r\n\t_getScales: function _get_scales() {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar helpers = this.$scaleHelper;\r\n\t\tvar scales = [helpers.primaryScale()].concat(config.subscales);\r\n\r\n\t\thelpers.sortScales(scales);\r\n\t\treturn scales;\r\n\t},\r\n\r\n\t_getColumnDuration: function _get_coll_duration(scale, date) {\r\n\t\treturn this.$gantt.date.add(date, scale.step, scale.unit) - date;\r\n\t},\r\n\r\n\trefresh: function(){\r\n\t\tif(this.$config.bind) {\r\n\t\t\tthis.$config.rowStore = this.$gantt.getDatastore(this.$config.bind);\r\n\t\t}\r\n\r\n\t\tif(this.$config.bindLinks) {\r\n\t\t\tthis.$config.linkStore = this.$gantt.getDatastore(this.$config.bindLinks);\r\n\t\t}\r\n\r\n\t\tthis._initStaticBackgroundRender();\r\n\t\tthis._render_tasks_scales();\r\n\t},\r\n\r\n\tdestructor: function(){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tthis._clearLayers(gantt);\r\n\r\n\t\tthis.$task = null;\r\n\t\tthis.$task_scale = null;\r\n\t\tthis.$task_data = null;\r\n\t\tthis.$task_bg = null;\r\n\t\tthis.$task_links = null;\r\n\t\tthis.$task_bars = null;\r\n\r\n\t\tthis.$gantt = null;\r\n\r\n\t\tif(this.$config.rowStore){\r\n\t\t\tthis.$config.rowStore.detachEvent(this._staticBgHandler);\r\n\t\t\tthis.$config.rowStore = null;\r\n\t\t}\r\n\t\tif(this.$config.linkStore){\r\n\t\t\tthis.$config.linkStore = null;\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\r\n\t}\r\n};\r\n\r\nmodule.exports = Timeline;\r\n\r\nfunction _findBinary(array, target) {\r\n\t// modified binary search, target value not exactly match array elements, looking for closest one\r\n\r\n\tvar low = 0, high = array.length - 1, i, item, prev;\r\n\twhile (low <= high) {\r\n\r\n\t\ti = Math.floor((low + high) / 2);\r\n\t\titem = +array[i];\r\n\t\tprev = +array[i - 1];\r\n\t\tif (item < target) {\r\n\t\t\tlow = i + 1;\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tif (item > target) {\r\n\t\t\tif (!(!isNaN(prev) && prev < target)) {\r\n\t\t\t\thigh = i - 1;\r\n\t\t\t\tcontinue;\r\n\t\t\t} else {\r\n\t\t\t\t// if target is between 'i' and 'i-1' return 'i - 1'\r\n\t\t\t\treturn i - 1;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\twhile (+array[i] == +array[i + 1]) i++;\r\n\r\n\t\treturn i;\r\n\t}\r\n\treturn array.length - 1;\r\n}\r\n\r\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\r\nvar ScaleHelper = __webpack_require__(46);\r\n\r\nfunction ScaleIgnoreHelper(gantt){\r\n\tvar helper = new ScaleHelper(gantt);\r\n\r\n\thelper.processIgnores = function (config) {\r\n\t\tvar display_count = config.count;\r\n\t\tconfig.ignore_x = {};\r\n\t\tif (gantt.ignore_time || gantt.config.skip_off_time) {\r\n\t\t\tvar ignore = gantt.ignore_time || function () {\r\n\t\t\t\treturn false;\r\n\t\t\t};\r\n\t\t\tdisplay_count = 0;\r\n\r\n\t\t\tfor (var i = 0; i < config.trace_x.length; i++) {\r\n\r\n\t\t\t\tif (ignore.call(gantt, config.trace_x[i]) || this._ignore_time_config.call(gantt, config.trace_x[i], config)) {\r\n\t\t\t\t\tconfig.ignore_x[config.trace_x[i].valueOf()] = true;\r\n\t\t\t\t\tconfig.ignored_colls = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdisplay_count++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tconfig.display_count = display_count;\r\n\t};\r\n\r\n\treturn helper;\r\n}\r\n\r\nmodule.exports = ScaleIgnoreHelper;\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports) {\n\nfunction createMixin(_super){\r\n\treturn {\r\n\t\trefresh: function() {\r\n\t\t\tthis._linkToTaskStore();\r\n\t\t\t_super.prototype.refresh.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\t_linkToTaskStore: function () {\r\n\r\n\t\t\tif (this.$config.rowStore && this.$gantt.$data.tasksStore) {\r\n\t\t\t\tvar tasks = this.$gantt.$data.tasksStore;\r\n\t\t\t\tvar ownStore = this.$config.rowStore;\r\n\r\n\t\t\t\tif (!tasks[\"_attached_\" + ownStore.name]) {\r\n\t\t\t\t\ttasks[\"_attached_\" + ownStore.name] = true;\r\n\t\t\t\t\tvar updateDelay;\r\n\t\t\t\t\ttasks.attachEvent(\"onStoreUpdated\", function (id, item, mode) {\r\n\t\t\t\t\t\tif(window.requestAnimationFrame){\r\n\t\t\t\t\t\t\tcancelAnimationFrame(updateDelay);\r\n\t\t\t\t\t\t\tupdateDelay = requestAnimationFrame(function(){\r\n\t\t\t\t\t\t\t\townStore.refresh();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\townStore.refresh();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._linkToTaskStore = function () {\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = createMixin;\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar powerArray = __webpack_require__(17);\r\nvar utils = __webpack_require__(0);\r\nvar eventable = __webpack_require__(2);\r\n\r\nvar DataStore = function(config){\r\n\tthis.pull = {};\r\n\tthis.$initItem = config.initItem;\r\n\tthis.visibleOrder = powerArray.$create();\r\n\tthis.fullOrder = powerArray.$create();\r\n\tthis._skip_refresh = false;\r\n\tthis._filterRule = null;\r\n\tthis._searchVisibleOrder = {};\r\n\teventable(this);\r\n\treturn this;\r\n};\r\nDataStore.prototype = {\r\n\r\n\t_parseInner: function(data){\r\n\t\tvar item = null,\r\n\t\t\tloaded = [];\r\n\t\tfor(var i = 0, len = data.length; i< len; i++){\r\n\t\t\titem = data[i];\r\n\t\t\tif(this.$initItem){\r\n\t\t\t\titem = this.$initItem(item);\r\n\t\t\t}\r\n\t\t\tif(this.callEvent(\"onItemLoading\", [item])){\r\n\t\t\t\tif (!this.pull.hasOwnProperty(item.id)) {\r\n\t\t\t\t\tthis.fullOrder.push(item.id);\r\n\t\t\t\t\tloaded.push(item);\r\n\t\t\t\t}\r\n\t\t\t\tthis.pull[item.id] = item;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn loaded;\r\n\t},\r\n\tparse: function(data){\r\n\t\tthis.callEvent(\"onBeforeParse\", [data]);\r\n\t\tvar loaded = this._parseInner(data);\r\n\t\tthis.refresh();\r\n\t\tthis.callEvent(\"onParse\", [loaded]);\r\n\t},\r\n\tgetItem: function(id){\r\n\t\treturn this.pull[id];\r\n\t},\r\n\r\n\t_updateOrder: function(code){\r\n\t\tcode.call(this.visibleOrder);\r\n\t\tcode.call(this.fullOrder);\r\n\t},\r\n\tupdateItem: function(id, item){\r\n\t\tif (!utils.defined(item)) item = this.getItem(id);\r\n\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tif (this.callEvent(\"onBeforeUpdate\", [item.id, item]) === false) return false;\r\n\t\t}\r\n\t\tthis.pull[id]=item;\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tthis.callEvent(\"onAfterUpdate\", [item.id, item]);\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [item.id, item, \"update\"]);\r\n\t\t}\r\n\t},\r\n\r\n\t_removeItemInner: function(id){\r\n\t\t//clear from collections\r\n\t\t//this.visibleOrder.$remove(id);\r\n\t\tthis._updateOrder(function(){ this.$remove(id);});\r\n\t\tdelete this.pull[id];\r\n\t},\r\n\r\n\tremoveItem: function(id){\r\n\t\t//utils.assert(this.exists(id), \"Not existing ID in remove command\"+id);\r\n\r\n\t\tvar obj = this.getItem(id);\t//save for later event\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tif (this.callEvent(\"onBeforeDelete\", [obj.id, obj]) === false) return false;\r\n\t\t}\r\n\r\n\t\tthis._removeItemInner(id);\r\n\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tthis.filter();\r\n\t\t\tthis.callEvent(\"onAfterDelete\", [obj.id, obj]);\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [obj.id, obj, \"delete\"]);\r\n\t\t}\r\n\t},\r\n\r\n\t_addItemInner: function(item, index){\r\n\t\t//in case of treetable order is sent as 3rd parameter\r\n\t\t//var order = index;\r\n\r\n\t\tif(this.exists(item.id)){\r\n\t\t\tthis.silent(function(){this.updateItem(item.id, item);});\r\n\t\t}else{\r\n\t\t\tvar order = this.visibleOrder;\r\n\r\n\t\t\t//by default item is added to the end of the list\r\n\t\t\tvar data_size = order.length;\r\n\r\n\t\t\tif (!utils.defined(index) || index < 0)\r\n\t\t\t\tindex = data_size;\r\n\t\t\t//check to prevent too big indexes\r\n\t\t\tif (index > data_size){\r\n\t\t\t\t//dhx.log(\"Warning\",\"DataStore:add\",\"Index of out of bounds\");\r\n\t\t\t\tindex = Math.min(order.length,index);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t//gantt.assert(!this.exists(id), \"Not unique ID\");\r\n\r\n\t\tthis.pull[item.id]=item;\r\n\t\tif (!this._skip_refresh){\r\n\t\t\tthis._updateOrder(function(){\r\n\t\t\t\tif(this.$find(item.id) === -1)\r\n\t\t\t\t\tthis.$insertAt(item.id,index);\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.filter();\r\n\t\t//order.$insertAt(item.id,index);\r\n\t},\r\n\r\n\r\n\tisVisible: function(id){\r\n\t\treturn this.visibleOrder.$find(id) > -1;\r\n\t},\r\n\tgetVisibleItems: function(){\r\n\t\treturn this.getIndexRange();\r\n\t},\r\n\r\n\taddItem: function(item, index){\r\n\t\tif (!utils.defined(item.id))\r\n\t\t\titem.id = utils.uid();\r\n\r\n\t\tif(this.$initItem){\r\n\t\t\titem = this.$initItem(item);\r\n\t\t}\r\n\r\n\t\tif (!this._skip_refresh){\r\n\t\t\tif (this.callEvent(\"onBeforeAdd\", [item.id, item]) === false) return false;\r\n\t\t}\r\n\r\n\r\n\t\tthis._addItemInner(item, index);\r\n\r\n\t\tif (!this._skip_refresh){\r\n\t\t\tthis.callEvent(\"onAfterAdd\",[item.id, item]);\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\",[item.id,item,\"add\"]);\r\n\t\t}\r\n\t\treturn item.id;\r\n\t},\r\n\r\n\t_changeIdInner: function(oldId, newId){\r\n\t\tif(this.pull[oldId])\r\n\t\t\tthis.pull[newId] = this.pull[oldId];\r\n\r\n\t\tvar visibleOrder = this._searchVisibleOrder[oldId];\r\n\t\tthis.pull[newId].id = newId;\r\n\t\tthis._updateOrder(function(){\r\n\t\t\tthis[this.$find(oldId)] = newId;\r\n\t\t});\r\n\t\tthis._searchVisibleOrder[newId] = visibleOrder;\r\n\t\tdelete this._searchVisibleOrder[oldId];\r\n\r\n\t\t//this.visibleOrder[this.visibleOrder.$find(oldId)]=newId;\r\n\t\tdelete this.pull[oldId];\r\n\t},\r\n\tchangeId: function(oldId, newId){\r\n\t\tthis._changeIdInner(oldId, newId);\r\n\r\n\t\tthis.callEvent(\"onIdChange\", [oldId, newId]);\r\n\r\n\t},\r\n\texists: function(id){\r\n\t\treturn !!(this.pull[id]);\r\n\t},\r\n\r\n\t_moveInner: function(sindex, tindex){\r\n\t\tvar id = this.getIdByIndex(sindex);\r\n\r\n\t\tthis._updateOrder(function(){\r\n\t\t\tthis.$removeAt(sindex);\r\n\t\t\tthis.$insertAt(id,Math.min(this.length, tindex));\r\n\t\t});\r\n\t\t//this.visibleOrder.$removeAt(sindex);\t//remove at old position\r\n\t\t//if (sindex<tindex) tindex--;\t//correct shift, caused by element removing\r\n\t\t//this.visibleOrder.$insertAt(id,Math.min(this.visibleOrder.length, tindex));\t//insert at new position\r\n\t},\r\n\r\n\tmove: function(sindex, tindex){\r\n\t\t//gantt.assert(sindex>=0 && tindex>=0, \"DataStore::move\",\"Incorrect indexes\");\r\n\r\n\t\tvar id = this.getIdByIndex(sindex);\r\n\t\tvar obj = this.getItem(id);\r\n\t\tthis._moveInner(sindex, tindex);\r\n\r\n\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [obj.id, obj, \"move\"]);\r\n\t\t}\r\n\t},\r\n\tclearAll: function(){\r\n\t\tthis.pull = {};\r\n\t\tthis.visibleOrder = powerArray.$create();\r\n\t\tthis.fullOrder = powerArray.$create();\r\n\t\tif (this._skip_refresh) return;\r\n\t\tthis.callEvent(\"onClearAll\",[]);\r\n\t\tthis.refresh();\r\n\t},\r\n\r\n\tsilent:function(code, master){\r\n\t\tthis._skip_refresh = true;\r\n\t\tcode.call(master||this);\r\n\t\tthis._skip_refresh = false;\r\n\t},\r\n\r\n\tarraysEqual: function (arr1, arr2) {\r\n\t\tif(arr1.length !== arr2.length)\r\n\t\t\treturn false;\r\n\t\tfor(var i = 0; i < arr1.length; i++) {\r\n\t\t\tif(arr1[i] !== arr2[i])\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\trefresh: function(id, quick){\r\n\t\tif (this._skip_refresh) return;\r\n\r\n\t\tif(id){\r\n\t\t\t// if item changes visible order (e.g. expand-collapse branch) - do a complete repaint\r\n\t\t\tif(!quick){\r\n\t\t\t\tvar oldOrder = this.visibleOrder;\r\n\t\t\t\tthis.filter();\r\n\t\t\t\tif(!this.arraysEqual(oldOrder, this.visibleOrder)){\r\n\t\t\t\t\tid = undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\tthis.filter();\r\n\t\t}\r\n\r\n\t\tif (id)\r\n\t\t\tthis.callEvent(\"onStoreUpdated\",[id, this.pull[id], \"paint\"]);\r\n\t\telse\r\n\t\t\tthis.callEvent(\"onStoreUpdated\",[null,null,null]);\r\n\t},\r\n\r\n\tcount: function(){\r\n\t\treturn this.fullOrder.length;\r\n\t},\r\n\tcountVisible: function(){\r\n\t\treturn this.visibleOrder.length;\r\n\t},\r\n\r\n\tsort: function(sort){},\r\n\r\n\tserialize: function(){},\r\n\r\n\teachItem: function(code){\r\n\t\tfor (var i=0; i<this.fullOrder.length; i++) {\r\n\t\t\tvar item = this.pull[this.fullOrder[i]];\r\n\t\t\tcode.call(this, item);\r\n\t\t}\r\n\t},\r\n\t\r\n\tfilter: function(rule){\r\n\t\tvar filteredOrder = powerArray.$create();\r\n\t\tthis.eachItem(function(item){\r\n\t\t\tif(this.callEvent(\"onFilterItem\", [item.id, item])){\r\n\t\t\t\tfilteredOrder.push(item.id);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.visibleOrder = filteredOrder;\r\n\t\tthis._searchVisibleOrder = {};\r\n\t\tfor(var i = 0; i < this.visibleOrder.length; i++){\r\n\t\t\tthis._searchVisibleOrder[this.visibleOrder[i]] = i;\r\n\t\t}\r\n\t},\r\n\r\n\tgetIndexRange: function(from, to){\r\n\t\tto=Math.min((to||Infinity),this.countVisible()-1);\r\n\r\n\t\tvar ret= [];\r\n\t\tfor (var i=(from||0); i <= to; i++)\r\n\t\t\tret.push(this.getItem(this.visibleOrder[i]));\r\n\t\treturn ret;\r\n\t},\r\n\tgetItems: function(){\r\n\t\tvar res = [];\r\n\t\tfor(var i in this.pull){\r\n\t\t\tres.push(this.pull[i]);\r\n\t\t}\r\n\t/*\tfor(var i = 0; i < this.fullOrder.length; i++){\r\n\r\n\t\t}*/\r\n\t\treturn res;\r\n\t},\r\n\r\n\tgetIdByIndex: function(index){\r\n\t\treturn this.visibleOrder[index];\r\n\t},\r\n\tgetIndexById: function(id){\r\n\t\tvar res = this._searchVisibleOrder[id];\r\n\t\tif(res === undefined){\r\n\t\t\tres = -1;\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\t_getNullIfUndefined: function(value){\r\n\t\tif(value === undefined){\r\n\t\t\treturn null;\r\n\t\t}else{\r\n\t\t\treturn value;\r\n\t\t}\r\n\t},\r\n\tgetFirst: function(){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[0]);\r\n\t},\r\n\tgetLast: function(){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[this.visibleOrder.length-1]);\r\n\t},\r\n\tgetNext: function(id){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[this.getIndexById(id) + 1]);\r\n\t},\r\n\tgetPrev: function(id){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[this.getIndexById(id) - 1]);\r\n\t},\r\n\tdestructor: function(){\r\n\t\tthis.detachAllEvents();\r\n\t\tthis.pull = null;\r\n\t\tthis.$initItem = null;\r\n\t\tthis.visibleOrder = null;\r\n\t\tthis.fullOrder = null;\r\n\t\tthis._skip_refresh = null;\r\n\t\tthis._filterRule = null;\r\n\t\tthis._searchVisibleOrder = null;\r\n\t}\r\n};\r\n\r\nmodule.exports = DataStore;\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\n\r\nvar $powerArray  = {\r\n\t$create: function(array){\r\n\t\treturn utils.mixin(array || [], this);\r\n\t},\r\n\t//remove element at specified position\r\n\t$removeAt:function(pos,len){\r\n\t\tif (pos>=0) this.splice(pos,(len||1));\r\n\t},\r\n\t//find element in collection and remove it\r\n\t$remove:function(value){\r\n\t\tthis.$removeAt(this.$find(value));\r\n\t},\r\n\t//add element to collection at specific position\r\n\t$insertAt:function(data,pos){\r\n\t\tif (!pos && pos!==0) \t//add to the end by default\r\n\t\t\tthis.push(data);\r\n\t\telse {\r\n\t\t\tvar b = this.splice(pos,(this.length-pos));\r\n\t\t\tthis[pos] = data;\r\n\t\t\tthis.push.apply(this,b); //reconstruct array without loosing this pointer\r\n\t\t}\r\n\t},\r\n\t//return index of element, -1 if it doesn't exists\r\n\t$find:function(data){\r\n\t\tfor (var i=0; i<this.length; i++)\r\n\t\t\tif (data==this[i]) return i;\r\n\t\treturn -1;\r\n\t},\r\n\t//execute some method for each element of array\r\n\t$each:function(functor,master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tfunctor.call((master||this),this[i]);\r\n\t},\r\n\t//create new array from source, by using results of functor\r\n\t$map:function(functor,master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tthis[i]=functor.call((master||this),this[i]);\r\n\t\treturn this;\r\n\t},\r\n\t$filter:function(functor, master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tif (!functor.call((master||this),this[i])){\r\n\t\t\t\tthis.splice(i,1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\treturn this;\r\n\t}\r\n};\r\n\r\nmodule.exports = $powerArray;\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar powerArray = __webpack_require__(17);\r\nvar utils = __webpack_require__(0);\r\nvar eventable = __webpack_require__(2);\r\nvar DataStore = __webpack_require__(16);\r\n\r\nvar TreeDataStore = function(config){\r\n\tthis._branches = {};\r\n\r\n\tthis.pull = {};\r\n\tthis.$initItem = config.initItem;\r\n\tthis.$parentProperty = config.parentProperty || \"parent\";\r\n\r\n\tif(typeof config.rootId !== \"function\"){\r\n\t\tthis.$getRootId = (function(val){\r\n\t\t\treturn function(){return val;};\r\n\t\t})(config.rootId || 0);\r\n\t}else{\r\n\t\tthis.$getRootId = config.rootId;\r\n\t}\r\n\r\n\t// TODO: replace with live reference to gantt config\r\n\tthis.$openInitially = config.openInitially;\r\n\r\n\tthis.visibleOrder = powerArray.$create();\r\n\tthis.fullOrder = powerArray.$create();\r\n\tthis._searchVisibleOrder = {};\r\n\tthis._skip_refresh = false;\r\n\r\n\teventable(this);\r\n\r\n\tthis.attachEvent(\"onFilterItem\", function(id, item){\r\n\t\tvar open = true;\r\n\t\tthis.eachParent(function(parent){\r\n\t\t\topen = open && parent.$open;\r\n\t\t}, item);\r\n\t\treturn !!open;\r\n\t});\r\n\r\n\treturn this;\r\n};\r\n\r\nTreeDataStore.prototype = utils.mixin({\r\n\r\n\t\t_buildTree: function(data){\r\n\t\t\tvar item = null;\r\n\t\t\tvar rootId = this.$getRootId();\r\n\t\t\tfor (var i = 0, len = data.length; i < len; i++){\r\n\t\t\t\titem = data[i];\r\n\t\t\t\tthis.setParent(item, this.getParent(item) || rootId);\r\n\t\t\t}\r\n\r\n\t\t\t// calculating $level for each item\r\n\t\t\tfor (var i = 0, len = data.length; i < len; i++){\r\n\t\t\t\titem = data[i];\r\n\t\t\t\tthis._add_branch(item);\r\n\t\t\t\titem.$level = this.calculateItemLevel(item);\r\n\r\n\t\t\t\tif (!utils.defined(item.$open)) {\r\n\t\t\t\t\titem.$open = utils.defined(item.open) ? item.open : this.$openInitially();\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tthis._updateOrder();\r\n\t\t},\r\n\r\n\t\tparse: function(data){\r\n\t\t\tthis.callEvent(\"onBeforeParse\", [data]);\r\n\t\t\tvar loaded = this._parseInner(data);\r\n\t\t\tthis._buildTree(loaded);\r\n\t\t\tthis.filter();\r\n\t\t\tthis.callEvent(\"onParse\", [loaded]);\r\n\t\t},\r\n\r\n\t\t_addItemInner: function(item, index){\r\n\r\n\t\t\tvar parent = this.getParent(item);\r\n\r\n\t\t\tif(!utils.defined(parent)){\r\n\t\t\t\tparent = this.$getRootId();\r\n\t\t\t\tthis.setParent(item, parent);\r\n\t\t\t}\r\n\r\n\t\t\tvar parentIndex = this.getIndexById(parent);\r\n\t\t\tvar targetIndex = parentIndex + Math.min(Math.max(index, 0), this.visibleOrder.length);\r\n\r\n\t\t\tif(targetIndex*1 !== targetIndex){\r\n\t\t\t\ttargetIndex = undefined;\r\n\t\t\t}\r\n\t\t\tDataStore.prototype._addItemInner.call(this, item, targetIndex);\r\n\t\t\tthis.setParent(item, parent);\r\n\r\n\t\t\tif(item.hasOwnProperty(\"$rendered_parent\")){\r\n\t\t\t\tthis._move_branch(item, item.$rendered_parent);\r\n\t\t\t}\r\n\t\t\tthis._add_branch(item, index);\r\n\t\t},\r\n\t\t_changeIdInner: function(oldId, newId){\r\n\t\t\tvar children = this.getChildren(oldId);\r\n\t\t\tvar visibleOrder = this._searchVisibleOrder[oldId];\r\n\r\n\t\t\tDataStore.prototype._changeIdInner.call(this, oldId, newId);\r\n\r\n\t\t\tvar parent = this.getParent(newId);\r\n\r\n\t\t\tthis._replace_branch_child(parent, oldId, newId);\r\n\t\t\tfor(var i = 0; i < children.length; i++){\r\n\t\t\t\tthis.setParent(this.getItem(children[i]), newId);\r\n\t\t\t}\r\n\r\n\t\t\tthis._searchVisibleOrder[newId] = visibleOrder;\r\n\t\t\tdelete this._branches[oldId];\r\n\t\t},\r\n\r\n\t\t_traverseBranches: function(code, parent){\r\n\t\t\tparent = parent || this.$getRootId();\r\n\t\t\tvar branch = this._branches[parent];\r\n\t\t\tif (branch) {\r\n\t\t\t\tfor (var i = 0; i < branch.length; i++) {\r\n\t\t\t\t\tvar itemId = branch[i];\r\n\t\t\t\t\tcode.call(this, itemId);\r\n\t\t\t\t\tif (this._branches[itemId])\r\n\t\t\t\t\t\tthis._traverseBranches(code, itemId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_updateOrder: function(code){\r\n\r\n\t\t\tthis.fullOrder = powerArray.$create();\r\n\t\t\tthis._traverseBranches(function(taskId){\r\n\t\t\t\tthis.fullOrder.push(taskId);\r\n\t\t\t});\r\n\r\n\t\t\tif(code)\r\n\t\t\t\tDataStore.prototype._updateOrder.call(this, code);\r\n\t\t},\r\n\r\n\t\t_removeItemInner: function(id){\r\n\r\n\t\t\tvar items = [];\r\n\t\t\tthis.eachItem(function(child){\r\n\t\t\t\titems.push(child);\r\n\t\t\t}, id);\r\n\r\n\t\t\titems.push(this.getItem(id));\r\n\r\n\t\t\tfor(var i = 0; i < items.length; i++){\r\n\r\n\t\t\t\tthis._move_branch(items[i], this.getParent(items[i]), null);\r\n\t\t\t\tDataStore.prototype._removeItemInner.call(this, items[i].id);\r\n\t\t\t\tthis._move_branch(items[i], this.getParent(items[i]), null);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tmove: function(sid, tindex, parent){\r\n\t\t\t//target id as 4th parameter\r\n\t\t\tvar id = arguments[3];\r\n\t\t\tif (id) {\r\n\t\t\t\tif (id === sid) return;\r\n\r\n\t\t\t\tparent = this.getParent(id);\r\n\t\t\t\ttindex = this.getBranchIndex(id);\r\n\t\t\t}\r\n\t\t\tif(sid == parent){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tparent = parent || this.$getRootId();\r\n\t\t\tvar source = this.getItem(sid);\r\n\t\t\tvar source_pid = this.getParent(source.id);\r\n\t\t\tvar sbranch = this.getChildren(this.getParent(source.id));\r\n\r\n\t\t\tvar tbranch = this.getChildren(parent);\r\n\t\t\tif (tindex == -1)\r\n\t\t\t\ttindex = tbranch.length + 1;\r\n\t\t\tif (source_pid == parent) {\r\n\t\t\t\tvar sindex = this.getBranchIndex(sid);\r\n\t\t\t\tif (sindex == tindex) return;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.callEvent(\"onBeforeItemMove\", [sid, parent, tindex]) === false)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tthis._replace_branch_child(source_pid, sid);\r\n\t\t\ttbranch = this.getChildren(parent);\r\n\r\n\t\t\tvar tid = tbranch[tindex];\r\n\t\t\tif (!tid) //adding as last element\r\n\t\t\t\ttbranch.push(sid);\r\n\t\t\telse\r\n\t\t\t\ttbranch = tbranch.slice(0, tindex).concat([ sid ]).concat(tbranch.slice(tindex));\r\n\r\n\t\t\tthis.setParent(source, parent);\r\n\t\t\tthis._branches[parent] = tbranch;\r\n\r\n\t\t\tvar diff = this.calculateItemLevel(source) - source.$level;\r\n\t\t\tsource.$level += diff;\r\n\t\t\tthis.eachItem(function(item){\r\n\t\t\t\titem.$level += diff;\r\n\t\t\t}, source.id, this);\r\n\r\n\r\n\t\t\tthis._moveInner(this.getIndexById(sid), this.getIndexById(parent) + tindex);\r\n\r\n\t\t\tthis.callEvent(\"onAfterItemMove\", [sid, parent, tindex]);\r\n\t\t\tthis.refresh();\r\n\t\t},\r\n\r\n\t\tgetBranchIndex: function(id){\r\n\t\t\tvar branch = this.getChildren(this.getParent(id));\r\n\t\t\tfor (var i = 0; i < branch.length; i++)\r\n\t\t\t\tif (branch[i] == id)\r\n\t\t\t\t\treturn i;\r\n\r\n\t\t\treturn -1;\r\n\t\t},\r\n\t\thasChild: function(id){\r\n\t\t\treturn (utils.defined(this._branches[id]) && this._branches[id].length);\r\n\t\t},\r\n\t\tgetChildren: function(id){\r\n\t\t\treturn utils.defined(this._branches[id]) ? this._branches[id] : powerArray.$create();\r\n\t\t},\r\n\r\n\t\tisChildOf: function(childId, parentId){\r\n\t\t\tif (!this.exists(childId))\r\n\t\t\t\treturn false;\r\n\t\t\tif (parentId === this.$getRootId())\r\n\t\t\t\treturn true;\r\n\r\n\t\t\tif (!this.hasChild(parentId))\r\n\t\t\t\treturn false;\r\n\r\n\t\t\tvar item = this.getItem(childId);\r\n\t\t\tvar pid = this.getParent(childId);\r\n\r\n\t\t\tvar parent = this.getItem(parentId);\r\n\t\t\tif(parent.$level >= item.$level){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\twhile (item && this.exists(pid)) {\r\n\t\t\t\titem = this.getItem(pid);\r\n\r\n\t\t\t\tif (item && item.id == parentId)\r\n\t\t\t\t\treturn true;\r\n\t\t\t\tpid = this.getParent(item);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\tgetSiblings: function(id){\r\n\t\t\tif(!this.exists(id)){\r\n\t\t\t\treturn powerArray.$create();\r\n\t\t\t}\r\n\t\t\tvar parent = this.getParent(id);\r\n\t\t\treturn this.getChildren(parent);\r\n\r\n\t\t},\r\n\t\tgetNextSibling: function(id){\r\n\t\t\tvar siblings = this.getSiblings(id);\r\n\t\t\tfor(var i= 0, len = siblings.length; i < len; i++){\r\n\t\t\t\tif(siblings[i] == id)\r\n\t\t\t\t\treturn siblings[i+1] || null;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tgetPrevSibling: function(id){\r\n\t\t\tvar siblings = this.getSiblings(id);\r\n\t\t\tfor(var i= 0, len = siblings.length; i < len; i++){\r\n\t\t\t\tif(siblings[i] == id)\r\n\t\t\t\t\treturn siblings[i-1] || null;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tgetParent: function(id){\r\n\t\t\tvar item = null;\r\n\t\t\tif(id.id !== undefined){\r\n\t\t\t\titem = id;\r\n\t\t\t}else{\r\n\t\t\t\titem = this.getItem(id);\r\n\t\t\t}\r\n\r\n\t\t\tvar parent;\r\n\t\t\tif(item){\r\n\t\t\t\tparent = item[this.$parentProperty];\r\n\t\t\t}else{\r\n\t\t\t\tparent = this.$getRootId();\r\n\t\t\t}\r\n\t\t\treturn parent;\r\n\r\n\t\t},\r\n\r\n\t\tclearAll: function(){\r\n\t\t\tthis._branches = {};\r\n\t\t\tDataStore.prototype.clearAll.call(this);\r\n\t\t},\r\n\r\n\t\tcalculateItemLevel: function(item){\r\n\t\t\tvar level = 0;\r\n\t\t\tthis.eachParent(function(){\r\n\t\t\t\tlevel++;\r\n\t\t\t}, item);\r\n\t\t\treturn level;\r\n\t\t},\r\n\r\n\t\t_setParentInner: function(item, new_pid, silent){\r\n\t\t\tif(!silent){\r\n\t\t\t\tif(item.hasOwnProperty(\"$rendered_parent\")){\r\n\t\t\t\t\tthis._move_branch(item, item.$rendered_parent, new_pid);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis._move_branch(item, item[this.$parentProperty], new_pid);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetParent: function(item, new_pid, silent){\r\n\t\t\tthis._setParentInner(item, new_pid, silent);\r\n\r\n\t\t\titem[this.$parentProperty] = new_pid;\r\n\t\t},\r\n\t\teachItem: function(code, parent){\r\n\t\t\tparent = parent || this.$getRootId();\r\n\r\n\r\n\t\t\tvar branch = this.getChildren(parent);\r\n\t\t\tif (branch)\r\n\t\t\t\tfor (var i=0; i<branch.length; i++){\r\n\t\t\t\t\tvar item = this.pull[branch[i]];\r\n\t\t\t\t\tcode.call(this, item);\r\n\t\t\t\t\tif (this.hasChild(item.id))\r\n\t\t\t\t\t\tthis.eachItem(code, item.id);\r\n\t\t\t\t}\r\n\t\t},\r\n\t\teachParent: function(code, startItem){\r\n\t\t\tvar item = startItem;\r\n\t\t\tvar parent = this.getParent(item);\r\n\t\t\twhile (this.exists(parent)) {\r\n\t\t\t\titem = this.getItem(parent);\r\n\t\t\t\tcode.call(this, item);\r\n\t\t\t\tparent = this.getParent(item);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_add_branch: function(item, index, parent){\r\n\t\t\tvar pid = parent === undefined ? this.getParent(item) : parent;\r\n\t\t\tif (!this.hasChild(pid))\r\n\t\t\t\tthis._branches[pid] = powerArray.$create();\r\n\t\t\tvar branch = this.getChildren(pid);\r\n\t\t\tvar added_already = false;\r\n\t\t\tfor(var i = 0, length = branch.length; i < length; i++){\r\n\t\t\t\tif(branch[i] == item.id){\r\n\t\t\t\t\tadded_already = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(!added_already){\r\n\t\t\t\tif(index*1 == index){\r\n\r\n\t\t\t\t\tbranch.splice(index, 0, item.id);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbranch.push(item.id);\r\n\t\t\t\t}\r\n\r\n\t\t\t\titem.$rendered_parent = pid;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_move_branch: function(item, old_parent, new_parent){\r\n\t\t\t//this.setParent(item, new_parent);\r\n\t\t\t//this._sync_parent(task);\r\n\t\t\tthis._replace_branch_child(old_parent, item.id);\r\n\t\t\tif(this.exists(new_parent) || new_parent == this.$getRootId()){\r\n\r\n\t\t\t\tthis._add_branch(item, undefined, new_parent);\r\n\t\t\t}else{\r\n\t\t\t\tdelete this._branches[item.id];\r\n\t\t\t}\r\n\t\t\titem.$level =  this.calculateItemLevel(item);\r\n\t\t\tthis.eachItem(function(child){\r\n\t\t\t\tchild.$level = this.calculateItemLevel(child);\r\n\t\t\t}, item.id);\r\n\t\t},\r\n\r\n\t\t_replace_branch_child: function(node, old_id, new_id){\r\n\t\t\tvar branch = this.getChildren(node);\r\n\t\t\tif (branch && node !== undefined){\r\n\t\t\t\tvar newbranch = powerArray.$create();\r\n\t\t\t\tfor (var i=0; i<branch.length; i++){\r\n\t\t\t\t\tif (branch[i] != old_id)\r\n\t\t\t\t\t\tnewbranch.push(branch[i]);\r\n\t\t\t\t\telse if (new_id)\r\n\t\t\t\t\t\tnewbranch.push(new_id);\r\n\t\t\t\t}\r\n\t\t\t\tthis._branches[node] = newbranch;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tsort: function(field, desc, parent){\r\n\t\t\tif (!this.exists(parent)) {\r\n\t\t\t\tparent = this.$getRootId();\r\n\t\t\t}\r\n\r\n\t\t\tif (!field) field = \"order\";\r\n\t\t\tvar criteria = (typeof(field) == \"string\") ? (function(a, b) {\r\n\t\t\t\tif(a[field] == b[field]){\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar result = a[field] > b[field];\r\n\t\t\t\treturn result ? 1 : -1;\r\n\t\t\t}) : field;\r\n\r\n\t\t\tif (desc) {\r\n\t\t\t\tvar original_criteria = criteria;\r\n\t\t\t\tcriteria = function (a, b) {\r\n\t\t\t\t\treturn original_criteria(b, a);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tvar els = this.getChildren(parent);\r\n\t\t\tif (els){\r\n\t\t\t\tvar temp = [];\r\n\t\t\t\tfor (var i = els.length - 1; i >= 0; i--)\r\n\t\t\t\t\ttemp[i] = this.getItem(els[i]);\r\n\r\n\t\t\t\ttemp.sort(criteria);\r\n\r\n\t\t\t\tfor (var i = 0; i < temp.length; i++) {\r\n\t\t\t\t\tels[i] = temp[i].id;\r\n\t\t\t\t\tthis.sort(field, desc, els[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tfilter: function(rule){\r\n\t\t\tfor(var i  in this.pull){\r\n\t\t\t\tif(this.pull[i].$rendered_parent !== this.getParent(this.pull[i])){\r\n\t\t\t\t\tthis._move_branch(this.pull[i], this.pull[i].$rendered_parent, this.getParent(this.pull[i]));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn DataStore.prototype.filter.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\topen: function(id){\r\n\t\t\tif(this.exists(id)){\r\n\t\t\t\tthis.getItem(id).$open = true;\r\n\t\t\t\tthis.callEvent(\"onItemOpen\", [id]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tclose: function(id){\r\n\t\t\tif(this.exists(id)){\r\n\t\t\t\tthis.getItem(id).$open = false;\r\n\t\t\t\tthis.callEvent(\"onItemClose\", [id]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tdestructor: function(){\r\n\t\t\tDataStore.prototype.destructor.call(this);\r\n\t\t\tthis._branches = null;\r\n\t\t}\r\n\t},\r\n\tDataStore.prototype\r\n);\r\n\r\nmodule.exports = TreeDataStore;\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar ScaleHelper = __webpack_require__(14);\r\n\r\n\r\nfunction dateRangeResolver(gantt){\r\n\t//reset project timing\r\n\t//_get_tasks_data(gantt);\r\n\treturn gantt.getSubtaskDates();\r\n}\r\n\r\nfunction defaultRangeResolver(){\r\n\treturn {\r\n\t\tstart_date: new Date(),\r\n\t\tend_date: new Date()\r\n\t};\r\n}\r\n\r\nfunction resolveConfigRange(unit, gantt){\r\n\tvar range = {\r\n\t\tstart_date:null,\r\n\t\tend_date:null\r\n\t};\r\n\r\n\tif (gantt.config.start_date && gantt.config.end_date) {\r\n\t\trange.start_date = gantt.date[unit + \"_start\"](new Date(gantt.config.start_date));\r\n\r\n\t\tvar end = new Date(gantt.config.end_date);\r\n\t\tvar start_interval = gantt.date[unit + \"_start\"](new Date(end));\r\n\t\tif (+end != +start_interval) {\r\n\t\t\tend = gantt.date.add(start_interval, 1, unit);\r\n\t\t} else {\r\n\t\t\tend = start_interval;\r\n\t\t}\r\n\r\n\t\trange.end_date = end;\r\n\t}\r\n\treturn range;\r\n}\r\n\r\nfunction _scale_range_unit(gantt) {\r\n\tvar unit = gantt.config.scale_unit;\r\n\tvar step = gantt.config.step;\r\n\tif (gantt.config.scale_offset_minimal) {\r\n\r\n\t\tvar helper = new ScaleHelper(gantt);\r\n\t\tvar scales = [helper.primaryScale()].concat(gantt.config.subscales);\r\n\r\n\t\thelper.sortScales(scales);\r\n\t\tunit = scales[scales.length - 1].unit;\r\n\t\tstep = scales[scales.length - 1].step || 1;\r\n\t}\r\n\treturn { unit:unit, step:step };\r\n}\r\n\r\nfunction _init_tasks_range(gantt) {\r\n\tvar cfg = _scale_range_unit(gantt);\r\n\tvar unit = cfg.unit,\r\n\t\tstep = cfg.step;\r\n\tvar range = resolveConfigRange(unit, gantt);\r\n\r\n\tif(!(range.start_date && range.end_date)){\r\n\t\trange = dateRangeResolver(gantt);\r\n\t\tif(!range.start_date || !range.end_date){\r\n\t\t\trange = defaultRangeResolver(gantt);\r\n\t\t}\r\n\r\n\t\trange.start_date = gantt.date[unit + \"_start\"](range.start_date);\r\n\t\trange.start_date = gantt.calculateEndDate({\r\n\t\t\tstart_date: gantt.date[unit + \"_start\"](range.start_date),\r\n\t\t\tduration: -1,\r\n\t\t\tunit: unit,\r\n\t\t\tstep:step\r\n\t\t});//one free column before first task\r\n\r\n\t\trange.end_date = gantt.date[unit + \"_start\"](range.end_date);\r\n\t\trange.end_date = gantt.calculateEndDate({start_date: range.end_date, duration: 2, unit: unit, step:step});//one free column after last task\r\n\t}\r\n\r\n\tgantt._min_date = range.start_date;\r\n\tgantt._max_date = range.end_date;\r\n}\r\n\r\nfunction _adjust_scales(gantt) {\r\n\tif (gantt.config.fit_tasks) {\r\n\t\tvar old_min = +gantt._min_date,\r\n\t\t\told_max = +gantt._max_date;\r\n\t\t//this._init_tasks_range();\r\n\t\tif (+gantt._min_date != old_min || +gantt._max_date != old_max) {\r\n\t\t\tgantt.render();\r\n\r\n\t\t\tgantt.callEvent(\"onScaleAdjusted\", []);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nmodule.exports = function updateTasksRange(gantt){\r\n\t_init_tasks_range(gantt);\r\n\t_adjust_scales(gantt);\r\n};\r\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports) {\n\nfunction copyLinkIdsArray(gantt, linkIds, targetHash){\r\n\tfor(var i = 0; i < linkIds.length; i++) {\r\n\t\tif(gantt.isLinkExists(linkIds[i])){\r\n\t\t\ttargetHash[linkIds[i]] = gantt.getLink(linkIds[i]);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction copyLinkIds(gantt, task, targetHash){\r\n\tcopyLinkIdsArray(gantt, task.$source, targetHash);\r\n\tcopyLinkIdsArray(gantt, task.$target, targetHash);\r\n}\r\n\r\nfunction getSubtreeLinks(gantt, rootId){\r\n\tvar res = {};\r\n\r\n\tif(gantt.isTaskExists(rootId)){\r\n\t\tcopyLinkIds(gantt, gantt.getTask(rootId), res);\r\n\t}\r\n\r\n\tgantt.eachTask(function(child){\r\n\t\tcopyLinkIds(gantt, child, res);\r\n\t}, rootId);\r\n\r\n\treturn res;\r\n}\r\n\r\nfunction getSubtreeTasks(gantt, rootId){\r\n\tvar res = {};\r\n\r\n\tgantt.eachTask(function(child){\r\n\t\tres[child.id] = child;\r\n\t}, rootId);\r\n\r\n\treturn res;\r\n}\r\n\r\nmodule.exports = {\r\n\tgetSubtreeLinks: getSubtreeLinks,\r\n\tgetSubtreeTasks: getSubtreeTasks\r\n};\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\nvar dateHelper = __webpack_require__(4);\r\n\r\n\r\nfunction IsWorkTimeArgument(date, unit, task, id, calendar){\r\n\tthis.date = date;\r\n\tthis.unit = unit;\r\n\tthis.task = task;\r\n\tthis.id = id;\r\n\tthis.calendar = calendar;\r\n\treturn this;\r\n}\r\n\r\nfunction ClosestWorkTimeArgument(date, dir, unit, task, id, calendar){\r\n\tthis.date = date;\r\n\tthis.dir = dir;\r\n\tthis.unit = unit;\r\n\tthis.task = task;\r\n\tthis.id = id;\r\n\tthis.calendar = calendar;\r\n\treturn this;\r\n}\r\n\r\nfunction CalculateEndDateArgument(start_date, duration, unit, step, task, id, calendar){\r\n\tthis.start_date = start_date;\r\n\tthis.duration = duration;\r\n\tthis.unit = unit;\r\n\tthis.step = step;\r\n\tthis.task = task;\r\n\tthis.id = id;\r\n\tthis.calendar = calendar;\r\n\treturn this;\r\n}\r\n\r\nfunction GetDurationArgument(start, end, task, calendar) {\r\n\tthis.start_date = start;\r\n\tthis.end_date = end;\r\n\tthis.task = task;\r\n\tthis.calendar = calendar;\r\n\tthis.unit = null;\r\n\tthis.step = null;\r\n\treturn this;\r\n}\r\n\r\nvar calendarArgumentsHelper = function(gantt){\r\n\treturn {\r\n\t\tgetWorkHoursArguments: function () {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (dateHelper.isDate(config)) {\r\n\t\t\t\tconfig = {\r\n\t\t\t\t\tdate: config\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tconfig = utils.mixin({}, config);\r\n\t\t\t}\r\n\t\t\treturn config;\r\n\t\t},\r\n\t\tsetWorkTimeArguments: function () {\r\n\t\t\treturn arguments[0];\r\n\t\t},\r\n\t\tunsetWorkTimeArguments: function () {\r\n\t\t\treturn arguments[0];\r\n\t\t},\r\n\t\tisWorkTimeArguments: function () {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif(config instanceof IsWorkTimeArgument){\r\n\t\t\t\treturn config;\r\n\t\t\t}\r\n\r\n\t\t\tvar processedConfig;\r\n\t\t\tif (!config.date) {\r\n\t\t\t\t//IsWorkTimeArgument(date, unit, task, id, calendar)\r\n\t\t\t\tprocessedConfig = new IsWorkTimeArgument(arguments[0], arguments[1], arguments[2], null, arguments[3]);\r\n\t\t\t} else {\r\n\t\t\t\tprocessedConfig = new IsWorkTimeArgument(config.date, config.unit, config.task, null, config.calendar);\r\n\t\t\t}\r\n\r\n\t\t\tprocessedConfig.unit = processedConfig.unit || gantt.config.duration_unit;\r\n\r\n\t\t\treturn processedConfig;\r\n\t\t},\r\n\t\tgetClosestWorkTimeArguments: function (arg) {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (config instanceof ClosestWorkTimeArgument)\r\n\t\t\t\treturn config;\r\n\r\n\t\t\tvar processedConfig;\r\n\t\t\tif (dateHelper.isDate(config)) {\r\n\t\t\t\tprocessedConfig = new ClosestWorkTimeArgument(config);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tprocessedConfig = new ClosestWorkTimeArgument(\r\n\t\t\t\t\tconfig.date,\r\n\t\t\t\t\tconfig.dir,\r\n\t\t\t\t\tconfig.unit,\r\n\t\t\t\t\tconfig.task,\r\n\t\t\t\t\tnull,//config.id,\r\n\t\t\t\t\tconfig.calendar\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tif(config.id){\r\n\t\t\t\tprocessedConfig.task = config;\r\n\t\t\t}\r\n\t\t\tprocessedConfig.dir = config.dir || 'any';\r\n\t\t\tprocessedConfig.unit = config.unit || gantt.config.duration_unit;\r\n\r\n\t\t\treturn processedConfig;\r\n\t\t},\r\n\r\n\t\t_getStartEndConfig: function (param) {\r\n\t\t\tvar argumentType = GetDurationArgument;\r\n\t\t\tvar config;\r\n\t\t\tif (param instanceof argumentType)\r\n\t\t\t\treturn param;\r\n\r\n\t\t\tif (dateHelper.isDate(param)) {\r\n\t\t\t\tconfig = new argumentType(arguments[0], arguments[1], arguments[2], arguments[3]);\r\n\t\t\t} else {\r\n\t\t\t\tconfig = new argumentType(param.start_date, param.end_date, param.task);\r\n\t\t\t\tif (param.id) {\r\n\t\t\t\t\tconfig.task = param;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconfig.unit = config.unit || gantt.config.duration_unit;\r\n\t\t\tconfig.step = config.step || gantt.config.duration_step;\r\n\t\t\tconfig.start_date = config.start_date || config.start || config.date;\r\n\r\n\t\t\treturn config;\r\n\t\t},\r\n\r\n\t\tgetDurationArguments: function (start, end, unit, step) {\r\n\t\t\treturn this._getStartEndConfig.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\thasDurationArguments: function (start, end, unit, step) {\r\n\t\t\treturn this._getStartEndConfig.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\tcalculateEndDateArguments: function (start, duration, unit, step) {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (config instanceof CalculateEndDateArgument)\r\n\t\t\t\treturn config;\r\n\r\n\t\t\tvar processedConfig;\r\n\t\t\t//CalculateEndDateArgument(start_date, duration, unit, step, task, id, calendar)\r\n\t\t\tif (dateHelper.isDate(config)) {\r\n\t\t\t\tprocessedConfig = new CalculateEndDateArgument(\r\n\t\t\t\t\targuments[0],\r\n\t\t\t\t\targuments[1],\r\n\t\t\t\t\targuments[2],\r\n\t\t\t\t\tundefined,\r\n\t\t\t\t\targuments[3],\r\n\t\t\t\t\tundefined,\r\n\t\t\t\t\targuments[4]\r\n\t\t\t\t);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tprocessedConfig = new CalculateEndDateArgument(\r\n\t\t\t\t\tconfig.start_date,\r\n\t\t\t\t\tconfig.duration,\r\n\t\t\t\t\tconfig.unit,\r\n\t\t\t\t\tconfig.step,\r\n\t\t\t\t\tconfig.task,\r\n\t\t\t\t\tnull,//config.id,\r\n\t\t\t\t\tconfig.calendar\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif(config.id){\r\n\t\t\t\tprocessedConfig.task = config;\r\n\t\t\t}\r\n\r\n\t\t\tprocessedConfig.unit = processedConfig.unit || gantt.config.duration_unit;\r\n\t\t\tprocessedConfig.step = processedConfig.step || gantt.config.duration_step;\r\n\r\n\t\t\treturn processedConfig;\r\n\t\t}\r\n\t};\r\n};\r\n\r\n\r\nmodule.exports = calendarArgumentsHelper;\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(23);\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\nwindow.Gantt = __webpack_require__(24);\r\nwindow.gantt = window.Gantt.getGanttInstance();\r\n\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Gantt = { _seed: 0 };\r\nGantt.plugin = function(code){\r\n\tthis._ganttPlugin.push(code);\r\n\tcode(window.gantt);\r\n};\r\nGantt._ganttPlugin = [];\r\nGantt.getGanttInstance = function() {\r\n\tvar gantt = __webpack_require__(25)();\r\n\tfor (var i=0; i<Gantt._ganttPlugin.length; i++) {\r\n\t\tGantt._ganttPlugin[i](gantt);\r\n\t}\r\n\tgantt._internal_id = (Gantt._seed++);\r\n\r\n\tif (Gantt.$syncFactory)\r\n\t\tGantt.$syncFactory(gantt);\r\n\r\n\t__webpack_require__(110)(gantt);\r\n\r\n\treturn gantt;\r\n};\r\n\r\nmodule.exports = Gantt;\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction DHXGantt(){\r\n\tthis.version = \"5.1.5\";\r\n\tthis.templates = {};\r\n\tthis.keys = {\r\n\t\tedit_save: 13,\r\n\t\tedit_cancel: 27\r\n\t};\r\n}\r\n\r\nmodule.exports = function() {\r\n\t// use a named constructor to make gantt instance discoverable in heap snapshots\r\n\tvar gantt = new DHXGantt();\r\n\r\n\t__webpack_require__(26)(gantt);\r\n\r\n\tgantt.$services = gantt.$inject(__webpack_require__(27));\r\n\tgantt.config = gantt.$inject(__webpack_require__(28));\r\n\tgantt.ajax =  __webpack_require__(29)(gantt);\r\n\tgantt.date = __webpack_require__(30)(gantt);\r\n\tvar dnd = __webpack_require__(31)(gantt);\r\n\tgantt.$services.setService(\"dnd\", function(){return dnd;});\r\n\r\n\tgantt.$services.setService(\"config\", function () {\r\n\t\treturn gantt.config;\r\n\t});\r\n\tgantt.$services.setService(\"date\", function () {\r\n\t\treturn gantt.date;\r\n\t});\r\n\tgantt.$services.setService(\"locale\", function () {\r\n\t\treturn gantt.locale;\r\n\t});\r\n\tgantt.$services.setService(\"templates\", function () {\r\n\t\treturn gantt.templates;\r\n\t});\r\n\r\n\tvar templatesLoader = __webpack_require__(32)(gantt);\r\n\tgantt.$services.setService(\"templateLoader\", function () {\r\n\t\treturn templatesLoader;\r\n\t});\r\n\r\n\tvar eventable = __webpack_require__(2);\r\n\teventable(gantt);\r\n\r\n\tvar StateService = __webpack_require__(33);\r\n\tvar stateService = new StateService();\r\n\r\n\tstateService.registerProvider(\"global\", function () {\r\n\t\treturn {\r\n\t\t\tmin_date: gantt._min_date,\r\n\t\t\tmax_date: gantt._max_date,\r\n\t\t\tselected_task: gantt.$data.tasksStore.getSelectedId()\r\n\t\t};\r\n\t});\r\n\tgantt.getState = stateService.getState;\r\n\tgantt.$services.setService(\"state\", function () {\r\n\t\treturn stateService;\r\n\t});\r\n\r\n\tvar utils = __webpack_require__(0);\r\n\tutils.mixin(gantt, utils);\r\n\tgantt.env = __webpack_require__(6);\r\n\r\n\tvar domEvents = __webpack_require__(11)();\r\n\tgantt.event = domEvents.attach;\r\n\tgantt.eventRemove = domEvents.detach;\r\n\tgantt._eventRemoveAll = domEvents.detachAll;\r\n\tgantt._createDomEventScope = domEvents.extend;\r\n\r\n\tutils.mixin(gantt, __webpack_require__(34)(gantt));\r\n\tvar uiApi = __webpack_require__(35).init(gantt);\r\n\tgantt.$ui = uiApi.factory;\r\n\tgantt.$ui.layers = uiApi.render;\r\n\tgantt.$mouseEvents = uiApi.mouseEvents;\r\n\tgantt.$services.setService(\"mouseEvents\", function () {\r\n\t\treturn gantt.$mouseEvents;\r\n\t});\r\n\tgantt.mixin(gantt, uiApi.layersApi);\r\n\r\n\t__webpack_require__(61)(gantt);\r\n\r\n\tgantt.$services.setService(\"layers\", function () {\r\n\t\treturn uiApi.layersService;\r\n\t});\r\n\r\n\tvar createLayoutFacade = __webpack_require__(62);\r\n\tgantt.mixin(gantt, createLayoutFacade());\r\n\r\n\t__webpack_require__(63)(gantt);\r\n\r\n\t__webpack_require__(69)(gantt);\r\n\t__webpack_require__(72)(gantt);\r\n\r\n\t__webpack_require__(79)(gantt);\r\n\t__webpack_require__(80)(gantt);\r\n\t__webpack_require__(82)(gantt);\r\n\t__webpack_require__(83)(gantt);\r\n\t__webpack_require__(84)(gantt);\r\n\t__webpack_require__(85)(gantt);\r\n\t__webpack_require__(92)(gantt);\r\n\t__webpack_require__(93)(gantt);\r\n\t__webpack_require__(94)(gantt);\r\n\t__webpack_require__(95)(gantt);\r\n\t__webpack_require__(96)(gantt);\r\n\t__webpack_require__(97)(gantt);\r\n\t__webpack_require__(98)(gantt);\r\n\t__webpack_require__(99)(gantt);\r\n\t__webpack_require__(100)(gantt);\r\n\t__webpack_require__(101)(gantt);\r\n\t__webpack_require__(102)(gantt);\r\n\t__webpack_require__(103)(gantt);\r\n\t__webpack_require__(104)(gantt);\r\n\t__webpack_require__(105)(gantt);\r\n\t__webpack_require__(106)(gantt);\r\n\t__webpack_require__(107)(gantt);\r\n\t__webpack_require__(109)(gantt);\r\n\r\n\treturn gantt;\r\n};\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt){\r\n\tgantt.$inject = function(module){\r\n\t\treturn module(this.$services);\r\n\t};\r\n};\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(){\r\n\tvar services = {};\r\n\tfunction register (name, getter){\r\n\t\tservices[name] = getter;\r\n\t}\r\n\r\n\tfunction getService(name){\r\n\t\tif(!services[name]){\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn services[name]();\r\n\t}\r\n\r\n\tvar servicesEnum = {\r\n\t\t\"config\": \"config\",\r\n\t\t\"templates\": \"templates\",\r\n\t\t\"locale\": \"locale\"\r\n\t};\r\n\r\n\treturn {\r\n\t\tservices: servicesEnum,\r\n\t\tsetService: register,\r\n\t\tgetService: getService,\r\n\t\tconfig: function(){\r\n\t\t\treturn this.getService(\"config\");\r\n\t\t},\r\n\t\ttemplates: function(){\r\n\t\t\treturn this.getService(\"templates\");\r\n\t\t},\r\n\t\tlocale: function(){\r\n\t\t\treturn this.getService(\"locale\");\r\n\t\t},\r\n\t\tdestructor: function(){\r\n\t\t\tfor(var i in services){\r\n\t\t\t\tif(services[i]){\r\n\t\t\t\t\tvar service = services[i];\r\n\t\t\t\t\tif(service && service.destructor){\r\n\t\t\t\t\t\tservice.destructor();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tservices = null;\r\n\t\t}\r\n\t};\r\n};\r\n\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports) {\n\nmodule.exports = function() {\r\n\treturn {\r\n\t\tlayout: {\r\n\t\t\tcss: \"gantt_container\",\r\n\t\t\trows: [\r\n\t\t\t\t{\r\n\t\t\t\t\tcols: [\r\n\t\t\t\t\t\t{view: \"grid\", scrollX: \"scrollHor\", scrollY: \"scrollVer\"},\r\n\t\t\t\t\t\t{resizer: true, width: 1},\r\n\t\t\t\t\t\t{view: \"timeline\", scrollX: \"scrollHor\", scrollY: \"scrollVer\"},\r\n\t\t\t\t\t\t{view: \"scrollbar\", id: \"scrollVer\"}\r\n\t\t\t\t\t]\r\n\r\n\t\t\t\t},\r\n\t\t\t\t{view: \"scrollbar\", id: \"scrollHor\", height: 20}\r\n\t\t\t]\r\n\t\t},\r\n\t\tlinks: {\r\n\t\t\t\"finish_to_start\": \"0\",\r\n\t\t\t\"start_to_start\": \"1\",\r\n\t\t\t\"finish_to_finish\": \"2\",\r\n\t\t\t\"start_to_finish\": \"3\"\r\n\t\t},\r\n\t\ttypes: {\r\n\t\t\t'task': 'task',\r\n\t\t\t'project': 'project',\r\n\t\t\t'milestone': 'milestone'\r\n\t\t},\r\n\t\tduration_unit: \"day\",\r\n\t\twork_time: false,\r\n\t\tcorrect_work_time: false,\r\n\t\tskip_off_time: false,\r\n\r\n\t\tcascade_delete: true,\r\n\r\n\t\tautosize: false,\r\n\t\tautosize_min_width: 0,\r\n\t\tautoscroll: true,\r\n\t\tautoscroll_speed: 30,\r\n\r\n\t\tshow_links: true,\r\n\t\tshow_task_cells: true,\r\n\t\t// replace backgroung of the task area with a canvas img\r\n\t\tstatic_background: false,\r\n\t\tbranch_loading: false,\r\n\t\tbranch_loading_property: \"$has_child\",\r\n\t\tshow_loading: false,\r\n\t\tshow_chart: true,\r\n\t\tshow_grid: true,\r\n\t\tmin_duration: 60 * 60 * 1000,\r\n\t\txml_date: \"%d-%m-%Y %H:%i\",\r\n\t\tapi_date: \"%d-%m-%Y %H:%i\",\r\n\t\tstart_on_monday: true,\r\n\t\tserver_utc: false,\r\n\t\tshow_progress: true,\r\n\t\tfit_tasks: false,\r\n\t\tselect_task: true,\r\n\t\tscroll_on_click: true,\r\n\t\tpreserve_scroll: true,\r\n\t\treadonly: false,\r\n\r\n\t\t/*grid */\r\n\t\tdate_grid: \"%Y-%m-%d\",\r\n\r\n\t\tdrag_links: true,\r\n\t\tdrag_progress: true,\r\n\t\tdrag_resize: true,\r\n\t\tdrag_project: false,\r\n\t\tdrag_move: true,\r\n\t\tdrag_mode: {\r\n\t\t\t\"resize\": \"resize\",\r\n\t\t\t\"progress\": \"progress\",\r\n\t\t\t\"move\": \"move\",\r\n\t\t\t\"ignore\": \"ignore\"\r\n\t\t},\r\n\t\tround_dnd_dates: true,\r\n\t\tlink_wrapper_width: 20,\r\n\t\troot_id: 0,\r\n\r\n\t\tautofit: false, // grid column automatic fit grid_width config\r\n\t\tcolumns: [\r\n\t\t\t{name: \"text\", tree: true, width: '*', resize: true},\r\n\t\t\t{name: \"start_date\", align: \"center\", resize: true},\r\n\t\t\t{name: \"duration\", align: \"center\"},\r\n\t\t\t{name: \"add\", width: 44}\r\n\t\t],\r\n\r\n\t\t/*scale*/\r\n\t\tstep: 1,\r\n\t\tscale_unit: \"day\",\r\n\t\tscale_offset_minimal: true,\r\n\t\tsubscales: [],\r\n\r\n\t\tinherit_scale_class: false,\r\n\r\n\t\ttime_step: 60,\r\n\t\tduration_step: 1,\r\n\t\tdate_scale: \"%d %M\",\r\n\t\ttask_date: \"%d %F %Y\",\r\n\t\ttime_picker: \"%H:%i\",\r\n\t\ttask_attribute: \"task_id\",\r\n\t\tlink_attribute: \"link_id\",\r\n\t\tlayer_attribute: \"data-layer\",\r\n\t\tbuttons_left: [\r\n\t\t\t\"gantt_save_btn\",\r\n\t\t\t\"gantt_cancel_btn\"\r\n\t\t],\r\n\t\t_migrate_buttons: {\r\n\t\t\t\"dhx_save_btn\": \"gantt_save_btn\",\r\n\t\t\t\"dhx_cancel_btn\": \"gantt_cancel_btn\",\r\n\t\t\t\"dhx_delete_btn\": \"gantt_delete_btn\"\r\n\t\t},\r\n\t\tbuttons_right: [\r\n\t\t\t\"gantt_delete_btn\"\r\n\t\t],\r\n\t\tlightbox: {\r\n\t\t\tsections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"time\", type: \"duration\", map_to: \"auto\"}\r\n\t\t\t],\r\n\t\t\tproject_sections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"type\", type: \"typeselect\", map_to: \"type\"},\r\n\t\t\t\t{name: \"time\", type: \"duration\", readonly: true, map_to: \"auto\"}\r\n\t\t\t],\r\n\t\t\tmilestone_sections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"type\", type: \"typeselect\", map_to: \"type\"},\r\n\t\t\t\t{name: \"time\", type: \"duration\", single_date: true, map_to: \"auto\"}\r\n\t\t\t]\r\n\t\t},\r\n\t\tdrag_lightbox: true,\r\n\t\tsort: false,\r\n\t\tdetails_on_create: true,\r\n\t\tdetails_on_dblclick: true,\r\n\t\tinitial_scroll: true,\r\n\t\ttask_scroll_offset: 100,\r\n\r\n\t\torder_branch: false,\r\n\t\torder_branch_free: false,\r\n\r\n\t\ttask_height: \"full\",//number px of 'full' for row height\r\n\t\tmin_column_width: 70,\r\n\r\n\t\t// min width for grid column (when resizing)\r\n\t\tmin_grid_column_width: 70,\r\n\t\t// name of the attribute with column index for resize element\r\n\t\tgrid_resizer_column_attribute: \"column_index\",\r\n\t\t// name of the attribute with column index for resize element\r\n\t\tgrid_resizer_attribute: \"grid_resizer\",\r\n\r\n\t\t// grid width can be increased after the column has been resized\r\n\t\tkeep_grid_width: false,\r\n\r\n\t\t// grid width can be adjusted\r\n\t\tgrid_resize: false,\r\n\r\n\t\tshow_unscheduled: true,\r\n\r\n\t\t//\r\n\t\treadonly_property: \"readonly\",\r\n\t\teditable_property: \"editable\",\r\n\t\tcalendar_property: \"calendar_id\",\r\n\t\tresource_calendars: {},\r\n\r\n\t\ttype_renderers: {},\r\n\r\n\t\topen_tree_initially: false,\r\n\t\toptimize_render: true,\r\n\t\tprevent_default_scroll: false,\r\n\t\tshow_errors: true,\r\n\t\twai_aria_attributes: true,\r\n\t\tsmart_scales: true,\r\n\t\trtl:false\r\n\t};\r\n};\r\n\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar env = __webpack_require__(6);\r\n\r\nmodule.exports = function(gantt){\r\n\treturn {\r\n\r\n\t\t// if false - dhxr param will added to prevent caching on client side (default),\r\n\t\t// if true - do not add extra params\r\n\t\tcache: true,\r\n\r\n\t\t// default method for load/loadStruct, post/get allowed\r\n\t\t// get - since 4.1.1, this should fix 412 error for macos safari\r\n\t\tmethod: \"get\",\r\n\r\n\t\tparse: function(data) {\r\n\t\t\tif (typeof data !== \"string\") return data;\r\n\r\n\t\t\tvar obj;\r\n\t\t\tdata = data.replace(/^[\\s]+/,\"\");\r\n\t\t\tif (window.DOMParser && !env.isIE) { // ff,ie9\r\n\t\t\t\tobj = (new window.DOMParser()).parseFromString(data, \"text/xml\");\r\n\t\t\t} else if (window.ActiveXObject !== window.undefined) {\r\n\t\t\t\tobj = new window.ActiveXObject(\"Microsoft.XMLDOM\");\r\n\t\t\t\tobj.async = \"false\";\r\n\t\t\t\tobj.loadXML(data);\r\n\t\t\t}\r\n\t\t\treturn obj;\r\n\t\t},\r\n\t\txmltop: function(tagname, xhr, obj) {\r\n\t\t\tif (typeof xhr.status == \"undefined\" || xhr.status < 400) {\r\n\t\t\t\tvar xml = (!xhr.responseXML) ? this.parse(xhr.responseText || xhr) : (xhr.responseXML || xhr);\r\n\t\t\t\tif (xml && xml.documentElement !== null && !xml.getElementsByTagName(\"parsererror\").length) {\r\n\t\t\t\t\treturn xml.getElementsByTagName(tagname)[0];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (obj !== -1) gantt.callEvent(\"onLoadXMLError\",[\"Incorrect XML\", arguments[1], obj]);\r\n\t\t\treturn document.createElement(\"DIV\");\r\n\t\t},\r\n\t\txpath: function(xpathExp, docObj) {\r\n\t\t\tif (!docObj.nodeName) docObj = docObj.responseXML || docObj;\r\n\t\t\tif (env.isIE) {\r\n\t\t\t\treturn docObj.selectNodes(xpathExp)||[];\r\n\t\t\t} else {\r\n\t\t\t\tvar rows = [];\r\n\t\t\t\tvar first;\r\n\t\t\t\tvar col = (docObj.ownerDocument||docObj).evaluate(xpathExp, docObj, null, XPathResult.ANY_TYPE, null);\r\n\r\n\t\t\t\twhile (true){\r\n\t\t\t\t\tfirst = col.iterateNext();\r\n\t\t\t\t\tif(first){\r\n\t\t\t\t\t\trows.push(first);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn rows;\r\n\t\t\t}\r\n\t\t},\r\n\t\tquery: function(config) {\r\n\t\t\tthis._call(\r\n\t\t\t\t(config.method || \"GET\"),\r\n\t\t\t\tconfig.url,\r\n\t\t\t\tconfig.data || \"\",\r\n\t\t\t\t(config.async || true),\r\n\t\t\t\tconfig.callback,\r\n\t\t\t\tnull,\r\n\t\t\t\tconfig.headers\r\n\t\t\t);\r\n\t\t},\r\n\t\tget: function(url, onLoad) {\r\n\t\t\tthis._call(\"GET\", url, null, true, onLoad);\r\n\t\t},\r\n\t\tgetSync: function(url) {\r\n\t\t\treturn this._call(\"GET\", url, null, false);\r\n\t\t},\r\n\t\tput: function(url, postData, onLoad) {\r\n\t\t\tthis._call(\"PUT\", url, postData, true, onLoad);\r\n\t\t},\r\n\t\tdel: function(url, postData, onLoad) {\r\n\t\t\tthis._call(\"DELETE\", url, postData, true, onLoad);\r\n\t\t},\r\n\t\tpost: function(url, postData, onLoad) {\r\n\t\t\tif (arguments.length == 1) {\r\n\t\t\t\tpostData = \"\";\r\n\t\t\t} else if (arguments.length == 2 && (typeof(postData) == \"function\" || typeof(window[postData]) == \"function\")) {\r\n\t\t\t\tonLoad = postData;\r\n\t\t\t\tpostData = \"\";\r\n\t\t\t} else {\r\n\t\t\t\tpostData = String(postData);\r\n\t\t\t}\r\n\t\t\tthis._call(\"POST\", url, postData, true, onLoad);\r\n\t\t},\r\n\t\tpostSync: function(url, postData) {\r\n\t\t\tpostData = (postData === null ? \"\" : String(postData));\r\n\t\t\treturn this._call(\"POST\", url, postData, false);\r\n\t\t},\r\n\t\tgetLong: function(url, onLoad) {\r\n\t\t\tthis._call(\"GET\", url, null, true, onLoad, {url:url});\r\n\t\t},\r\n\t\tpostLong: function(url, postData, onLoad) {\r\n\t\t\tif (arguments.length == 2 && (typeof(postData) == \"function\" || typeof(window[postData]))) {\r\n\t\t\t\tonLoad = postData;\r\n\t\t\t\tpostData = \"\";\r\n\t\t\t}\r\n\t\t\tthis._call(\"POST\", url, postData, true, onLoad, {url:url, postData:postData});\r\n\t\t},\r\n\t\t_call: function(method, url, postData, async, onLoad, longParams, headers) {\r\n\r\n\t\t\tvar t = (window.XMLHttpRequest && !env.isIE ? new XMLHttpRequest() : new ActiveXObject(\"Microsoft.XMLHTTP\"));\r\n\t\t\tvar isQt = (navigator.userAgent.match(/AppleWebKit/) !== null && navigator.userAgent.match(/Qt/) !== null && navigator.userAgent.match(/Safari/) !== null);\r\n\r\n\t\t\tif (!!async) {\r\n\t\t\t\tt.onreadystatechange = function() {\r\n\t\t\t\t\tif ((t.readyState == 4) || (isQt && t.readyState == 3)) { // what for long response and status 404?\r\n\t\t\t\t\t\tif (t.status != 200 || t.responseText === \"\")\r\n\t\t\t\t\t\t\tif (!gantt.callEvent(\"onAjaxError\", [t])) return;\r\n\r\n\t\t\t\t\t\twindow.setTimeout(function(){\r\n\t\t\t\t\t\t\tif (typeof(onLoad) == \"function\") {\r\n\t\t\t\t\t\t\t\tonLoad.apply(window, [{xmlDoc:t, filePath:url}]); // dhtmlx-compat, response.xmlDoc.responseXML/responseText\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (longParams) {\r\n\t\t\t\t\t\t\t\tif (typeof(longParams.postData) != \"undefined\") {\r\n\t\t\t\t\t\t\t\t\tthis.postLong(longParams.url, longParams.postData, onLoad);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.getLong(longParams.url, onLoad);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonLoad = null;\r\n\t\t\t\t\t\t\tt = null;\r\n\t\t\t\t\t\t},1);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tif (method == \"GET\" && !this.cache) {\r\n\t\t\t\turl += (url.indexOf(\"?\")>=0?\"&\":\"?\")+\"dhxr\"+new Date().getTime()+\"=1\";\r\n\t\t\t}\r\n\r\n\t\t\tt.open(method, url, async);\r\n\r\n\t\t\tif (headers){\r\n\t\t\t\tfor (var key in headers)\r\n\t\t\t\t\tt.setRequestHeader(key, headers[key]);\r\n\t\t\t} else if (method.toUpperCase() == \"POST\" || method == \"PUT\" || method == \"DELETE\") {\r\n\t\t\t\tt.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n\t\t\t} else if (method == \"GET\") {\r\n\t\t\t\tpostData = null;\r\n\t\t\t}\r\n\r\n\t\t\tt.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\r\n\r\n\t\t\tt.send(postData);\r\n\r\n\t\t\tif (!async) return {xmlDoc:t, filePath:url}; // dhtmlx-compat, response.xmlDoc.responseXML/responseText\r\n\r\n\t\t},\r\n\t\turlSeparator: function(str){\r\n\t\t\tif (str.indexOf(\"?\") != -1)\r\n\t\t\t\treturn \"&\";\r\n\t\t\telse\r\n\t\t\t\treturn \"?\";\r\n\t\t}\r\n\t};\r\n};\r\n\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports) {\n\n/*\r\n %d - the day as a number with a leading zero ( 01 to 31 );\r\n %j - the day as a number without a leading zero ( 1 to 31 );\r\n %D - the day as an abbreviation ( Sun to Sat );\r\n %l - the day as a full name ( Sunday to Saturday );\r\n %W - the ISO-8601 week number of the year. Weeks start on Monday; 1)\r\n %m - the month as a number without a leading zero ( 1 to 12 );\r\n %n - the month as a number with a leading zero ( 01 to 12);\r\n %M - the month as an abbreviation ( Jan to Dec );\r\n %F - the month as a full name ( January to December );\r\n %y - the year as a two-digit number ( 00 to 99 );\r\n %Y - the year as a four-digit number ( 19009999 );\r\n %h - the hour based on the 12-hour clock ( 00 to 11 );\r\n %H - the hour based on the 24-hour clock ( 00 to 23 );\r\n %i - the minute as a number with a leading zero ( 00 to 59 );\r\n %s - the second as a number without a leading zero ( 00 to 59 ); 2)\r\n %a - displays am (for times from midnight until noon) and pm (for times from noon until midnight);\r\n %A - displays AM (for times from midnight until noon) and PM (for times from noon until midnight).\r\n*/\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar dateHelper = {\r\n\t\tinit: function () {\r\n\t\t\tvar locale = gantt.locale;\r\n\r\n\t\t\tvar s = locale.date.month_short;\r\n\t\t\tvar t = locale.date.month_short_hash = {};\r\n\t\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\t\tt[s[i]] = i;\r\n\r\n\t\t\tvar s = locale.date.month_full;\r\n\t\t\tvar t = locale.date.month_full_hash = {};\r\n\t\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\t\tt[s[i]] = i;\r\n\t\t},\r\n\t\tdate_part: function (date) {\r\n\t\t\tvar old = new Date(date);\r\n\t\t\tdate.setHours(0);\r\n\t\t\tthis.hour_start(date);\r\n\t\t\tif (date.getHours() && //shift to yesterday on dst\r\n\t\t\t\t(date.getDate() < old.getDate() || date.getMonth() < old.getMonth() || date.getFullYear() < old.getFullYear()))\r\n\t\t\t\tdate.setTime(date.getTime() + 60 * 60 * 1000 * (24 - date.getHours()));\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\ttime_part: function (date) {\r\n\t\t\treturn (date.valueOf() / 1000 - date.getTimezoneOffset() * 60) % 86400;\r\n\t\t},\r\n\t\tweek_start: function (date) {\r\n\t\t\tvar shift = date.getDay();\r\n\t\t\tif (gantt.config.start_on_monday) {\r\n\t\t\t\tif (shift === 0) shift = 6;\r\n\t\t\t\telse shift--;\r\n\t\t\t}\r\n\t\t\treturn this.date_part(this.add(date, -1 * shift, \"day\"));\r\n\t\t},\r\n\t\tmonth_start: function (date) {\r\n\t\t\tdate.setDate(1);\r\n\t\t\treturn this.date_part(date);\r\n\t\t},\r\n\t\tquarter_start: function (date) {\r\n\t\t\tthis.month_start(date);\r\n\t\t\tvar m = date.getMonth(),\r\n\t\t\t\tres_month;\r\n\r\n\t\t\tif (m >= 9) {\r\n\t\t\t\tres_month = 9;\r\n\t\t\t} else if (m >= 6) {\r\n\t\t\t\tres_month = 6;\r\n\t\t\t} else if (m >= 3) {\r\n\t\t\t\tres_month = 3;\r\n\t\t\t} else {\r\n\t\t\t\tres_month = 0;\r\n\t\t\t}\r\n\r\n\t\t\tdate.setMonth(res_month);\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\tyear_start: function (date) {\r\n\t\t\tdate.setMonth(0);\r\n\t\t\treturn this.month_start(date);\r\n\t\t},\r\n\t\tday_start: function (date) {\r\n\t\t\treturn this.date_part(date);\r\n\t\t},\r\n\t\thour_start: function (date) {\r\n\t\t\tif (date.getMinutes())\r\n\t\t\t\tdate.setMinutes(0);\r\n\t\t\tthis.minute_start(date);\r\n\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\tminute_start: function (date) {\r\n\t\t\tif (date.getSeconds())\r\n\t\t\t\tdate.setSeconds(0);\r\n\t\t\tif (date.getMilliseconds())\r\n\t\t\t\tdate.setMilliseconds(0);\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\t_add_days: function (date, inc) {\r\n\t\t\tvar ndate = new Date(date.valueOf());\r\n\r\n\t\t\tndate.setDate(ndate.getDate() + inc);\r\n\t\t\tif (inc >= 0 && (!date.getHours() && ndate.getHours()) &&//shift to yesterday on dst\r\n\t\t\t\t(ndate.getDate() <= date.getDate() || ndate.getMonth() < date.getMonth() || ndate.getFullYear() < date.getFullYear()))\r\n\t\t\t\tndate.setTime(ndate.getTime() + 60 * 60 * 1000 * (24 - ndate.getHours()));\r\n\t\t\treturn ndate;\r\n\t\t},\r\n\r\n\t\tadd: function (date, inc, mode) {\r\n\t\t\t/*jsl:ignore*/\r\n\t\t\tvar ndate = new Date(date.valueOf());\r\n\t\t\tswitch (mode) {\r\n\t\t\t\tcase \"day\":\r\n\t\t\t\t\tndate = this._add_days(ndate, inc);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"week\":\r\n\t\t\t\t\tndate = this._add_days(ndate, inc * 7);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"month\":\r\n\t\t\t\t\tndate.setMonth(ndate.getMonth() + inc);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"year\":\r\n\t\t\t\t\tndate.setYear(ndate.getFullYear() + inc);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"hour\":\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t\tadding hours/minutes via setHour(getHour() + inc) gives weird result when\r\n\t\t\t\t\t\tadding one hour to the time before switch to a Daylight Saving time\r\n\r\n\t\t\t\t\t\texample: //Sun Mar 30 2014 01:00:00 GMT+0100 (W. Europe Standard Time)\r\n\t\t\t\t\t\tnew Date(2014, 02, 30, 1).setHours(2)\r\n\t\t\t\t\t\t>>Sun Mar 30 2014 01:00:00 GMT+0100 (W. Europe Standard Time)\r\n\r\n\t\t\t\t\t\tsetTime seems working as expected\r\n\t\t\t\t\t */\r\n\t\t\t\t\tndate.setTime(ndate.getTime() + inc * 60 * 60 * 1000);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"minute\":\r\n\r\n\t\t\t\t\tndate.setTime(ndate.getTime() + inc * 60 * 1000);\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn this[\"add_\" + mode](date, inc, mode);\r\n\t\t\t}\r\n\t\t\treturn ndate;\r\n\t\t\t/*jsl:end*/\r\n\t\t},\r\n\t\tadd_quarter: function (date, inc) {\r\n\t\t\treturn this.add(date, inc * 3, \"month\");\r\n\t\t},\r\n\r\n\t\tto_fixed: function (num) {\r\n\t\t\tif (num < 10) return \"0\" + num;\r\n\t\t\treturn num;\r\n\t\t},\r\n\t\tcopy: function (date) {\r\n\t\t\treturn new Date(date.valueOf());\r\n\t\t},\r\n\t\tdate_to_str: function (format, utc) {\r\n\t\t\tformat = format.replace(/%[a-zA-Z]/g, function (a) {\r\n\t\t\t\tswitch (a) {\r\n\t\t\t\t\tcase \"%d\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getDate())+\\\"\";\r\n\t\t\t\t\tcase \"%m\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed((date.getMonth()+1))+\\\"\";\r\n\t\t\t\t\tcase \"%j\":\r\n\t\t\t\t\t\treturn \"\\\"+date.getDate()+\\\"\";\r\n\t\t\t\t\tcase \"%n\":\r\n\t\t\t\t\t\treturn \"\\\"+(date.getMonth()+1)+\\\"\";\r\n\t\t\t\t\tcase \"%y\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getFullYear()%100)+\\\"\";\r\n\t\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\t\treturn \"\\\"+date.getFullYear()+\\\"\";\r\n\t\t\t\t\tcase \"%D\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.day_short[date.getDay()]+\\\"\";\r\n\t\t\t\t\tcase \"%l\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.day_full[date.getDay()]+\\\"\";\r\n\t\t\t\t\tcase \"%M\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.month_short[date.getMonth()]+\\\"\";\r\n\t\t\t\t\tcase \"%F\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.month_full[date.getMonth()]+\\\"\";\r\n\t\t\t\t\tcase \"%h\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed((date.getHours()+11)%12+1)+\\\"\";\r\n\t\t\t\t\tcase \"%g\":\r\n\t\t\t\t\t\treturn \"\\\"+((date.getHours()+11)%12+1)+\\\"\";\r\n\t\t\t\t\tcase \"%G\":\r\n\t\t\t\t\t\treturn \"\\\"+date.getHours()+\\\"\";\r\n\t\t\t\t\tcase \"%H\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getHours())+\\\"\";\r\n\t\t\t\t\tcase \"%i\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getMinutes())+\\\"\";\r\n\t\t\t\t\tcase \"%a\":\r\n\t\t\t\t\t\treturn \"\\\"+(date.getHours()>11?\\\"pm\\\":\\\"am\\\")+\\\"\";\r\n\t\t\t\t\tcase \"%A\":\r\n\t\t\t\t\t\treturn \"\\\"+(date.getHours()>11?\\\"PM\\\":\\\"AM\\\")+\\\"\";\r\n\t\t\t\t\tcase \"%s\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getSeconds())+\\\"\";\r\n\t\t\t\t\tcase \"%W\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(getISOWeek(date))+\\\"\";\r\n\t\t\t\t\tcase \"%w\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(getWeek(date))+\\\"\";\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn a;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (utc) format = format.replace(/date\\.get/g, \"date.getUTC\");\r\n\t\t\tvar dateToStr = new Function(\"date\", \"to_fixed\", \"locale\", \"getISOWeek\", \"getWeek\", \"return \\\"\" + format + \"\\\";\");\r\n\r\n\t\t\treturn function (date) {\r\n\t\t\t\treturn dateToStr(date, dateHelper.to_fixed, gantt.locale, dateHelper.getISOWeek, dateHelper.getWeek);\r\n\t\t\t};\r\n\t\t},\r\n\t\tstr_to_date: function (format, utc) {\r\n\t\t\tvar splt = \"var temp=date.match(/[a-zA-Z]+|[0-9]+/g);\";\r\n\t\t\tvar mask = format.match(/%[a-zA-Z]/g);\r\n\t\t\tfor (var i = 0; i < mask.length; i++) {\r\n\t\t\t\tswitch (mask[i]) {\r\n\t\t\t\t\tcase \"%j\":\r\n\t\t\t\t\tcase \"%d\":\r\n\t\t\t\t\t\tsplt += \"set[2]=temp[\" + i + \"]||1;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%n\":\r\n\t\t\t\t\tcase \"%m\":\r\n\t\t\t\t\t\tsplt += \"set[1]=(temp[\" + i + \"]||1)-1;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%y\":\r\n\t\t\t\t\t\tsplt += \"set[0]=temp[\" + i + \"]*1+(temp[\" + i + \"]>50?1900:2000);\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%g\":\r\n\t\t\t\t\tcase \"%G\":\r\n\t\t\t\t\tcase \"%h\":\r\n\t\t\t\t\tcase \"%H\":\r\n\t\t\t\t\t\tsplt += \"set[3]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%i\":\r\n\t\t\t\t\t\tsplt += \"set[4]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\t\tsplt += \"set[0]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%a\":\r\n\t\t\t\t\tcase \"%A\":\r\n\t\t\t\t\t\tsplt += \"set[3]=set[3]%12+((temp[\" + i + \"]||'').toLowerCase()=='am'?0:12);\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%s\":\r\n\t\t\t\t\t\tsplt += \"set[5]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%M\":\r\n\t\t\t\t\t\tsplt += \"set[1]=locale.date.month_short_hash[temp[\" + i + \"]]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%F\":\r\n\t\t\t\t\t\tsplt += \"set[1]=locale.date.month_full_hash[temp[\" + i + \"]]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar code = \"set[0],set[1],set[2],set[3],set[4],set[5]\";\r\n\t\t\tif (utc) code = \" Date.UTC(\" + code + \")\";\r\n\t\t\tvar strToDate = new Function(\"date\", \"locale\", \"var set=[0,0,1,0,0,0]; \" + splt + \" return new Date(\" + code + \");\");\r\n\r\n\t\t\treturn function (dateString) {\r\n\t\t\t\treturn strToDate(dateString, gantt.locale);\r\n\t\t\t};\r\n\t\t},\r\n\t\tgetISOWeek: function (ndate) {\r\n\t\t\treturn gantt.date._getWeekNumber(ndate, true);\r\n\t\t},\r\n\t\t_getWeekNumber: function(ndate, isoWeek){\r\n\t\t\tif (!ndate) return false;\r\n\t\t\tvar nday = ndate.getDay();\r\n\t\t\tif(isoWeek){\r\n\t\t\t\tif (nday === 0) {\r\n\t\t\t\t\tnday = 7;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar first_thursday = new Date(ndate.valueOf());\r\n\t\t\tfirst_thursday.setDate(ndate.getDate() + (4 - nday));\r\n\t\t\tvar year_number = first_thursday.getFullYear(); // year of the first Thursday\r\n\t\t\tvar ordinal_date = Math.round((first_thursday.getTime() - new Date(year_number, 0, 1).getTime()) / 86400000); //ordinal date of the first Thursday - 1 (so not really ordinal date)\r\n\t\t\tvar week_number = 1 + Math.floor(ordinal_date / 7);\r\n\t\t\treturn week_number;\r\n\t\t},\r\n\r\n\t\tgetWeek: function(ndate){\r\n\t\t\treturn gantt.date._getWeekNumber(ndate, gantt.config.start_on_monday);\r\n\t\t},\r\n\t\tgetUTCISOWeek: function (ndate) {\r\n\t\t\treturn gantt.date.getISOWeek(ndate);\r\n\t\t},\r\n\t\tconvert_to_utc: function (date) {\r\n\t\t\treturn new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds());\r\n\t\t},\r\n\t\tparseDate: function (date, format) {\r\n\t\t\t// raw date may be of type string, number (timestamp) or something else\r\n\t\t\t// do not check for instanceof Date explicitly, since we may swap native date with different date implementation at some point\r\n\t\t\tif (date && !date.getFullYear) {\r\n\t\t\t\tif (gantt.defined(format)) {\r\n\t\t\t\t\tif (typeof(format) == \"string\")\r\n\t\t\t\t\t\tformat = gantt.defined(gantt.templates[format]) ? gantt.templates[format] : gantt.date.str_to_date(format);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tformat = gantt.templates.xml_date;\r\n\t\t\t\t}\r\n\t\t\t\tif (date)\r\n\t\t\t\t\tdate = format(date);\r\n\t\t\t\telse\r\n\t\t\t\t\tdate = null;\r\n\t\t\t}\r\n\t\t\treturn date;\r\n\t\t}\r\n\t};\r\n\treturn dateHelper;\r\n};\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar eventable = __webpack_require__(2);\r\nvar utils = __webpack_require__(0);\r\nvar timeout = __webpack_require__(10);\r\n\r\nmodule.exports = function(gantt){\r\n\r\n\tfunction copyDomEvent(e){\r\n\t\treturn {\r\n\t\t\ttarget: e.target || e.srcElement,\r\n\t\t\tpageX: e.pageX,\r\n\t\t\tpageY: e.pageY,\r\n\t\t\tclientX: e.clientX,\r\n\t\t\tclientY: e.clientY,\r\n\t\t\tmetaKey: e.metaKey,\r\n\t\t\tshiftKey: e.shiftKey,\r\n\t\t\tctrlKey: e.ctrlKey,\r\n\t\t\taltKey: e.altKey\r\n\t\t};\r\n\t}\r\n\r\n\tfunction DnD(obj, config) {\r\n\t\tthis._obj = obj;\r\n\t\tthis._settings = config || {};\r\n\t\teventable(this);\r\n\r\n\t\tvar inputMethods = this.getInputMethods();\r\n\r\n\t\tthis._drag_start_timer = null;\r\n\t\tgantt.attachEvent(\"onGanttScroll\", utils.bind(function (left, top) {\r\n\t\t\tthis.clearDragTimer();\r\n\t\t}, this));\r\n\r\n\t\tfor(var i = 0; i < inputMethods.length; i++){\r\n\t\t\t(utils.bind(function(input){\r\n\r\n\t\t\t\tgantt.event(obj, input.down, utils.bind(function (e) {\r\n\t\t\t\t\tif(!input.accessor(e)){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis._settings.original_target = copyDomEvent(e);\r\n\r\n\t\t\t\t\tif (gantt.config.touch) {\r\n\t\t\t\t\t\tthis.clearDragTimer();\r\n\r\n\t\t\t\t\t\tthis._drag_start_timer = setTimeout(utils.bind(function () {\r\n\t\t\t\t\t\t\tthis.dragStart(obj, e, input);\r\n\t\t\t\t\t\t}, this), gantt.config.touch_drag);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.dragStart(obj, e, input);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this));\r\n\r\n\t\t\t\tgantt.event(document.body, input.up, utils.bind(function (e) {\r\n\t\t\t\t\tif(!input.accessor(e)){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.clearDragTimer();\r\n\t\t\t\t}, this));\r\n\r\n\t\t\t}, this))(inputMethods[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tDnD.prototype = {\r\n\t\ttraceDragEvents: function (domElement, inputMethod) {\r\n\t\t\tvar mousemove = utils.bind(function (e) {\r\n\t\t\t\treturn this.dragMove(domElement, e, inputMethod.accessor);\r\n\t\t\t}, this);\r\n\t\t\tvar scroll = utils.bind(function (e) {\r\n\t\t\t\treturn this.dragScroll(domElement, e);\r\n\t\t\t}, this);\r\n\r\n\t\t\tvar limited_mousemove = utils.bind(function (e) {\r\n\t\t\t\tif (e && e.preventDefault) //Cancel default action on DND\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t(e || event).cancelBubble = true;\r\n\t\t\t\tif (utils.defined(this.config.updates_per_second)) {\r\n\t\t\t\t\tif (!timeout(this, this.config.updates_per_second))\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn mousemove(e);\r\n\t\t\t}, this);\r\n\r\n\t\t\tvar mouseup = utils.bind(function (e) {\r\n\t\t\t\tgantt.eventRemove(document.body, inputMethod.move, limited_mousemove);\r\n\t\t\t\tgantt.eventRemove(document.body, inputMethod.up, mouseup);\r\n\t\t\t\treturn this.dragEnd(domElement);\r\n\t\t\t}, this);\r\n\r\n\r\n\t\t\tgantt.event(document.body, inputMethod.move, limited_mousemove);\r\n\t\t\tgantt.event(document.body, inputMethod.up, mouseup);\r\n\t\t},\r\n\t\tcheckPositionChange: function (pos) {\r\n\t\t\tvar diff_x = pos.x - this.config.pos.x;\r\n\t\t\tvar diff_y = pos.y - this.config.pos.y;\r\n\t\t\tvar distance = Math.sqrt(Math.pow(Math.abs(diff_x), 2) + Math.pow(Math.abs(diff_y), 2));\r\n\r\n\t\t\tif (distance > this.config.sensitivity) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tinitDnDMarker: function () {\r\n\t\t\t// create dnd placeholder and put it in dom\r\n\t\t\tvar marker = this.config.marker = document.createElement(\"div\");\r\n\t\t\tmarker.className = \"gantt_drag_marker\";\r\n\t\t\tmarker.innerHTML = \"Dragging object\";\r\n\t\t\tdocument.body.appendChild(marker);\r\n\t\t},\r\n\t\tbackupEventTarget: function (domEvent, getEvent) {\r\n\t\t\tif (!gantt.config.touch) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// keep original event target in DOM in order to keep dnd on touchmove event\r\n\t\t\tvar e = getEvent(domEvent);\r\n\r\n\t\t\tvar el = e.target || e.srcElement;\r\n\t\t\tvar copy = el.cloneNode(true);\r\n\t\t\t//this.config.target.target = copy;\r\n\t\t\tthis.config.original_target = copyDomEvent(e);\r\n\t\t\tthis.config.original_target.target = copy;\r\n\t\t\tthis.config.backup_element = el;\r\n\t\t\tel.parentNode.appendChild(copy);\r\n\r\n\t\t\tel.style.display = \"none\";\r\n\t\t\tdocument.body.appendChild(el);\r\n\t\t},\r\n\t\tgetInputMethods: function () {\r\n\t\t\t// bind actions to browser events\r\n\t\t\tvar inputMethods = [];\r\n\r\n\t\t\tinputMethods.push({\r\n\t\t\t\t\"move\": \"mousemove\",\r\n\t\t\t\t\"down\": \"mousedown\",\r\n\t\t\t\t\"up\": \"mouseup\",\r\n\t\t\t\t\"accessor\": function (e) {\r\n\t\t\t\t\treturn e;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (gantt.config.touch) {\r\n\r\n\t\t\t\tvar touchEventsSupported = true;\r\n\t\t\t\ttry{\r\n\t\t\t\t\tdocument.createEvent(\"TouchEvent\");\r\n\t\t\t\t}catch (e){\r\n\t\t\t\t\ttouchEventsSupported = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(touchEventsSupported){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"touchmove\",\r\n\t\t\t\t\t\t\"down\": \"touchstart\",\r\n\t\t\t\t\t\t\"up\": \"touchend\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.touches && ev.touches.length > 1) return null;\r\n\t\t\t\t\t\t\tif (ev.touches[0])\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\ttarget: document.elementFromPoint(ev.touches[0].clientX, ev.touches[0].clientY),\r\n\t\t\t\t\t\t\t\t\tpageX: ev.touches[0].pageX,\r\n\t\t\t\t\t\t\t\t\tpageY: ev.touches[0].pageY,\r\n\t\t\t\t\t\t\t\t\tclientX: ev.touches[0].clientX,\r\n\t\t\t\t\t\t\t\t\tclientY: ev.touches[0].clientY\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}else if(window.navigator.pointerEnabled){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"pointermove\",\r\n\t\t\t\t\t\t\"down\": \"pointerdown\",\r\n\t\t\t\t\t\t\"up\": \"pointerup\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.pointerType == \"mouse\") return null;\r\n\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}else if (window.navigator.msPointerEnabled){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"MSPointerMove\",\r\n\t\t\t\t\t\t\"down\": \"MSPointerDown\",\r\n\t\t\t\t\t\t\"up\": \"MSPointerUp\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.pointerType == ev.MSPOINTER_TYPE_MOUSE) return null;\r\n\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn inputMethods;\r\n\t\t},\r\n\t\tclearDragTimer: function () {\r\n\t\t\tif (this._drag_start_timer) {\r\n\t\t\t\tclearTimeout(this._drag_start_timer);\r\n\t\t\t\tthis._drag_start_timer = null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tdragStart: function (obj, e, inputMethod) {\r\n\t\t\tthis.config = {\r\n\t\t\t\tobj: obj,\r\n\t\t\t\tmarker: null,\r\n\t\t\t\tstarted: false,\r\n\t\t\t\tpos: this.getPosition(e),\r\n\t\t\t\tsensitivity: 4\r\n\t\t\t};\r\n\t\t\tif (this._settings)\r\n\t\t\t\tutils.mixin(this.config, this._settings, true);\r\n\r\n\r\n\t\t\tthis.traceDragEvents(obj, inputMethod);\r\n\r\n\t\t\tgantt._prevent_touch_scroll = true;\r\n\t\t\tdocument.body.className += \" gantt_noselect\";\r\n\r\n\t\t\tif (gantt.config.touch) {\r\n\t\t\t\tthis.dragMove(obj, e, inputMethod.accessor);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tdragMove: function (obj, e, getEvent) {\r\n\t\t\tvar source = getEvent(e);\r\n\t\t\tif (!source) return;\r\n\r\n\t\t\tif (!this.config.marker && !this.config.started) {\r\n\t\t\t\tvar pos = this.getPosition(source);\r\n\r\n\t\t\t\tif (gantt.config.touch || this.checkPositionChange(pos)) {\r\n\t\t\t\t\t// real drag starts here,\r\n\t\t\t\t\t// when user moves mouse at first time after onmousedown\r\n\t\t\t\t\tthis.config.started = true;\r\n\t\t\t\t\tthis.config.ignore = false;\r\n\t\t\t\t\tif (this.callEvent(\"onBeforeDragStart\", [obj, this.config.original_target]) === false) {\r\n\t\t\t\t\t\tthis.config.ignore = true;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.backupEventTarget(e, getEvent);\r\n\t\t\t\t\tthis.initDnDMarker();\r\n\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t\tthis.callEvent(\"onAfterDragStart\", [obj, this.config.original_target]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.config.ignore = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (!this.config.ignore) {\r\n\t\t\t\tsource.pos = this.getPosition(source);\r\n\t\t\t\tthis.config.marker.style.left = source.pos.x + \"px\";\r\n\t\t\t\tthis.config.marker.style.top = source.pos.y + \"px\";\r\n\t\t\t\tthis.callEvent(\"onDragMove\", [obj, source]);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tdragEnd: function (obj) {\r\n\t\t\tvar target = this.config.backup_element;\r\n\t\t\tif (target && target.parentNode) {\r\n\t\t\t\ttarget.parentNode.removeChild(target);\r\n\t\t\t}\r\n\t\t\tgantt._prevent_touch_scroll = false;\r\n\t\t\tif (this.config.marker) {\r\n\t\t\t\tthis.config.marker.parentNode.removeChild(this.config.marker);\r\n\t\t\t\tthis.config.marker = null;\r\n\r\n\t\t\t\tthis.callEvent(\"onDragEnd\", []);\r\n\t\t\t}\r\n\t\t\tdocument.body.className = document.body.className.replace(\" gantt_noselect\", \"\");\r\n\t\t},\r\n\r\n\t\tgetPosition: function (e) {\r\n\t\t\tvar x = 0, y = 0;\r\n\t\t\te = e || window.event;\r\n\t\t\tif (e.pageX || e.pageY) {\r\n\t\t\t\tx = e.pageX;\r\n\t\t\t\ty = e.pageY;\r\n\t\t\t} else if (e.clientX || e.clientY) {\r\n\t\t\t\tx = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\r\n\t\t\t\ty = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;\r\n\t\t\t}\r\n\t\t\treturn {x: x, y: y};\r\n\t\t}\r\n\t};\r\n\r\n\treturn DnD;\r\n};\r\n\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\n\r\n\tvar regTemplates = {};\r\n\r\n\tfunction initTemplate(name, initial, template_name) {\r\n\t\ttemplate_name = template_name || name;\r\n\t\tvar config = gantt.config,\r\n\t\t\ttemplates = gantt.templates;\r\n\r\n\t\tif (gantt.config[name] && regTemplates[template_name] != config[name]) {\r\n\t\t\tif (!(initial && templates[template_name])) {\r\n\t\t\t\ttemplates[template_name] = gantt.date.date_to_str(config[name]);\r\n\t\t\t\tregTemplates[template_name] = config[name];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction initTemplates() {\r\n\t\tvar labels = gantt.locale.labels;\r\n\t\tlabels.gantt_save_btn = labels.icon_save;\r\n\t\tlabels.gantt_cancel_btn = labels.icon_cancel;\r\n\t\tlabels.gantt_delete_btn = labels.icon_delete;\r\n\r\n\r\n\t\tvar date = gantt.date;\r\n\r\n\t\t//build configuration based templates\r\n\t\tvar d = date.date_to_str;\r\n\t\tvar c = gantt.config;\r\n\t\tinitTemplate(\"date_scale\", true, undefined, gantt.config, gantt.templates);\r\n\t\tinitTemplate(\"date_grid\", true, \"grid_date_format\", gantt.config, gantt.templates);\r\n\t\tinitTemplate(\"task_date\", true, undefined, gantt.config, gantt.templates);\r\n\r\n\t\tgantt.mixin(gantt.templates, {\r\n\t\t\txml_date: date.str_to_date(c.xml_date, c.server_utc),\r\n\t\t\txml_format: d(c.xml_date, c.server_utc),\r\n\t\t\tapi_date: date.str_to_date(c.api_date),\r\n\t\t\tprogress_text: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tgrid_header_class: function (column, config) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\ttask_text: function (start, end, task) {\r\n\t\t\t\treturn task.text;\r\n\t\t\t},\r\n\t\t\ttask_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tgrid_row_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\ttask_row_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\ttask_cell_class: function (item, date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tscale_cell_class: function (date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tscale_row_class: function (date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\tgrid_indent: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_indent'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_folder: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_folder_\" + (item.$open ? \"open\" : \"closed\") + \"'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_file: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_file'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_open: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_\" + (item.$open ? \"close\" : \"open\") + \"'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_blank: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_blank'></div>\";\r\n\t\t\t},\r\n\t\t\tdate_grid: function (date, item) {\r\n\t\t\t\tif (item && gantt.isUnscheduledTask(item) && gantt.config.show_unscheduled) {\r\n\t\t\t\t\treturn gantt.templates.task_unscheduled_time(item);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn gantt.templates.grid_date_format(date);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\ttask_time: function (start, end, ev) {\r\n\t\t\t\tif (gantt.isUnscheduledTask(ev) && gantt.config.show_unscheduled) {\r\n\t\t\t\t\treturn gantt.templates.task_unscheduled_time(ev);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn gantt.templates.task_date(start) + \" - \" + gantt.templates.task_date(end);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\ttask_unscheduled_time: function (task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\ttime_picker: d(c.time_picker),\r\n\t\t\tlink_class: function (link) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tlink_description: function (link) {\r\n\t\t\t\tvar from = gantt.getTask(link.source),\r\n\t\t\t\t\tto = gantt.getTask(link.target);\r\n\r\n\t\t\t\treturn \"<b>\" + from.text + \"</b> &ndash;  <b>\" + to.text + \"</b>\";\r\n\t\t\t},\r\n\r\n\t\t\tdrag_link: function (from, from_start, to, to_start) {\r\n\t\t\t\tfrom = gantt.getTask(from);\r\n\t\t\t\tvar labels = gantt.locale.labels;\r\n\r\n\t\t\t\tvar text = \"<b>\" + from.text + \"</b> \" + (from_start ? labels.link_start : labels.link_end) + \"<br/>\";\r\n\t\t\t\tif (to) {\r\n\t\t\t\t\tto = gantt.getTask(to);\r\n\t\t\t\t\ttext += \"<b> \" + to.text + \"</b> \" + (to_start ? labels.link_start : labels.link_end) + \"<br/>\";\r\n\t\t\t\t}\r\n\t\t\t\treturn text;\r\n\t\t\t},\r\n\t\t\tdrag_link_class: function (from, from_start, to, to_start) {\r\n\t\t\t\tvar add = \"\";\r\n\r\n\t\t\t\tif (from && to) {\r\n\t\t\t\t\tvar allowed = gantt.isLinkAllowed(from, to, from_start, to_start);\r\n\t\t\t\t\tadd = \" \" + (allowed ? \"gantt_link_allow\" : \"gantt_link_deny\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn \"gantt_link_tooltip\" + add;\r\n\t\t\t},\r\n\r\n\t\t\t/* used for aria-labels of bar elements and for tooltip.js */\r\n\t\t\ttooltip_date_format: date.date_to_str(\"%Y-%m-%d\"),\r\n\t\t\ttooltip_text: function (start, end, event) {\r\n\t\t\t\treturn \"<b>Task:</b> \" + event.text + \"<br/><b>Start date:</b> \" + gantt.templates.tooltip_date_format(start) + \"<br/><b>End date:</b> \" + gantt.templates.tooltip_date_format(end);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\treturn {\r\n\t\tinitTemplates: initTemplates,\r\n\t\tinitTemplate: initTemplate\r\n\t};\r\n\r\n};\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\n\r\nvar StateService = (function(){\r\n\tvar stateProviders = {};\r\n\r\n\tfunction getState(name){\r\n\t\tif(name){\r\n\t\t\treturn stateProviders[name].method();\r\n\t\t}else{\r\n\t\t\tvar res = {};\r\n\t\t\tfor(var i in stateProviders){\r\n\t\t\t\tif(!stateProviders[i].internal)\r\n\t\t\t\t\tutils.mixin(res, stateProviders[i].method(), true);\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction registerProvider(name, provider, internal){\r\n\t\tstateProviders[name] = { method: provider, internal: internal};\r\n\t}\r\n\r\n\tfunction unregisterProvider(name){\r\n\t\tdelete stateProviders[name];\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetState: getState,\r\n\t\tregisterProvider: registerProvider,\r\n\t\tunregisterProvider: unregisterProvider\r\n\t};\r\n});\r\n\r\nmodule.exports = StateService;\r\n\r\n\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\nvar domHelpers = __webpack_require__(1);\r\n\r\nmodule.exports = function(gantt) {\r\n\r\n\tvar boxAttribute = \"data-dhxbox\";\r\n\r\n\tvar _dhx_msg_cfg = null;\r\n\r\n\tfunction callback(config, result) {\r\n\t\tvar usercall = config.callback;\r\n\t\tmodalBox.hide(config.box);\r\n\r\n\t\t_dhx_msg_cfg = config.box = null;\r\n\t\tif (usercall)\r\n\t\t\tusercall(result);\r\n\t}\r\n\r\n\tfunction modal_key(e) {\r\n\t\tif (_dhx_msg_cfg) {\r\n\t\t\te = e || event;\r\n\t\t\tvar code = e.which || event.keyCode;\r\n\t\t\tvar preventDefault = false;\r\n\r\n\t\t\tif (messageBox.keyboard) {\r\n\t\t\t\tif (code == 13 || code == 32) {\r\n\t\t\t\t\t// default behavior is to confirm/submit popup on space/enter\r\n\t\t\t\t\t// if browser focus is set on button element - do button click instead of default behavior\r\n\t\t\t\t\tvar target = e.target || e.srcElement;\r\n\t\t\t\t\tif (domHelpers.getClassName(target).indexOf(\"gantt_popup_button\") > -1 && target.click) {\r\n\t\t\t\t\t\ttarget.click();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcallback(_dhx_msg_cfg, true);\r\n\t\t\t\t\t\tpreventDefault = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (code == 27) {\r\n\t\t\t\t\tcallback(_dhx_msg_cfg, false);\r\n\t\t\t\t\tpreventDefault = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (preventDefault) {\r\n\t\t\t\tif (e.preventDefault)\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\treturn !(e.cancelBubble = true);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.event(document, \"keydown\", modal_key, true);\r\n\r\n\tfunction modality(mode) {\r\n\t\tif (!modality.cover) {\r\n\t\t\tmodality.cover = document.createElement(\"div\");\r\n\t\t\t//necessary for IE only\r\n\t\t\tmodality.cover.onkeydown = modal_key;\r\n\t\t\tmodality.cover.className = \"dhx_modal_cover\";\r\n\t\t\tdocument.body.appendChild(modality.cover);\r\n\t\t}\r\n\t\tvar height = document.body.scrollHeight;\r\n\t\tmodality.cover.style.display = mode ? \"inline-block\" : \"none\";\r\n\t}\r\n\r\n\tfunction button(text, className, result) {\r\n\t\tvar buttonAriaAttrs = gantt._waiAria.messageButtonAttrString(text);\r\n\t\tvar name = className.toLowerCase().replace(/ /g, \"_\");\r\n\t\tvar button_css = \"gantt_\" + name + \"_button\" + \" dhtmlx_\" + name + \"_button\"; // dhtmlx_ok_button, dhtmlx_click_me_button\r\n\t\treturn \"<div \" + buttonAriaAttrs + \" class='gantt_popup_button dhtmlx_popup_button \" + button_css + \"' data-result='\" + result + \"' result='\" + result + \"' ><div>\" + text + \"</div></div>\";\r\n\t}\r\n\r\n\tfunction info(text) {\r\n\t\tif (!messageBox.area) {\r\n\t\t\tmessageBox.area = document.createElement(\"div\");\r\n\t\t\tmessageBox.area.className = \"gantt_message_area dhtmlx_message_area\";\r\n\t\t\tmessageBox.area.style[messageBox.position] = \"5px\";\r\n\t\t\tdocument.body.appendChild(messageBox.area);\r\n\t\t}\r\n\r\n\t\tmessageBox.hide(text.id);\r\n\t\tvar message = document.createElement(\"div\");\r\n\t\tmessage.innerHTML = \"<div>\" + text.text + \"</div>\";\r\n\t\tmessage.className = \"gantt-info dhtmlx-info gantt-\" + text.type + \" dhtmlx-\" + text.type;\r\n\t\tmessage.onclick = function () {\r\n\t\t\tmessageBox.hide(text.id);\r\n\t\t\ttext = null;\r\n\t\t};\r\n\r\n\t\tgantt._waiAria.messageInfoAttr(message);\r\n\r\n\t\tif (messageBox.position == \"bottom\" && messageBox.area.firstChild)\r\n\t\t\tmessageBox.area.insertBefore(message, messageBox.area.firstChild);\r\n\t\telse\r\n\t\t\tmessageBox.area.appendChild(message);\r\n\r\n\t\tif (text.expire > 0)\r\n\t\t\tmessageBox.timers[text.id] = window.setTimeout(function () {\r\n\t\t\t\tmessageBox.hide(text.id);\r\n\t\t\t}, text.expire);\r\n\r\n\t\tmessageBox.pull[text.id] = message;\r\n\t\tmessage = null;\r\n\r\n\t\treturn text.id;\r\n\t}\r\n\r\n\tfunction getFirstDefined() {\r\n\t\tvar values = [].slice.apply(arguments, [0]);\r\n\r\n\t\tfor (var i = 0; i < values.length; i++) {\r\n\t\t\tif (values[i]) {\r\n\t\t\t\treturn values[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction _boxStructure(config, ok, cancel) {\r\n\t\tvar box = document.createElement(\"div\");\r\n\r\n\t\tvar locale = gantt.locale;\r\n\r\n\t\tvar contentId = utils.uid();\r\n\t\tgantt._waiAria.messageModalAttr(box, contentId);\r\n\r\n\r\n\t\tbox.className = \" gantt_modal_box dhtmlx_modal_box gantt-\" + config.type + \" dhtmlx-\" + config.type;\r\n\t\tbox.setAttribute(boxAttribute, 1);\r\n\r\n\t\tvar inner = '';\r\n\r\n\t\tif (config.width)\r\n\t\t\tbox.style.width = config.width;\r\n\t\tif (config.height)\r\n\t\t\tbox.style.height = config.height;\r\n\t\tif (config.title)\r\n\t\t\tinner += '<div class=\"gantt_popup_title dhtmlx_popup_title\">' + config.title + '</div>';\r\n\t\tinner += '<div class=\"gantt_popup_text dhtmlx_popup_text\" id=\"' + contentId + '\"><span>' + (config.content ? '' : config.text) + '</span></div><div  class=\"gantt_popup_controls dhtmlx_popup_controls\">';\r\n\t\tif (ok)\r\n\t\t\tinner += button(getFirstDefined(config.ok, gantt.locale.labels.message_ok, \"OK\"), \"ok\", true);\r\n\t\tif (cancel)\r\n\t\t\tinner += button(getFirstDefined(config.cancel, gantt.locale.labels.message_cancel, \"Cancel\"), \"cancel\", false);\r\n\r\n\t\tif (config.buttons) {\r\n\t\t\tfor (var i = 0; i < config.buttons.length; i++) {\r\n\t\t\t\tvar btn = config.buttons[i];\r\n\t\t\t\tif (typeof btn == \"object\") {\r\n\t\t\t\t\t// Support { label:\"Save\", css:\"main_button\", value:\"save\" }\r\n\t\t\t\t\tvar label = btn.label;\r\n\t\t\t\t\tvar css = btn.css || (\"gantt_\" + btn.label.toLowerCase() + \"_button dhtmlx_\" + btn.label.toLowerCase() + \"_button\");\r\n\t\t\t\t\tvar value = btn.value || i;\r\n\t\t\t\t\tinner += button(label, css, value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tinner += button(btn, btn, i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tinner += '</div>';\r\n\t\tbox.innerHTML = inner;\r\n\r\n\t\tif (config.content) {\r\n\t\t\tvar node = config.content;\r\n\t\t\tif (typeof node == \"string\")\r\n\t\t\t\tnode = document.getElementById(node);\r\n\t\t\tif (node.style.display == 'none')\r\n\t\t\t\tnode.style.display = \"\";\r\n\t\t\tbox.childNodes[config.title ? 1 : 0].appendChild(node);\r\n\t\t}\r\n\r\n\t\tbox.onclick = function (e) {\r\n\t\t\te = e || event;\r\n\t\t\tvar source = e.target || e.srcElement;\r\n\t\t\tif (!source.className) source = source.parentNode;\r\n\t\t\tif (source.className.split(\" \")[0] == \"gantt_popup_button\") {\r\n\t\t\t\tvar result = source.getAttribute(\"data-result\");\r\n\t\t\t\tresult = (result == \"true\") || (result == \"false\" ? false : result);\r\n\t\t\t\tcallback(config, result);\r\n\t\t\t}\r\n\t\t};\r\n\t\tconfig.box = box;\r\n\t\tif (ok || cancel)\r\n\t\t\t_dhx_msg_cfg = config;\r\n\r\n\t\treturn box;\r\n\t}\r\n\r\n\tfunction _createBox(config, ok, cancel) {\r\n\t\tvar box = config.tagName ? config : _boxStructure(config, ok, cancel);\r\n\r\n\t\tif (!config.hidden)\r\n\t\t\tmodality(true);\r\n\t\tdocument.body.appendChild(box);\r\n\t\tvar x = Math.abs(Math.floor(((window.innerWidth || document.documentElement.offsetWidth) - box.offsetWidth) / 2));\r\n\t\tvar y = Math.abs(Math.floor(((window.innerHeight || document.documentElement.offsetHeight) - box.offsetHeight) / 2));\r\n\t\tif (config.position == \"top\")\r\n\t\t\tbox.style.top = \"-3px\";\r\n\t\telse\r\n\t\t\tbox.style.top = y + 'px';\r\n\t\tbox.style.left = x + 'px';\r\n\t\t//necessary for IE only\r\n\t\tbox.onkeydown = modal_key;\r\n\r\n\t\tmodalBox.focus(box);\r\n\r\n\t\tif (config.hidden)\r\n\t\t\tmodalBox.hide(box);\r\n\r\n\t\tgantt.callEvent(\"onMessagePopup\", [box]);\r\n\t\treturn box;\r\n\t}\r\n\r\n\tfunction alertPopup(config) {\r\n\t\treturn _createBox(config, true, false);\r\n\t}\r\n\r\n\tfunction confirmPopup(config) {\r\n\t\treturn _createBox(config, true, true);\r\n\t}\r\n\r\n\tfunction boxPopup(config) {\r\n\t\treturn _createBox(config);\r\n\t}\r\n\r\n\tfunction box_params(text, type, callback) {\r\n\t\tif (typeof text != \"object\") {\r\n\t\t\tif (typeof type == \"function\") {\r\n\t\t\t\tcallback = type;\r\n\t\t\t\ttype = \"\";\r\n\t\t\t}\r\n\t\t\ttext = {text: text, type: type, callback: callback};\r\n\t\t}\r\n\t\treturn text;\r\n\t}\r\n\r\n\tfunction params(text, type, expire, id) {\r\n\t\tif (typeof text != \"object\")\r\n\t\t\ttext = {text: text, type: type, expire: expire, id: id};\r\n\t\ttext.id = text.id || utils.uid();\r\n\t\ttext.expire = text.expire || messageBox.expire;\r\n\t\treturn text;\r\n\t}\r\n\r\n\tvar alertBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"confirm\";\r\n\t\treturn alertPopup(text);\r\n\t};\r\n\tvar confirmBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"alert\";\r\n\t\treturn confirmPopup(text);\r\n\t};\r\n\tvar modalBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"alert\";\r\n\t\treturn boxPopup(text);\r\n\t};\r\n\tmodalBox.hide = function (node) {\r\n\t\twhile (node && node.getAttribute && !node.getAttribute(boxAttribute))\r\n\t\t\tnode = node.parentNode;\r\n\t\tif (node) {\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\t\tmodality(false);\r\n\r\n\t\t\tgantt.callEvent(\"onAfterMessagePopup\", [node]);\r\n\t\t}\r\n\t};\r\n\r\n\tvar domHelpers = __webpack_require__(1);\r\n\r\n\tmodalBox.focus = function (node) {\r\n\t\tsetTimeout(function () {\r\n\t\t\tvar focusable = domHelpers.getFocusableNodes(node);\r\n\t\t\tif (focusable.length) {\r\n\t\t\t\tif (focusable[0].focus) focusable[0].focus();\r\n\t\t\t}\r\n\t\t}, 1);\r\n\t};\r\n\r\n\tvar messageBox = function (text, type, expire, id) {\r\n\t\ttext = params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"info\";\r\n\r\n\t\tvar subtype = text.type.split(\"-\")[0];\r\n\t\tswitch (subtype) {\r\n\t\t\tcase \"alert\":\r\n\t\t\t\treturn alertPopup(text);\r\n\t\t\tcase \"confirm\":\r\n\t\t\t\treturn confirmPopup(text);\r\n\t\t\tcase \"modalbox\":\r\n\t\t\t\treturn boxPopup(text);\r\n\t\t\tdefault:\r\n\t\t\t\treturn info(text);\r\n\t\t}\r\n\t};\r\n\r\n\tmessageBox.seed = (new Date()).valueOf();\r\n\tmessageBox.uid = utils.uid;\r\n\tmessageBox.expire = 4000;\r\n\tmessageBox.keyboard = true;\r\n\tmessageBox.position = \"top\";\r\n\tmessageBox.pull = {};\r\n\tmessageBox.timers = {};\r\n\r\n\tmessageBox.hideAll = function () {\r\n\t\tfor (var key in messageBox.pull)\r\n\t\t\tmessageBox.hide(key);\r\n\t};\r\n\tmessageBox.hide = function (id) {\r\n\t\tvar obj = messageBox.pull[id];\r\n\t\tif (obj && obj.parentNode) {\r\n\t\t\twindow.setTimeout(function () {\r\n\t\t\t\tobj.parentNode.removeChild(obj);\r\n\t\t\t\tobj = null;\r\n\t\t\t}, 2000);\r\n\t\t\tobj.className += \" hidden\";\r\n\r\n\t\t\tif (messageBox.timers[id])\r\n\t\t\t\twindow.clearTimeout(messageBox.timers[id]);\r\n\t\t\tdelete messageBox.pull[id];\r\n\t\t}\r\n\t};\r\n\r\n\tvar popups = [];\r\n\tgantt.attachEvent(\"onMessagePopup\", function(box){\r\n\t\tpopups.push(box);\r\n\t});\r\n\tgantt.attachEvent(\"onAfterMessagePopup\", function(box){\r\n\t\tfor(var i = 0; i < popups.length; i++){\r\n\t\t\tif(popups[i] === box){\r\n\t\t\t\tpopups.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\tif(modality.cover && modality.cover.parentNode){\r\n\t\t\tmodality.cover.parentNode.removeChild(modality.cover);\r\n\t\t}\r\n\r\n\t\tfor(var i = 0; i < popups.length; i++){\r\n\t\t\tif(popups[i].parentNode){\r\n\t\t\t\tpopups[i].parentNode.removeChild(popups[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tpopups = null;\r\n\r\n\t\tif(messageBox.area && messageBox.area.parentNode){\r\n\t\t\tmessageBox.area.parentNode.removeChild(messageBox.area);\r\n\t\t}\r\n\t\tmessageBox = null;\r\n\t});\r\n\r\n\treturn {\r\n\t\talert: alertBox,\r\n\t\tconfirm: confirmBox,\r\n\t\tmessage: messageBox,\r\n\t\tmodalbox: modalBox\r\n\t};\r\n};\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar uiFactory = __webpack_require__(36),\r\n\tmouseEvents = __webpack_require__(38),\r\n\tcreateLayers = __webpack_require__(39),\r\n\tCell = __webpack_require__(5),\r\n\tLayout = __webpack_require__(12),\r\n\tViewLayout = __webpack_require__(42),\r\n\tViewCell = __webpack_require__(43),\r\n\tResizer = __webpack_require__(44),\r\n\tScrollbar = __webpack_require__(45),\r\n\tTimeline = __webpack_require__(13),\r\n\tGrid = __webpack_require__(8),\r\n\tResourceGrid = __webpack_require__(49),\r\n\tResourceTimeline = __webpack_require__(50);\r\n\r\nvar renderTaskBar = __webpack_require__(51),\r\n\trenderTaskBg = __webpack_require__(52),\r\n\trenderLink = __webpack_require__(53),\r\n\tgridRenderer = __webpack_require__(54);\r\n\r\nvar mainGridInitializer = __webpack_require__(55);\r\nvar mainTimelineInitializer = __webpack_require__(57);\r\nvar mainLayoutInitializer = __webpack_require__(60);\r\n\r\nfunction initUI(gantt){\r\n\tfunction inheritGridConfig(id){\r\n\t\treturn {\r\n\t\t\t//width: gantt.config.grid_width\r\n\t\t};\r\n\t}\r\n\r\n\tfunction attachInitializer(view, initializer){\r\n\t\tvar ext = initializer(gantt);\r\n\t\tif(ext.onCreated)\r\n\t\t\text.onCreated(view);\r\n\t\tview.attachEvent(\"onReady\", function(){\r\n\t\t\tif(ext.onInitialized)\r\n\t\t\t\text.onInitialized(view);\r\n\t\t});\r\n\t\tview.attachEvent(\"onDestroy\", function(){\r\n\t\t\tif(ext.onDestroyed)\r\n\t\t\t\text.onDestroyed(view);\r\n\t\t});\r\n\t}\r\n\r\n\tvar factory = uiFactory.createFactory(gantt);\r\n\tfactory.registerView(\"cell\", Cell);\r\n\tfactory.registerView(\"resizer\", Resizer);\r\n\tfactory.registerView(\"scrollbar\", Scrollbar);\r\n\tfactory.registerView(\"layout\", Layout, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"main\"){\r\n\t\t\tattachInitializer(view, mainLayoutInitializer);\r\n\t\t}\r\n\t});\r\n\tfactory.registerView(\"viewcell\", ViewCell);\r\n\tfactory.registerView(\"multiview\", ViewLayout);\r\n\tfactory.registerView(\"timeline\", Timeline, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"timeline\" || view.$config.bind == \"task\"){\r\n\t\t\tattachInitializer(view, mainTimelineInitializer);\r\n\t\t}\r\n\t});\r\n\tfactory.registerView(\"grid\", Grid, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"grid\" || view.$config.bind == \"task\"){\r\n\t\t\tattachInitializer(view, mainGridInitializer);\r\n\t\t}\r\n\t});\r\n\r\n\tfactory.registerView(\"resourceGrid\", ResourceGrid);\r\n\tfactory.registerView(\"resourceTimeline\", ResourceTimeline);\r\n\r\n\tvar layersEngine = createLayers(gantt);\r\n\r\n\treturn {\r\n\t\tfactory:factory,\r\n\t\tmouseEvents: mouseEvents.init(gantt),\r\n\t\tlayersApi: layersEngine.init(),\r\n\t\trender:{\r\n\t\t\tgridLine: gridRenderer(gantt),\r\n\t\t\ttaskBg: renderTaskBg(gantt),\r\n\t\t\ttaskBar: renderTaskBar(gantt),\r\n\t\t\tlink: renderLink(gantt)\r\n\t\t},\r\n\t\tlayersService: {\r\n\t\t\tgetDataRender: function(name){\r\n\t\t\t\treturn layersEngine.getDataRender(name, gantt);\r\n\t\t\t},\r\n\t\t\tcreateDataRender: function(config){\r\n\t\t\t\treturn layersEngine.createDataRender(config, gantt);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = {\r\n\tinit: initUI\r\n};\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0),\r\n\tconfigurable = __webpack_require__(37);\r\n\r\nvar uiFactory = function createFactory(gantt){\r\n\tvar views = {};\r\n\r\n\tfunction ui(cell, parentView) {\r\n\t\tvar content;\r\n\t\tvar view = \"cell\";\r\n\t\tif (cell.view){\r\n\t\t\tview = \"viewcell\";\r\n\t\t}else if (cell.resizer) {\r\n\t\t\tview = \"resizer\";\r\n\t\t}\r\n\t\telse if (cell.rows || cell.cols) {\r\n\t\t\tview = \"layout\";\r\n\t\t}\r\n\t\telse if (cell.views) {\r\n\t\t\tview = \"multiview\";\r\n\t\t}\r\n\r\n\t\tcontent = createView.call(this, view, null, cell, parentView);\r\n\t\treturn content;\r\n\t}\r\n\t\r\n\tvar createdViews = {};\r\n\r\n\tfunction createView(name, parent, config, parentView) {\r\n\t\tvar creator = views[name];\r\n\r\n\t\tif(!creator || !creator.create)\r\n\t\t\treturn false;\r\n\r\n\t\tif(name == \"resizer\" && !config.mode){\r\n\t\t\tif(parentView.$config.cols){\r\n\t\t\t\tconfig.mode = \"x\";\r\n\t\t\t}else{\r\n\t\t\t\tconfig.mode = \"y\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(name == \"viewcell\" && config.view == \"scrollbar\" && !config.scroll){\r\n\t\t\tif(parentView.$config.cols){\r\n\t\t\t\tconfig.scroll = \"y\";\r\n\t\t\t}else{\r\n\t\t\t\tconfig.scroll = \"x\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar config = utils.copy(config);\r\n\r\n\t\tif(!config.id && !createdViews[config.view]){\r\n\t\t\tconfig.id = config.view;\r\n\t\t}\r\n\r\n\t\tif(config.id && !config.css){\r\n\t\t\tconfig.css = config.id+\"_cell\";\r\n\t\t}\r\n\r\n\t\tvar view = new creator.create(parent, config, this, gantt);\r\n\r\n\t\tif(creator.configure){\r\n\t\t\tcreator.configure(view);\r\n\t\t}\r\n\r\n\t\tconfigurable(view, parentView);\r\n\t\tif(!view.$id){\r\n\t\t\tview.$id = config.id || gantt.uid();\r\n\t\t}\r\n\r\n\t\tif(!view.$parent && typeof parent == \"object\"){\r\n\t\t\tview.$parent = parent;\r\n\t\t}\r\n\t\tif(!view.$config){\r\n\t\t\tview.$config = config;\r\n\t\t}\r\n\r\n\t\tif(createdViews[view.$id]){\r\n\t\t\tview.$id = gantt.uid();\r\n\t\t}\r\n\r\n\t\tcreatedViews[view.$id] = view;\r\n\r\n\t\treturn view;\r\n\t}\r\n\r\n\tfunction reset(){\r\n\t\tcreatedViews = {};\r\n\t}\r\n\r\n\tfunction register(name, viewConstructor, configure){\r\n\t\tviews[name] = {create: viewConstructor, configure: configure};\r\n\t}\r\n\r\n\tfunction getView(id){\r\n\t\treturn createdViews[id];\r\n\t}\r\n\r\n\tvar factory = {\r\n\t\tinitUI:ui,\r\n\t\treset: reset,\r\n\t\tregisterView: register,\r\n\t\tcreateView: createView,\r\n\t\tgetView: getView\r\n\t};\r\n\r\n\treturn factory;\r\n};\r\n\r\nmodule.exports = {\r\n\tcreateFactory: uiFactory\r\n};\r\n\r\n\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\n\r\nfunction ViewSettings(config){\r\n\tutils.mixin(this, config, true);\r\n}\r\n\r\n\r\nfunction extendSettings (store, parentSettings){\r\n\tvar own = this.$config[store];\r\n\r\n\tif(own){\r\n\t\tif(own instanceof ViewSettings){\r\n\t\t\treturn own;\r\n\t\t}else{\r\n\t\t\tViewSettings.prototype = parentSettings;\r\n\t\t\tthis.$config[store] = new ViewSettings(own);\r\n\t\t\treturn this.$config[store];\r\n\t\t}\r\n\t}else{\r\n\t\treturn parentSettings;\r\n\t}\r\n}\r\n\r\nvar configurable = function(parentView){\r\n\tvar parentConfig,\r\n\t\tparentTemplates;\r\n\r\n\treturn {\r\n\t\t$getConfig: function(){\r\n\t\t\tif(!parentConfig){\r\n\t\t\t\tparentConfig = parentView ? parentView.$getConfig() : this.$gantt.config;\r\n\t\t\t}\r\n\r\n\t\t\treturn extendSettings.call(this, \"config\", parentConfig);\r\n\t\t},\r\n\t\t$getTemplates: function(){\r\n\t\t\tif(!parentTemplates){\r\n\t\t\t\tparentTemplates = parentView ? parentView.$getTemplates() : this.$gantt.templates;\r\n\t\t\t}\r\n\r\n\t\t\treturn extendSettings.call(this, \"templates\", parentTemplates);\r\n\t\t}\r\n\t};\r\n};\r\n\r\nmodule.exports = function(obj, parent){\r\n\tutils.mixin(obj, configurable(parent));\r\n};\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar domHelpers = __webpack_require__(1);\r\n\r\nvar createMouseHandler = (function(domHelpers) {\r\n\treturn function (gantt) {\r\n\t\tvar eventHandlers = {\r\n\t\t\t\"click\": {},\r\n\t\t\t\"doubleclick\": {},\r\n\t\t\t\"contextMenu\": {}\r\n\t\t};\r\n\r\n\t\tfunction addEventTarget(event, className, handler, root) {\r\n\t\t\tif(!eventHandlers[event][className]){\r\n\t\t\t\teventHandlers[event][className] = [];\r\n\t\t\t}\r\n\r\n\t\t\teventHandlers[event][className].push({\r\n\t\t\t\thandler: handler,\r\n\t\t\t\troot: root\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction callHandler(eventName, className, root, args) {\r\n\t\t\tvar handlers = eventHandlers[eventName][className];\r\n\t\t\tif(handlers){\r\n\t\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\t\tif(!(root || handlers[i].root) || handlers[i].root === root){\r\n\t\t\t\t\t\thandlers[i].handler.apply(this, args);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onClick(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar trg = e.target || e.srcElement;\r\n\t\t\tvar id = gantt.locate(e);\r\n\r\n\t\t\tvar handlers = findEventHandlers(e, eventHandlers.click);\r\n\t\t\tvar res = true;\r\n\t\t\tif (id !== null) {\r\n\t\t\t\tres = !gantt.checkEvent(\"onTaskClick\") || gantt.callEvent(\"onTaskClick\", [id, e]);\r\n\t\t\t} else {\r\n\t\t\t\tgantt.callEvent(\"onEmptyClick\", [e]);\r\n\t\t\t}\r\n\r\n\t\t\tif (res) {\r\n\t\t\t\tvar default_action = callEventHandlers(handlers, e, id);\r\n\t\t\t\tif (!default_action)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (id && gantt.getTask(id) && gantt.config.select_task && !gantt.config.multiselect) {\r\n\t\t\t\t\tgantt.selectTask(id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onContextMenu(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar src = e.target || e.srcElement,\r\n\t\t\t\ttaskId = gantt.locate(src),\r\n\t\t\t\tlinkId = gantt.locate(src, gantt.config.link_attribute);\r\n\r\n\t\t\tvar res = !gantt.checkEvent(\"onContextMenu\") || gantt.callEvent(\"onContextMenu\", [taskId, linkId, e]);\r\n\t\t\tif (!res) {\r\n\t\t\t\tif (e.preventDefault)\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\telse\r\n\t\t\t\t\te.returnValue = false;\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t}\r\n\r\n\t\tfunction findEventHandlers(e, hash){\r\n\t\t\tvar trg = e.target || e.srcElement;\r\n\t\t\tvar handlers = [];\r\n\t\t\twhile (trg) {\r\n\t\t\t\tvar css = domHelpers.getClassName(trg);\r\n\t\t\t\tif (css) {\r\n\t\t\t\t\tcss = css.split(\" \");\r\n\t\t\t\t\tfor (var i = 0; i < css.length; i++) {\r\n\t\t\t\t\t\tif (!css[i]) continue;\r\n\t\t\t\t\t\tif (hash[css[i]]) {\r\n\t\t\t\t\t\t\tvar delegateHandlers = hash[css[i]];\r\n\r\n\t\t\t\t\t\t\tfor(var h = 0; h < delegateHandlers.length; h++){\r\n\t\t\t\t\t\t\t\tif(delegateHandlers[h].root){\r\n\t\t\t\t\t\t\t\t\tif(!domHelpers.isChildOf(trg, delegateHandlers[h].root)){\r\n\t\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\thandlers.push(delegateHandlers[h].handler);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttrg = trg.parentNode;\r\n\t\t\t}\r\n\t\t\treturn handlers;\r\n\t\t}\r\n\r\n\t\tfunction callEventHandlers(handlers, e, id){\r\n\t\t\tvar res = true;\r\n\r\n\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\tvar handlerResult =  handlers[i].call(gantt, e, id, e.target || e.srcElement);\r\n\t\t\t\tres = res && !(typeof handlerResult != \"undefined\" && handlerResult !== true);\r\n\t\t\t}\r\n\r\n\t\t\treturn res;\r\n\t\t}\r\n\r\n\r\n\t\tfunction onDoubleClick(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar trg = e.target || e.srcElement;\r\n\t\t\tvar id = gantt.locate(e);\r\n\r\n\t\t\tvar handlers = findEventHandlers(e, eventHandlers.doubleclick);\r\n\t\t\tvar res = !gantt.checkEvent(\"onTaskDblClick\") || gantt.callEvent(\"onTaskDblClick\", [id, e]);\r\n\t\t\tif (res) {\r\n\t\t\t\tvar default_action = callEventHandlers(handlers, e, id);\r\n\t\t\t\tif (!default_action)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (id !== null && gantt.getTask(id)) {\r\n\t\t\t\t\tif (res && gantt.config.details_on_dblclick) {\r\n\t\t\t\t\t\tgantt.showLightbox(id);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onMouseMove(e) {\r\n\t\t\tif (gantt.checkEvent(\"onMouseMove\")) {\r\n\t\t\t\tvar id = gantt.locate(e);\r\n\t\t\t\tgantt._last_move_event = e;\r\n\t\t\t\tgantt.callEvent(\"onMouseMove\", [id, e]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction detach(eventName, className, handler, root) {\r\n\t\t\tif (eventHandlers[eventName]) {\r\n\t\t\t\tfor(var i = 0; i < eventHandlers[eventName].length; i++){\r\n\t\t\t\t\tif(eventHandlers[eventName][i].root == root){\r\n\t\t\t\t\t\teventHandlers[eventName].splice(i, 1);\r\n\t\t\t\t\t\ti--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar domEvents = gantt._createDomEventScope();\r\n\r\n\t\tfunction reset(node){\r\n\r\n\t\t\tdomEvents.detachAll();\r\n\r\n\t\t\tif(node){\r\n\t\t\t\tdomEvents.attach(node, \"click\", onClick);\r\n\t\t\t\tdomEvents.attach(node, \"dblclick\", onDoubleClick);\r\n\t\t\t\tdomEvents.attach(node, \"mousemove\", onMouseMove);\r\n\t\t\t\tdomEvents.attach(node, \"contextmenu\", onContextMenu);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n\t\treturn {\r\n\t\t\treset: reset,\r\n\t\t\tglobal: function(event, classname, handler){\r\n\t\t\t\taddEventTarget(event, classname, handler, null);\r\n\t\t\t},\r\n\t\t\tdelegate: addEventTarget,\r\n\t\t\tdetach: detach,\r\n\t\t\tcallHandler: callHandler,\r\n\t\t\tonDoubleClick: onDoubleClick,\r\n\t\t\tonMouseMove: onMouseMove,\r\n\t\t\tonContextMenu: onContextMenu,\r\n\t\t\tonClick: onClick,\r\n\t\t\tdestructor: function(){\r\n\t\t\t\treset();\r\n\t\t\t\teventHandlers = null;\r\n\t\t\t\tdomEvents = null;\r\n\t\t\t}\r\n\r\n\t\t};\r\n\t};\r\n\r\n})(domHelpers);\r\n\r\n\r\nmodule.exports = {\r\n\tinit:createMouseHandler\r\n};\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar createLayerFactory = __webpack_require__(40);\r\n\r\nvar createLayerEngine = function(gantt){\r\n\tvar factory = createLayerFactory(gantt);\r\n\treturn {\r\n\t\tgetDataRender: function(name){\r\n\t\t\treturn gantt.$services.getService(\"layer:\" + name) || null;\r\n\t\t},\r\n\t\tcreateDataRender: function(config){\r\n\t\t\tvar name = config.name,\r\n\t\t\t\tdefaultContainer = config.defaultContainer,\r\n\t\t\t\tpreviusSiblingContainer = config.defaultContainerSibling;\r\n\r\n\t\t\tvar layers = factory.createGroup(\r\n\t\t\t\tdefaultContainer,\r\n\t\t\t\tpreviusSiblingContainer,\r\n\t\t\t\tfunction(itemId, item){\r\n\t\t\t\t\tif(layers.filters){\r\n\t\t\t\t\t\tfor(var i = 0; i < layers.filters.length; i++){\r\n\t\t\t\t\t\t\tif(layers.filters[i](itemId, item) === false){\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tgantt.$services.setService(\"layer:\" + name, function(){\r\n\t\t\t\treturn layers;\r\n\t\t\t});\r\n\r\n\t\t\tgantt.attachEvent(\"onGanttReady\", function () {\r\n\t\t\t\tlayers.addLayer();// init layers on start\r\n\t\t\t});\r\n\r\n\t\t\treturn layers;\r\n\t\t},\r\n\t\tinit: function(){\r\n\t\t\tvar taskLayers = this.createDataRender({\r\n\t\t\t\tname: \"task\",\r\n\t\t\t\tdefaultContainer: function(){\r\n\t\t\t\t\tif(gantt.$task_data){\r\n\t\t\t\t\t\treturn gantt.$task_data;\r\n\t\t\t\t\t}else if(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t\t\t\treturn gantt.$ui.getView(\"timeline\").$task_data;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tdefaultContainerSibling: function(){\r\n\t\t\t\t\tif(gantt.$task_links){\r\n\t\t\t\t\t\treturn gantt.$task_links;\r\n\t\t\t\t\t}else if(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t\t\t\treturn gantt.$ui.getView(\"timeline\").$task_links;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfilter: function(item){\r\n\r\n\t\t\t\t}\r\n\t\t\t}, gantt);\r\n\r\n\t\t\tvar linkLayers = this.createDataRender({\r\n\t\t\t\tname: \"link\",\r\n\t\t\t\tdefaultContainer: function(){\r\n\t\t\t\t\tif(gantt.$task_data){\r\n\t\t\t\t\t\treturn gantt.$task_data;\r\n\t\t\t\t\t}else if(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t\t\t\treturn gantt.$ui.getView(\"timeline\").$task_data;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, gantt);\r\n\r\n\t\t\treturn {\r\n\t\t\t\taddTaskLayer: function(config){\r\n\t\t\t\t\treturn taskLayers.addLayer(config);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t/*getTaskLayer: function(id){\r\n\t\t\t\t\treturn taskLayers.getLayer(id);\r\n\t\t\t\t},*/\r\n\r\n\t\t\t\t_getTaskLayers: function(){\r\n\t\t\t\t\treturn taskLayers.getLayers();\r\n\t\t\t\t},\r\n\t\t\t\tremoveTaskLayer: function(id){\r\n\t\t\t\t\ttaskLayers.removeLayer(id);\r\n\t\t\t\t},\r\n\t\t\t\t/*eachTaskLayer: function(code){\r\n\t\t\t\t\ttaskLayers.eachLayer(code);\r\n\t\t\t\t},*/\r\n\t\t\t\t_clearTaskLayers: function(){\r\n\t\t\t\t\ttaskLayers.clear();\r\n\t\t\t\t},\r\n\t\t\t\taddLinkLayer: function(config){\r\n\t\t\t\t\treturn linkLayers.addLayer(config);\r\n\t\t\t\t},\r\n\t\t\t\t/*getLinkLayer: function(id){\r\n\t\t\t\t\treturn linkLayers.getLayer(id);\r\n\t\t\t\t},*/\r\n\t\t\t\t_getLinkLayers: function(){\r\n\t\t\t\t\treturn linkLayers.getLayers();\r\n\t\t\t\t},\r\n\t\t\t\tremoveLinkLayer: function(id){\r\n\t\t\t\t\tlinkLayers.removeLayer(id);\r\n\t\t\t\t},\r\n\t\t\t\t/*eachLinkLayer: function(code){\r\n\t\t\t\t\tlinkLayers.eachLayer(code);\r\n\t\t\t\t},*/\r\n\t\t\t\t_clearLinkLayers: function(){\r\n\t\t\t\t\tlinkLayers.clear();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n};\r\n\r\nmodule.exports = createLayerEngine;\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar renderFactoryProvider = __webpack_require__(41);\r\nvar utils = __webpack_require__(0),\r\n\tdomHelpers = __webpack_require__(1);\r\n\r\nvar layerFactory = function(gantt){\r\n\r\n\tvar renderFactory = renderFactoryProvider(gantt);\r\n\treturn {\r\n\tcreateGroup: function (get_container, rel_root, defaultFilters) {\r\n\r\n\t\tvar renderGroup = {\r\n\t\t\ttempCollection: [],\r\n\t\t\trenderers: {},\r\n\t\t\tcontainer: get_container,\r\n\t\t\tfilters: [],\r\n\t\t\tgetLayers: function () {\r\n\t\t\t\tthis._add();// add pending layers\r\n\r\n\t\t\t\tvar res = [];\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tres.push(this.renderers[i]);\r\n\t\t\t\t}\r\n\t\t\t\treturn res;\r\n\t\t\t},\r\n\t\t\tgetLayer: function (id) {\r\n\t\t\t\treturn this.renderers[id];\r\n\t\t\t},\r\n\t\t\t_add: function (layer) {\r\n\t\t\t\tif (layer) {\r\n\t\t\t\t\tlayer.id = layer.id || utils.uid();\r\n\t\t\t\t\tthis.tempCollection.push(layer);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar container = this.container();\r\n\r\n\t\t\t\tvar pending = this.tempCollection;\r\n\t\t\t\tfor (var i = 0; i < pending.length; i++) {\r\n\t\t\t\t\tlayer = pending[i];\r\n\r\n\t\t\t\t\tif (!this.container() && !(layer && layer.container && domHelpers.isChildOf(layer.container, document.body))) continue;\r\n\r\n\t\t\t\t\tvar node = layer.container,\r\n\t\t\t\t\t\tid = layer.id,\r\n\t\t\t\t\t\ttopmost = layer.topmost;\r\n\t\t\t\t\tif (!node.parentNode) {\r\n\t\t\t\t\t\t//insert on top or below the tasks\r\n\t\t\t\t\t\tif (topmost) {\r\n\t\t\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar rel = rel_root ? rel_root() : container.firstChild;\r\n\t\t\t\t\t\t\tif (rel)\r\n\t\t\t\t\t\t\t\tcontainer.insertBefore(node, rel);\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.renderers[id] = renderFactory.getRenderer(\r\n\t\t\t\t\t\tid,\r\n\t\t\t\t\t\tlayer,\r\n\t\t\t\t\t\tnode\r\n\t\t\t\t\t);\r\n\t\t\t\t\tthis.tempCollection.splice(i, 1);\r\n\t\t\t\t\ti--;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\taddLayer: function (config) {\r\n\t\t\t\t//config = prepareConfig(config);\r\n\t\t\t\tif(config){\r\n\t\t\t\t\tif(typeof config == \"function\"){\r\n\t\t\t\t\t\tconfig = {renderer: config};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(config.filter === undefined){\r\n\t\t\t\t\t\tconfig.filter = mergeFilters(defaultFilters || []);\r\n\t\t\t\t\t}else if(config.filter instanceof Array){\r\n\t\t\t\t\t\tconfig.filter.push(defaultFilters);\r\n\t\t\t\t\t\tconfig.filter = mergeFilters(config.filter);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(!config.container){\r\n\t\t\t\t\t\tconfig.container = document.createElement(\"div\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis._add(config);\r\n\t\t\t\treturn (config ? config.id : undefined);\r\n\t\t\t},\r\n\t\t\teachLayer: function(code){\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tcode(this.renderers[i]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tremoveLayer: function (id) {\r\n\t\t\t\tif(!this.renderers[id])\r\n\t\t\t\t\treturn;\r\n\t\t\t\tthis.renderers[id].destructor();\r\n\t\t\t\tdelete this.renderers[id];\r\n\t\t\t},\r\n\t\t\tclear: function () {\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tthis.renderers[i].destructor();\r\n\t\t\t\t}\r\n\t\t\t\tthis.renderers = {};\r\n\t\t\t}//,\r\n\t\t\t//prepareConfig: prepareConfig\r\n\t\t};\r\n\r\n\t\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\t\trenderGroup.clear();\r\n\t\t\trenderGroup = null;\r\n\t\t});\r\n\r\n\t\treturn renderGroup;\r\n\t}\r\n};};\r\n\r\n\r\nfunction mergeFilters(filter_methods){\r\n\tif(!(filter_methods instanceof Array)){\r\n\t\tfilter_methods = Array.prototype.slice.call(arguments, 0);\r\n\t}\r\n\r\n\treturn function(obj){\r\n\t\tvar res = true;\r\n\t\tfor(var i = 0, len = filter_methods.length; i < len; i++){\r\n\t\t\tvar filter_method = filter_methods[i];\r\n\t\t\tif(filter_method){\r\n\t\t\t\tres = res && (filter_method(obj.id, obj) !== false);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t};\r\n}\r\n\r\n\r\nmodule.exports = layerFactory;\r\n\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports) {\n\nvar rendererFactory = function(gantt){\r\n\tvar services = gantt.$services;\r\n\r\n\t//hash of dom elements is needed to redraw single bar/link\r\n\tvar task_area_pulls = {},\r\n\t\ttask_area_renderers = {};\r\n\r\n\tfunction getRenderer(id, layer, node) {\r\n\r\n\t\tif (task_area_renderers[id])\r\n\t\t\treturn task_area_renderers[id];\r\n\r\n\t\tif (!layer.renderer)\r\n\t\t\tgantt.assert(false, \"Invalid renderer call\");\r\n\r\n\t\tvar renderOne = function(item){\r\n\t\t\treturn layer.renderer.call(this, item, layer.host);\r\n\t\t} ;\r\n\r\n\t\tvar filter = layer.filter;\r\n\r\n\t\tif (node)\r\n\t\t\tnode.setAttribute(services.config().layer_attribute, true);\r\n\r\n\t\ttask_area_renderers[id] = {\r\n\t\t\trender_item: function (item, container) {\r\n\t\t\t\tcontainer = container || node;\r\n\r\n\t\t\t\tif (filter) {\r\n\t\t\t\t\tif (!filter(item)) {\r\n\t\t\t\t\t\tthis.remove_item(item.id);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar dom = renderOne.call(gantt, item);\r\n\t\t\t\tthis.append(item, dom, container);\r\n\r\n\t\t\t},\r\n\r\n\t\t\tclear: function (container) {\r\n\t\t\t\tthis.rendered = task_area_pulls[id] = {};\r\n\t\t\t\tthis.clear_container(container);\r\n\t\t\t},\r\n\t\t\tclear_container: function (container) {\r\n\t\t\t\tcontainer = container || node;\r\n\t\t\t\tif (container)\r\n\t\t\t\t\tcontainer.innerHTML = \"\";\r\n\t\t\t},\r\n\t\t\trender_items: function (items, container) {\r\n\t\t\t\tcontainer = container || node;\r\n\r\n\t\t\t\tvar buffer = document.createDocumentFragment();\r\n\t\t\t\tthis.clear(container);\r\n\t\t\t\tfor (var i = 0, vis = items.length; i < vis; i++) {\r\n\t\t\t\t\tthis.render_item(items[i], buffer);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcontainer.appendChild(buffer);\r\n\t\t\t},\r\n\t\t\tappend: function (item, node, container) {\r\n\t\t\t\tif (!node) {\r\n\t\t\t\t\tif (this.rendered[item.id]) {\r\n\t\t\t\t\t\tthis.remove_item(item.id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.rendered[item.id] && this.rendered[item.id].parentNode) {\r\n\t\t\t\t\tthis.replace_item(item.id, node);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t}\r\n\t\t\t\tthis.rendered[item.id] = node;\r\n\r\n\t\t\t},\r\n\t\t\treplace_item: function (item_id, newNode) {\r\n\t\t\t\tvar item = this.rendered[item_id];\r\n\t\t\t\tif (item && item.parentNode) {\r\n\t\t\t\t\titem.parentNode.replaceChild(newNode, item);\r\n\t\t\t\t}\r\n\t\t\t\tthis.rendered[item_id] = newNode;\r\n\t\t\t},\r\n\t\t\tremove_item: function (item_id) {\r\n\t\t\t\tthis.hide(item_id);\r\n\t\t\t\tdelete this.rendered[item_id];\r\n\t\t\t},\r\n\t\t\thide: function (item_id) {\r\n\t\t\t\tvar item = this.rendered[item_id];\r\n\t\t\t\tif (item && item.parentNode) {\r\n\t\t\t\t\titem.parentNode.removeChild(item);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trestore: function (item) {\r\n\t\t\t\tvar dom = this.rendered[item.id];\r\n\t\t\t\tif (dom) {\r\n\t\t\t\t\tif (!dom.parentNode) {\r\n\t\t\t\t\t\tthis.append(item, dom, node);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.render_item(item, node);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tchange_id: function (oldid, newid) {\r\n\t\t\t\tthis.rendered[newid] = this.rendered[oldid];\r\n\t\t\t\tdelete this.rendered[oldid];\r\n\t\t\t},\r\n\t\t\trendered: task_area_pulls[id],\r\n\t\t\tnode: node,\r\n\t\t\tdestructor: function () {\r\n\t\t\t\tthis.clear();\r\n\t\t\t\tdelete task_area_renderers[id];\r\n\t\t\t\tdelete task_area_pulls[id];\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn task_area_renderers[id];\r\n\t}\r\n\r\n\r\n\tfunction clearRenderers() {\r\n\t\tfor (var i in task_area_renderers) {\r\n\t\t\tgetRenderer(i).destructor();\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetRenderer: getRenderer,\r\n\t\tclearRenderers: clearRenderers\r\n\t};\r\n\r\n};\r\n\r\nmodule.exports = rendererFactory;\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = __webpack_require__(3),\r\n\tLayout = __webpack_require__(12),\r\n\tCell = __webpack_require__(5);\r\n\r\nvar ViewLayout = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ViewLayout, _super);\r\n\tfunction ViewLayout(parent, config, factory) {\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\t\tfor (var i = 0; i < _this.$cells.length; i++) {\r\n\t\t\t_this.$cells[i].$config.hidden = (i !== 0);\r\n\t\t}\r\n\t\t_this.$cell = _this.$cells[0];\r\n\t\t_this.$name = \"viewLayout\";\r\n\r\n\t\treturn _this;\r\n\t}\r\n\tViewLayout.prototype.cell = function (id) {\r\n\t\tvar cell = _super.prototype.cell.call(this, id);\r\n\t\tif (!cell.$view) {\r\n\t\t\tthis.$fill(null, this);\r\n\t\t}\r\n\t\treturn cell;\r\n\t};\r\n\tViewLayout.prototype.moveView = function (view) {\r\n\t\tvar body = this.$view;\r\n\t\tif (this.$cell) {\r\n\t\t\tthis.$cell.$config.hidden = true;\r\n\t\t\tbody.removeChild(this.$cell.$view);\r\n\t\t}\r\n\t\tthis.$cell = view;\r\n\t\tbody.appendChild(view.$view);\r\n\t};\r\n\tViewLayout.prototype.setSize = function (x, y) {\r\n\t\tCell.prototype.setSize.call(this, x, y);\r\n\t};\r\n\r\n\tViewLayout.prototype.setContentSize = function(){\r\n\t\tvar size = this.$lastSize;\r\n\t\tthis.$cell.setSize(size.contentX, size.contentY);\r\n\t};\r\n\r\n\tViewLayout.prototype.getSize = function () {\r\n\t\tvar sizes = _super.prototype.getSize.call(this);\r\n\t\tif (this.$cell) {\r\n\t\t\tvar cellSize = this.$cell.getSize();\r\n\t\t\tif (this.$config.byMaxSize) {\r\n\t\t\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\t\t\tvar otherCell = this.$cells[i].getSize();\r\n\t\t\t\t\tfor (var cell in cellSize) {\r\n\t\t\t\t\t\tcellSize[cell] = Math.max(cellSize[cell], otherCell[cell]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (var size in sizes) {\r\n\t\t\t\tsizes[size] = sizes[size] || cellSize[size];\r\n\t\t\t}\r\n\t\t\tsizes.gravity = Math.max(sizes.gravity, cellSize.gravity);\r\n\t\t}\r\n\t\treturn sizes;\r\n\t};\r\n\treturn ViewLayout;\r\n}(Layout));\r\n\r\nmodule.exports = ViewLayout;\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = __webpack_require__(3),\r\n\tutils = __webpack_require__(0),\r\n\tCell = __webpack_require__(5);\r\n\r\nvar ViewCell = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ViewCell, _super);\r\n\tfunction ViewCell(parent, config, factory) {\r\n\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\r\n\t\tif(config.view){\r\n\t\t\tif(config.id){\r\n\t\t\t\t// pass id to the nested view\r\n\t\t\t\tthis.$id = utils.uid();\r\n\t\t\t}\r\n\t\t\tvar childConfig = utils.copy(config);\r\n\t\t\tdelete childConfig.config;\r\n\t\t\tdelete childConfig.templates;\r\n\r\n\t\t\tthis.$content = this.$factory.createView(config.view, this, childConfig, this);\r\n\t\t\tif(!this.$content)\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t_this.$name = \"viewCell\";\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tViewCell.prototype.destructor = function(){\r\n\t\tthis.clear();\r\n\t\t_super.prototype.destructor.call(this);\r\n\t};\r\n\r\n\tViewCell.prototype.clear = function(){\r\n\r\n\t\tthis.$initialized = false;\r\n\r\n\t\t// call destructor\r\n\t\tif (this.$content){\r\n\t\t\tvar method = this.$content.unload || this.$content.destructor;\r\n\t\t\tif (method){\r\n\t\t\t\tmethod.call(this.$content);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_super.prototype.clear.call(this);\r\n\r\n\t};\r\n\r\n\tViewCell.prototype.scrollTo = function(left, top){\r\n\r\n\t\tif(this.$content && this.$content.scrollTo){\r\n\t\t\tthis.$content.scrollTo(left, top);\r\n\t\t}else{\r\n\t\t\t_super.prototype.scrollTo.call(this, left, top);\r\n\t\t}\r\n\t};\r\n\r\n\tViewCell.prototype._setContentSize = function(x, y){\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tvar outerX = x + borders.horizontal;\r\n\t\tvar outerY = y + borders.vertical;\r\n\t\tthis.$config.width = outerX;\r\n\t\tthis.$config.height = outerY;\r\n\t};\r\n\r\n\tViewCell.prototype.setSize = function(x, y){\r\n\t\t_super.prototype.setSize.call(this, x, y);\r\n\r\n\t\tif(!this.$preResize && this.$content) {\r\n\t\t\tif (!this.$initialized) {\r\n\t\t\t\tthis.$initialized = true;\r\n\t\t\t\tvar header = this.$view.childNodes[0];\r\n\t\t\t\tvar content = this.$view.childNodes[1];\r\n\t\t\t\tif(!content) content = header;\r\n\r\n\t\t\t\t/*if(this.$content.$config){\r\n\t\t\t\t\tthis.$content.$config.width = this.$lastSize.contentX;\r\n\t\t\t\t\tthis.$content.$config.height = this.$lastSize.contentY;\r\n\t\t\t\t}*/\r\n\t\t\t\tthis.$content.init(content);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tViewCell.prototype.setContentSize = function(){\r\n\t\tif(!this.$preResize && this.$content) {\r\n\t\t\tif (this.$initialized) {\r\n\t\t\t\tthis.$content.setSize(this.$lastSize.contentX, this.$lastSize.contentY);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tViewCell.prototype.getContentSize = function(){\r\n\t\tvar size = _super.prototype.getContentSize.call(this);\r\n\r\n\t\tif(this.$content && this.$initialized){\r\n\t\t\tvar childSize = this.$content.getSize();\r\n\t\t\tsize.width = childSize.contentX === undefined ? childSize.width : childSize.contentX;\r\n\t\t\tsize.height = childSize.contentY === undefined ? childSize.height : childSize.contentY;\r\n\t\t}\r\n\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tsize.width += borders.horizontal;\r\n\t\tsize.height += borders.vertical;\r\n\r\n\t\treturn size;\r\n\t};\r\n\r\n\treturn ViewCell;\r\n}(Cell));\r\n\r\nmodule.exports = ViewCell;\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = __webpack_require__(3),\r\n\tdomHelpers = __webpack_require__(1),\r\n\tutils = __webpack_require__(0),\r\n\tCell = __webpack_require__(5);\r\n\r\nvar ResizerCell = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ResizerCell, _super);\r\n\tfunction ResizerCell(parent, config, factory) {\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\r\n\t\tvar startBackSize, startFrontSize;\r\n\r\n\t\t_this._moveHandler = function (e) {\r\n\t\t\t_this._moveResizer(_this._resizer, e.pageX, e.pageY);\r\n\t\t};\r\n\t\t_this._upHandler = function () {\r\n\t\t\tvar newSizes = _this._getNewSizes();\r\n\t\t\tif(_this.callEvent(\"onResizeEnd\", [startBackSize, startFrontSize, newSizes ? newSizes.back : 0, newSizes ? newSizes.front : 0]) !== false){\r\n\t\t\t\t_this._setSizes();\r\n\t\t\t}\r\n\r\n\t\t\t_this._setBackground(false);\r\n\t\t\t_this._clearResizer();\r\n\t\t\t_this._clearListeneres();\r\n\t\t};\r\n\r\n\t\t_this._clearListeneres = function(){\r\n\t\t\tthis.$domEvents.detach(document, \"mouseup\", _this._upHandler);\r\n\t\t\tthis.$domEvents.detach(document, \"mousemove\", _this._moveHandler);\r\n\t\t\tthis.$domEvents.detach(document, \"mousemove\", _this._startOnMove);\r\n\t\t\tthis.$domEvents.detach(document, \"mouseup\", _this._cancelDND);\r\n\t\t};\r\n\r\n\t\t_this._callStartDNDEvent = function(){\r\n\t\t\tif (this._xMode) {\r\n\t\t\t\tstartBackSize = this._behind.$config.width || this._behind.$view.offsetWidth;\r\n\t\t\t\tstartFrontSize = this._front.$config.width || this._front.$view.offsetWidth;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tstartBackSize = this._behind.$config.height || this._behind.$view.offsetHeight;\r\n\t\t\t\tstartFrontSize = this._front.$config.height || this._front.$view.offsetHeight;\r\n\t\t\t}\r\n\r\n\t\t\tif(_this.callEvent(\"onResizeStart\", [startBackSize, startFrontSize]) === false){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t_this._startDND = function(e){\r\n\t\t\tvar res = this._callStartDNDEvent();\r\n\t\t\tif(res === false){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar stop = false;\r\n\t\t\tthis._eachGroupItem(function(resizer){\r\n\t\t\t\tresizer._getSiblings();\r\n\t\t\t\tif(resizer._callStartDNDEvent() === false){\r\n\t\t\t\t\tstop = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(stop){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t_this._moveHandler(e);\r\n\r\n\t\t\t_this.$domEvents.attach(document, \"mousemove\", _this._moveHandler);\r\n\t\t\t_this.$domEvents.attach(document, \"mouseup\", _this._upHandler);\r\n\t\t};\r\n\r\n\t\t_this._cancelDND = function(){\r\n\t\t\t_this._setBackground(false);\r\n\t\t\t_this._clearResizer();\r\n\t\t\t_this._clearListeneres();\r\n\t\t};\r\n\r\n\t\t_this._startOnMove = function(e){\r\n\t\t\tif(_this._isPosChanged(e)){\r\n\t\t\t\t_this._clearListeneres();\r\n\t\t\t\t_this._startDND(e);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t_this._downHandler = function (e) {\r\n\t\t\t_this._getSiblings();\r\n\r\n\t\t\tif (_this._behind.$config.collapsed || _this._front.$config.collapsed) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t_this._setBackground(true);\r\n\t\t\t_this._resizer = _this._setResizer();\r\n\r\n\t\t\t_this._positions = {\r\n\t\t\t\tx: e.pageX,\r\n\t\t\t\ty: e.pageY,\r\n\t\t\t\ttimestamp: Date.now()\r\n\t\t\t};\r\n\r\n\t\t\t_this.$domEvents.attach(document, \"mousemove\", _this._startOnMove);\r\n\t\t\t_this.$domEvents.attach(document, \"mouseup\", _this._cancelDND);\r\n\t\t};\r\n\t\t_this.$name = \"resizer\";\r\n\t\treturn _this;\r\n\t}\r\n\tResizerCell.prototype.init = function () {\r\n\t\tvar _this = this;\r\n\t\t_super.prototype.init.call(this);\r\n\t\tthis._xMode = this.$config.mode === \"x\";\r\n\t\tif (this._xMode && !this.$config.width) {\r\n\t\t\tthis.$config.width = this.$config.minWidth = 1;\r\n\t\t}\r\n\t\telse if (!this._xMode && !this.$config.height) {\r\n\t\t\tthis.$config.height = this.$config.minHeight = 1;\r\n\t\t}\r\n\r\n\t\tthis.$config.margin = -1;\r\n\r\n\t\tthis.$domEvents.attach(this.$view, \"mousedown\", _this._downHandler);\r\n\r\n\t};\r\n\tResizerCell.prototype.$toHTML = function () {\r\n\t\tvar mode = this.$config.mode;\r\n\t\tvar css = this.$config.css || \"\";\r\n\t\treturn \"<div class='gantt_layout_cell gantt_resizer gantt_resizer_\"+mode+\"'><div class='gantt_layout_content gantt_resizer_\" + mode + (css ? (\" \" + css) : \"\") + \"'></div></div>\";\r\n\t};\r\n\r\n\tResizerCell.prototype._clearResizer = function(){\r\n\t\tif(this._resizer){\r\n\t\t\tif(this._resizer.parentNode){\r\n\t\t\t\tthis._resizer.parentNode.removeChild(this._resizer);\r\n\t\t\t}\r\n\t\t\tthis._resizer = null;\r\n\t\t}\r\n\t};\r\n\r\n\tResizerCell.prototype._isPosChanged = function(e){\r\n\t\tif(!this._positions){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif(Math.abs(this._positions.x - e.pageX) > 3 || Math.abs(this._positions.y - e.pageY) > 3){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tif(Date.now() - this._positions.timestamp > 300){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t};\r\n\r\n\tResizerCell.prototype._getSiblings = function () {\r\n\t\tvar cells = this.$parent.getCells();\r\n\r\n\t\tif(this.$config.prev){\r\n\t\t\tthis._behind = this.$factory.getView(this.$config.prev);\r\n\t\t\tif(!(this._behind instanceof Cell)){\r\n\t\t\t\tthis._behind = this._behind.$parent;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(this.$config.next){\r\n\t\t\tthis._front = this.$factory.getView(this.$config.next);\r\n\t\t\tif(!(this._front instanceof Cell)){\r\n\t\t\t\tthis._front = this._behind.$parent;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\tif (this === cells[i]) {\r\n\t\t\t\tif(!this._behind)\r\n\t\t\t\t\tthis._behind = cells[i - 1];\r\n\t\t\t\tif(!this._front)\r\n\t\t\t\t\tthis._front = cells[i + 1];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tResizerCell.prototype._setBackground = function (state) {\r\n\t\tvar classes = \"gantt_resizing\";\r\n\t\tif (!state) {\r\n\t\t\tdomHelpers.removeClassName(this._behind.$view, classes);\r\n\t\t\tdomHelpers.removeClassName(this._front.$view, classes);\r\n\t\t\tdomHelpers.removeClassName(document.body, 'gantt_noselect');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tdomHelpers.addClassName(this._behind.$view, classes, true);\r\n\t\tdomHelpers.addClassName(this._front.$view, classes, true);\r\n\t\tdomHelpers.addClassName(document.body, 'gantt_noselect', true);\r\n\t};\r\n\tResizerCell.prototype._setResizer = function () {\r\n\t\tvar resizer = document.createElement(\"div\");\r\n\t\tresizer.className = \"gantt_resizer_stick\";\r\n\t\tthis.$view.appendChild(resizer);\r\n\t\tthis.$view.style.overflow = \"visible\";\r\n\t\tresizer.style.height = this.$view.style.height;\r\n\t\treturn resizer;\r\n\t};\r\n\r\n\tResizerCell.prototype._getDirection = function(x, y){\r\n\t\tvar shift;\r\n\t\tif (this._xMode) {\r\n\t\t\tshift = x - this._positions.x;\r\n\t\t}else{\r\n\t\t\tshift = y - this._positions.y;\r\n\t\t}\r\n\t\treturn shift ? shift < 0 ? -1 : 1 : 0;\r\n\t};\r\n\r\n\tResizerCell.prototype._getResizePosition = function(x, y){\r\n\t\tvar size;\r\n\t\tvar behindSide;\r\n\t\tvar behindMin;\r\n\t\tvar frontSide;\r\n\t\tvar frontMin;\r\n\t\tif (this._xMode) {\r\n\t\t\tsize = x - this._positions.x;\r\n\t\t\tbehindSide = this._behind.$config.width || this._behind.$view.offsetWidth;\r\n\t\t\tfrontSide = this._front.$config.width || this._front.$view.offsetWidth;\r\n\t\t\tbehindMin = this._behind.$config.minWidth;\r\n\t\t\tfrontMin = this._front.$config.minWidth;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsize = y - this._positions.y;\r\n\t\t\tbehindSide = this._behind.$config.height || this._behind.$view.offsetHeight;\r\n\t\t\tfrontSide = this._front.$config.height || this._front.$view.offsetHeight;\r\n\t\t\tbehindMin = this._front.$config.minHeight;\r\n\t\t\tfrontMin = this._front.$config.minHeight;\r\n\t\t}\r\n\t\tvar direction = this._getDirection(x, y);\r\n\t\tvar newBehindSide,\r\n\t\t\tnewFrontSide;\r\n\r\n\t\tif (direction === -1) {\r\n\t\t\tnewFrontSide = frontSide - size;\r\n\t\t\tnewBehindSide = behindSide - Math.abs(size);\r\n\r\n\t\t\tif (frontSide - size > this._front.$config.maxWidth) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (Math.abs(size) >= behindSide) {\r\n\t\t\t\tsize = -Math.abs(behindSide - 2);\r\n\t\t\t}\r\n\t\t\t// if min width\r\n\t\t\tif (behindSide - Math.abs(size) <= behindMin) {\r\n\t\t\t\t//this._resizer.style.background = \"red\";\r\n\t\t\t\tsize = -Math.abs(behindSide - behindMin);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tnewFrontSide = frontSide - Math.abs(size);\r\n\t\t\tnewBehindSide = behindSide + size;\r\n\r\n\t\t\tif (behindSide + size > this._behind.$config.maxWidth) {\r\n\t\t\t\tsize = this._behind.$config.maxWidth - behindSide;\r\n\t\t\t\t// return;\r\n\t\t\t}\r\n\t\t\tif (Math.abs(size) >= frontSide) {\r\n\t\t\t\tsize = frontSide - 2;\r\n\t\t\t}\r\n\t\t\t// if min width\r\n\t\t\tif (frontSide - Math.abs(size) <= frontMin) {\r\n\t\t\t\tsize = Math.abs(frontSide - frontMin);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (direction === -1) {\r\n\t\t\tnewFrontSide = frontSide - size;\r\n\t\t\tnewBehindSide = behindSide - Math.abs(size);\r\n\t\t} else {\r\n\t\t\tnewFrontSide = frontSide - Math.abs(size);\r\n\t\t\tnewBehindSide = behindSide + size;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tsize: size,\r\n\t\t\tnewFrontSide: newFrontSide,\r\n\t\t\tnewBehindSide: newBehindSide\r\n\t\t};\r\n\t};\r\n\r\n\tResizerCell.prototype._getGroupName = function(){\r\n\t\tthis._getSiblings();\r\n\t\treturn this._front.$config.group || this._behind.$config.group;\r\n\t};\r\n\r\n\tResizerCell.prototype._eachGroupItem = function(callback, master){\r\n\t\tvar layout = this.$factory.getView(\"main\");\r\n\r\n\t\tvar group = this._getGroupName();\r\n\r\n\t\tvar resizers = layout.getCellsByType(\"resizer\");\r\n\t\tfor(var i = 0; i < resizers.length; i++) {\r\n\t\t\tif (resizers[i]._getGroupName() == group && resizers[i] != this) {\r\n\t\t\t\tcallback.call(master || this, resizers[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tResizerCell.prototype._getGroupResizePosition = function(x, y){\r\n\t\tvar sizes = this._getResizePosition(x, y);\r\n\r\n\t\tif(!this._getGroupName()){\r\n\t\t\treturn sizes;\r\n\t\t}\r\n\r\n\t\tvar positions = [sizes];\r\n\r\n\t\tthis._eachGroupItem(function(resizer){\r\n\t\t\tresizer._getSiblings();\r\n\t\t\tvar pos = utils.copy(this._positions);\r\n\t\t\tif(this._xMode){\r\n\t\t\t\tpos.x += (resizer._behind.$config.width - this._behind.$config.width);\r\n\t\t\t}else{\r\n\t\t\t\tpos.y += (resizer._behind.$config.height - this._behind.$config.height);\r\n\t\t\t}\r\n\t\t\tresizer._positions = pos;\r\n\t\t\tpositions.push(resizer._getResizePosition(x, y));\r\n\t\t});\r\n\r\n\t\tvar minMax;\r\n\t\tfor(var i =0; i < positions.length; i++){\r\n\t\t\tif(!positions[i]) return;\r\n\t\t\tif(minMax === undefined){\r\n\t\t\t\tminMax = positions[i];\r\n\t\t\t}else if(positions[i].newBehindSide > minMax.newBehindSide){\r\n\t\t\t\tminMax = positions[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t/*\tif(minMax != sizes){\r\n\t\t\tminMax.size = minMax.size;\r\n\t\t}*/\r\n\r\n\t\treturn minMax;\r\n\t};\r\n\r\n\tResizerCell.prototype._moveResizer = function (av, x, y) {\r\n\t\tif (x === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar sizes = this._getGroupResizePosition(x, y);\r\n\t\tif(!sizes)\r\n\t\t\treturn;\r\n\r\n\t\tif (Math.abs(sizes.size) === 1) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this._xMode) {\r\n\t\t\tav.style.left = sizes.size + 'px';\r\n\t\t\tthis._positions.nextX = sizes.size || 0;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tav.style.top = sizes.size + 'px';\r\n\t\t\tthis._positions.nextY = sizes.size || 0;\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onResize\", [sizes.newBehindSide, sizes.newFrontSide]);\r\n\t};\r\n\tResizerCell.prototype._setGravity = function (cell) {\r\n\t\tvar size = this._xMode ? \"offsetWidth\" : \"offsetHeight\";\r\n\t\tvar position = this._xMode ? this._positions.nextX : this._positions.nextY;\r\n\t\tvar frontSize = this._front.$view[size];\r\n\t\tvar behindSize = this._behind.$view[size];\r\n\t\tvar frontG = this._front.getSize().gravity;\r\n\t\tvar behindG = this._behind.getSize().gravity;\r\n\t\tvar newFrontG = (frontSize - position) / frontSize * frontG;\r\n\t\tvar newBehindG = (behindSize + position) / behindSize * behindG;\r\n\t\tif (cell !== \"front\") {\r\n\t\t\tthis._front.$config.gravity = newFrontG;\r\n\t\t}\r\n\t\tif (cell !== \"behind\") {\r\n\t\t\tthis._behind.$config.gravity = newBehindG;\r\n\t\t}\r\n\t};\r\n\r\n/*\tResizerCell.prototype.setSize = function(){\r\n\t\t_super.apply(this, arguments)\r\n\t};*/\r\n\r\n\tResizerCell.prototype._getNewSizes = function(){\r\n\t\tvar behindSize = this._xMode ? this._behind.$config.width : this._behind.$config.height;\r\n\t\tvar frontSize = this._xMode ? this._front.$config.width : this._front.$config.height;\r\n\t\tvar position = this._xMode ? this._positions.nextX : this._positions.nextY;\r\n\r\n\t\tif(!frontSize && !behindSize){\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tfront: frontSize ? ((frontSize - position) || 1) : 0,\r\n\t\t\tback: behindSize ? ((behindSize + position) || 1) : 0\r\n\t\t};\r\n\t};\r\n\r\n\tResizerCell.prototype._assignNewSizes = function(newSizes){\r\n\t\tthis._getSiblings();\r\n\t\tvar side = this._xMode ? 'width' : 'height';\r\n\r\n\t\t// if only gravity cells\r\n\t\tif (!newSizes) {\r\n\t\t\tthis._setGravity();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (!newSizes.front) {\r\n\t\t\t\tthis._setGravity(\"behind\");\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._front.$config[side] = newSizes.front;\r\n\t\t\t}\r\n\t\t\tif (!newSizes.back) {\r\n\t\t\t\tthis._setGravity(\"front\");\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._behind.$config[side] = newSizes.back;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tResizerCell.prototype._setSizes = function () {\r\n\t\tif (this._resizer) {\r\n\t\t\tthis.$view.removeChild(this._resizer);\r\n\t\t}\r\n\t\tvar newSizes = this._getNewSizes();\r\n\r\n\t\tif (this._positions.nextX || this._positions.nextY) {\r\n\t\t\tthis._assignNewSizes(newSizes);\r\n\r\n\t\t\tvar side = this._xMode ? 'width' : 'height';\r\n\t\t\tif(this._front.$config.group){\r\n\t\t\t\tthis.$gantt.$layout._syncCellSizes(this._front.$config.group, this._front.$config[side]);\r\n\t\t\t}else if(this._behind.$config.group){\r\n\t\t\t\tthis.$gantt.$layout._syncCellSizes(this._behind.$config.group, this._behind.$config[side]);\r\n\t\t\t}\r\n\r\n\t\t\tif(this._getGroupName()){\r\n\t\t\t\tthis.$factory.getView(\"main\").resize();\r\n\t\t\t}else{\r\n\t\t\t\tthis.$parent.resize();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t};\r\n\treturn ResizerCell;\r\n}(Cell));\r\n\r\nmodule.exports = ResizerCell;\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __extends = __webpack_require__(3),\r\n\tdomHelpers = __webpack_require__(1),\r\n\tutils = __webpack_require__(0),\r\n\tenv = __webpack_require__(6),\r\n\teventable = __webpack_require__(2),\r\n\tCell = __webpack_require__(5);\r\n\r\nvar ScrollbarCell = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ScrollbarCell, _super);\r\n\tfunction ScrollbarCell(parent, config, factory, gantt) {\r\n\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\t\tthis.$config = utils.mixin(config, {scroll: \"x\"});\r\n\t\t_this._scrollHorizontalHandler = utils.bind(_this._scrollHorizontalHandler, _this);\r\n\t\t_this._scrollVerticalHandler = utils.bind(_this._scrollVerticalHandler, _this);\r\n\t\t_this._outerScrollVerticalHandler = utils.bind(_this._outerScrollVerticalHandler, _this);\r\n\t\t_this._outerScrollHorizontalHandler = utils.bind(_this._outerScrollHorizontalHandler, _this);\r\n\t\t_this._mouseWheelHandler = utils.bind(_this._mouseWheelHandler, _this);\r\n\r\n\t\tthis.$config.hidden = true;\r\n\t\tvar size = gantt.config.scroll_size;\r\n\r\n\t\tif(gantt.env.isIE){\r\n\t\t\t// full element height/width must be bigger than just a browser scrollbar,\r\n\t\t\t// otherwise the scrollbar element won't be scrolled on click\r\n\t\t\tsize += 1;\r\n\t\t}\r\n\r\n\t\tif(this._isHorizontal()){\r\n\t\t\t_this.$config.height = size;\r\n\t\t\t_this.$parent.$config.height = size;\r\n\t\t}else{\r\n\t\t\t_this.$config.width = size;\r\n\t\t\t_this.$parent.$config.width = size;\r\n\t\t}\r\n\r\n\t\tthis.$config.scrollPosition = 0;\r\n\r\n\t\t_this.$name = \"scroller\";\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tScrollbarCell.prototype.init = function(container){\r\n\t\tcontainer.innerHTML = this.$toHTML();\r\n\t\tthis.$view = container.firstChild;\r\n\r\n\t\tif(!this.$view){\r\n\t\t\tthis.init();\r\n\t\t}\r\n\t\tif(this._isVertical()){\r\n\t\t\tthis._initVertical();\r\n\t\t}else{\r\n\t\t\tthis._initHorizontal();\r\n\t\t}\r\n\t\tthis._initMouseWheel();\r\n\t\tthis._initLinkedViews();\r\n\t};\r\n\r\n\tScrollbarCell.prototype.$toHTML = function () {\r\n\t\tvar className = this._isHorizontal() ? \"gantt_hor_scroll\" : \"gantt_ver_scroll\";\r\n\t\treturn \"<div class='gantt_layout_cell \"+className+\"'><div style='\"+(this._isHorizontal() ? \"width:2000px\" : \"height:2000px\")+\"'></div></div>\";\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getRootParent = function(){\r\n\t\tvar parent = this.$parent;\r\n\t\twhile(parent && parent.$parent){\r\n\t\t\tparent = parent.$parent;\r\n\t\t}\r\n\t\tif(parent){\r\n\t\t\treturn parent;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tfunction eachCell(root, res){\r\n\t\tres.push(root);\r\n\t\tif(root.$cells){\r\n\t\t\tfor(var i = 0; i < root.$cells.length; i++){\r\n\t\t\t\teachCell(root.$cells[i], res);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tScrollbarCell.prototype._eachView = function(){\r\n\t\tvar res = [];\r\n\t\teachCell(this._getRootParent(), res);\r\n\t\treturn res;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getLinkedViews = function(){\r\n\t\tvar views = this._eachView();\r\n\t\tvar res = [];\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].$config && ((this._isVertical() && views[i].$config.scrollY == this.$id) || (this._isHorizontal() && views[i].$config.scrollX == this.$id)) ){\r\n\t\t\t\tres.push(views[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\r\n\tScrollbarCell.prototype._initHorizontal = function(){\r\n\t\tthis.$scroll_hor = this.$view;\r\n\t\tthis.$domEvents.attach(this.$view, \"scroll\", this._scrollHorizontalHandler);\r\n\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initLinkedViews = function(){\r\n\t\tvar views = this._getLinkedViews();\r\n\t\tvar css = this._isVertical() ?\"gantt_layout_outer_scroll gantt_layout_outer_scroll_vertical\" : \"gantt_layout_outer_scroll gantt_layout_outer_scroll_horizontal\";\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\t//views[i].$config.css = [views[i].$config.css || \"\", css].join(\" \");\r\n\t\t\tdomHelpers.addClassName(views[i].$view || views[i].getNode(), css);\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initVertical = function(){\r\n\t\tthis.$scroll_ver = this.$view;\r\n\t\tthis.$domEvents.attach(this.$view, \"scroll\", this._scrollVerticalHandler);\r\n\t};\r\n\r\n\tScrollbarCell.prototype._updateLinkedViews = function(){\r\n\t\tvar root = this._getRootParent();\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initMouseWheel = function(){\r\n\t\tvar ff = env.isFF;\r\n\t\tif (ff)\r\n\t\t\tthis.$domEvents.attach(this._getRootParent().$view, \"wheel\", this._mouseWheelHandler);\r\n\t\telse\r\n\t\t\tthis.$domEvents.attach(this._getRootParent().$view, \"mousewheel\", this._mouseWheelHandler);\r\n\t};\r\n\r\n\r\n\r\n\r\n\tScrollbarCell.prototype.scrollHorizontally = function(left){\r\n\t\tif(this._scrolling) return;\r\n\t\tthis._scrolling = true;\r\n\r\n\t\tthis.$scroll_hor.scrollLeft = left;\r\n\t\tthis.$config.codeScrollLeft = left;\r\n\t\tleft = this.$scroll_hor.scrollLeft;\r\n\r\n\t\tvar views = this._getLinkedViews();\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].scrollTo){\r\n\t\t\t\tviews[i].scrollTo(left, undefined);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar oldSize = this.$config.scrollPosition;\r\n\t\tthis.$config.scrollPosition = left;\r\n\t\tthis.callEvent(\"onScroll\", [oldSize, left, this.$config.scroll]);\r\n\t\tthis._scrolling = false;\r\n\t};\r\n\tScrollbarCell.prototype.scrollVertically = function(top){\r\n\t\tif(this._scrolling) return;\r\n\t\tthis._scrolling = true;\r\n\r\n\t\tthis.$scroll_ver.scrollTop = top;\r\n\t\ttop = this.$scroll_ver.scrollTop;\r\n\r\n\t\tvar views = this._getLinkedViews();\r\n\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].scrollTo){\r\n\t\t\t\tviews[i].scrollTo(undefined, top);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar oldSize = this.$config.scrollPosition;\r\n\t\tthis.$config.scrollPosition = top;\r\n\t\tthis.callEvent(\"onScroll\", [oldSize, top, this.$config.scroll]);\r\n\t\tthis._scrolling = false;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._isVertical = function(){\r\n\t\treturn this.$config.scroll == \"y\";\r\n\t};\r\n\tScrollbarCell.prototype._isHorizontal = function(){\r\n\t\treturn this.$config.scroll == \"x\";\r\n\t};\r\n\tScrollbarCell.prototype._scrollHorizontalHandler = function (e) {\r\n\t\tif(this._isVertical() || this._scrolling){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//in safari we can catch previous onscroll after setting new value from mouse-wheel event\r\n\t\t//set delay to prevent value drifiting\r\n\t\tif ((new Date()) - ( this._wheel_time || 0 ) < 100) return true;\r\n\t\tif (this.$gantt._touch_scroll_active) return;\r\n\t\tvar left = this.$scroll_hor.scrollLeft;\r\n\r\n\t\tthis.scrollHorizontally(left);\r\n\r\n\t\tthis._oldLeft = this.$scroll_hor.scrollLeft;\r\n\t};\r\n\tScrollbarCell.prototype._outerScrollHorizontalHandler = function(e){\r\n\t\tif(this._isVertical()){\r\n\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype.show = function(){\r\n\t\tthis.$parent.show();\r\n\t};\r\n\tScrollbarCell.prototype.hide = function(){\r\n\t\tthis.$parent.hide();\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getScrollSize = function(){\r\n\t\tvar scrollSize = 0;\r\n\t\tvar outerSize = 0;\r\n\t\tvar isHorizontal = this._isHorizontal();\r\n\r\n\t\tvar linked = this._getLinkedViews();\r\n\t\tvar view;\r\n\t\tvar scrollProperty = isHorizontal ? \"scrollWidth\" : \"scrollHeight\",\r\n\t\t\tinnerSizeProperty = isHorizontal ? \"contentX\" : \"contentY\";\r\n\t\tvar outerProperty = isHorizontal ? \"x\" : \"y\";\r\n\t\tvar offset = this._getScrollOffset();\r\n\r\n\t\tfor(var i = 0; i < linked.length; i++){\r\n\t\t\tview = linked[i];\r\n\t\t\tif(!(view && view.$content && view.$content.getSize && !view.$config.hidden)) continue;\r\n\r\n\t\t\tvar sizes = view.$content.getSize();\r\n\t\t\tvar cellScrollSize;\r\n\t\t\tif(sizes.hasOwnProperty(scrollProperty)){\r\n\t\t\t\tcellScrollSize = sizes[scrollProperty];\r\n\t\t\t}else{\r\n\t\t\t\tcellScrollSize = sizes[innerSizeProperty];\r\n\t\t\t}\r\n\r\n\t\t\tif(offset){\r\n\t\t\t\t// precalculated vertical/horizontal offsets of scrollbar to emulate 4.x look\r\n\t\t\t\tif(sizes[innerSizeProperty] > sizes[outerProperty] && sizes[innerSizeProperty] > scrollSize && (cellScrollSize > (sizes[outerProperty] - offset + 2))){\r\n\t\t\t\t\tscrollSize = cellScrollSize + (isHorizontal ? 0 : 2);\r\n\t\t\t\t\touterSize = sizes[outerProperty];\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tvar nonScrollableSize = Math.max(sizes[innerSizeProperty] - cellScrollSize, 0);\r\n\t\t\t\tvar scrollableViewPortSize = Math.max(sizes[outerProperty] - nonScrollableSize, 0);\r\n\t\t\t\tcellScrollSize = cellScrollSize + nonScrollableSize;\r\n\r\n\t\t\t\tif(cellScrollSize > scrollableViewPortSize && (cellScrollSize > scrollSize) ){\r\n\t\t\t\t\t//|| (cellScrollSize === scrollSize && sizes[outerProperty] < outerSize) // same scroll width but smaller scrollable view port\r\n\r\n\t\t\t\t\tscrollSize = cellScrollSize;\r\n\t\t\t\t\touterSize = sizes[outerProperty];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\touterScroll: outerSize,\r\n\t\t\tinnerScroll: scrollSize\r\n\t\t};\r\n\t};\r\n\r\n\tScrollbarCell.prototype.scroll = function(position){\r\n\t\tif(this._isHorizontal()){\r\n\t\t\tthis.scrollHorizontally(position);\r\n\t\t}else{\r\n\t\t\tthis.scrollVertically(position);\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype.getScrollState = function(){\r\n\t\treturn {\r\n\t\t\tvisible: this.isVisible(),\r\n\t\t\tdirection: this.$config.scroll,\r\n\t\t\tsize: this.$config.outerSize,\r\n\t\t\tscrollSize: this.$config.scrollSize || 0,\r\n\t\t\tposition: this.$config.scrollPosition || 0\r\n\t\t};\r\n\t};\r\n\r\n\tScrollbarCell.prototype.setSize = function(width, height){\r\n\t\t_super.prototype.setSize.apply(this, arguments);\r\n\r\n\t\tvar scrollSizes = this._getScrollSize();\r\n\r\n\t\tvar ownSize = (this._isVertical() ? height : width) - this._getScrollOffset() + (this._isHorizontal() ? 1 : 0);\r\n\r\n\t\tif(scrollSizes.innerScroll && ownSize > scrollSizes.outerScroll){\r\n\t\t\tscrollSizes.innerScroll += (ownSize - scrollSizes.outerScroll);\r\n\t\t}\r\n\t\tthis.$config.scrollSize = scrollSizes.innerScroll;\r\n\r\n\t\tthis.$config.width = width;\r\n\t\tthis.$config.height = height;\r\n\t\tthis._setScrollSize(scrollSizes.innerScroll);\r\n\t};\r\n\r\n\tScrollbarCell.prototype.isVisible = function(){\r\n\t\treturn !!(this.$parent && this.$parent.$view.parentNode);\r\n\t};\r\n\r\n\tScrollbarCell.prototype.shouldShow = function(){\r\n\t\tvar scrollSizes = this._getScrollSize();\r\n\t\tif(!scrollSizes.innerScroll && (this.$parent && this.$parent.$view.parentNode)){\r\n\t\t\treturn false;\r\n\t\t}else if(scrollSizes.innerScroll && !(this.$parent && this.$parent.$view.parentNode)){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype.shouldHide = function(){\r\n\t\tvar scrollSizes = this._getScrollSize();\r\n\t\tif(!scrollSizes.innerScroll && (this.$parent && this.$parent.$view.parentNode)){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tScrollbarCell.prototype.toggleVisibility = function(){\r\n\t\tif(this.shouldHide()){\r\n\t\t\tthis.hide();\r\n\t\t}else if(this.shouldShow()){\r\n\t\t\tthis.show();\r\n\t\t}\r\n\t};\r\n\t\r\n\tScrollbarCell.prototype._getScaleOffset = function(view){\r\n\t\tvar offset = 0;\r\n\t\tif(view && (view.$config.view == \"timeline\" || view.$config.view == \"grid\")){\r\n\t\t\toffset = view.$content.$getConfig().scale_height;\r\n\t\t}\r\n\t\treturn offset;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getScrollOffset = function(){\r\n\t\tvar offset = 0;\r\n\t\tif(this._isVertical()){\r\n\t\t\tvar parentLayout = this.$parent.$parent;\r\n\t\t\toffset = Math.max(\r\n\t\t\t\tthis._getScaleOffset(parentLayout.getPrevSibling(this.$parent.$id)),\r\n\t\t\t\tthis._getScaleOffset(parentLayout.getNextSibling(this.$parent.$id))\r\n\t\t\t\t);\r\n\t\t}else{\r\n\t\t\tvar linked = this._getLinkedViews();\r\n\r\n\t\t\tfor (var i = 0; i < linked.length; i++) {\r\n\t\t\t\tvar view = linked[i],\r\n\t\t\t\t\tvparent = view.$parent;\r\n\t\t\t\tvar cells = vparent.$cells;\r\n\r\n\t\t\t\tvar last = cells[cells.length - 1];\r\n\r\n\t\t\t\tif (last && last.$config.view == \"scrollbar\" && last.$config.hidden === false) {\r\n\t\t\t\t\toffset = last.$config.width;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn offset || 0;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._setScrollSize = function(size){\r\n\t\tvar property = this._isHorizontal() ? \"width\" : \"height\";\r\n\t\tvar scrollbar = this._isHorizontal() ? this.$scroll_hor : this.$scroll_ver;\r\n\r\n\t\tvar offset = this._getScrollOffset();\r\n\r\n\t\tvar node = scrollbar.firstChild;\r\n\r\n\t\tif(offset){\r\n\t\t\tif(this._isVertical()){\r\n\r\n\t\t\t\tthis.$config.outerSize = (this.$config.height - offset + 3);\r\n\t\t\t\tscrollbar.style.height = this.$config.outerSize + \"px\";\r\n\t\t\t\tscrollbar.style.top = (offset-1) + \"px\";\r\n\t\t\t\tdomHelpers.addClassName(scrollbar, this.$parent._borders.top);\r\n\t\t\t\tdomHelpers.addClassName(scrollbar.parentNode, \"gantt_task_vscroll\");\r\n\t\t\t}else{\r\n\t\t\t\tthis.$config.outerSize = (this.$config.width - offset + 1);\r\n\t\t\t\tscrollbar.style.width = this.$config.outerSize + \"px\";\r\n\t\t\t\t//domHelpers.addClassName(scrollbar, this.$parent._borders.right);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tscrollbar.style.top = \"auto\";\r\n\t\t\tdomHelpers.removeClassName(scrollbar, this.$parent._borders.top);\r\n\t\t\tdomHelpers.removeClassName(scrollbar.parentNode, \"gantt_task_vscroll\");\r\n\t\t\tthis.$config.outerSize = this.$config.height;\r\n\t\t}\r\n\r\n\t\tnode.style[property] = size + \"px\";\r\n\t};\r\n\r\n\tScrollbarCell.prototype._scrollVerticalHandler = function (e) {\r\n\t\tif(this._scrollHorizontalHandler() || this._scrolling){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this.$gantt._touch_scroll_active) return;\r\n\t\tvar top = this.$scroll_ver.scrollTop;\r\n\t\tvar prev = this._oldTop;\r\n\t\tif(top == prev) return;\r\n\r\n\t\tthis.scrollVertically(top);\r\n\r\n\t\tthis._oldTop = this.$scroll_ver.scrollTop;\r\n\r\n\t};\r\n\tScrollbarCell.prototype._outerScrollVerticalHandler = function(e){\r\n\t\tif(this._scrollHorizontalHandler()){\r\n\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype._checkWheelTarget = function(targetNode){\r\n\t\tvar connectedViews = this._getLinkedViews().concat(this);\r\n\r\n\t\tfor(var i = 0; i < connectedViews.length; i++){\r\n\t\t\tvar node = connectedViews[i].$view;\r\n\t\t\tif(domHelpers.isChildOf(targetNode, node)){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._mouseWheelHandler = function(e){\r\n\t\tvar target = e.target || e.srcElement;\r\n\r\n\t\tif(!this._checkWheelTarget(target))\r\n\t\t\treturn;\r\n\r\n\t\tthis._wheel_time = new Date();\r\n\r\n\t\tvar res = {};\r\n\t\tvar ff = env.isFF;\r\n\t\tvar wx = ff ? (e.deltaX*-20) : e.wheelDeltaX*2;\r\n\t\tvar wy = ff ? (e.deltaY*-40) : e.wheelDelta;\r\n\r\n\t\tif(e.shiftKey && !(e.deltaX || e.wheelDeltaX)){\r\n\t\t\t// shift+mousewheel for horizontal scroll\r\n\t\t\twx = wy*2;\r\n\t\t\twy = 0;\r\n\t\t}\r\n\r\n\t\tif (wx && Math.abs(wx) > Math.abs(wy)){\r\n\t\t\tif(this._isVertical()){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(res.x) return true;//no horisontal scroll, must not block scrolling\r\n\t\t\tif(!this.$scroll_hor || !this.$scroll_hor.offsetWidth) return true;\r\n\r\n\t\t\tvar dir  = wx/-40;\r\n\t\t\tvar oldLeft = this._oldLeft;\r\n\t\t\tvar left = oldLeft+dir*30;\r\n\t\t\tthis.scrollHorizontally(left);\r\n\t\t\tthis.$scroll_hor.scrollLeft = left;\r\n\t\t\t// not block scroll if position hasn't changed\r\n\t\t\tif(oldLeft == this.$scroll_hor.scrollLeft){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tthis._oldLeft = this.$scroll_hor.scrollLeft;\r\n\t\t} else {\r\n\t\t\tif(this._isHorizontal()){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(res.y) return true;//no vertical scroll, must not block scrolling\r\n\t\t\tif(!this.$scroll_ver || !this.$scroll_ver.offsetHeight) return true;\r\n\r\n\t\t\tvar dir  = wy/-40;\r\n\t\t\tif (typeof wy == \"undefined\")\r\n\t\t\t\tdir = e.detail;\r\n\r\n\t\t\tvar oldTop = this._oldTop;\r\n\t\t\tvar top = this.$scroll_ver.scrollTop+dir*30;\r\n\r\n\t\t\t//if(!this.$gantt.config.prevent_default_scroll &&\r\n\t\t\t//\t(this.$gantt._cached_scroll_pos && ((this.$gantt._cached_scroll_pos.y == top) || (this.$gantt._cached_scroll_pos.y <= 0 && top <= 0)))) return true;\r\n\r\n\r\n\t\t\tthis.scrollVertically(top);\r\n\t\t\tthis.$scroll_ver.scrollTop = top;\r\n\r\n\t\t\t// not block scroll if position hasn't changed\r\n\t\t\tif(oldTop == this.$scroll_ver.scrollTop){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tthis._oldTop = this.$scroll_ver.scrollTop;\r\n\t\t}\r\n\r\n\t\tif (e.preventDefault)\r\n\t\t\te.preventDefault();\r\n\t\te.cancelBubble=true;\r\n\t\treturn false;\r\n\t};\r\n\r\n\treturn ScrollbarCell;\r\n})(Cell);\r\n\r\nmodule.exports = ScrollbarCell;\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\n\r\nfunction ScaleHelper(gantt){\r\n\tvar dateHelper = gantt.date;\r\n\tvar services = gantt.$services;\r\n\r\n\treturn {\r\n\t\tgetSum: function (sizes, from, to) {\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = sizes.length - 1;\r\n\t\t\tif (from === undefined)\r\n\t\t\t\tfrom = 0;\r\n\r\n\t\t\tvar summ = 0;\r\n\t\t\tfor (var i = from; i <= to; i++)\r\n\t\t\t\tsumm += sizes[i];\r\n\r\n\t\t\treturn summ;\r\n\t\t},\r\n\t\tsetSumWidth: function (sum_width, scale, from, to) {\r\n\t\t\tvar parts = scale.width;\r\n\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = parts.length - 1;\r\n\t\t\tif (from === undefined)\r\n\t\t\t\tfrom = 0;\r\n\t\t\tvar length = to - from + 1;\r\n\r\n\t\t\tif (from > parts.length - 1 || length <= 0 || to > parts.length - 1)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar oldWidth = this.getSum(parts, from, to);\r\n\r\n\t\t\tvar diff = sum_width - oldWidth;\r\n\r\n\t\t\tthis.adjustSize(diff, parts, from, to);\r\n\t\t\tthis.adjustSize(-diff, parts, to + 1);\r\n\r\n\t\t\tscale.full_width = this.getSum(parts);\r\n\t\t},\r\n\t\tsplitSize: function (width, count) {\r\n\t\t\tvar arr = [];\r\n\t\t\tfor (var i = 0; i < count; i++) arr[i] = 0;\r\n\r\n\t\t\tthis.adjustSize(width, arr);\r\n\t\t\treturn arr;\r\n\r\n\t\t},\r\n\t\tadjustSize: function (width, parts, from, to) {\r\n\t\t\tif (!from)\r\n\t\t\t\tfrom = 0;\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = parts.length - 1;\r\n\r\n\t\t\tvar length = to - from + 1;\r\n\r\n\t\t\tvar full = this.getSum(parts, from, to);\r\n\r\n\t\t\tvar shared = 0;\r\n\r\n\t\t\tfor (var i = from; i <= to; i++) {\r\n\t\t\t\tvar share = Math.floor(width * (full ? (parts[i] / full) : (1 / length)));\r\n\r\n\t\t\t\tfull -= parts[i];\r\n\t\t\t\twidth -= share;\r\n\t\t\t\tlength--;\r\n\r\n\t\t\t\tparts[i] += share;\r\n\t\t\t\tshared += share;\r\n\t\t\t}\r\n\t\t\tparts[parts.length - 1] += width;\r\n\t\t\t//parts[parts.length - 1] += width - shared;\r\n\t\t},\r\n\t\tsortScales: function (scales) {\r\n\t\t\tfunction cellSize(unit, step) {\r\n\t\t\t\tvar d = new Date(1970, 0, 1);\r\n\t\t\t\treturn dateHelper.add(d, step, unit) - d;\r\n\t\t\t}\r\n\r\n\t\t\tscales.sort(function (a, b) {\r\n\t\t\t\tif (cellSize(a.unit, a.step) < cellSize(b.unit, b.step)) {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t} else if (cellSize(a.unit, a.step) > cellSize(b.unit, b.step)) {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tfor (var i = 0; i < scales.length; i++) {\r\n\t\t\t\tscales[i].index = i;\r\n\t\t\t}\r\n\t\t},\r\n\t\tprimaryScale: function () {\r\n\r\n\t\t\tvar config = services.getService(\"templateLoader\");\r\n\t\t\tconfig.initTemplate(\"date_scale\", undefined, undefined, services.config(), services.templates());\r\n\r\n\t\t\treturn {\r\n\t\t\t\tunit: services.config().scale_unit,\r\n\t\t\t\tstep: services.config().step,\r\n\t\t\t\ttemplate: services.templates().date_scale,\r\n\t\t\t\tdate: services.config().date_scale,\r\n\t\t\t\tcss: services.templates().scale_cell_class\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tprepareConfigs: function (scales, min_coll_width, container_width, scale_height, minDate, maxDate, rtl) {\r\n\t\t\tvar heights = this.splitSize(scale_height, scales.length);\r\n\t\t\tvar full_width = container_width;\r\n\r\n\t\t\tvar configs = [];\r\n\t\t\tfor (var i = scales.length - 1; i >= 0; i--) {\r\n\t\t\t\tvar main_scale = (i == scales.length - 1);\r\n\t\t\t\tvar cfg = this.initScaleConfig(scales[i], minDate, maxDate);\r\n\t\t\t\tif (main_scale) {\r\n\t\t\t\t\tthis.processIgnores(cfg);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.initColSizes(cfg, min_coll_width, full_width, heights[i]);\r\n\t\t\t\tthis.limitVisibleRange(cfg);\r\n\r\n\t\t\t\tif (main_scale) {\r\n\t\t\t\t\tfull_width = cfg.full_width;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconfigs.unshift(cfg);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfor (var i = 0; i < configs.length - 1; i++) {\r\n\t\t\t\tthis.alineScaleColumns(configs[configs.length - 1], configs[i]);\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < configs.length; i++) {\r\n\r\n\t\t\t\tif(rtl){\r\n\t\t\t\t\tthis.reverseScale(configs[i]);\r\n\t\t\t\t}\r\n\t\t\t\tthis.setPosSettings(configs[i]);\r\n\t\t\t}\r\n\t\t\treturn configs;\r\n\r\n\t\t},\r\n\r\n\t\treverseScale: function(scale){\r\n\t\t\tscale.width = scale.width.reverse();\r\n\t\t\tscale.trace_x = scale.trace_x.reverse();\r\n\r\n\t\t\tvar indexes = scale.trace_indexes;\r\n\t\t\tscale.trace_indexes = {};\r\n\t\t\tscale.trace_index_transition = {};\r\n\t\t\tscale.rtl = true;\r\n\t\t\tfor(var i = 0; i < scale.trace_x.length; i++){\r\n\t\t\t\tscale.trace_indexes[scale.trace_x[i].valueOf()] = i;\r\n\t\t\t\tscale.trace_index_transition[indexes[scale.trace_x[i].valueOf()]] = i;\r\n\t\t\t}\r\n\t\t\treturn scale;\r\n\t\t},\r\n\r\n\t\tsetPosSettings: function (config) {\r\n\t\t\tfor (var i = 0, len = config.trace_x.length; i < len; i++) {\r\n\t\t\t\tconfig.left.push((config.width[i - 1] || 0) + (config.left[i - 1] || 0));\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_ignore_time_config: function (date, scale) {\r\n\r\n\t\t\tif (services.config().skip_off_time) {\r\n\t\t\t\tvar skip = true;\r\n\t\t\t\tvar probe = date;\r\n\r\n\t\t\t\t// check dates in case custom scale unit, e.g. {unit: \"month\", step: 3}\r\n\t\t\t\tfor (var i = 0; i < scale.step; i++) {\r\n\t\t\t\t\tif (i) {\r\n\t\t\t\t\t\tprobe = dateHelper.add(date, i, scale.unit);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tskip = skip && !this.isWorkTime(probe, scale.unit);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn skip;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t//defined in an extension\r\n\t\tprocessIgnores: function (config) {\r\n\t\t\tconfig.ignore_x = {};\r\n\t\t\tconfig.display_count = config.count;\r\n\t\t},\r\n\t\tinitColSizes: function (config, min_col_width, full_width, line_height) {\r\n\t\t\tvar cont_width = full_width;\r\n\r\n\t\t\tconfig.height = line_height;\r\n\r\n\t\t\tvar column_count = config.display_count === undefined ? config.count : config.display_count;\r\n\r\n\t\t\tif (!column_count)\r\n\t\t\t\tcolumn_count = 1;\r\n\r\n\t\t\tconfig.col_width = Math.floor(cont_width / column_count);\r\n\r\n\t\t\tif (min_col_width) {\r\n\t\t\t\tif (config.col_width < min_col_width) {\r\n\t\t\t\t\tconfig.col_width = min_col_width;\r\n\t\t\t\t\tcont_width = config.col_width * column_count;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconfig.width = [];\r\n\t\t\tvar ignores = config.ignore_x || {};\r\n\t\t\tfor (var i = 0; i < config.trace_x.length; i++) {\r\n\t\t\t\tif (ignores[config.trace_x[i].valueOf()] || (config.display_count == config.count)) {\r\n\t\t\t\t\tconfig.width[i] = 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// width of month columns should be proportional month duration\r\n\t\t\t\t\tvar width = 1;\r\n\t\t\t\t\tif (config.unit == \"month\") {\r\n\t\t\t\t\t\tvar days = Math.round((dateHelper.add(config.trace_x[i], config.step, config.unit) - config.trace_x[i]) / (1000 * 60 * 60 * 24));\r\n\t\t\t\t\t\twidth = days;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconfig.width[i] = width;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.adjustSize(cont_width - this.getSum(config.width)/* 1 width per column from the code above */, config.width);\r\n\t\t\tconfig.full_width = this.getSum(config.width);\r\n\t\t},\r\n\t\tinitScaleConfig: function (config, min_date, max_date) {\r\n\t\t\tvar cfg = utils.mixin({\r\n\t\t\t\tcount: 0,\r\n\t\t\t\tcol_width: 0,\r\n\t\t\t\tfull_width: 0,\r\n\t\t\t\theight: 0,\r\n\t\t\t\twidth: [],\r\n\t\t\t\tleft: [],\r\n\t\t\t\ttrace_x: [],\r\n\t\t\t\ttrace_indexes: {},\r\n\t\t\t\tmin_date: new Date(min_date),\r\n\t\t\t\tmax_date: new Date(max_date)\r\n\t\t\t}, config);\r\n\r\n\t\t\tthis.eachColumn(config.unit, config.step, min_date, max_date, function (date) {\r\n\t\t\t\tcfg.count++;\r\n\t\t\t\tcfg.trace_x.push(new Date(date));\r\n\t\t\t\tcfg.trace_indexes[date.valueOf()] = cfg.trace_x.length - 1;\r\n\t\t\t});\r\n\r\n\t\t\tcfg.trace_x_ascending = cfg.trace_x.slice();\r\n\t\t\treturn cfg;\r\n\t\t},\r\n\t\titerateScales: function (lower_scale, upper_scale, from, to, callback) {\r\n\t\t\tvar upper_dates = upper_scale.trace_x;\r\n\t\t\tvar lower_dates = lower_scale.trace_x;\r\n\r\n\t\t\tvar prev = from || 0;\r\n\t\t\tvar end = to || (lower_dates.length - 1);\r\n\t\t\tvar prevUpper = 0;\r\n\r\n\r\n\t\t\tfor (var up = 1; up < upper_dates.length; up++) {\r\n\t\t\t\tvar target_index = (lower_scale.trace_indexes[+upper_dates[up]]);\r\n\t\t\t\tif (target_index !== undefined && target_index <= end) {\r\n\t\t\t\t\tif (callback) {\r\n\t\t\t\t\t\tcallback.apply(this, [prevUpper, up, prev, target_index]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tprev = target_index;\r\n\t\t\t\t\tprevUpper = up;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\talineScaleColumns: function (lower_scale, upper_scale, from, to) {\r\n\t\t\tthis.iterateScales(lower_scale, upper_scale, from, to, function (upper_start, upper_end, lower_start, lower_end) {\r\n\t\t\t\tvar targetWidth = this.getSum(lower_scale.width, lower_start, lower_end - 1);\r\n\t\t\t\tvar actualWidth = this.getSum(upper_scale.width, upper_start, upper_end - 1);\r\n\t\t\t\tif (actualWidth != targetWidth) {\r\n\t\t\t\t\tthis.setSumWidth(targetWidth, upper_scale, upper_start, upper_end - 1);\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\teachColumn: function (unit, step, min_date, max_date, callback) {\r\n\t\t\tvar start = new Date(min_date),\r\n\t\t\t\tend = new Date(max_date);\r\n\t\t\tif (dateHelper[unit + \"_start\"]) {\r\n\t\t\t\tstart = dateHelper[unit + \"_start\"](start);\r\n\t\t\t}\r\n\r\n\t\t\tvar curr = new Date(start);\r\n\t\t\tif (+curr >= +end) {\r\n\t\t\t\tend = dateHelper.add(curr, step, unit);\r\n\t\t\t}\r\n\t\t\twhile (+curr < +end) {\r\n\t\t\t\tcallback.call(this, new Date(curr));\r\n\t\t\t\tvar tzOffset = curr.getTimezoneOffset();\r\n\t\t\t\tcurr = dateHelper.add(curr, step, unit);\r\n\t\t\t\tcurr = gantt._correct_dst_change(curr, tzOffset, step, unit);\r\n\t\t\t\tif (dateHelper[unit + '_start'])\r\n\t\t\t\t\tcurr = dateHelper[unit + \"_start\"](curr);\r\n\t\t\t}\r\n\t\t},\r\n\t\tlimitVisibleRange: function (cfg) {\r\n\t\t\tvar dates = cfg.trace_x;\r\n\r\n\t\t\tvar left = 0, right = cfg.width.length - 1;\r\n\t\t\tvar diff = 0;\r\n\t\t\tif (+dates[0] < +cfg.min_date && left != right) {\r\n\t\t\t\tvar width = Math.floor(cfg.width[0] * ((dates[1] - cfg.min_date) / (dates[1] - dates[0])));\r\n\t\t\t\tdiff += cfg.width[0] - width;\r\n\t\t\t\tcfg.width[0] = width;\r\n\r\n\t\t\t\tdates[0] = new Date(cfg.min_date);\r\n\t\t\t}\r\n\r\n\t\t\tvar last = dates.length - 1;\r\n\t\t\tvar lastDate = dates[last];\r\n\t\t\tvar outDate = dateHelper.add(lastDate, cfg.step, cfg.unit);\r\n\t\t\tif (+outDate > +cfg.max_date && last > 0) {\r\n\t\t\t\tvar width = cfg.width[last] - Math.floor(cfg.width[last] * ((outDate - cfg.max_date) / (outDate - lastDate)));\r\n\t\t\t\tdiff += cfg.width[last] - width;\r\n\t\t\t\tcfg.width[last] = width;\r\n\t\t\t}\r\n\r\n\t\t\tif (diff) {\r\n\t\t\t\tvar full = this.getSum(cfg.width);\r\n\t\t\t\tvar shared = 0;\r\n\t\t\t\tfor (var i = 0; i < cfg.width.length; i++) {\r\n\t\t\t\t\tvar share = Math.floor(diff * (cfg.width[i] / full));\r\n\t\t\t\t\tcfg.width[i] += share;\r\n\t\t\t\t\tshared += share;\r\n\t\t\t\t}\r\n\t\t\t\tthis.adjustSize(diff - shared, cfg.width);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = ScaleHelper;\r\n\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0),\r\n\tenv = __webpack_require__(6);\r\n\r\nvar createStaticBgHelper = function(utils, env){\r\n\r\n\tvar canvasBgCache = {};\r\n\tvar staticBgStyleId = \"gantt-static-bg-styles-\" + utils.uid();\r\n\r\n\tfunction renderBgCanvas(targetNode, config, scale, totalHeight) {\r\n\t\tif (!config.static_background) return;\r\n\r\n\t\tvar canvas = document.createElement(\"canvas\");\r\n\t\tif (!canvas.getContext) return; // if canvas is not supported (for IE8)\r\n\r\n\t\t// clear previous bg data\r\n\t\ttargetNode.innerHTML = \"\";\r\n\r\n\t\tvar styleParams = getCellStyles(targetNode);\r\n\t\tvar png = createBackgroundTiles(styleParams, config, scale);\r\n\t\tvar bgDivs = createBgDivs(png, config, scale, totalHeight);\r\n\r\n\t\tvar fragment = document.createDocumentFragment();\r\n\r\n\t\tbgDivs.forEach(function (div) {\r\n\t\t\tfragment.appendChild(div);\r\n\t\t});\r\n\r\n\t\ttargetNode.appendChild(fragment);\r\n\t}\r\n\r\n\tfunction getColumnWidths(scale) {\r\n\t\tvar widths = scale.width;\r\n\t\tvar differentWidths = {};\r\n\t\tfor (var i = 0; i < widths.length; i++) {\r\n\t\t\tif (widths[i] * 1)\r\n\t\t\t\tdifferentWidths[widths[i]] = true;\r\n\t\t}\r\n\t\treturn differentWidths;\r\n\t}\r\n\r\n\tfunction parseRgb(rgbCss) {\r\n\t\tvar result = /^rgba?\\(([\\d]{1,3}), *([\\d]{1,3}), *([\\d]{1,3}) *(,( *[\\d\\.]+ *))?\\)$/i.exec(rgbCss);\r\n\t\treturn result ? {\r\n\t\t\tr: result[1] * 1,\r\n\t\t\tg: result[2] * 1,\r\n\t\t\tb: result[3] * 1,\r\n\t\t\ta: (result[5] * 255) || 255\r\n\t\t} : null;\r\n\t}\r\n\r\n\tfunction getUrlFromCache(key) {\r\n\t\treturn canvasBgCache[key] || null;\r\n\t}\r\n\r\n\tfunction getHashKey(width, height, cellStyles) {\r\n\t\treturn (width + '' + height + cellStyles.bottomBorderColor + cellStyles.rightBorderColor).replace(/[^\\w\\d]/g, '');\r\n\t}\r\n\r\n\tfunction getStyleElement() {\r\n\t\tvar style = document.getElementById(staticBgStyleId);\r\n\r\n\t\tif (!style) {\r\n\t\t\tstyle = document.createElement(\"style\");\r\n\t\t\tstyle.id = staticBgStyleId;\r\n\t\t\tdocument.body.appendChild(style);\r\n\t\t}\r\n\t\treturn style;\r\n\t}\r\n\r\n\tfunction cacheUrl(key, url) {\r\n\t\tcanvasBgCache[key] = url;\r\n\t}\r\n\r\n\tfunction generateBgUrl(width, height, cellStyles) {\r\n\t\t// use relatively big bg image about 500*500px in order to reduce misalignments due browser zoom\r\n\t\tvar cols = Math.floor(500 / width) || 1;\r\n\t\tvar rows = Math.floor(500 / height) || 1;\r\n\r\n\t\tvar canvas = document.createElement(\"canvas\");\r\n\t\tcanvas.height = height * rows;\r\n\t\tcanvas.width = width * cols;\r\n\r\n\t\tvar context = canvas.getContext(\"2d\");\r\n\r\n\t\tdrawGrid(height, width, rows, cols, context, cellStyles);\r\n\r\n\t\treturn canvas.toDataURL();\r\n\r\n\t\tfunction drawGrid(rowHeight, colWidth, rows, cols, context, styles) {\r\n\t\t\t// paint pixels manually instead of using lineTo in order to prevent canvas aliasing\r\n\t\t\tvar image = context.createImageData(colWidth * cols, rowHeight * rows);\r\n\t\t\timage.imageSmoothingEnabled = false;\r\n\r\n\t\t\tvar verticalLineWidth = styles.rightBorderWidth * 1;\r\n\t\t\tvar verticalLineColor = parseRgb(styles.rightBorderColor);\r\n\r\n\t\t\tvar x = 0,\r\n\t\t\t\ty = 0,\r\n\t\t\t\tw = 0;\r\n\r\n\t\t\tfor (var col = 1; col <= cols; col++) {\r\n\t\t\t\tx = col * colWidth - 1;\r\n\t\t\t\tfor (w = 0; w < verticalLineWidth; w++) {\r\n\t\t\t\t\tfor (y = 0; y < rowHeight * rows; y++) {\r\n\t\t\t\t\t\tdrawDot(x - w, y, verticalLineColor, image);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar horizontalLineWidth = styles.bottomBorderWidth * 1;\r\n\t\t\tvar horizontalLineColor = parseRgb(styles.bottomBorderColor);\r\n\r\n\t\t\ty = 0;\r\n\t\t\tfor (var row = 1; row <= rows; row++) {\r\n\t\t\t\ty = row * rowHeight - 1;\r\n\t\t\t\tfor (w = 0; w < horizontalLineWidth; w++) {\r\n\t\t\t\t\tfor (x = 0; x < colWidth * cols; x++) {\r\n\t\t\t\t\t\tdrawDot(x, y - w, horizontalLineColor, image);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcontext.putImageData(image, 0, 0);\r\n\t\t}\r\n\r\n\t\tfunction drawDot(x, y, color, matrix) {\r\n\t\t\tvar rowLength = width * cols;\r\n\r\n\t\t\tvar index = (y * rowLength + x) * 4;\r\n\r\n\t\t\tmatrix.data[index] = color.r;\r\n\t\t\tmatrix.data[index + 1] = color.g;\r\n\t\t\tmatrix.data[index + 2] = color.b;\r\n\t\t\tmatrix.data[index + 3] = color.a;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getCssClass(key) {\r\n\t\treturn \"gantt-static-bg-\" + key;\r\n\t}\r\n\r\n\tfunction createBackgroundTiles(cellStyles, config, scale) {\r\n\t\tvar data = {};\r\n\t\tvar widths = getColumnWidths(scale),\r\n\t\t\theight = config.row_height;\r\n\r\n\t\tvar styleHTML = \"\";\r\n\t\tfor (var i in widths) {\r\n\r\n\t\t\tvar width = i * 1;\r\n\t\t\tvar key = getHashKey(width, height, cellStyles);\r\n\t\t\tvar cachedUrl = getUrlFromCache(key);\r\n\r\n\t\t\tif (!cachedUrl) {\r\n\t\t\t\tvar bgImage = generateBgUrl(width, height, cellStyles);\r\n\t\t\t\tcacheUrl(key, bgImage);\r\n\t\t\t\tstyleHTML += \".\" + getCssClass(key) + \"{ background-image: url('\" + bgImage + \"');}\";\r\n\t\t\t}\r\n\r\n\t\t\tdata[i] = getCssClass(key);\r\n\t\t}\r\n\r\n\t\tif (styleHTML) {\r\n\t\t\tvar style = getStyleElement();\r\n\t\t\tstyle.innerHTML += styleHTML;\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\tfunction createBgDivs(bgTiles, config, scale, dataHeight) {\r\n\t\tvar divs = [];\r\n\t\tvar tile,\r\n\t\t\tprevWidth = 0,\r\n\t\t\tprevCell;\r\n\r\n\t\tvar widths = scale.width.filter(function (i) {\r\n\t\t\treturn !!i;\r\n\t\t});\r\n\r\n\t\tvar leftPos = 0;\r\n\r\n\t\t//TODO: fixme\r\n\t\t// bg image misalignments on horizontal scroll on very large time scales, especially in IE/Edge browsers\r\n\t\t// limiting max tile width seems to solve the issue, but can increase rendering time\r\n\t\tvar maxTileSize = 100000;\r\n\t\tif (env.isIE) {\r\n\t\t\t// special case for IE11 on win7x and probably 8x\r\n\t\t\tvar appVersion = navigator.appVersion || \"\";\r\n\t\t\tif (appVersion.indexOf(\"Windows NT 6.2\") != -1 ||\r\n\t\t\t\tappVersion.indexOf(\"Windows NT 6.1\") != -1 ||\r\n\t\t\t\tappVersion.indexOf(\"Windows NT 6.0\") != -1) {\r\n\r\n\t\t\t\tmaxTileSize = 20000;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < widths.length; i++) {\r\n\t\t\t//var currentWidth = cells[i].clientWidth;\r\n\t\t\tvar cell = widths[i];\r\n\r\n\t\t\tif ((cell != prevCell && prevCell !== undefined) || (i == widths.length - 1) || (prevWidth > maxTileSize)) {\r\n\r\n\t\t\t\tvar totalHeight = dataHeight,\r\n\t\t\t\t\tcurrentTop = 0,\r\n\t\t\t\t\trowHeight = Math.floor(maxTileSize / config.row_height) * config.row_height;\r\n\r\n\t\t\t\tvar tileWidth = prevWidth;\r\n\r\n\t\t\t\twhile (totalHeight > 0) {\r\n\t\t\t\t\tvar currentHeight = Math.min(totalHeight, rowHeight);\r\n\t\t\t\t\ttotalHeight -= rowHeight;\r\n\r\n\t\t\t\t\ttile = document.createElement(\"div\");\r\n\r\n\t\t\t\t\ttile.style.height = currentHeight + \"px\";\r\n\t\t\t\t\ttile.style.position = \"absolute\";\r\n\t\t\t\t\ttile.style.top = currentTop + \"px\";\r\n\t\t\t\t\ttile.style.left = leftPos + \"px\";\r\n\r\n\t\t\t\t\ttile.style.whiteSpace = \"no-wrap\";\r\n\t\t\t\t\ttile.className = bgTiles[prevCell || cell];\r\n\r\n\t\t\t\t\t// if last - short by 1 px (bug fix)\r\n\t\t\t\t\tif (i == widths.length - 1) {\r\n\t\t\t\t\t\ttileWidth = cell + tileWidth - 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttile.style.width = tileWidth + \"px\";\r\n\r\n\t\t\t\t\tdivs.push(tile);\r\n\t\t\t\t\tcurrentTop += currentHeight;\r\n\t\t\t\t}\r\n\t\t\t\tprevWidth = 0;\r\n\t\t\t\tleftPos += tileWidth;\r\n\r\n\t\t\t\t//cell = 0;\r\n\t\t\t}\r\n\t\t\tif (cell) {\r\n\t\t\t\tprevWidth += cell;\r\n\t\t\t\tprevCell = cell;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn divs;\r\n\t}\r\n\r\n\tfunction getCellStyles(targetNode) {\r\n\t\t// creating temp DOM structure for resolving style parameters. Will be removed after calculating.\r\n\t\tvar cell = document.createElement(\"div\");\r\n\t\tcell.className = \"gantt_task_cell\";\r\n\t\tvar row = document.createElement(\"div\");\r\n\t\trow.className = \"gantt_task_row\";\r\n\t\trow.appendChild(cell);\r\n\t\ttargetNode.appendChild(row);\r\n\r\n\t\tvar rowStyles = getComputedStyle(row),\r\n\t\t\tcellStyles = getComputedStyle(cell);\r\n\r\n\t\tvar params = {\r\n\t\t\tbottomBorderWidth: rowStyles.getPropertyValue(\"border-bottom-width\").replace(\"px\", \"\"),\r\n\t\t\trightBorderWidth: cellStyles.getPropertyValue(\"border-right-width\").replace(\"px\", \"\"),\r\n\t\t\tbottomBorderColor: rowStyles.getPropertyValue(\"border-bottom-color\"),\r\n\t\t\trightBorderColor: cellStyles.getPropertyValue(\"border-right-color\")\r\n\t\t};\r\n\r\n\t\ttargetNode.removeChild(row);\r\n\r\n\t\treturn params;\r\n\t}\r\n\r\n\treturn {\r\n\t\trender: renderBgCanvas\r\n\t};\r\n};\r\n\r\nmodule.exports = {\r\n\tcreate: function(){\r\n\t\treturn createStaticBgHelper(utils, env);\r\n\t}\r\n};\r\n\r\n\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar domHelpers = __webpack_require__(1);\r\n\r\nfunction createResizer(gantt, grid){\r\n// renders resize elements in the grid header\r\n\tvar _render_grid_header_resize = function () {\r\n\t\tvar columns = grid.getGridColumns(),\r\n\t\t\tconfig = grid.$getConfig(),\r\n\t\t\twidth = 0,\r\n\t\t\ttotalWidth = grid.$config.width,\r\n\t\t\tlineHeigth = config.scale_height;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar last = i == columns.length - 1;\r\n\t\t\tvar col = columns[i];\r\n\r\n\t\t\tvar pos;\r\n\t\t\twidth += col.width;\r\n\t\t\tif(config.rtl){\r\n\t\t\t\tpos = totalWidth - width;\r\n\t\t\t}else{\r\n\t\t\t\tpos = width;\r\n\t\t\t}\r\n\r\n\t\t\tif (col.resize) {\r\n\t\t\t\tvar resize_el = document.createElement(\"div\");\r\n\t\t\t\tresize_el.className = \"gantt_grid_column_resize_wrap\";\r\n\t\t\t\tresize_el.style.top = \"0px\";\r\n\t\t\t\tresize_el.style.height = lineHeigth + \"px\";\r\n\t\t\t\tresize_el.innerHTML = \"<div class='gantt_grid_column_resize'></div>\";\r\n\t\t\t\tresize_el.setAttribute(config.grid_resizer_column_attribute, i);\r\n\r\n\t\t\t\tgantt._waiAria.gridSeparatorAttr(resize_el);\r\n\r\n\t\t\t\tgrid.$grid_scale.appendChild(resize_el);\r\n\r\n\t\t\t\tresize_el.style.left = Math.max(0, pos) + \"px\";\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tvar _grid_resize = {\r\n\t\tcolumn_before_start: gantt.bind(function (dnd, obj, e) {\r\n\t\t\tvar config = grid.$getConfig();\r\n\r\n\t\t\tvar el = domHelpers.locateAttribute(e, config.grid_resizer_column_attribute);\r\n\t\t\tif (!el) return false;\r\n\r\n\t\t\tvar column_index = this.locate(e, config.grid_resizer_column_attribute),\r\n\t\t\t\tcolumn = grid.getGridColumns()[column_index];\r\n\r\n\t\t\tif (grid.callEvent(\"onColumnResizeStart\", [column_index, column]) === false)\r\n\t\t\t\treturn false;\r\n\t\t}, gantt),\r\n\r\n\t\tcolumn_after_start: gantt.bind(function (dnd, obj, e) {\r\n\t\t\tvar config = grid.$getConfig();\r\n\r\n\t\t\tvar column_index = this.locate(e, config.grid_resizer_column_attribute);\r\n\t\t\tdnd.config.marker.innerHTML = \"\";\r\n\t\t\tdnd.config.marker.className += \" gantt_grid_resize_area\";\r\n\t\t\tdnd.config.marker.style.height = grid.$grid.offsetHeight + \"px\";\r\n\t\t\tdnd.config.marker.style.top = \"0px\";\r\n\t\t\tdnd.config.drag_index = column_index;\r\n\r\n\t\t}, gantt),\r\n\r\n\t\tcolumn_drag_move: gantt.bind(function (dnd, obj, e) {\r\n\t\t\tvar config = grid.$getConfig();\r\n\r\n\t\t\tvar dd = dnd.config,\r\n\t\t\t\tcolumns = grid.getGridColumns();\r\n\t\t\tvar index = parseInt(dd.drag_index, 10);\r\n\t\t\tvar target_column = columns[index];\r\n\t\t\tvar\tpos = domHelpers.getNodePosition(grid.$grid_scale),\r\n\t\t\t\tpointerPosition = parseInt(dd.marker.style.left, 10),\r\n\t\t\t\tminPointerPosition = target_column.min_width ? target_column.min_width : config.min_grid_column_width,\r\n\t\t\t\tmaxPointerPosition = grid.$grid_data.offsetWidth,// - config.min_grid_column_width * (columns.length - dd.drag_index - 2),// 1 for current column + 1 for last column\r\n\t\t\t\tmarkerStartPosition = 0,\r\n\t\t\t\tmarker_width = 0;\r\n\r\n\t\t\t\r\n\t\t/*\tif(config.rtl){\r\n\t\t\t\tindex = columns.length - 1 - index;\r\n\t\t\t\tcolumns = columns.reverse();\r\n\t\t\t}*/\r\n\r\n\t\t\tif(!config.rtl){\r\n\t\t\t\tpointerPosition -= pos.x - 1;\r\n\t\t\t}else{\r\n\t\t\t\tpointerPosition = (pos.x + pos.width - 1) - pointerPosition;\r\n\t\t\t}\r\n\r\n\t\t\t//pointerPosition -= pos.x - 1;\r\n\t\t\tfor (var i = 0; i < index; i++) {\r\n\t\t\t\tminPointerPosition += columns[i].width;\r\n\t\t\t\tmarkerStartPosition += columns[i].width;\r\n\t\t\t}\r\n\r\n\t\t\tif (pointerPosition < minPointerPosition) {\r\n\t\t\t\tpointerPosition = minPointerPosition;\r\n\t\t\t}\r\n\r\n\t\t\tif (config.keep_grid_width) {\r\n\t\t\t\tvar limit_max = 0;\r\n\t\t\t\tfor (var i=index+1; i<columns.length; i++) {\r\n\t\t\t\t\tif (columns[i].min_width)\r\n\t\t\t\t\t\tmaxPointerPosition -= columns[i].min_width;\r\n\t\t\t\t\telse if (config.min_grid_column_width)\r\n\t\t\t\t\t\tmaxPointerPosition -= config.min_grid_column_width;\r\n\r\n\t\t\t\t\tif (columns[i].max_width && limit_max !== false)\r\n\t\t\t\t\t\tlimit_max += columns[i].max_width;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tlimit_max = false;\t\t\t\t\t\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// we have to restrict min value if only ALL right-side columns have 'max_width' field\r\n\t\t\t\tif (limit_max) {\r\n\t\t\t\t\tminPointerPosition = grid.$grid_data.offsetWidth - limit_max;\r\n\t\t\t\t}\r\n\t\t\t\tif (pointerPosition < minPointerPosition) {\r\n\t\t\t\t\tpointerPosition = minPointerPosition;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (pointerPosition > maxPointerPosition)\r\n\t\t\t\t\tpointerPosition = maxPointerPosition;\r\n\t\t\t}\r\n\r\n\t\t\tdd.left = pointerPosition - 1;// -1 for border\r\n\r\n\t\t\tmarker_width = Math.abs(pointerPosition - markerStartPosition);\r\n\r\n\t\t\t// column.max_width - maximum width of the column, user defined\r\n\t\t\tif (target_column.max_width && marker_width > target_column.max_width)\r\n\t\t\t\tmarker_width = target_column.max_width;\r\n\r\n\t\t\tif(config.rtl){\r\n\t\t\t\tmarkerStartPosition = (pos.width - markerStartPosition) + 2 - marker_width;\r\n\t\t\t}\r\n\t\t\tdd.marker.style.top = pos.y + \"px\";\r\n\t\t\tdd.marker.style.left = pos.x - 1 + markerStartPosition + \"px\";\r\n\t\t\tdd.marker.style.width = marker_width + \"px\";\r\n\r\n\t\t\tgrid.callEvent(\"onColumnResize\", [index, columns[index], marker_width - 1]);\r\n\t\t\treturn true;\r\n\t\t}, gantt),\r\n\r\n\t\tcolumn_drag_end: gantt.bind(function (dnd, obj, e) {\r\n\t\t\tvar config = grid.$getConfig();\r\n\t\t\tvar columns = grid.getGridColumns(),\r\n\t\t\t\tcolumns_width = 0,\r\n\t\t\t\tindex = parseInt(dnd.config.drag_index, 10),\r\n\t\t\t\ttarget_column = columns[index];\r\n\r\n\t\t\t// var colIndex = index;\r\n\t\t\t/*if(config.rtl){\r\n\t\t\t\tcolIndex = columns.length - 1 - target_index;\r\n\t\t\t\tcolumns = columns.reverse();\r\n\t\t\t}*/\r\n\r\n\t\t\tfor (var i = 0; i < index; i++) {\r\n\t\t\t\tcolumns_width += columns[i].width;\r\n\t\t\t}\r\n\r\n\t\t\tvar final_width = (target_column.min_width && (dnd.config.left - columns_width) < target_column.min_width) ?\r\n\t\t\t\ttarget_column.min_width : (dnd.config.left - columns_width);\r\n\r\n\t\t\tif (target_column.max_width && target_column.max_width < final_width) // TODO: probably can be omitted\r\n\t\t\t\tfinal_width = target_column.max_width;\r\n\r\n\t\t\tif (grid.callEvent(\"onColumnResizeEnd\", [index, target_column, final_width]) === false)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif (target_column.width == final_width)\r\n\t\t\t\treturn;\r\n\r\n\t\t\ttarget_column.width = final_width;\r\n\r\n\t\t\tif (config.keep_grid_width) {\r\n\t\t\t\tcolumns_width = config.grid_width;\r\n\t\t\t} else {\r\n\t\t\t\t// in other case we set a new grid width and call gantt render\r\n\t\t\t\tfor (var i = index, l = columns.length; i < l; i++) {\r\n\t\t\t\t\tcolumns_width += columns[i].width;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tgrid.callEvent(\"onColumnResizeComplete\", [columns, grid._setColumnsWidth(columns_width, index)]);\r\n\r\n\t\t\tif(!grid.$config.scrollable){\r\n\t\t\t\tgantt.$layout._syncCellSizes(grid.$config.group, config.grid_width);\r\n\t\t\t}\r\n\t\t\t//grid.callEvent(\"onColumnResizeComplete\", [columns, columns_width]);\r\n\r\n\t\t\tthis.render();\r\n\t\t}, gantt)\r\n\t};\r\n\r\n// calls the initialization of the D'n'D events for resize elements\r\n\tvar _init_resize = function () {\r\n\t\tvar DnD = gantt.$services.getService(\"dnd\");\r\n\r\n\t\tvar config = grid.$getConfig();\r\n\r\n\t\tvar dnd = new DnD(grid.$grid_scale, {updates_per_second: 60});\r\n\t\tif (gantt.defined(config.dnd_sensitivity))\r\n\t\t\tdnd.config.sensitivity = config.dnd_sensitivity;\r\n\r\n\t\tdnd.attachEvent(\"onBeforeDragStart\", function (obj, e) {\r\n\t\t\treturn _grid_resize.column_before_start(dnd, obj, e);\r\n\t\t});\r\n\t\tdnd.attachEvent(\"onAfterDragStart\", function (obj, e) {\r\n\t\t\treturn _grid_resize.column_after_start(dnd, obj, e);\r\n\t\t});\r\n\t\tdnd.attachEvent(\"onDragMove\", function (obj, e) {\r\n\t\t\treturn _grid_resize.column_drag_move(dnd, obj, e);\r\n\t\t});\r\n\t\tdnd.attachEvent(\"onDragEnd\", function (obj, e) {\r\n\t\t\treturn _grid_resize.column_drag_end(dnd, obj, e);\r\n\t\t});\r\n\r\n\t};\r\n\r\n\treturn {\r\n\t\tinit: _init_resize,\r\n\t\tdoOnRender: _render_grid_header_resize\r\n\t};\r\n}\r\n\r\nmodule.exports = createResizer;\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar domHelpers = __webpack_require__(1),\r\n\tutils = __webpack_require__(0),\r\n\tresourceStoreMixin = __webpack_require__(15),\r\n\tGrid = __webpack_require__(8);\r\nvar __extends = __webpack_require__(3);\r\n\r\nvar ResourceGrid = (function (_super) {\r\n\r\n\tfunction ResourceGrid(parent, config, factory, gantt) {\r\n\t\treturn _super.apply(this, arguments) || this;\r\n\t}\r\n\r\n\t__extends(ResourceGrid, _super);\r\n\r\n\tutils.mixin(ResourceGrid.prototype, {\r\n\t\tinit: function(){\r\n\t\t\tif(this.$config.bind === undefined){\r\n\t\t\t\tthis.$config.bind = this.$getConfig().resource_store;\r\n\t\t\t}\r\n\t\t\t_super.prototype.init.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\t_initEvents: function(){\r\n\t\t\t_super.prototype._initEvents.apply(this, arguments);\r\n\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_row\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\tvar store = this.$config.rowStore;\r\n\t\t\t\tif(!store) return true;\r\n\r\n\t\t\t\tvar target = domHelpers.locateAttribute(e, this.$config.item_attribute);\r\n\t\t\t\tif(target){\r\n\t\t\t\t\tstore.select(target.getAttribute(this.$config.item_attribute));\r\n\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}, this), this.$grid);\r\n\r\n\t\t}\r\n\r\n\t}, true);\r\n\r\n\tutils.mixin(ResourceGrid.prototype, resourceStoreMixin(_super), true);\r\n\r\n\treturn ResourceGrid;\r\n})(Grid);\r\n\r\nmodule.exports = ResourceGrid;\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\nvar Timeline = __webpack_require__(13);\r\nvar resourceStoreMixin = __webpack_require__(15);\r\nvar __extends = __webpack_require__(3);\r\n\r\nvar ResourceTimeline = (function (_super) {\r\n\r\n\tfunction ResourceTimeline(parent, config, factory, gantt) {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\t\tself.$config.bindLinks = null;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(ResourceTimeline, _super);\r\n\r\n\tutils.mixin(ResourceTimeline.prototype, {\r\n\t\tinit: function(){\r\n\t\t\tif(this.$config.bind === undefined){\r\n\t\t\t\tthis.$config.bind = this.$getConfig().resource_store;\r\n\t\t\t}\r\n\t\t\t_super.prototype.init.apply(this, arguments);\r\n\t\t},\r\n\t\t_createLayerConfig: function(){\r\n\t\t\tvar self = this;\r\n\t\t\tvar taskFilter = function(){\r\n\t\t\t\treturn self.isVisible();\r\n\t\t\t};\r\n\r\n\t\t\tvar taskLayers = [\r\n\t\t\t\t{\r\n\t\t\t\t\trenderer: this.$gantt.$ui.layers.resourceRow,\r\n\t\t\t\t\tcontainer: this.$task_bars,\r\n\t\t\t\t\tfilter: [taskFilter]\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trenderer: this.$gantt.$ui.layers.taskBg,\r\n\t\t\t\t\tcontainer: this.$task_bg,\r\n\t\t\t\t\tfilter: [taskFilter]\r\n\t\t\t\t}\r\n\t\t\t];\r\n\r\n\t\t\tvar linkLayers = [];\r\n\r\n\t\t\treturn {\r\n\t\t\t\ttasks: taskLayers,\r\n\t\t\t\tlinks: linkLayers\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t}, true);\r\n\r\n\tutils.mixin(ResourceTimeline.prototype, resourceStoreMixin(_super), true);\r\n\r\n\treturn ResourceTimeline;\r\n})(Timeline);\r\n\r\n\r\nmodule.exports = ResourceTimeline;\r\n\r\n\r\n\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports) {\n\nfunction createTaskRenderer(gantt){\r\n\r\n\tfunction _render_task_element(task, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar painters = config.type_renderers;\r\n\t\tvar renderer = painters[gantt.getTaskType(task.type)],\r\n\t\t\tdefaultRenderer = _task_default_render;\r\n\r\n\t\tif (!renderer) {\r\n\t\t\treturn defaultRenderer.call(gantt, task, view);\r\n\t\t}else{\r\n\t\t\treturn renderer.call(gantt, task, function(task){ return defaultRenderer.call(gantt, task, view);}, view);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _task_default_render(task, view) {\r\n\t\tif (gantt._isAllowedUnscheduledTask(task))\r\n\t\t\treturn;\r\n\r\n\r\n\t\tvar pos = view.getItemPosition(task);\r\n\r\n\t\tvar cfg = view.$getConfig(),\r\n\t\t\ttemplates = view.$getTemplates();\r\n\t\tvar height = view.getItemHeight();\r\n\r\n\t\tvar taskType = gantt.getTaskType(task.type);\r\n\r\n\t\tvar padd = Math.floor((gantt.config.row_height - height) / 2);\r\n\t\tif (taskType == cfg.types.milestone && cfg.link_line_width > 1) {\r\n\t\t\t//little adjust milestone position, so horisontal corners would match link arrow when thickness of link line is more than 1px\r\n\t\t\tpadd += 1;\r\n\t\t}\r\n\r\n\t\tif (taskType == cfg.types.milestone){\r\n\t\t\tpos.left -= Math.round(height / 2);\r\n\t\t\tpos.width = height;\r\n\t\t}\r\n\r\n\t\tvar div = document.createElement(\"div\");\r\n\r\n\t\tvar width = Math.round(pos.width);\r\n\r\n\t\tif(view.$config.item_attribute){\r\n\t\t\tdiv.setAttribute(view.$config.item_attribute, task.id);\r\n\t\t}\r\n\r\n\t\tif (cfg.show_progress && taskType != cfg.types.milestone) {\r\n\t\t\t_render_task_progress(task, div, width, cfg, templates);\r\n\t\t}\r\n\r\n\t\t//use separate div to display content above progress bar\r\n\t\tvar content = _render_task_content(task, width, templates);\r\n\t\tif (task.textColor) {\r\n\t\t\tcontent.style.color = task.textColor;\r\n\t\t}\r\n\t\tdiv.appendChild(content);\r\n\r\n\t\tvar css = _combine_item_class(\"gantt_task_line\",\r\n\t\t\ttemplates.task_class(task.start_date, task.end_date, task),\r\n\t\t\ttask.id,\r\n\t\t\tview);\r\n\t\tif (task.color || task.progressColor || task.textColor) {\r\n\t\t\tcss += \" gantt_task_inline_color\";\r\n\t\t}\r\n\t\tdiv.className = css;\r\n\r\n\t\tvar styles = [\r\n\t\t\t\"left:\" + pos.left + \"px\",\r\n\t\t\t\"top:\" + (padd + pos.top) + 'px',\r\n\t\t\t\"height:\" + height + 'px',\r\n\t\t\t\"line-height:\" + (Math.max(height < 30 ? height - 2 : height, 0)) + 'px',\r\n\t\t\t\"width:\" + width + 'px'\r\n\t\t];\r\n\t\tif (task.color) {\r\n\t\t\tstyles.push(\"background-color:\" + task.color);\r\n\t\t}\r\n\t\tif (task.textColor) {\r\n\t\t\tstyles.push(\"color:\" + task.textColor);\r\n\t\t}\r\n\r\n\t\tdiv.style.cssText = styles.join(\";\");\r\n\t\tvar side = _render_leftside_content(task, cfg, templates);\r\n\t\tif (side) div.appendChild(side);\r\n\r\n\t\tside = _render_rightside_content(task, cfg, templates);\r\n\t\tif (side) div.appendChild(side);\r\n\r\n\t\tgantt._waiAria.setTaskBarAttr(task, div);\r\n\r\n\t\tvar state = gantt.getState();\r\n\r\n\t\tif (!gantt.isReadonly(task)) {\r\n\t\t\tif (cfg.drag_resize && !gantt.isSummaryTask(task) && taskType != cfg.types.milestone) {\r\n\t\t\t\t_render_pair(div, \"gantt_task_drag\", task, function (css) {\r\n\t\t\t\t\tvar el = document.createElement(\"div\");\r\n\t\t\t\t\tel.className = css;\r\n\t\t\t\t\treturn el;\r\n\t\t\t\t}, cfg);\r\n\t\t\t}\r\n\t\t\tif (cfg.drag_links && cfg.show_links) {\r\n\t\t\t\t_render_pair(div, \"gantt_link_control\", task, function (css) {\r\n\t\t\t\t\tvar outer = document.createElement(\"div\");\r\n\t\t\t\t\touter.className = css;\r\n\t\t\t\t\touter.style.cssText = [\r\n\t\t\t\t\t\t\"height:\" + height + 'px',\r\n\t\t\t\t\t\t\"line-height:\" + height + 'px'\r\n\t\t\t\t\t].join(\";\");\r\n\t\t\t\t\tvar inner = document.createElement(\"div\");\r\n\t\t\t\t\tinner.className = \"gantt_link_point\";\r\n\r\n\t\t\t\t\tvar showLinkPoints = false;\r\n\t\t\t\t\tif(state.link_source_id && cfg.touch){\r\n\t\t\t\t\t\tshowLinkPoints = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tinner.style.display = showLinkPoints ? \"block\" : \"\";\r\n\t\t\t\t\touter.appendChild(inner);\r\n\t\t\t\t\treturn outer;\r\n\t\t\t\t}, cfg);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn div;\r\n\t}\r\n\r\n\tfunction _render_side_content(task, template, cssClass) {\r\n\t\tif (!template) return null;\r\n\r\n\t\tvar text = template(task.start_date, task.end_date, task);\r\n\t\tif (!text) return null;\r\n\t\tvar content = document.createElement(\"div\");\r\n\t\tcontent.className = \"gantt_side_content \" + cssClass;\r\n\t\tcontent.innerHTML = text;\r\n\t\treturn content;\r\n\t}\r\n\r\n\tfunction _render_leftside_content(task, cfg, templates) {\r\n\t\tvar css = \"gantt_left \" + _get_link_crossing_css(!cfg.rtl ? true : false, task, cfg);\r\n\t\treturn _render_side_content(task, templates.leftside_text, css);\r\n\t}\r\n\r\n\tfunction _render_rightside_content(task, cfg, templates) {\r\n\t\tvar css = \"gantt_right \" + _get_link_crossing_css(!cfg.rtl ? false : true, task, cfg);\r\n\t\treturn _render_side_content(task, templates.rightside_text, css);\r\n\t}\r\n\r\n\tfunction _get_link_crossing_css(left, task) {\r\n\t\tvar cond = _get_conditions(left);\r\n\r\n\t\tfor (var i in cond) {\r\n\t\t\tvar links = task[i];\r\n\t\t\tfor (var ln = 0; ln < links.length; ln++) {\r\n\t\t\t\tvar link = gantt.getLink(links[ln]);\r\n\r\n\t\t\t\tfor (var tp = 0; tp < cond[i].length; tp++) {\r\n\t\t\t\t\tif (link.type == cond[i][tp]) {\r\n\t\t\t\t\t\treturn \"gantt_link_crossing\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\r\n\tfunction _render_task_content(task, width, templates) {\r\n\t\tvar content = document.createElement(\"div\");\r\n\t\tif (gantt.getTaskType(task.type) != gantt.config.types.milestone)\r\n\t\t\tcontent.innerHTML = templates.task_text(task.start_date, task.end_date, task);\r\n\t\tcontent.className = \"gantt_task_content\";\r\n\t\t//content.style.width = width + 'px';\r\n\t\treturn content;\r\n\t}\r\n\r\n\tfunction _render_task_progress(task, element, maxWidth, cfg, templates) {\r\n\t\tvar done = task.progress * 1 || 0;\r\n\r\n\t\tmaxWidth = Math.max(maxWidth - 2, 0);//2px for borders\r\n\t\tvar pr = document.createElement(\"div\");\r\n\t\tvar width = Math.round(maxWidth * done);\r\n\r\n\t\twidth = Math.min(maxWidth, width);\r\n\t\tif (task.progressColor) {\r\n\t\t\tpr.style.backgroundColor = task.progressColor;\r\n\t\t\tpr.style.opacity = 1;\r\n\t\t}\r\n\t\tpr.style.width = width + 'px';\r\n\t\tpr.className = \"gantt_task_progress\";\r\n\t\tpr.innerHTML = templates.progress_text(task.start_date, task.end_date, task);\r\n\r\n\t\tif(cfg.rtl){\r\n\t\t\tpr.style.position = \"absolute\";\r\n\t\t\tpr.style.right = \"0px\";\r\n\t\t}\r\n\r\n\t\tvar wrapper = document.createElement(\"div\");\r\n\t\twrapper.className = \"gantt_task_progress_wrapper\";\r\n\t\twrapper.appendChild(pr);\r\n\t\telement.appendChild(wrapper);\r\n\r\n\t\tif (gantt.config.drag_progress && !gantt.isReadonly(task)) {\r\n\t\t\tvar drag = document.createElement(\"div\");\r\n\r\n\t\t\tvar markerPos = width;\r\n\t\t\tif(cfg.rtl){\r\n\t\t\t\tmarkerPos = maxWidth - width;\r\n\t\t\t}\r\n\r\n\t\t\tdrag.style.left = markerPos + 'px';\r\n\t\t\tdrag.className = \"gantt_task_progress_drag\";\r\n\t\t\tpr.appendChild(drag);\r\n\t\t\telement.appendChild(drag);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _get_conditions(leftside) {\r\n\t\tif (leftside) {\r\n\t\t\treturn {\r\n\t\t\t\t$source: [\r\n\t\t\t\t\tgantt.config.links.start_to_start\r\n\t\t\t\t],\r\n\t\t\t\t$target: [\r\n\t\t\t\t\tgantt.config.links.start_to_start,\r\n\t\t\t\t\tgantt.config.links.finish_to_start\r\n\t\t\t\t]\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\treturn {\r\n\t\t\t\t$source: [\r\n\t\t\t\t\tgantt.config.links.finish_to_start,\r\n\t\t\t\t\tgantt.config.links.finish_to_finish\r\n\t\t\t\t],\r\n\t\t\t\t$target: [\r\n\t\t\t\t\tgantt.config.links.finish_to_finish\r\n\t\t\t\t]\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _combine_item_class(basic, template, itemId, view) {\r\n\t\tvar cfg = view.$getConfig();\r\n\t\tvar css = [basic];\r\n\t\tif (template)\r\n\t\t\tcss.push(template);\r\n\r\n\t\tvar state = gantt.getState();\r\n\r\n\t\tvar task = gantt.getTask(itemId);\r\n\r\n\t\tif (gantt.getTaskType(task.type) == cfg.types.milestone) {\r\n\t\t\tcss.push(\"gantt_milestone\");\r\n\t\t}\r\n\r\n\t\tif (gantt.getTaskType(task.type) == cfg.types.project) {\r\n\t\t\tcss.push(\"gantt_project\");\r\n\t\t}\r\n\r\n\t\tif (gantt.isSummaryTask(task))\r\n\t\t\tcss.push(\"gantt_dependent_task\");\r\n\r\n\t\tif (cfg.select_task && itemId == state.selected_task)\r\n\t\t\tcss.push(\"gantt_selected\");\r\n\r\n\t\tif (itemId == state.drag_id) {\r\n\t\t\tcss.push(\"gantt_drag_\" + state.drag_mode);\r\n\t\t\tif (state.touch_drag) {\r\n\t\t\t\tcss.push(\"gantt_touch_\" + state.drag_mode);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (state.link_source_id == itemId)\r\n\t\t\tcss.push(\"gantt_link_source\");\r\n\r\n\t\tif (state.link_target_id == itemId)\r\n\t\t\tcss.push(\"gantt_link_target\");\r\n\r\n\r\n\t\tif (cfg.highlight_critical_path && gantt.isCriticalTask) {\r\n\t\t\tif (gantt.isCriticalTask(task))\r\n\t\t\t\tcss.push(\"gantt_critical_task\");\r\n\t\t}\r\n\r\n\t\tif (state.link_landing_area &&\r\n\t\t\t(state.link_target_id && state.link_source_id) &&\r\n\t\t\t(state.link_target_id != state.link_source_id)) {\r\n\r\n\t\t\tvar from_id = state.link_source_id;\r\n\t\t\tvar from_start = state.link_from_start;\r\n\t\t\tvar to_start = state.link_to_start;\r\n\r\n\t\t\tvar allowDrag = gantt.isLinkAllowed(from_id, itemId, from_start, to_start);\r\n\r\n\t\t\tvar dragClass = \"\";\r\n\t\t\tif (allowDrag) {\r\n\t\t\t\tif (to_start)\r\n\t\t\t\t\tdragClass = \"link_start_allow\";\r\n\t\t\t\telse\r\n\t\t\t\t\tdragClass = \"link_finish_allow\";\r\n\t\t\t} else {\r\n\t\t\t\tif (to_start)\r\n\t\t\t\t\tdragClass = \"link_start_deny\";\r\n\t\t\t\telse\r\n\t\t\t\t\tdragClass = \"link_finish_deny\";\r\n\t\t\t}\r\n\t\t\tcss.push(dragClass);\r\n\t\t}\r\n\t\treturn css.join(\" \");\r\n\t}\r\n\r\n\tfunction _render_pair(parent, css, task, content, config) {\r\n\t\tvar state = gantt.getState();\r\n\t\tvar className, element;\r\n\t\tif (+task.start_date >= +state.min_date) {\r\n\t\t\tclassName = [css, config.rtl ? \"task_right\" : \"task_left\", \"task_start_date\"];\r\n\t\t\telement = content(className.join(\" \"));\r\n\t\t\telement.setAttribute(\"data-bind-property\", \"start_date\");\r\n\t\t\tparent.appendChild(element);\r\n\t\t}\r\n\r\n\t\tif (+task.end_date <= +state.max_date){\r\n\t\t\tclassName = [css, config.rtl ? \"task_left\" : \"task_right\", \"task_end_date\"];\r\n\t\t\telement = content(className.join(\" \"));\r\n\t\t\telement.setAttribute(\"data-bind-property\", \"end_date\");\r\n\t\t\tparent.appendChild(element);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn _render_task_element;\r\n}\r\n\r\nmodule.exports = createTaskRenderer;\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports) {\n\nfunction createTaskBgRender(gantt){\r\n\t//this.getTaskTop\r\n\tfunction _render_bg_line(item, view) {\r\n\t\tvar config = view.$getConfig(),\r\n\t\t\ttemplates = view.$getTemplates();\r\n\t\tvar cfg = view.getScale();\r\n\t\tvar count = cfg.count;\r\n\t\tvar row = document.createElement(\"div\");\r\n\t\tif (config.show_task_cells) {\r\n\t\t\tfor (var j = 0; j < count; j++) {\r\n\t\t\t\tvar width = cfg.width[j],\r\n\t\t\t\t\tcssclass = \"\";\r\n\r\n\t\t\t\tif (width > 0) {//do not render skipped columns\r\n\t\t\t\t\tvar cell = document.createElement(\"div\");\r\n\t\t\t\t\tcell.style.width = (width) + \"px\";\r\n\r\n\t\t\t\t\tcssclass = \"gantt_task_cell\" + (j == count - 1 ? \" gantt_last_cell\" : \"\");\r\n\t\t\t\t\tcssTemplate = templates.task_cell_class(item, cfg.trace_x[j]);\r\n\t\t\t\t\tif (cssTemplate)\r\n\t\t\t\t\t\tcssclass += \" \" + cssTemplate;\r\n\t\t\t\t\tcell.className = cssclass;\r\n\r\n\t\t\t\t\trow.appendChild(cell);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar odd = gantt.getGlobalTaskIndex(item.id) % 2 !== 0;\r\n\t\tvar cssTemplate = templates.task_row_class(item.start_date, item.end_date, item);\r\n\t\tvar css = \"gantt_task_row\" + (odd ? \" odd\" : \"\") + (cssTemplate ? ' ' + cssTemplate : '');\r\n\r\n\t\tvar store = view.$config.rowStore;\r\n\t\tif(store.getSelectedId() == item.id) {\r\n\t\t\tcss += \" gantt_selected\";\r\n\t\t}\r\n\r\n\t\t//var row = \"<div class='\" + css + \"' \" + this.config.task_attribute + \"='\" + item.id + \"'>\" + cells.join(\"\") + \"</div>\";\r\n\r\n\t\trow.className = css;\r\n\r\n\t\tif (config.smart_rendering) {\r\n\t\t\trow.style.position = \"absolute\";\r\n\t\t\trow.style.top = view.getItemTop(item.id) + \"px\";\r\n\t\t\trow.style.width = \"100%\";\r\n\t\t}\r\n\t\trow.style.height = (config.row_height) + \"px\";\r\n\r\n\t\tif(view.$config.item_attribute){\r\n\t\t\trow.setAttribute(view.$config.item_attribute, item.id);\r\n\t\t}\r\n\r\n\t\treturn row;\r\n\t}\r\n\r\n\treturn _render_bg_line;\r\n}\r\n\r\nmodule.exports = createTaskBgRender;\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports) {\n\n\r\nfunction createLinkRender(gantt){\r\n\r\nfunction _render_link_element(link, view) {\r\n\tvar config = view.$getConfig();\r\n\tvar dots = path_builder.get_points(link, view);\r\n\tvar lines = drawer.get_lines(dots, view);\r\n\r\n\tvar div = document.createElement(\"div\");\r\n\r\n\tvar css = \"gantt_task_link\";\r\n\r\n\tif (link.color) {\r\n\t\tcss += \" gantt_link_inline_color\";\r\n\t}\r\n\tvar cssTemplate = gantt.templates.link_class ? gantt.templates.link_class(link) : \"\";\r\n\tif (cssTemplate) {\r\n\t\tcss += \" \" + cssTemplate;\r\n\t}\r\n\r\n\tif (config.highlight_critical_path && gantt.isCriticalLink) {\r\n\t\tif (gantt.isCriticalLink(link))\r\n\t\t\tcss += \" gantt_critical_link\";\r\n\t}\r\n\r\n\tdiv.className = css;\r\n\r\n\tif(view.$config.link_attribute){\r\n\t\tdiv.setAttribute(view.$config.link_attribute, link.id);\r\n\t}\r\n\r\n\tfor (var i = 0; i < lines.length; i++) {\r\n\t\tif (i == lines.length - 1) {\r\n\t\t\tlines[i].size -= config.link_arrow_size;\r\n\t\t}\r\n\t\tvar el = drawer.render_line(lines[i], lines[i + 1], view);\r\n\t\tif (link.color) {\r\n\t\t\tel.firstChild.style.backgroundColor = link.color;\r\n\t\t}\r\n\t\tdiv.appendChild(el);\r\n\t}\r\n\r\n\tvar direction = lines[lines.length - 1].direction;\r\n\tvar endpoint = _render_link_arrow(dots[dots.length - 1], direction, view);\r\n\tif (link.color) {\r\n\t\tendpoint.style.borderColor = link.color;\r\n\t}\r\n\tdiv.appendChild(endpoint);\r\n\r\n\tgantt._waiAria.linkAttr(link, div);\r\n\r\n\treturn div;\r\n}\r\n\r\nfunction _render_link_arrow(point, direction, view) {\r\n\tvar config = view.$getConfig();\r\n\tvar div = document.createElement(\"div\");\r\n\tvar top = point.y;\r\n\tvar left = point.x;\r\n\r\n\tvar size = config.link_arrow_size;\r\n\tvar line_width = config.row_height;\r\n\tvar className = \"gantt_link_arrow gantt_link_arrow_\" + direction;\r\n\tswitch (direction) {\r\n\t\tcase drawer.dirs.right:\r\n\t\t\ttop -= (size - line_width) / 2;\r\n\t\t\tleft -= size;\r\n\t\t\tbreak;\r\n\t\tcase drawer.dirs.left:\r\n\t\t\ttop -= (size - line_width) / 2;\r\n\t\t\tbreak;\r\n\t\tcase drawer.dirs.up:\r\n\t\t\tleft -= size;\r\n\t\t\tbreak;\r\n\t\tcase drawer.dirs.down:\r\n\t\t\ttop += size * 2;\r\n\t\t\tleft -= size;\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tbreak;\r\n\t}\r\n\tdiv.style.cssText = [\r\n\t\t\"top:\" + top + \"px\",\r\n\t\t\"left:\" + left + 'px'].join(';');\r\n\tdiv.className = className;\r\n\r\n\treturn div;\r\n}\r\n\r\n\r\nvar drawer = {\r\n\tcurrent_pos: null,\r\n\tdirs: {\"left\": 'left', \"right\": 'right', \"up\": 'up', \"down\": 'down'},\r\n\tpath: [],\r\n\tclear: function () {\r\n\t\tthis.current_pos = null;\r\n\t\tthis.path = [];\r\n\t},\r\n\tpoint: function (pos) {\r\n\t\tthis.current_pos = gantt.copy(pos);\r\n\t},\r\n\tget_lines: function (dots) {\r\n\t\tthis.clear();\r\n\t\tthis.point(dots[0]);\r\n\t\tfor (var i = 1; i < dots.length; i++) {\r\n\t\t\tthis.line_to(dots[i]);\r\n\t\t}\r\n\t\treturn this.get_path();\r\n\t},\r\n\tline_to: function (pos) {\r\n\t\tvar next = gantt.copy(pos);\r\n\t\tvar prev = this.current_pos;\r\n\r\n\t\tvar line = this._get_line(prev, next);\r\n\t\tthis.path.push(line);\r\n\t\tthis.current_pos = next;\r\n\t},\r\n\tget_path: function () {\r\n\t\treturn this.path;\r\n\t},\r\n\tget_wrapper_sizes: function (v, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar res,\r\n\t\t\twrapper_size = config.link_wrapper_width,\r\n\t\t\tline_size = config.link_line_width,\r\n\t\t\ty = v.y + (config.row_height - wrapper_size) / 2;\r\n\t\tswitch (v.direction) {\r\n\t\t\tcase this.dirs.left:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y,\r\n\t\t\t\t\theight: wrapper_size,\r\n\t\t\t\t\tlineHeight: wrapper_size,\r\n\t\t\t\t\tleft: v.x - v.size - wrapper_size / 2,\r\n\t\t\t\t\twidth: v.size + wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.right:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y,\r\n\t\t\t\t\tlineHeight: wrapper_size,\r\n\t\t\t\t\theight: wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: v.size + wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.up:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y - v.size,\r\n\t\t\t\t\tlineHeight: v.size + wrapper_size,\r\n\t\t\t\t\theight: v.size + wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.down:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y /*- wrapper_size/2*/,\r\n\t\t\t\t\tlineHeight: v.size + wrapper_size,\r\n\t\t\t\t\theight: v.size + wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t},\r\n\tget_line_sizes: function (v, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar res,\r\n\t\t\tline_size = config.link_line_width,\r\n\t\t\twrapper_size = config.link_wrapper_width,\r\n\t\t\tsize = v.size + line_size;\r\n\t\tswitch (v.direction) {\r\n\t\t\tcase this.dirs.left:\r\n\t\t\tcase this.dirs.right:\r\n\t\t\t\tres = {\r\n\t\t\t\t\theight: line_size,\r\n\t\t\t\t\twidth: size,\r\n\t\t\t\t\tmarginTop: (wrapper_size - line_size) / 2,\r\n\t\t\t\t\tmarginLeft: (wrapper_size - line_size) / 2\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.up:\r\n\t\t\tcase this.dirs.down:\r\n\t\t\t\tres = {\r\n\t\t\t\t\theight: size,\r\n\t\t\t\t\twidth: line_size,\r\n\t\t\t\t\tmarginTop: (wrapper_size - line_size) / 2,\r\n\t\t\t\t\tmarginLeft: (wrapper_size - line_size) / 2\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\r\n\t\treturn res;\r\n\t},\r\n\trender_line: function (v, end, view) {\r\n\t\tvar pos = this.get_wrapper_sizes(v, view);\r\n\t\tvar wrapper = document.createElement(\"div\");\r\n\t\twrapper.style.cssText = [\r\n\t\t\t\"top:\" + pos.top + \"px\",\r\n\t\t\t\"left:\" + pos.left + \"px\",\r\n\t\t\t\"height:\" + pos.height + \"px\",\r\n\t\t\t\"width:\" + pos.width + \"px\"\r\n\t\t].join(';');\r\n\t\twrapper.className = \"gantt_line_wrapper\";\r\n\r\n\t\tvar innerPos = this.get_line_sizes(v, view);\r\n\t\tvar inner = document.createElement(\"div\");\r\n\t\tinner.style.cssText = [\r\n\t\t\t\"height:\" + innerPos.height + \"px\",\r\n\t\t\t\"width:\" + innerPos.width + \"px\",\r\n\t\t\t\"margin-top:\" + innerPos.marginTop + \"px\",\r\n\t\t\t\"margin-left:\" + innerPos.marginLeft + \"px\"\r\n\t\t].join(\";\");\r\n\r\n\t\tinner.className = \"gantt_link_line_\" + v.direction;\r\n\t\twrapper.appendChild(inner);\r\n\r\n\t\treturn wrapper;\r\n\t},\r\n\t_get_line: function (from, to) {\r\n\t\tvar direction = this.get_direction(from, to);\r\n\t\tvar vect = {\r\n\t\t\tx: from.x,\r\n\t\t\ty: from.y,\r\n\t\t\tdirection: this.get_direction(from, to)\r\n\t\t};\r\n\t\tif (direction == this.dirs.left || direction == this.dirs.right) {\r\n\t\t\tvect.size = Math.abs(from.x - to.x);\r\n\t\t} else {\r\n\t\t\tvect.size = Math.abs(from.y - to.y);\r\n\t\t}\r\n\t\treturn vect;\r\n\t},\r\n\tget_direction: function (from, to) {\r\n\t\tvar direction = 0;\r\n\t\tif (to.x < from.x) {\r\n\t\t\tdirection = this.dirs.left;\r\n\t\t} else if (to.x > from.x) {\r\n\t\t\tdirection = this.dirs.right;\r\n\t\t} else if (to.y > from.y) {\r\n\t\t\tdirection = this.dirs.down;\r\n\t\t} else {\r\n\t\t\tdirection = this.dirs.up;\r\n\t\t}\r\n\t\treturn direction;\r\n\t}\r\n\r\n};\r\n\r\nvar path_builder = {\r\n\r\n\tpath: [],\r\n\tclear: function () {\r\n\t\tthis.path = [];\r\n\t},\r\n\tcurrent: function () {\r\n\t\treturn this.path[this.path.length - 1];\r\n\t},\r\n\tpoint: function (next) {\r\n\t\tif (!next)\r\n\t\t\treturn this.current();\r\n\r\n\t\tthis.path.push(gantt.copy(next));\r\n\t\treturn next;\r\n\t},\r\n\tpoint_to: function (direction, diff, point) {\r\n\t\tif (!point)\r\n\t\t\tpoint = gantt.copy(this.point());\r\n\t\telse\r\n\t\t\tpoint = {x: point.x, y: point.y};\r\n\t\tvar dir = drawer.dirs;\r\n\t\tswitch (direction) {\r\n\t\t\tcase (dir.left):\r\n\t\t\t\tpoint.x -= diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.right):\r\n\t\t\t\tpoint.x += diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.up):\r\n\t\t\t\tpoint.y -= diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.down):\r\n\t\t\t\tpoint.y += diff;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn this.point(point);\r\n\t},\r\n\tget_points: function (link, view) {\r\n\t\tvar pt = this.get_endpoint(link, view);\r\n\t\tvar xy = gantt.config;\r\n\r\n\t\tvar dy = pt.e_y - pt.y;\r\n\t\tvar dx = pt.e_x - pt.x;\r\n\r\n\t\tvar dir = drawer.dirs;\r\n\r\n\t\tthis.clear();\r\n\t\tthis.point({x: pt.x, y: pt.y});\r\n\r\n\t\tvar shiftX = 2 * xy.link_arrow_size;//just random size for first line\r\n\t\tvar lineType = this.get_line_type(link, view.$getConfig());\r\n\r\n\t\tvar forward = (pt.e_x > pt.x);\r\n\t\tif (lineType.from_start && lineType.to_start) {\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t}\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\r\n\t\t} else if (!lineType.from_start && lineType.to_start) {\r\n\t\t\tforward = (pt.e_x > (pt.x + 2 * shiftX));\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tdx -= shiftX;\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tdx -= 2 * shiftX;\r\n\t\t\t\tvar sign = dy > 0 ? 1 : -1;\r\n\r\n\t\t\t\tthis.point_to(dir.down, sign * (xy.row_height / 2));\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, sign * ( Math.abs(dy) - (xy.row_height / 2)));\r\n\t\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\t}\r\n\r\n\t\t} else if (!lineType.from_start && !lineType.to_start) {\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t} else {\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t}\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t} else if (lineType.from_start && !lineType.to_start) {\r\n\r\n\t\t\tforward = (pt.e_x > (pt.x - 2 * shiftX));\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\r\n\t\t\tif (!forward) {\r\n\t\t\t\tdx += shiftX;\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tdx += 2 * shiftX;\r\n\t\t\t\tvar sign = dy > 0 ? 1 : -1;\r\n\t\t\t\tthis.point_to(dir.down, sign * (xy.row_height / 2));\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, sign * ( Math.abs(dy) - (xy.row_height / 2)));\r\n\t\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this.path;\r\n\t},\r\n\tget_line_type: function(link, config){\r\n\t\tvar types = config.links;\r\n\t\tvar from_start = false, to_start = false;\r\n\t\tif (link.type == types.start_to_start) {\r\n\t\t\tfrom_start = to_start = true;\r\n\t\t} else if (link.type == types.finish_to_finish) {\r\n\t\t\tfrom_start = to_start = false;\r\n\t\t} else if (link.type == types.finish_to_start) {\r\n\t\t\tfrom_start = false;\r\n\t\t\tto_start = true;\r\n\t\t} else if (link.type == types.start_to_finish) {\r\n\t\t\tfrom_start = true;\r\n\t\t\tto_start = false;\r\n\t\t} else {\r\n\t\t\tgantt.assert(false, \"Invalid link type\");\r\n\t\t}\r\n\r\n\t\tif(config.rtl){\r\n\t\t\tfrom_start = !from_start;\r\n\t\t\tto_start = !to_start;\r\n\t\t}\r\n\r\n\t\treturn {from_start: from_start, to_start: to_start};\r\n\t},\r\n\r\n\tget_endpoint: function (link, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar types = config.links;\r\n\r\n\t\tvar lineType = this.get_line_type(link, config);\r\n\t\tvar from_start = lineType.from_start,\r\n\t\t\tto_start = lineType.to_start;\r\n\r\n\t\tvar source = gantt.getTask(link.source);\r\n\t\tvar target = gantt.getTask(link.target);\r\n\r\n\t\tvar from = getMilestonePosition(source, view),\r\n\t\t\tto = getMilestonePosition(target, view);\r\n\r\n\t\treturn {\r\n\t\t\tx: from_start ? from.left : (from.left + from.width),\r\n\t\t\te_x: to_start ? to.left : (to.left + to.width),\r\n\t\t\ty: from.top,\r\n\t\t\te_y: to.top\r\n\t\t};\r\n\t}\r\n};\r\n\r\nfunction getMilestonePosition(task, view){\r\n\tvar config = view.$getConfig();\r\n\tvar pos = view.getItemPosition(task);\r\n\tif(gantt.getTaskType(task.type) == config.types.milestone){\r\n\t\tvar milestoneHeight = gantt.getTaskHeight();\r\n\t\tvar milestoneWidth = Math.sqrt(2*milestoneHeight*milestoneHeight);\r\n\t\tpos.left -= milestoneWidth / 2;\r\n\t\tpos.width = milestoneWidth;\r\n\t}\r\n\treturn pos;\r\n}\r\n\r\nreturn _render_link_element;\r\n\r\n}\r\n\r\nmodule.exports = createLinkRender;\n\n/***/ }),\n/* 54 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar dateHelper = __webpack_require__(4);\r\n\r\nfunction createGridLineRender(gantt){\r\n\tfunction _render_grid_item(item, view) {\r\n\t\t//if (!_is_grid_visible.call(this))\r\n\t\t//\treturn null;\r\n\r\n\t\tvar columns = view.getGridColumns();\r\n\t\tvar config = view.$getConfig(),\r\n\t\t\ttemplates = view.$getTemplates();\r\n\r\n\t\tvar store = view.$config.rowStore;\r\n\r\n\t\tif(config.rtl){\r\n\t\t\tcolumns = columns.reverse();\r\n\t\t}\r\n\r\n\t\tvar cells = [];\r\n\t\tvar width = 0;\r\n\t\tvar has_child;\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar last = i == columns.length - 1;\r\n\t\t\tvar col = columns[i];\r\n\t\t\tvar cell;\r\n\r\n\t\t\tvar value;\r\n\t\t\tvar textValue;\r\n\t\t\tif (col.name == \"add\") {\r\n\t\t\t\tvar aria = gantt._waiAria.gridAddButtonAttrString(col);\r\n\r\n\t\t\t\tvalue = \"<div \" + aria + \" class='gantt_add'></div>\";\r\n\t\t\t\ttextValue = \"\";\r\n\t\t\t} else {\r\n\t\t\t\tif (col.template)\r\n\t\t\t\t\tvalue = col.template(item);\r\n\t\t\t\telse\r\n\t\t\t\t\tvalue = item[col.name];\r\n\r\n\t\t\t\tif (dateHelper.isDate(value))\r\n\t\t\t\t\tvalue = templates.date_grid(value, item);\r\n\t\t\t\ttextValue = value;\r\n\t\t\t\tvalue = \"<div class='gantt_tree_content'>\" + value + \"</div>\";\r\n\t\t\t}\r\n\t\t\tvar css = \"gantt_cell\" + (last ? \" gantt_last_cell\" : \"\");\r\n\r\n\t\t\tvar tree = [];\r\n\t\t\tif (col.tree) {\r\n\t\t\t\tfor (var j = 0; j < item.$level; j++)\r\n\t\t\t\t\ttree.push(templates.grid_indent(item));\r\n\r\n\t\t\t\thas_child = store.hasChild(item.id);\r\n\t\t\t\tif (has_child) {\r\n\t\t\t\t\ttree.push(templates.grid_open(item));\r\n\t\t\t\t\ttree.push(templates.grid_folder(item));\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttree.push(templates.grid_blank(item));\r\n\t\t\t\t\ttree.push(templates.grid_file(item));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar style = \"width:\" + (col.width - (last ? 1 : 0)) + \"px;\";\r\n\t\t\tif (this.defined(col.align))\r\n\t\t\t\tstyle += \"text-align:\" + col.align + \";\";\r\n\r\n\t\t\tvar aria = gantt._waiAria.gridCellAttrString(col, textValue);\r\n\r\n\t\t\ttree.push(value);\r\n\t\t\tif(config.rtl){\r\n\t\t\t\ttree = tree.reverse();\r\n\t\t\t}\r\n\t\t\tcell = \"<div class='\" + css + \"' style='\" + style + \"' \" + aria + \">\" + tree.join(\"\") + \"</div>\";\r\n\t\t\tcells.push(cell);\r\n\t\t}\r\n\t\tvar css = gantt.getGlobalTaskIndex(item.id) % 2 === 0 ? \"\" : \" odd\";\r\n\t\tcss += (item.$transparent) ? \" gantt_transparent\" : \"\";\r\n\r\n\t\tcss += (item.$dataprocessor_class ? \" \" + item.$dataprocessor_class : \"\");\r\n\r\n\t\tif (templates.grid_row_class) {\r\n\t\t\tvar css_template = templates.grid_row_class.call(gantt, item.start_date, item.end_date, item);\r\n\t\t\tif (css_template)\r\n\t\t\t\tcss += \" \" + css_template;\r\n\t\t}\r\n\r\n\t\tif(store.getSelectedId() == item.id) {\r\n\t\t\tcss += \" gantt_selected\";\r\n\t\t}\r\n\r\n\t\tvar el = document.createElement(\"div\");\r\n\t\tel.className = \"gantt_row\" + css;\r\n\t\tvar height = view.getItemHeight();\r\n\t\tel.style.height = height + \"px\";\r\n\t\tel.style.lineHeight = height + \"px\";\r\n\r\n\t\tif(config.smart_rendering){\r\n\t\t\tel.style.position = \"absolute\";\r\n\t\t\tel.style.left = \"0px\";\r\n\t\t\tel.style.top = view.getItemTop(item.id) + \"px\";\r\n\t\t}\r\n\r\n\t\tif(view.$config.item_attribute){\r\n\t\t\tel.setAttribute(view.$config.item_attribute, item.id);\r\n\t\t}\r\n\r\n\t\tgantt._waiAria.taskRowAttr(item, el);\r\n\r\n\t\tel.innerHTML = cells.join(\"\");\r\n\t\treturn el;\r\n\t}\r\n\r\n\treturn _render_grid_item;\r\n}\r\n\r\nmodule.exports = createGridLineRender;\r\n\r\n\n\n/***/ }),\n/* 55 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\nvar rowDnd = __webpack_require__(56);\r\n\r\nvar initializer = (function(){\r\n\treturn function(gantt){\r\n\t\treturn {\r\n\t\t\tonCreated: function (grid) {\r\n\t\t\t\tgrid.$config = utils.mixin(grid.$config, {\r\n\t\t\t\t\tbind: \"task\"\r\n\t\t\t\t});\r\n\t\t\t\tif(grid.$config.id == \"grid\") {\r\n\t\t\t\t\tthis.extendGantt(grid);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._mouseDelegates = __webpack_require__(9)(gantt);\r\n\t\t\t},\r\n\t\t\tonInitialized: function (grid) {\r\n\t\t\t\tvar config = grid.$getConfig();\r\n\t\t\t\tif (config.order_branch) {\r\n\t\t\t\t\trowDnd.init(grid.$gantt, grid);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.initEvents(grid, gantt);\r\n\t\t\t\tif(grid.$config.id == \"grid\") {\r\n\t\t\t\t\tthis.extendDom(grid);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (grid) {\r\n\t\t\t\tthis.clearEvents(grid, gantt);\r\n\t\t\t},\r\n\r\n\t\t\tinitEvents: function (grid, gantt) {\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_row\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar config = grid.$getConfig();\r\n\t\t\t\t\tif (id !== null) {\r\n\t\t\t\t\t\tvar task = this.getTask(id);\r\n\t\t\t\t\t\tif (config.scroll_on_click && !gantt._is_icon_open_click(e))\r\n\t\t\t\t\t\t\tthis.showDate(task.start_date);\r\n\t\t\t\t\t\tgantt.callEvent(\"onTaskRowClick\", [id, trg]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt), grid.$grid);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_grid_head_cell\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar column = trg.getAttribute(\"data-column-id\");\r\n\r\n\t\t\t\t\tif (!gantt.callEvent(\"onGridHeaderClick\", [column, e]))\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tvar config = grid.$getConfig();\r\n\r\n\t\t\t\t\tif (column == \"add\") {\r\n\t\t\t\t\t\tvar mouseEvents = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\t\t\t\tmouseEvents.callHandler(\"click\", \"gantt_add\", grid.$grid, [e, config.root_id]);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (config.sort) {\r\n\t\t\t\t\t\tvar sorting_method = column,\r\n\t\t\t\t\t\t\tconf;\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < config.columns.length; i++) {\r\n\t\t\t\t\t\t\tif (config.columns[i].name == column) {\r\n\t\t\t\t\t\t\t\tconf = config.columns[i];\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (conf && conf.sort !== undefined && conf.sort !== true) {\r\n\t\t\t\t\t\t\tsorting_method = conf.sort;\r\n\r\n\t\t\t\t\t\t\tif (!sorting_method) { // column sort property 'false', no sorting\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar sort = (this._sort && this._sort.direction && this._sort.name == column) ? this._sort.direction : \"desc\";\r\n\t\t\t\t\t\t// invert sort direction\r\n\t\t\t\t\t\tsort = (sort == \"desc\") ? \"asc\" : \"desc\";\r\n\t\t\t\t\t\tthis._sort = {\r\n\t\t\t\t\t\t\tname: column,\r\n\t\t\t\t\t\t\tdirection: sort\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tthis.sort(sorting_method, sort == \"desc\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt), grid.$grid);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_add\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar config = grid.$getConfig();\r\n\t\t\t\t\tif (config.readonly) return;\r\n\r\n\t\t\t\t\tvar item = {};\r\n\t\t\t\t\tthis.createTask(item, id ? id : gantt.config.root_id);\r\n\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}, gantt), grid.$grid);\r\n\r\n\t\t\t},\r\n\r\n\t\t\tclearEvents: function(grid, gantt){\r\n\t\t\t\tthis._mouseDelegates.destructor();\r\n\t\t\t\tthis._mouseDelegates = null;\r\n\t\t\t},\r\n\r\n\t\t\textendDom: function(grid){\r\n\t\t\t\tgantt.$grid = grid.$grid;\r\n\t\t\t\tgantt.$grid_scale = grid.$grid_scale;\r\n\t\t\t\tgantt.$grid_data = grid.$grid_data;\r\n\t\t\t},\r\n\t\t\textendGantt: function(grid){\r\n\r\n\t\t\t\tgantt.getGridColumns = gantt.bind(grid.getGridColumns, grid);\r\n\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeStart\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResizeStart\", arguments);\r\n\t\t\t\t});\r\n\t\t\t\tgrid.attachEvent(\"onColumnResize\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResize\", arguments);\r\n\t\t\t\t});\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeEnd\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResizeEnd\", arguments);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeComplete\", function(columns, totalWidth){\r\n\t\t\t\t\tgantt.config.grid_width = totalWidth;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n})();\r\n\r\nmodule.exports = initializer;\n\n/***/ }),\n/* 56 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar domHelpers = __webpack_require__(1);\r\n\r\nfunction _init_dnd(gantt, grid) {\r\n\tvar DnD = gantt.$services.getService(\"dnd\");\r\n\r\n\tif(!grid.$config.bind || !gantt.getDatastore(grid.$config.bind)){\r\n\t\treturn;\r\n\t}\r\n\r\n\tfunction locate(e){\r\n\t\treturn domHelpers.locateAttribute(e, grid.$config.item_attribute);\r\n\t}\r\n\r\n\tfunction getStore(){\r\n\t\treturn gantt.getDatastore(grid.$config.bind);\r\n\t}\r\n\r\n\tvar dnd = new DnD(grid.$grid_data, {updates_per_second: 60});\r\n\tif (gantt.defined(grid.$getConfig().dnd_sensitivity))\r\n\t\tdnd.config.sensitivity = grid.$getConfig().dnd_sensitivity;\r\n\r\n\tdnd.attachEvent(\"onBeforeDragStart\", gantt.bind(function (obj, e) {\r\n\t\tvar el = locate(e);\r\n\t\tif (!el) return false;\r\n\t\tif (gantt.hideQuickInfo) gantt._hideQuickInfo();\r\n\r\n\t\tvar id = el.getAttribute(grid.$config.item_attribute);\r\n\r\n\t\tvar datastore = getStore();\r\n\r\n\t\tvar task = datastore.getItem(id);\r\n\r\n\t\tif (gantt.isReadonly(task))\r\n\t\t\treturn false;\r\n\r\n\t\tdnd.config.initial_open_state = task.$open;\r\n\t\tif (!gantt.callEvent(\"onRowDragStart\", [id, e.target || e.srcElement, e])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}, gantt));\r\n\r\n\tdnd.attachEvent(\"onAfterDragStart\", gantt.bind(function (obj, e) {\r\n\t\tvar el = locate(e);\r\n\t\tdnd.config.marker.innerHTML = el.outerHTML;\r\n\t\tvar element = dnd.config.marker.firstChild;\r\n\t\tif(element){\r\n\t\t\telement.style.position = \"static\";\r\n\t\t}\r\n\r\n\t\tdnd.config.id = el.getAttribute(grid.$config.item_attribute);\r\n\r\n\t\tvar store = getStore();\r\n\r\n\t\tvar task = store.getItem(dnd.config.id);\r\n\t\tdnd.config.index = store.getBranchIndex(dnd.config.id);\r\n\t\tdnd.config.parent = task.parent;\r\n\t\ttask.$open = false;\r\n\t\ttask.$transparent = true;\r\n\t\tthis.refreshData();\r\n\t}, gantt));\r\n\r\n\tdnd.lastTaskOfLevel = function (level) {\r\n\t\tvar last_item = null;\r\n\t\tvar store = getStore();\r\n\t\tvar tasks = store.getItems();\r\n\t\tfor (var i = 0, len = tasks.length; i < len; i++) {\r\n\t\t\tif (tasks[i].$level == level) {\r\n\t\t\t\tlast_item = tasks[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn last_item ? last_item.id : null;\r\n\t};\r\n\tdnd._getGridPos = gantt.bind(function (e) {\r\n\t\tvar pos = domHelpers.getNodePosition(grid.$grid_data);\r\n\t\tvar store = getStore();\r\n\t\t// row offset\r\n\t\tvar x = pos.x;\r\n\t\tvar y = e.pos.y - 10;\r\n\r\n\t\tvar config = grid.$getConfig();\r\n\t\t// prevent moving row out of grid_data container\r\n\t\tif (y < pos.y) y = pos.y;\r\n\t\tvar gridHeight = store.countVisible() * config.row_height;\r\n\t\tif (y > pos.y + gridHeight - config.row_height) y = pos.y + gridHeight - config.row_height;\r\n\r\n\t\tpos.x = x;\r\n\t\tpos.y = y;\r\n\t\treturn pos;\r\n\t}, gantt);\r\n\tdnd._getTargetY = gantt.bind(function (e) {\r\n\t\tvar pos = domHelpers.getNodePosition(grid.$grid_data);\r\n\r\n\t\tvar y = e.pageY - pos.y + (grid.$state.scrollTop || 0);\r\n\t\tif (y < 0)\r\n\t\t\ty = 0;\r\n\t\treturn y;\r\n\t}, gantt);\r\n\tdnd._getTaskByY = gantt.bind(function (y, dropIndex) {\r\n\r\n\t\tvar config = grid.$getConfig(),\r\n\t\t\tstore = getStore();\r\n\r\n\t\ty = y || 0;\r\n\r\n\t\tvar index = Math.floor(y / config.row_height);\r\n\t\tindex = dropIndex < index ? index - 1 : index;\r\n\r\n\t\tif (index > store.countVisible() - 1)\r\n\t\t\treturn null;\r\n\r\n\t\treturn store.getIdByIndex(index);\r\n\t}, gantt);\r\n\tdnd.attachEvent(\"onDragMove\", gantt.bind(function (obj, e) {\r\n\t\tvar dd = dnd.config;\r\n\t\tvar pos = dnd._getGridPos(e);\r\n\r\n\t\tvar config = grid.$getConfig(),\r\n\t\t\tstore = getStore();\r\n\r\n\t\t// setting position of row\r\n\t\tdd.marker.style.left = pos.x + 10 + \"px\";\r\n\t\tdd.marker.style.top = pos.y + \"px\";\r\n\r\n\t\t// highlight row when mouseover\r\n\t\tvar item = store.getItem(dnd.config.id);\r\n\t\tvar targetY = dnd._getTargetY(e);\r\n\t\tvar el = dnd._getTaskByY(targetY, store.getIndexById(item.id));\r\n\r\n\t\tif (!store.exists(el)) {\r\n\t\t\tel = dnd.lastTaskOfLevel(config.order_branch_free ? item.$level : 0);\r\n\t\t\tif (el == dnd.config.id) {\r\n\t\t\t\tel = null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction allowedLevel(next, item) {\r\n\t\t\treturn (!(store.isChildOf(over.id, item.id)) && (next.$level == item.$level || config.order_branch_free));\r\n\t\t}\r\n\r\n\t\tif (store.exists(el)) {\r\n\t\t\tvar over = store.getItem(el);\r\n\r\n\t\t\tif (store.getIndexById(over.id) * config.row_height + config.row_height / 2 < targetY) {\r\n\t\t\t\t//hovering over bottom part of item, check can be drop to bottom\r\n\t\t\t\tvar index = store.getIndexById(over.id);\r\n\t\t\t\tvar nextId = store.getNext(over.id);//adds +1 when hovering over placeholder\r\n\t\t\t\tvar next = store.getItem(nextId);\r\n\t\t\t\tif (next) {\r\n\t\t\t\t\tif (next.id != item.id) {\r\n\t\t\t\t\t\tover = next; //there is a valid target\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif (config.order_branch_free) {\r\n\t\t\t\t\t\t\tif (!(store.isChildOf(item.id, over.id) && store.getChildren(over.id).length == 1))\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tstore.move(item.id, store.getBranchIndex(over.id) + 1, store.getParent(over.id));\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//we at end of the list, check and drop at the end of list\r\n\t\t\t\t\tnextId = store.getIdByIndex(index);\r\n\t\t\t\t\tnext = store.getItem(nextId);\r\n\r\n\t\t\t\t\tif (allowedLevel(next, item) && next.id != item.id) {\r\n\t\t\t\t\t\tstore.move(item.id, -1, store.getParent(next.id));\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (config.order_branch_free) {\r\n\t\t\t\tif (over.id != item.id && allowedLevel(over, item)) {\r\n\t\t\t\t\tif (!store.hasChild(over.id)) {\r\n\t\t\t\t\t\tover.$open = true;\r\n\t\t\t\t\t\tstore.move(item.id, -1, over.id);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (store.getIndexById(over.id) || config.row_height / 3 < targetY) return;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//if item is on different level, check the one before it\r\n\t\t\tvar index = store.getIndexById(over.id),\r\n\t\t\t\tprevId = store.getIdByIndex(index - 1);\r\n\r\n\t\t\tvar prev = store.getItem(prevId);\r\n\r\n\t\t\tvar shift = 1;\r\n\t\t\twhile ((!prev || prev.id == over.id) && index - shift >= 0) {\r\n\r\n\t\t\t\tprevId = store.getIdByIndex(index - shift);\r\n\t\t\t\tprev = store.getItem(prevId);\r\n\t\t\t\tshift++;\r\n\t\t\t}\r\n\r\n\t\t\tif (item.id == over.id) return;\r\n\t\t\t//replacing item under cursor\r\n\t\t\tif (allowedLevel(over, item) && item.id != over.id) {\r\n\t\t\t\tstore.move(item.id, 0, 0, over.id);\r\n\r\n\t\t\t} else if (over.$level == item.$level - 1 && !store.getChildren(over.id).length) {\r\n\t\t\t\tstore.move(item.id, 0, over.id);\r\n\r\n\t\t\t} else if (prev && (allowedLevel(prev, item)) && (item.id != prev.id)) {\r\n\t\t\t\tstore.move(item.id, -1, store.getParent(prev.id));\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}, gantt));\r\n\r\n\tdnd.attachEvent(\"onDragEnd\", gantt.bind(function () {\r\n\t\tvar store = getStore();\r\n\t\tvar task = store.getItem(dnd.config.id);\r\n\t\ttask.$transparent = false;\r\n\t\ttask.$open = dnd.config.initial_open_state;\r\n\r\n\t\tif (this.callEvent(\"onBeforeRowDragEnd\", [dnd.config.id, dnd.config.parent, dnd.config.index]) === false) {\r\n\t\t\tstore.move(dnd.config.id, dnd.config.index, dnd.config.parent);\r\n\t\t\ttask.$drop_target = null;\r\n\t\t} else {\r\n\t\t\tthis.callEvent(\"onRowDragEnd\", [dnd.config.id, task.$drop_target]);\r\n\t\t}\r\n\r\n\t\tstore.refresh(task.id);\r\n\t\t//this.refreshData();\r\n\t}, gantt));\r\n}\r\n\r\nmodule.exports = {\r\n\tinit: _init_dnd\r\n};\n\n/***/ }),\n/* 57 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0),\r\n\ttaskDnD = __webpack_require__(58),\r\n\tlinkDnD = __webpack_require__(59),\r\n\tdomHelpers = __webpack_require__(1);\r\n\r\nvar initializer = (function(){\r\n\treturn function(gantt){\r\n\t\tvar services = gantt.$services;\r\n\t\treturn {\r\n\t\t\tonCreated: function (timeline) {\r\n\t\t\t\tvar config = timeline.$config;\r\n\t\t\t\tconfig.bind = utils.defined(config.bind) ? config.bind : \"task\";\r\n\t\t\t\tconfig.bindLinks = utils.defined(config.bindLinks) ? config.bindLinks : \"link\";\r\n\r\n\t\t\t\ttimeline._linksDnD = linkDnD.createLinkDND();\r\n\t\t\t\ttimeline._tasksDnD = taskDnD.createTaskDND();\r\n\t\t\t\ttimeline._tasksDnD.extend(timeline);\r\n\r\n\t\t\t\tthis._mouseDelegates = __webpack_require__(9)(gantt);\r\n\t\t\t},\r\n\t\t\tonInitialized: function (timeline) {\r\n\t\t\t\tthis._attachDomEvents(gantt);\r\n\r\n\t\t\t\tthis._attachStateProvider(gantt, timeline);\r\n\r\n\t\t\t\ttimeline._tasksDnD.init(timeline, gantt);\r\n\t\t\t\ttimeline._linksDnD.init(timeline, gantt);\r\n\r\n\t\t\t\tif(timeline.$config.id == \"timeline\"){\r\n\t\t\t\t\tthis.extendDom(timeline);\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (timeline) {\r\n\t\t\t\tthis._clearDomEvents(gantt);\r\n\t\t\t\tthis._clearStateProvider(gantt);\r\n\t\t\t},\r\n\t\t\textendDom: function(timeline){\r\n\t\t\t\tgantt.$task = timeline.$task;\r\n\t\t\t\tgantt.$task_scale = timeline.$task_scale;\r\n\t\t\t\tgantt.$task_data = timeline.$task_data;\r\n\t\t\t\tgantt.$task_bg = timeline.$task_bg;\r\n\t\t\t\tgantt.$task_links = timeline.$task_links;\r\n\t\t\t\tgantt.$task_bars = timeline.$task_bars;\r\n\t\t\t},\r\n\r\n\t\t\t_clearDomEvents: function(){\r\n\t\t\t\tthis._mouseDelegates.destructor();\r\n\t\t\t\tthis._mouseDelegates = null;\r\n\t\t\t},\r\n\r\n\t\t\t_attachDomEvents: function(gantt){\r\n\t\t\t\tfunction _delete_link_handler(id, e) {\r\n\t\t\t\t\tif (id && this.callEvent(\"onLinkDblClick\", [id, e])) {\r\n\r\n\t\t\t\t\t\tvar link = this.getLink(id);\r\n\t\t\t\t\t\tif (this.isReadonly(link)) return;\r\n\r\n\t\t\t\t\t\tvar title = \"\";\r\n\t\t\t\t\t\tvar question = this.locale.labels.link + \" \" + this.templates.link_description(this.getLink(id)) + \" \" + this.locale.labels.confirm_link_deleting;\r\n\r\n\t\t\t\t\t\twindow.setTimeout(function () {\r\n\t\t\t\t\t\t\tgantt._dhtmlx_confirm(question, title, function () {\r\n\t\t\t\t\t\t\t\tgantt.deleteLink(id);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}, (this.config.touch ? 300 : 1));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_task_link\", gantt.bind(function (e, trg) {\r\n\t\t\t\t\tvar id = this.locate(e, this.config.link_attribute);\r\n\t\t\t\t\tif (id) {\r\n\t\t\t\t\t\tthis.callEvent(\"onLinkClick\", [id, e]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt), this.$task);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_scale_cell\", gantt.bind(function (e, trg) {\r\n\t\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\t\t\t\t\tvar date = gantt.dateFromPos(pos.x);\r\n\t\t\t\t\tvar coll = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\t\t\tvar coll_date = gantt.getScale().trace_x[coll];\r\n\r\n\t\t\t\t\tgantt.callEvent(\"onScaleClick\", [e, coll_date]);\r\n\t\t\t\t}, gantt), this.$task);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"doubleclick\", \"gantt_task_link\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar id = this.locate(e, gantt.config.link_attribute);\r\n\t\t\t\t\t_delete_link_handler.call(this, id, e);\r\n\t\t\t\t}, gantt), this.$task);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"doubleclick\", \"gantt_link_point\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar id = this.locate(e),\r\n\t\t\t\t\t\ttask = this.getTask(id);\r\n\r\n\t\t\t\t\tvar link = null;\r\n\t\t\t\t\tif (trg.parentNode && domHelpers.getClassName(trg.parentNode)) {\r\n\t\t\t\t\t\tif (domHelpers.getClassName(trg.parentNode).indexOf(\"_left\") > -1) {\r\n\t\t\t\t\t\t\tlink = task.$target[0];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlink = task.$source[0];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (link)\r\n\t\t\t\t\t\t_delete_link_handler.call(this, link, e);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}, gantt), this.$task);\r\n\t\t\t},\r\n\r\n\t\t\t_attachStateProvider: function(gantt, timeline){\r\n\t\t\t\tvar self = timeline;\r\n\t\t\t\tvar state = services.getService(\"state\");\r\n\t\t\t\tstate.registerProvider(\"tasksTimeline\", function(){\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tscale_unit: self._tasks ? self._tasks.unit : undefined,\r\n\t\t\t\t\t\tscale_step:  self._tasks ? self._tasks.step  : undefined\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t_clearStateProvider: function(){\r\n\t\t\t\tvar state = services.getService(\"state\");\r\n\t\t\t\tstate.unregisterProvider(\"tasksTimeline\");\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n})();\r\n\r\nmodule.exports = initializer;\n\n/***/ }),\n/* 58 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar domHelpers = __webpack_require__(1),\r\n\tutils = __webpack_require__(0);\r\nvar timeout = __webpack_require__(10);\r\n\r\nfunction createTaskDND(timeline, gantt){\r\n\tvar services = gantt.$services;\r\n\treturn {\r\n\t\tdrag: null,\r\n\t\tdragMultiple: {},\r\n\t\t_events: {\r\n\t\t\tbefore_start: {},\r\n\t\t\tbefore_finish: {},\r\n\t\t\tafter_finish: {}\r\n\t\t},\r\n\t\t_handlers: {},\r\n\t\tinit: function () {\r\n\t\t\tthis._domEvents = gantt._createDomEventScope();\r\n\t\t\tthis.clear_drag_state();\r\n\t\t\tvar drag = gantt.config.drag_mode;\r\n\t\t\tthis.set_actions();\r\n\r\n\t\t\tvar stateService = services.getService(\"state\");\r\n\t\t\tstateService.registerProvider(\"tasksDnd\", utils.bind(function(){\r\n\t\t\t\treturn {\r\n\t\t\t\t\tdrag_id : this.drag ? this.drag.id : undefined,\r\n\t\t\t\t\tdrag_mode : this.drag ? this.drag.mode : undefined,\r\n\t\t\t\t\tdrag_from_start : this.drag ? this.drag.left : undefined\r\n\t\t\t\t};\r\n\t\t\t}, this));\r\n\r\n\t\t\tvar evs = {\r\n\t\t\t\t\"before_start\": \"onBeforeTaskDrag\",\r\n\t\t\t\t\"before_finish\": \"onBeforeTaskChanged\",\r\n\t\t\t\t\"after_finish\": \"onAfterTaskDrag\"\r\n\t\t\t};\r\n\t\t\t//for now, all drag operations will trigger the same events\r\n\t\t\tfor (var stage in this._events) {\r\n\t\t\t\tfor (var mode in drag) {\r\n\t\t\t\t\tthis._events[stage][mode] = evs[stage];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._handlers[drag.move] = this._move;\r\n\t\t\tthis._handlers[drag.resize] = this._resize;\r\n\t\t\tthis._handlers[drag.progress] = this._resize_progress;\r\n\t\t},\r\n\t\tset_actions: function () {\r\n\t\t\tvar data = timeline.$task_data;\r\n\t\t\tthis._domEvents.attach(data, \"mousemove\", gantt.bind(function (e) {\r\n\t\t\t\tthis.on_mouse_move(e || event);\r\n\t\t\t}, this));\r\n\t\t\tthis._domEvents.attach(data, \"mousedown\", gantt.bind(function (e) {\r\n\t\t\t\tthis.on_mouse_down(e || event);\r\n\t\t\t}, this));\r\n\t\t\tthis._domEvents.attach(data, \"mouseup\", gantt.bind(function (e) {\r\n\t\t\t\tthis.on_mouse_up(e || event);\r\n\t\t\t}, this));\r\n\t\t},\r\n\r\n\t\tclear_drag_state: function () {\r\n\t\t\tthis.drag = {\r\n\t\t\t\tid: null,\r\n\t\t\t\tmode: null,\r\n\t\t\t\tpos: null,\r\n\t\t\t\tstart_x: null,\r\n\t\t\t\tstart_y: null,\r\n\t\t\t\tobj: null,\r\n\t\t\t\tleft: null\r\n\t\t\t};\r\n\t\t\tthis.dragMultiple = {};\r\n\t\t},\r\n\t\t_resize: function (ev, shift, drag) {\r\n\t\t\tvar cfg = timeline.$getConfig();\r\n\t\t\tvar coords_x = this._drag_task_coords(ev, drag);\r\n\t\t\tif (drag.left) {\r\n\t\t\t\tev.start_date = gantt.dateFromPos(coords_x.start + shift);\r\n\t\t\t\tif (!ev.start_date) {\r\n\t\t\t\t\tev.start_date = new Date(gantt.getState().min_date);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tev.end_date = gantt.dateFromPos(coords_x.end + shift);\r\n\t\t\t\tif (!ev.end_date) {\r\n\t\t\t\t\tev.end_date = new Date(gantt.getState().max_date);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (ev.end_date - ev.start_date < cfg.min_duration) {\r\n\t\t\t\tif (drag.left)\r\n\t\t\t\t\tev.start_date = gantt.calculateEndDate({start_date: ev.end_date, duration: -1, task: ev});\r\n\t\t\t\telse\r\n\t\t\t\t\tev.end_date = gantt.calculateEndDate({start_date: ev.start_date, duration: 1, task: ev});\r\n\t\t\t}\r\n\t\t\tgantt._init_task_timing(ev);\r\n\t\t},\r\n\t\t_resize_progress: function (ev, shift, drag) {\r\n\t\t\tvar coords_x = this._drag_task_coords(ev, drag);\r\n\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar diffValue = !config.rtl ? (drag.pos.x - coords_x.start) : (coords_x.start - drag.pos.x);\r\n\r\n\t\t\tvar diff = Math.max(0, diffValue);\r\n\t\t\tev.progress = Math.min(1, diff / Math.abs(coords_x.end - coords_x.start));\r\n\t\t},\r\n\r\n\t\t_find_max_shift: function(dragItems, shift){\r\n\t\t\tvar correctShift;\r\n\t\t\tfor(var i in dragItems){\r\n\t\t\t\tvar drag = dragItems[i];\r\n\t\t\t\tvar ev = gantt.getTask(drag.id);\r\n\r\n\t\t\t\tvar coords_x = this._drag_task_coords(ev, drag);\r\n\t\t\t\tvar minX = gantt.posFromDate( new Date(gantt.getState().min_date)),\r\n\t\t\t\t\tmaxX = gantt.posFromDate( new Date(gantt.getState().max_date));\r\n\r\n\t\t\t\tif(coords_x.end + shift > maxX){\r\n\t\t\t\t\tvar maxShift = maxX - coords_x.end;\r\n\t\t\t\t\tif(maxShift < correctShift || correctShift === undefined){\r\n\t\t\t\t\t\tcorrectShift = maxShift;\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(coords_x.start + shift < minX){\r\n\t\t\t\t\tvar minShift = minX - coords_x.start;\r\n\t\t\t\t\tif(minShift < correctShift || correctShift === undefined){\r\n\t\t\t\t\t\tcorrectShift = minShift;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn correctShift;\r\n\t\t},\r\n\t\t_move: function (ev, shift, drag) {\r\n\t\t\tvar coords_x = this._drag_task_coords(ev, drag);\r\n\t\t\tvar new_start = gantt.dateFromPos(coords_x.start + shift),\r\n\t\t\t\tnew_end = gantt.dateFromPos(coords_x.end + shift);\r\n\t\t\tif (!new_start) {\r\n\t\t\t\tev.start_date = new Date(gantt.getState().min_date);\r\n\t\t\t\tev.end_date = gantt.dateFromPos(gantt.posFromDate(ev.start_date) + (coords_x.end - coords_x.start));\r\n\t\t\t} else if (!new_end) {\r\n\t\t\t\tev.end_date = new Date(gantt.getState().max_date);\r\n\t\t\t\tev.start_date = gantt.dateFromPos(gantt.posFromDate(ev.end_date) - (coords_x.end - coords_x.start));\r\n\t\t\t} else {\r\n\t\t\t\tev.start_date = new_start;\r\n\t\t\t\tev.end_date = new_end;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_drag_task_coords: function (t, drag) {\r\n\t\t\tvar start = drag.obj_s_x = drag.obj_s_x || gantt.posFromDate(t.start_date);\r\n\t\t\tvar end = drag.obj_e_x = drag.obj_e_x || gantt.posFromDate(t.end_date);\r\n\t\t\treturn {\r\n\t\t\t\tstart: start,\r\n\t\t\t\tend: end\r\n\t\t\t};\r\n\t\t},\r\n\t\t_mouse_position_change: function (oldPos, newPos) {\r\n\t\t\tvar dx = oldPos.x - newPos.x,\r\n\t\t\t\tdy = oldPos.y - newPos.y;\r\n\t\t\treturn Math.sqrt(dx * dx + dy * dy);\r\n\t\t},\r\n\t\t_is_number: function (n) {\r\n\t\t\treturn !isNaN(parseFloat(n)) && isFinite(n);\r\n\t\t},\r\n\r\n\t\ton_mouse_move: function (e) {\r\n\t\t\tif (this.drag.start_drag) {\r\n\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\r\n\t\t\t\tvar sX = this.drag.start_drag.start_x,\r\n\t\t\t\t\tsY = this.drag.start_drag.start_y;\r\n\r\n\t\t\t\tif ((Date.now() - this.drag.timestamp > 50) ||\r\n\t\t\t\t\t(this._is_number(sX) && this._is_number(sY) && this._mouse_position_change({\r\n\t\t\t\t\t\tx: sX,\r\n\t\t\t\t\t\ty: sY\r\n\t\t\t\t\t}, pos) > 20)) {\r\n\t\t\t\t\tthis._start_dnd(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar drag = this.drag;\r\n\r\n\t\t\tif (drag.mode) {\r\n\t\t\t\tif (!timeout(this, 40))//limit update frequency\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tthis._update_on_move(e);\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_update_item_on_move: function(shift, id, mode, drag, e){\r\n\t\t\tvar ev = gantt.getTask(id);\r\n\t\t\tvar original = gantt.mixin({}, ev);\r\n\t\t\tvar copy = gantt.mixin({}, ev);\r\n\t\t\tthis._handlers[mode].apply(this, [copy, shift, drag]);\r\n\t\t\tgantt.mixin(ev, copy, true);\r\n\t\t\t//gantt._update_parents(drag.id, true);\r\n\t\t\tgantt.callEvent(\"onTaskDrag\", [ev.id, mode, copy, original, e]);\r\n\t\t\tgantt.mixin(ev, copy, true);\r\n\t\t\tgantt.refreshTask(id);\r\n\t\t},\r\n\r\n\t\t_update_on_move: function (e) {\r\n\t\t\tvar drag = this.drag;\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tif (drag.mode) {\r\n\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, timeline.$task_data);\r\n\t\t\t\tif (drag.pos && drag.pos.x == pos.x)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tdrag.pos = pos;\r\n\r\n\t\t\t\tvar curr_date = gantt.dateFromPos(pos.x);\r\n\t\t\t\tif (!curr_date || isNaN(curr_date.getTime()))\r\n\t\t\t\t\treturn;\r\n\r\n\r\n\t\t\t\tvar shift = pos.x - drag.start_x;\r\n\t\t\t\tvar ev = gantt.getTask(drag.id);\r\n\r\n\t\t\t\tif (this._handlers[drag.mode]) {\r\n\r\n\t\t\t\t\tif(gantt.isSummaryTask(ev) && gantt.config.drag_project && drag.mode == config.drag_mode.move){\r\n\r\n\t\t\t\t\t\tvar initialDrag = {};\r\n\t\t\t\t\t\tinitialDrag[drag.id] = utils.copy(drag);\r\n\t\t\t\t\t\tvar maxShift = this._find_max_shift(utils.mixin(initialDrag, this.dragMultiple), shift);\r\n\t\t\t\t\t\tif(maxShift !== undefined){\r\n\t\t\t\t\t\t\tshift = maxShift;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis._update_item_on_move(shift, drag.id, drag.mode, drag, e);\r\n\t\t\t\t\t\tfor(var i in this.dragMultiple){\r\n\t\t\t\t\t\t\tvar childDrag =  this.dragMultiple[i];\r\n\t\t\t\t\t\t\tthis._update_item_on_move(shift, childDrag.id, childDrag.mode, childDrag, e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis._update_item_on_move(shift, drag.id, drag.mode, drag, e);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgantt._update_parents(drag.id);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ton_mouse_down: function (e, src) {\r\n\t\t\t// on Mac we do not get onmouseup event when clicking right mouse button leaving us in dnd state\r\n\t\t\t// let's ignore right mouse button then\r\n\t\t\tif (e.button == 2 && e.button !== undefined)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar id = gantt.locate(e);\r\n\t\t\tvar task = null;\r\n\t\t\tif (gantt.isTaskExists(id)) {\r\n\t\t\t\ttask = gantt.getTask(id);\r\n\t\t\t}\r\n\r\n\t\t\tif (gantt.isReadonly(task) || this.drag.mode) return;\r\n\r\n\t\t\tthis.clear_drag_state();\r\n\r\n\t\t\tsrc = src || (e.target || e.srcElement);\r\n\r\n\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\tvar drag = this._get_drag_mode(className, src);\r\n\r\n\t\t\tif (!className || !drag) {\r\n\t\t\t\tif (src.parentNode)\r\n\t\t\t\t\treturn this.on_mouse_down(e, src.parentNode);\r\n\t\t\t\telse\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!drag) {\r\n\t\t\t\tif (gantt.checkEvent(\"onMouseDown\") && gantt.callEvent(\"onMouseDown\", [className.split(\" \")[0]])) {\r\n\t\t\t\t\tif (src.parentNode)\r\n\t\t\t\t\t\treturn this.on_mouse_down(e, src.parentNode);\r\n\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (drag.mode && drag.mode != config.drag_mode.ignore && config[\"drag_\" + drag.mode]) {\r\n\t\t\t\t\tid = gantt.locate(src);\r\n\t\t\t\t\ttask = gantt.copy(gantt.getTask(id) || {});\r\n\r\n\t\t\t\t\tif (gantt.isReadonly(task)) {\r\n\t\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ((gantt.isSummaryTask(task) && !config.drag_project) && drag.mode != config.drag_mode.progress) {//only progress drag is allowed for tasks with flexible duration\r\n\t\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdrag.id = id;\r\n\t\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\r\n\t\t\t\t\tdrag.start_x = pos.x;\r\n\t\t\t\t\tdrag.start_y = pos.y;\r\n\t\t\t\t\tdrag.obj = task;\r\n\t\t\t\t\tthis.drag.start_drag = drag;\r\n\t\t\t\t\tthis.drag.timestamp = Date.now();\r\n\r\n\t\t\t\t} else\r\n\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t}\r\n\t\t},\r\n\t\t_fix_dnd_scale_time: function (task, drag) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar unit = gantt.getScale().unit,\r\n\t\t\t\tstep = gantt.getScale().step;\r\n\t\t\tif (!config.round_dnd_dates) {\r\n\t\t\t\tunit = 'minute';\r\n\t\t\t\tstep = config.time_step;\r\n\t\t\t}\r\n\r\n\t\t\tfunction fixStart(task) {\r\n\t\t\t\tif (!gantt.config.correct_work_time)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\tif (!gantt.isWorkTime(task.start_date, undefined, task))\r\n\t\t\t\t\ttask.start_date = gantt.calculateEndDate({\r\n\t\t\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\t\t\tduration: -1,\r\n\t\t\t\t\t\tunit: config.duration_unit,\r\n\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction fixEnd(task) {\r\n\t\t\t\tif (!gantt.config.correct_work_time)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\tif (!gantt.isWorkTime(new Date(task.end_date - 1), undefined, task))\r\n\t\t\t\t\ttask.end_date = gantt.calculateEndDate({\r\n\t\t\t\t\t\tstart_date: task.end_date,\r\n\t\t\t\t\t\tduration: 1,\r\n\t\t\t\t\t\tunit: config.duration_unit,\r\n\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (drag.mode == config.drag_mode.resize) {\r\n\t\t\t\tif (drag.left) {\r\n\t\t\t\t\ttask.start_date = gantt.roundDate({date: task.start_date, unit: unit, step: step});\r\n\t\t\t\t\tfixStart(task);\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttask.end_date = gantt.roundDate({date: task.end_date, unit: unit, step: step});\r\n\t\t\t\t\tfixEnd(task);\r\n\t\t\t\t}\r\n\t\t\t} else if (drag.mode == config.drag_mode.move) {\r\n\t\t\t\ttask.start_date = gantt.roundDate({date: task.start_date, unit: unit, step: step});\r\n\t\t\t\tfixStart(task);\r\n\t\t\t\ttask.end_date = gantt.calculateEndDate(task);\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\t_fix_working_times: function (task, drag) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar drag = drag || {mode: config.drag_mode.move};\r\n\t\t\t\r\n\t\t\tif (drag.mode == config.drag_mode.resize) {\r\n\t\t\t\tif (drag.left) {\r\n\t\t\t\t\ttask.start_date = gantt.getClosestWorkTime({date: task.start_date, dir: 'future', task: task});\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttask.end_date = gantt.getClosestWorkTime({date: task.end_date, dir: 'past', task: task});\r\n\t\t\t\t}\r\n\t\t\t} else if (drag.mode == config.drag_mode.move) {\r\n\t\t\t\tgantt.correctTaskWorkTime(task);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_finalize_mouse_up: function(taskId, config, drag, e){\r\n\t\t\tvar ev = gantt.getTask(taskId);\r\n\r\n\t\t\tif (config.work_time && config.correct_work_time) {\r\n\t\t\t\tthis._fix_working_times(ev, drag);\r\n\t\t\t}\r\n\r\n\t\t\tthis._fix_dnd_scale_time(ev, drag);\r\n\r\n\t\t\tif (!this._fireEvent(\"before_finish\", drag.mode, [taskId, drag.mode, gantt.copy(drag.obj), e])) {\r\n\t\t\t\t//drag.obj._dhx_changed = false;\r\n\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\tif(taskId == drag.id){\r\n\t\t\t\t\tdrag.obj._dhx_changed = false;\r\n\t\t\t\t\tgantt.mixin(ev, drag.obj, true);\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tgantt.refreshTask(ev.id);\r\n\t\t\t} else {\r\n\t\t\t\tvar drag_id = taskId;\r\n\r\n\t\t\t\tgantt._init_task_timing(ev);\r\n\r\n\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\tgantt.updateTask(ev.id);\r\n\t\t\t\tthis._fireEvent(\"after_finish\", drag.mode, [drag_id, drag.mode, e]);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\ton_mouse_up: function (e) {\r\n\r\n\t\t\tvar drag = this.drag;\r\n\t\t\tif (drag.mode && drag.id) {\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\t//drop\r\n\t\t\t\tvar ev = gantt.getTask(drag.id);\r\n\r\n\t\t\t\tvar dragMultiple = this.dragMultiple;\r\n\t\t\t\tthis._finalize_mouse_up(drag.id, config, drag, e);\r\n\t\t\t\tif(gantt.isSummaryTask(ev) && config.drag_project && drag.mode == config.drag_mode.move){\r\n\t\t\t\t\tfor(var i in dragMultiple){\r\n\t\t\t\t\t\tthis._finalize_mouse_up(dragMultiple[i].id, config, dragMultiple[i], e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.clear_drag_state();\r\n\t\t},\r\n\t\t_get_drag_mode: function (className, el) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar modes = config.drag_mode;\r\n\t\t\tvar classes = (className || \"\").split(\" \");\r\n\t\t\tvar classname = classes[0];\r\n\t\t\tvar drag = {mode: null, left: null};\r\n\t\t\tswitch (classname) {\r\n\t\t\t\tcase \"gantt_task_line\":\r\n\t\t\t\tcase \"gantt_task_content\":\r\n\t\t\t\t\tdrag.mode = modes.move;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_task_drag\":\r\n\t\t\t\t\tdrag.mode = modes.resize;\r\n\r\n\t\t\t\t\tvar dragProperty = el.getAttribute(\"data-bind-property\");\r\n\r\n\t\t\t\t\tif (dragProperty == \"start_date\") {\r\n\t\t\t\t\t\tdrag.left = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdrag.left = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_task_progress_drag\":\r\n\t\t\t\t\tdrag.mode = modes.progress;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_link_control\":\r\n\t\t\t\tcase \"gantt_link_point\":\r\n\t\t\t\t\tdrag.mode = modes.ignore;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tdrag = null;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\treturn drag;\r\n\r\n\t\t},\r\n\r\n\t\t_start_dnd: function (e) {\r\n\t\t\tvar drag = this.drag = this.drag.start_drag;\r\n\t\t\tdelete drag.start_drag;\r\n\r\n\t\t\tvar cfg = timeline.$getConfig();\r\n\t\t\tvar id = drag.id;\r\n\t\t\tif (!cfg[\"drag_\" + drag.mode] || !gantt.callEvent(\"onBeforeDrag\", [id, drag.mode, e]) || !this._fireEvent(\"before_start\", drag.mode, [id, drag.mode, e])) {\r\n\t\t\t\tthis.clear_drag_state();\r\n\t\t\t} else {\r\n\t\t\t\tdelete drag.start_drag;\r\n\r\n\t\t\t\tvar task = gantt.getTask(id);\r\n\t\t\t\tif(gantt.isSummaryTask(task) && gantt.config.drag_project && drag.mode == cfg.drag_mode.move){\r\n\t\t\t\t\tgantt.eachTask(function(child){\r\n\t\t\t\t\t\tthis.dragMultiple[child.id] = gantt.mixin({\r\n\t\t\t\t\t\t\tid: child.id,\r\n\t\t\t\t\t\t\tobj: child\r\n\t\t\t\t\t\t}, this.drag);\r\n\t\t\t\t\t}, task.id, this);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgantt.callEvent(\"onTaskDragStart\", []);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\t_fireEvent: function (stage, mode, params) {\r\n\t\t\tgantt.assert(this._events[stage], \"Invalid stage:{\" + stage + \"}\");\r\n\r\n\t\t\tvar trigger = this._events[stage][mode];\r\n\r\n\t\t\tgantt.assert(trigger, \"Unknown after drop mode:{\" + mode + \"}\");\r\n\t\t\tgantt.assert(params, \"Invalid event arguments\");\r\n\r\n\r\n\t\t\tif (!gantt.checkEvent(trigger))\r\n\t\t\t\treturn true;\r\n\r\n\t\t\treturn gantt.callEvent(trigger, params);\r\n\t\t},\r\n\r\n\t\tround_task_dates: function(task){\r\n\t\t\tvar drag_state = this.drag;\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tif (!drag_state) {\r\n\t\t\t\tdrag_state = {mode: config.drag_mode.move};\r\n\t\t\t}\r\n\t\t\tthis._fix_dnd_scale_time(task, drag_state);\r\n\t\t},\r\n\t\tdestructor: function(){\r\n\t\t\tthis._domEvents.detachAll();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction initTaskDND() {\r\n\tvar _tasks_dnd;\r\n\treturn {\r\n\t\textend: function(timeline){\r\n\t\t\ttimeline.roundTaskDates = function (task) {\r\n\t\t\t\t_tasks_dnd.round_task_dates(task);\r\n\t\t\t};\r\n\r\n\t\t},\r\n\t\tinit: function(timeline, gantt){\r\n\t\t\t_tasks_dnd = createTaskDND(timeline, gantt);\r\n\t\t\t// TODO: entry point for touch handlers, move touch to timeline\r\n\t\t\ttimeline._tasks_dnd = _tasks_dnd;\r\n\t\t\treturn _tasks_dnd.init(gantt);\r\n\t\t},\r\n\t\tdestructor: function(){\r\n\t\t\t_tasks_dnd.destructor();\r\n\t\t\t_tasks_dnd = null;\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = {\r\n\tcreateTaskDND: initTaskDND\r\n};\r\n\n\n/***/ }),\n/* 59 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar domHelpers = __webpack_require__(1);\r\n\r\nvar initLinksDND = function(timeline, gantt) {\r\n\tvar _link_landing,\r\n\t\t_link_target_task,\r\n\t\t_link_target_task_start,\r\n\t\t_link_source_task,\r\n\t\t_link_source_task_start;\r\n\r\n\r\n\tfunction getVisibleMilestoneWidth() {\r\n\t\tvar origWidth = timeline.getItemHeight();//m-s have square shape\r\n\t\treturn Math.round(Math.sqrt(2 * origWidth * origWidth)) - 2;\r\n\t}\r\n\r\n\tfunction isMilestone(task) {\r\n\t\treturn gantt.getTaskType(task.type) == gantt.config.types.milestone;\r\n\t}\r\n\r\n\tfunction getDndState(){\r\n\t\treturn {\r\n\t\t\tlink_source_id : _link_source_task,\r\n\t\t\tlink_target_id : _link_target_task,\r\n\t\t\tlink_from_start : _link_source_task_start,\r\n\t\t\tlink_to_start : _link_target_task_start,\r\n\t\t\tlink_landing_area : _link_landing\r\n\t\t};\r\n\t}\r\n\r\n\tvar services = gantt.$services;\r\n\r\n\tvar state = services.getService(\"state\");\r\n\tvar DnD = services.getService(\"dnd\");\r\n\r\n\tstate.registerProvider(\"linksDnD\", getDndState);\r\n\r\n\tvar dnd = new DnD(timeline.$task_bars, { sensitivity : 0, updates_per_second : 60 }),\r\n\t\tstart_marker = \"task_start_date\",\r\n\t\tend_marker = \"task_end_date\",\r\n\t\tlink_edge_marker = \"gantt_link_point\",\r\n\t\tlink_landing_hover_area = \"gantt_link_control\";\r\n\r\n\tdnd.attachEvent(\"onBeforeDragStart\", gantt.bind(function(obj,e) {\r\n\t\tvar target = (e.target||e.srcElement);\r\n\t\tresetDndState();\r\n\t\tif(gantt.getState().drag_id)\r\n\t\t\treturn false;\r\n\r\n\t\tif(domHelpers.locateClassName(target, link_edge_marker)){\r\n\t\t\tif(domHelpers.locateClassName(target, start_marker))\r\n\t\t\t\t_link_source_task_start = true;\r\n\r\n\t\t\tvar sid = gantt.locate(e);\r\n\t\t\t_link_source_task = sid;\r\n\r\n\t\t\tvar t = gantt.getTask(sid);\r\n\t\t\tif(gantt.isReadonly(t)){\r\n\t\t\t\tresetDndState();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tvar shift = 0;\r\n\r\n\t\t\tthis._dir_start = getLinePos(t, !!_link_source_task_start, shift, timeline.$getConfig(), true);\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}, this));\r\n\r\n\tdnd.attachEvent(\"onAfterDragStart\", gantt.bind(function(obj,e) {\r\n\t\tif(gantt.config.touch) {\r\n\t\t\tgantt.refreshData();\r\n\t\t}\r\n\t\tupdateMarkedHtml(dnd.config.marker);\r\n\t}, this));\r\n\r\n\tfunction getLinePos(task, to_start, shift, cfg, isStart){\r\n\t\tvar taskPos = getMilestonePosition(task, function(task){ return gantt.getTaskPosition(task);}, cfg);\r\n\r\n\t\tvar pos = {x: taskPos.x, y: taskPos.y};\r\n\t\tif(!to_start){\r\n\t\t\tpos.x = taskPos.xEnd;\r\n\t\t}\r\n\r\n\t\t//var pos = gantt._get_task_pos(task, !!to_start);\r\n\t\tpos.y += gantt.config.row_height/2;\r\n\r\n\t\tvar offset = isMilestone(task) && isStart ? 2 : 0;\r\n\r\n\t\tshift = shift || 0;\r\n\t\tif(cfg.rtl)\r\n\t\t\tshift = shift * -1;\r\n\r\n\t\tpos.x += (to_start ? -1 : 1)*shift  - offset;\r\n\t\treturn pos;\r\n\t}\r\n\r\n\tfunction getMilestonePosition(task, getTaskPosition, cfg){\r\n\t\tvar pos = getTaskPosition(task);\r\n\r\n\t\tvar res = {\r\n\t\t\tx: pos.left,\r\n\t\t\ty: pos.top,\r\n\t\t\twidth: pos.width,\r\n\t\t\theight: pos.height\r\n\t\t};\r\n\r\n\t\tif(cfg.rtl){\r\n\t\t\tres.xEnd = res.x;\r\n\t\t\tres.x = res.xEnd + res.width;\r\n\t\t}else{\r\n\t\t\tres.xEnd = res.x + res.width;\r\n\t\t}\r\n\t\tres.yEnd = res.y + res.height;\r\n\r\n\t\tif(gantt.getTaskType(task.type) == gantt.config.types.milestone){\r\n\t\t\tvar milestoneWidth = getVisibleMilestoneWidth();\r\n\r\n\t\t\tres.x += (!cfg.rtl ? -1 : 1)*(milestoneWidth / 2);\r\n\t\t\tres.xEnd += (!cfg.rtl ? 1 : -1)*(milestoneWidth / 2);\r\n\r\n\t\t\t//pos.x -= milestoneWidth / 2;\r\n\t\t\t//pos.xEnd += milestoneWidth / 2;\r\n\t\t\tres.width = pos.xEnd - pos.x;\r\n\t\t}\r\n\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\tdnd.attachEvent(\"onDragMove\", gantt.bind(function(obj,e) {\r\n\t\tvar dd = dnd.config;\r\n\t\tvar pos = dnd.getPosition(e);\r\n\t\tadvanceMarker(dd.marker, pos);\r\n\t\tvar landing = !!domHelpers.locateClassName(e, link_landing_hover_area);\r\n\r\n\t\tvar prevTarget = _link_target_task;\r\n\t\tvar prevLanding = _link_landing;\r\n\t\tvar prevToStart = _link_target_task_start;\r\n\r\n\t\tvar targ = gantt.locate(e),\r\n\t\t\tto_start = true;\r\n\t\tif(landing){\r\n\t\t\t//refreshTask\r\n\t\t\tto_start = !domHelpers.locateClassName(e, end_marker);\r\n\t\t\tlanding = !!targ;\r\n\t\t}\r\n\r\n\t\t_link_target_task = targ;\r\n\t\t_link_landing = landing;\r\n\t\t_link_target_task_start = to_start;\r\n\r\n\t\tif(landing){\r\n\t\t\tvar t = gantt.getTask(targ);\r\n\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar node = domHelpers.locateClassName(e, link_landing_hover_area);\r\n\t\t\tvar shift = 0;\r\n\t\t\tif(node){\r\n\t\t\t\tshift = Math.floor(node.offsetWidth  / 2);\r\n\t\t\t}\r\n\r\n\t\t\tthis._dir_end = getLinePos(t, !!_link_target_task_start,shift, config);\r\n\t\t}else{\r\n\t\t\tthis._dir_end = domHelpers.getRelativeEventPosition(e, timeline.$task_data);\r\n\t\t}\r\n\r\n\t\tvar targetChanged = !(prevLanding == landing && prevTarget == targ && prevToStart == to_start);\r\n\t\tif(targetChanged){\r\n\t\t\tif(prevTarget)\r\n\t\t\t\tgantt.refreshTask(prevTarget, false);\r\n\t\t\tif(targ)\r\n\t\t\t\tgantt.refreshTask(targ, false);\r\n\t\t}\r\n\r\n\t\tif(targetChanged){\r\n\t\t\tupdateMarkedHtml(dd.marker);\r\n\t\t}\r\n\r\n\t\tshowDirectingLine(this._dir_start.x, this._dir_start.y, this._dir_end.x, this._dir_end.y);\r\n\r\n\t\treturn true;\r\n\t}, this));\r\n\r\n\r\n\tdnd.attachEvent(\"onDragEnd\", gantt.bind(function() {\r\n\t\tvar drag = getDndState();\r\n\r\n\t\tif(drag.link_source_id && drag.link_target_id && drag.link_source_id != drag.link_target_id){\r\n\t\t\tvar type = gantt._get_link_type(drag.link_from_start, drag.link_to_start);\r\n\r\n\t\t\tvar link = {source : drag.link_source_id, target: drag.link_target_id, type:type};\r\n\t\t\tif(link.type && gantt.isLinkAllowed(link))\r\n\t\t\t\tgantt.addLink(link);\r\n\t\t}\r\n\r\n\t\tresetDndState();\r\n\r\n\t\tif(gantt.config.touch) {\r\n\t\t\tgantt.refreshData();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (drag.link_source_id)\r\n\t\t\t\tgantt.refreshTask(drag.link_source_id, false);\r\n\t\t\tif (drag.link_target_id)\r\n\t\t\t\tgantt.refreshTask(drag.link_target_id, false);\r\n\t\t}\r\n\t\tremoveDirectionLine();\r\n\t}, this));\r\n\r\n\tfunction updateMarkedHtml(marker){\r\n\t\tvar link = getDndState();\r\n\r\n\t\tvar css = [\"gantt_link_tooltip\"];\r\n\t\tif(link.link_source_id && link.link_target_id){\r\n\t\t\tif(gantt.isLinkAllowed(link.link_source_id, link.link_target_id, link.link_from_start, link.link_to_start)){\r\n\t\t\t\tcss.push(\"gantt_allowed_link\");\r\n\t\t\t}else{\r\n\t\t\t\tcss.push(\"gantt_invalid_link\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar className = gantt.templates.drag_link_class(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start);\r\n\t\tif(className)\r\n\t\t\tcss.push(className);\r\n\r\n\t\tvar html = \"<div class='\"+className+ \"'>\" +\r\n\t\t\tgantt.templates.drag_link(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start) +\r\n\t\t\t\"</div>\";\r\n\t\tmarker.innerHTML = html;\r\n\t}\r\n\r\n\tfunction advanceMarker(marker, pos){\r\n\t\tmarker.style.left = pos.x + 5 + \"px\";\r\n\t\tmarker.style.top = pos.y + 5 + \"px\";\r\n\t}\r\n\r\n\tfunction resetDndState(){\r\n\t\t_link_source_task =\r\n\t\t\t_link_source_task_start =\r\n\t\t\t\t_link_target_task = null;\r\n\t\t_link_target_task_start = true;\r\n\t}\r\n\tfunction showDirectingLine(s_x, s_y, e_x, e_y){\r\n\t\tvar div = getDirectionLine();\r\n\r\n\t\tvar link = getDndState();\r\n\r\n\t\tvar css = [\"gantt_link_direction\"];\r\n\t\tif(gantt.templates.link_direction_class){\r\n\t\t\tcss.push(gantt.templates.link_direction_class(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start));\r\n\t\t}\r\n\r\n\t\tvar dist =Math.sqrt( (Math.pow(e_x - s_x, 2)) + (Math.pow(e_y - s_y, 2)) );\r\n\t\tdist = Math.max(0, dist - 3);\r\n\t\tif(!dist)\r\n\t\t\treturn;\r\n\r\n\t\tdiv.className = css.join(\" \");\r\n\t\tvar tan = (e_y - s_y)/(e_x - s_x),\r\n\t\t\tangle = Math.atan(tan);\r\n\r\n\t\tif(coordinateCircleQuarter(s_x, e_x, s_y, e_y) == 2){\r\n\t\t\tangle += Math.PI;\r\n\t\t}else if(coordinateCircleQuarter(s_x, e_x, s_y, e_y) == 3){\r\n\t\t\tangle -= Math.PI;\r\n\t\t}\r\n\r\n\r\n\r\n\t\tvar sin = Math.sin(angle),\r\n\t\t\tcos = Math.cos(angle),\r\n\t\t\ttop = Math.round(s_y),\r\n\t\t\tleft = Math.round(s_x);\r\n\r\n\r\n\t\tvar style = [\r\n\t\t\t\"-webkit-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-moz-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-ms-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-o-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"width:\" + Math.round(dist) + \"px\"\r\n\t\t];\r\n\r\n\t\tif(window.navigator.userAgent.indexOf(\"MSIE 8.0\") != -1){\r\n\t\t\t//ms-filter breaks styles in ie9, so add it only for 8th\r\n\t\t\tstyle.push(\"-ms-filter: \\\"\" + ieTransform(sin, cos) + \"\\\"\");\r\n\r\n\t\t\tvar shiftLeft = Math.abs(Math.round(s_x - e_x)),\r\n\t\t\t\tshiftTop = Math.abs(Math.round(e_y - s_y));\r\n\t\t\t//fix rotation axis\r\n\t\t\tswitch(coordinateCircleQuarter(s_x, e_x, s_y, e_y)){\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\ttop -= shiftTop;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tleft -= shiftLeft;\r\n\t\t\t\t\ttop -= shiftTop;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tleft -= shiftLeft;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tstyle.push(\"top:\" +  top + \"px\");\r\n\t\tstyle.push(\"left:\" +  left + \"px\");\r\n\r\n\t\tdiv.style.cssText = style.join(\";\");\r\n\t}\r\n\r\n\tfunction ieTransform(sin, cos){\r\n\t\treturn \"progid:DXImageTransform.Microsoft.Matrix(\"+\r\n\t\t\t\"M11 = \"+cos+\",\"+\r\n\t\t\t\"M12 = -\"+sin+\",\"+\r\n\t\t\t\"M21 = \"+sin+\",\"+\r\n\t\t\t\"M22 = \"+cos+\",\"+\r\n\t\t\t\"SizingMethod = 'auto expand'\"+\r\n\t\t\")\";\r\n\t}\r\n\tfunction coordinateCircleQuarter(sX, eX, sY, eY){\r\n\t\tif(eX >= sX){\r\n\t\t\tif(eY <= sY){\r\n\t\t\t\treturn 1;\r\n\t\t\t}else{\r\n\t\t\t\treturn 4;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(eY <= sY){\r\n\t\t\t\treturn 2;\r\n\t\t\t}else{\r\n\t\t\t\treturn 3;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\tfunction getDirectionLine(){\r\n\t\tif(!dnd._direction){\r\n\t\t\tdnd._direction = document.createElement(\"div\");\r\n\t\t\ttimeline.$task_links.appendChild(dnd._direction);\r\n\t\t}\r\n\t\treturn dnd._direction;\r\n\t}\r\n\tfunction removeDirectionLine(){\r\n\t\tif(dnd._direction){\r\n\t\t\tif (dnd._direction.parentNode)\t//the event line can be detached because of data refresh\r\n\t\t\t\tdnd._direction.parentNode.removeChild(dnd._direction);\r\n\r\n\t\t\tdnd._direction = null;\r\n\t\t}\r\n\t}\r\n};\r\n\r\nmodule.exports = {\r\n\tcreateLinkDND: function(){\r\n\t\treturn {\r\n\t\t\tinit: initLinksDND\r\n\t\t};\r\n\t}\r\n};\n\n/***/ }),\n/* 60 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar domHelpers = __webpack_require__(1);\r\n\r\nvar initializer = (function() {\r\n\treturn function (gantt) {\r\n\t\treturn {\r\n\r\n\t\t\tgetVerticalScrollbar: function(){\r\n\t\t\t\treturn gantt.$ui.getView(\"scrollVer\");\r\n\t\t\t},\r\n\t\t\tgetHorizontalScrollbar: function(){\r\n\t\t\t\treturn gantt.$ui.getView(\"scrollHor\");\r\n\t\t\t},\r\n\r\n\t\t\t_legacyGridResizerClass: function(layout){\r\n\t\t\t\tvar resizers = layout.getCellsByType(\"resizer\");\r\n\t\t\t\tfor(var i = 0; i < resizers.length; i++){\r\n\t\t\t\t\tvar r = resizers[i];\r\n\t\t\t\t\tvar gridResizer = false;\r\n\r\n\t\t\t\t\tvar prev = r.$parent.getPrevSibling(r.$id);\r\n\t\t\t\t\tif(prev && prev.$config && prev.$config.id === \"grid\"){\r\n\t\t\t\t\t\tgridResizer= true;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar next = r.$parent.getNextSibling(r.$id);\r\n\t\t\t\t\t\tif(next && next.$config && next.$config.id === \"grid\"){\r\n\t\t\t\t\t\t\tgridResizer= true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(gridResizer){\r\n\t\t\t\t\t\tr.$config.css = (r.$config.css ? r.$config.css + \" \" : \"\") + \"gantt_grid_resize_wrap\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tonCreated: function (layout) {\r\n\t\t\t\tvar first = true;\r\n\r\n\t\t\t\tthis._legacyGridResizerClass(layout);\r\n\r\n\t\t\t\tlayout.attachEvent(\"onBeforeResize\", function(){\r\n\t\t\t\t\tvar mainTimeline = gantt.$ui.getView(\"timeline\");\r\n\t\t\t\t\tif(mainTimeline)\r\n\t\t\t\t\t\tmainTimeline.$config.hidden = mainTimeline.$parent.$config.hidden = !gantt.config.show_chart;\r\n\r\n\t\t\t\t\tvar mainGrid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\tif(!mainGrid)\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tvar showGrid = gantt.config.show_grid;\r\n\t\t\t\t\tif(first) {\r\n\t\t\t\t\t\tvar colsWidth = mainGrid._getColsTotalWidth();\r\n\t\t\t\t\t\tif(colsWidth !== false){\r\n\t\t\t\t\t\t\tgantt.config.grid_width = colsWidth;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tshowGrid = showGrid && !!gantt.config.grid_width;\r\n\t\t\t\t\t\tgantt.config.show_grid = showGrid;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmainGrid.$config.hidden = mainGrid.$parent.$config.hidden = !showGrid;\r\n\r\n\t\t\t\t\tif(!mainGrid.$config.hidden){\r\n\t\t\t\t\t\t/* restrict grid width due to min_width, max_width, min_grid_column_width */\r\n\t\t\t\t\t\tvar grid_limits = mainGrid._getGridWidthLimits();\r\n\t\t\t\t\t\tif (grid_limits[0] && gantt.config.grid_width < grid_limits[0])\r\n\t\t\t\t\t\t\tgantt.config.grid_width = grid_limits[0];\r\n\t\t\t\t\t\tif (grid_limits[1] && gantt.config.grid_width > grid_limits[1])\r\n\t\t\t\t\t\t\tgantt.config.grid_width = grid_limits[1];\r\n\t\t\t\t\t\tif(mainTimeline && gantt.config.show_chart){\r\n\r\n\t\t\t\t\t\t\tmainGrid.$config.width = gantt.config.grid_width - 1;\r\n\t\t\t\t\t\t\tif(!first){\r\n\r\n\t\t\t\t\t\t\t\tif(mainTimeline && !domHelpers.isChildOf(mainTimeline.$task, layout.$view)){\r\n\t\t\t\t\t\t\t\t\t// timeline is being displayed after being not visible, reset grid with from full screen\r\n\t\t\t\t\t\t\t\t\tif(!mainGrid.$config.original_grid_width){\r\n\t\t\t\t\t\t\t\t\t\tvar skinSettings = gantt.skins[gantt.skin];\r\n\t\t\t\t\t\t\t\t\t\tif(skinSettings && skinSettings.config && skinSettings.config.grid_width){\r\n\t\t\t\t\t\t\t\t\t\t\tmainGrid.$config.original_grid_width =  skinSettings.config.grid_width;\r\n\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\tmainGrid.$config.original_grid_width = 0;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tgantt.config.grid_width = mainGrid.$config.original_grid_width;\r\n\t\t\t\t\t\t\t\t\tmainGrid.$parent.$config.width = gantt.config.grid_width;\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\tmainGrid.$parent._setContentSize(mainGrid.$config.width, mainGrid.$config.height);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tmainGrid.$parent.$config.width = gantt.config.grid_width;\r\n\t\t\t\t\t\t\t\tif(mainGrid.$parent.$config.group){\r\n\t\t\t\t\t\t\t\t\tgantt.$layout._syncCellSizes(mainGrid.$parent.$config.group, mainGrid.$parent.$config.width);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tif( mainTimeline && domHelpers.isChildOf(mainTimeline.$task, layout.$view)){\r\n\t\t\t\t\t\t\t\t// hiding timeline, remember grid with to restore it when timeline is displayed again\r\n\t\t\t\t\t\t\t\tmainGrid.$config.original_grid_width = gantt.config.grid_width;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(!first){\r\n\t\t\t\t\t\t\t\tmainGrid.$parent.$config.width = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfirst = false;\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgantt._getVerticalScrollbar = this.getVerticalScrollbar;\r\n\t\t\t\tgantt._getHorizontalScrollbar = this.getHorizontalScrollbar;\r\n\r\n\t\t\t\tvar vertical = this.getVerticalScrollbar();\r\n\t\t\t\tvar horizontal = this.getHorizontalScrollbar();\r\n\t\t\t\tif(vertical){\r\n\t\t\t\t\tvertical.attachEvent(\"onScroll\", function(oldPos, newPos, dir){\r\n\t\t\t\t\t\tvar scrollState = gantt.getScrollState();\r\n\t\t\t\t\t\tgantt.callEvent(\"onGanttScroll\", [scrollState.x, oldPos, scrollState.x, newPos]);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif(horizontal){\r\n\t\t\t\t\thorizontal.attachEvent(\"onScroll\", function(oldPos, newPos, dir){\r\n\t\t\t\t\t\tvar scrollState = gantt.getScrollState();\r\n\t\t\t\t\t\tgantt.callEvent(\"onGanttScroll\", [oldPos, scrollState.y, newPos, scrollState.y]);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlayout.attachEvent(\"onResize\", function(){\r\n\t\t\t\t\tif(vertical && !gantt.$scroll_ver){\r\n\t\t\t\t\t\tgantt.$scroll_ver = vertical.$scroll_ver;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(horizontal && !gantt.$scroll_hor){\r\n\t\t\t\t\t\tgantt.$scroll_hor = horizontal.$scroll_hor;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t},\r\n\r\n\t\t\t_findGridResizer: function(layout, grid){\r\n\t\t\t\tvar resizers = layout.getCellsByType(\"resizer\");\r\n\r\n\t\t\t\tvar gridFirst = true;\r\n\t\t\t\tvar gridResizer;\r\n\t\t\t\tfor(var i = 0; i < resizers.length; i++){\r\n\t\t\t\t\tvar res = resizers[i];\r\n\t\t\t\t\tres._getSiblings();\r\n\t\t\t\t\tvar prev = res._behind;\r\n\t\t\t\t\tvar next = res._front;\r\n\t\t\t\t\tif(prev && prev.$content === grid || (prev.isChild && prev.isChild(grid))){\r\n\t\t\t\t\t\tgridResizer = res;\r\n\t\t\t\t\t\tgridFirst = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}else if(next && next.$content === grid || (next.isChild && next.isChild(grid))){\r\n\t\t\t\t\t\tgridResizer = res;\r\n\t\t\t\t\t\tgridFirst = false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn {\r\n\t\t\t\t\tresizer: gridResizer,\r\n\t\t\t\t\tgridFirst: gridFirst\r\n\t\t\t\t};\r\n\t\t\t},\r\n\r\n\t\t\tonInitialized: function (layout) {\r\n\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\r\n\t\t\t\tvar resizeInfo = this._findGridResizer(layout, grid);\r\n\r\n\t\t\t\t// expose grid resize events\r\n\t\t\t\tif(resizeInfo.resizer){\r\n\t\t\t\t\tvar gridFirst = resizeInfo.gridFirst,\r\n\t\t\t\t\t\tnext = resizeInfo.resizer;\r\n\t\t\t\t\tvar initialWidth;\r\n\t\t\t\t\tnext.attachEvent(\"onResizeStart\", function(prevCellWidth, nextCellWidth){\r\n\r\n\t\t\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\t\tvar viewCell = grid ? grid.$parent : null;\r\n\t\t\t\t\t\tif(viewCell){\r\n\t\t\t\t\t\t\tvar limits = grid._getGridWidthLimits();\r\n\r\n\t\t\t\t\t\t\t// min grid width is defined by min widths of its columns, unless grid has horizontal scroll\r\n\t\t\t\t\t\t\tif(!grid.$config.scrollable)\r\n\t\t\t\t\t\t\t\tviewCell.$config.minWidth = limits[0];\r\n\r\n\t\t\t\t\t\t\tviewCell.$config.maxWidth = limits[1];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tinitialWidth = gridFirst ? prevCellWidth : nextCellWidth;\r\n\t\t\t\t\t\treturn gantt.callEvent(\"onGridResizeStart\", [initialWidth]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnext.attachEvent(\"onResize\", function(newBehindSize, newFrontSize){\r\n\t\t\t\t\t\tvar newSize = gridFirst ? newBehindSize : newFrontSize;\r\n\t\t\t\t\t\treturn gantt.callEvent(\"onGridResize\", [initialWidth, newSize]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnext.attachEvent(\"onResizeEnd\", function(oldBackSize, oldFrontSize, newBackSize, newFrontSize){\r\n\r\n\t\t\t\t\t\tvar oldSize = gridFirst ? oldBackSize : oldFrontSize;\r\n\t\t\t\t\t\tvar newSize = gridFirst ? newBackSize : newFrontSize;\r\n\t\t\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\t\tvar viewCell = grid ? grid.$parent : null;\r\n\t\t\t\t\t\tif(viewCell){\r\n\t\t\t\t\t\t\tviewCell.$config.minWidth = undefined;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar res = gantt.callEvent(\"onGridResizeEnd\", [oldSize, newSize]);\r\n\t\t\t\t\t\tif(res){\r\n\t\t\t\t\t\t\tgantt.config.grid_width = newSize;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn res;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (timeline) {\r\n\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n})();\r\n\r\nmodule.exports = initializer;\n\n/***/ }),\n/* 61 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\n\r\n};\n\n/***/ }),\n/* 62 */\n/***/ (function(module, exports) {\n\nfunction createLayoutFacade(){\r\n\r\n\tfunction getTimeline(gantt){\r\n\t\treturn gantt.$ui.getView(\"timeline\");\r\n\t}\r\n\r\n\tfunction getGrid(gantt){\r\n\t\treturn gantt.$ui.getView(\"grid\");\r\n\t}\r\n\r\n\tfunction getVerticalScrollbar(gantt){\r\n\t\treturn gantt.$ui.getView(\"scrollVer\");\r\n\t}\r\n\r\n\tfunction getHorizontalScrollbar(gantt){\r\n\t\treturn gantt.$ui.getView(\"scrollHor\");\r\n\t}\r\n\r\n\tvar DEFAULT_VALUE = \"DEFAULT_VALUE\";\r\n\r\n\tfunction tryCall(getView, method, args, fallback){\r\n\t\tvar view = getView(this);\r\n\t\tif (!(view && view.isVisible())) {\r\n\t\t\tif(fallback){\r\n\t\t\t\treturn fallback();\r\n\t\t\t}else{\r\n\t\t\t\treturn DEFAULT_VALUE;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn view[method].apply(view, args);\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tdateFromPos: function(x) {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"dateFromPos\", Array.prototype.slice.call(arguments));\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn this.getState().min_date;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tposFromDate: function(date) {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"posFromDate\", [date]);\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetRowTop: function(index) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar res = tryCall.call(self, getTimeline, \"getRowTop\", [index],\r\n\t\t\t\tfunction(){ return tryCall.call(self, getGrid, \"getRowTop\", [index]);}\r\n\t\t\t\t);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetTaskTop: function(id) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar res = tryCall.call(self, getTimeline, \"getItemTop\", [id],\r\n\t\t\t\tfunction(){ return tryCall.call(self, getGrid, \"getItemTop\", [id]);}\r\n\t\t\t);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\tgetTaskPosition: function(task, start_date, end_date) {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"getItemPosition\", [task, start_date, end_date]);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\tvar top = this.getTaskTop(task.id);\r\n\t\t\t\tvar height = this.getTaskHeight();\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tleft: 0,\r\n\t\t\t\t\ttop: top,\r\n\t\t\t\t\theight: height,\r\n\t\t\t\t\twidth: 0\r\n\t\t\t\t};\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetTaskHeight: function() {\r\n\t\t\tvar self = this;\r\n\t\t\tvar res = tryCall.call(self, getTimeline, \"getItemHeight\", [],\r\n\t\t\t\tfunction(){ return tryCall.call(self, getGrid, \"getItemHeight\", []);}\r\n\t\t\t);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\tcolumnIndexByDate: function(date) {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"columnIndexByDate\", [date]);\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\troundTaskDates: function() {\r\n\t\t\ttryCall.call(this, getTimeline, \"roundTaskDates\", []);\r\n\t\t},\r\n\r\n\t\tgetScale: function() {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"getScale\", []);\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn null;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetTaskNode: function(id) {\r\n\t\t\tvar timeline = getTimeline(this);\r\n\t\t\tif (!timeline || !timeline.isVisible()) {\r\n\t\t\t\treturn null;\r\n\t\t\t} else {\r\n\t\t\t\treturn timeline._taskRenderer.rendered[id];\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\tgetLinkNode: function(id) {\r\n\t\t\tvar timeline = getTimeline(this);\r\n\t\t\tif (!timeline.isVisible()) {\r\n\t\t\t\treturn null;\r\n\t\t\t} else {\r\n\t\t\t\treturn timeline._linkRenderer.rendered[id];\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tscrollTo: function(left, top){\r\n\t\t\tvar vertical = getVerticalScrollbar(this);\r\n\t\t\tvar horizontal = getHorizontalScrollbar(this);\r\n\r\n\t\t\tvar oldH = {position: 0},\r\n\t\t\t\toldV = {position: 0};\r\n\r\n\t\t\tif(vertical){\r\n\t\t\t\toldV = vertical.getScrollState();\r\n\t\t\t}\r\n\t\t\tif(horizontal){\r\n\t\t\t\toldH = horizontal.getScrollState();\r\n\t\t\t}\r\n\r\n\t\t\tif (horizontal && left*1 == left){\r\n\t\t\t\thorizontal.scroll(left);\r\n\t\t\t}\r\n\t\t\tif(vertical && top*1 == top){\r\n\t\t\t\tvertical.scroll(top);\r\n\t\t\t}\r\n\r\n\t\t\tvar newV = {position: 0},\r\n\t\t\t\tnewH = {position: 0};\r\n\t\t\tif(vertical){\r\n\t\t\t\tnewV = vertical.getScrollState();\r\n\t\t\t}\r\n\t\t\tif(horizontal){\r\n\t\t\t\tnewH = horizontal.getScrollState();\r\n\t\t\t}\r\n\r\n\t\t\tthis.callEvent(\"onGanttScroll\", [oldH.position, oldV.position, newH.position, newV.position]);\r\n\t\t},\r\n\r\n\t\tshowDate: function(date){\r\n\t\t\tvar date_x = this.posFromDate(date);\r\n\t\t\tvar scroll_to = Math.max(date_x - this.config.task_scroll_offset, 0);\r\n\t\t\tthis.scrollTo(scroll_to);\r\n\t\t},\r\n\t\tshowTask: function(id) {\r\n\t\t\tvar pos = this.getTaskPosition(this.getTask(id));\r\n\r\n\t\t\tvar left = Math.max(pos.left - this.config.task_scroll_offset, 0);\r\n\r\n\t\t\tvar dataHeight = this._scroll_state().y;\r\n\t\t\tvar top;\r\n\t\t\tif(!dataHeight){\r\n\t\t\t\ttop = pos.top;\r\n\t\t\t}else{\r\n\t\t\t\ttop = pos.top - (dataHeight - this.config.row_height)/2;\r\n\t\t\t}\r\n\r\n\t\t\tthis.scrollTo(left, top);\r\n\t\t},\r\n\t\t_scroll_state: function(){\r\n\t\t\tvar result = {\r\n\t\t\t\tx: false,\r\n\t\t\t\ty: false,\r\n\t\t\t\tx_pos: 0,\r\n\t\t\t\ty_pos: 0,\r\n\t\t\t\tscroll_size: this.config.scroll_size + 1,//1px for inner content\r\n\t\t\t\tx_inner: 0,\r\n\t\t\t\ty_inner: 0\r\n\t\t\t};\r\n\r\n\t\t\tvar scrollVer = getVerticalScrollbar(this),\r\n\t\t\t\tscrollHor = getHorizontalScrollbar(this);\r\n\t\t\tif(scrollHor){\r\n\t\t\t\tvar horState = scrollHor.getScrollState();\r\n\t\t\t\tif(horState.visible){\r\n\t\t\t\t\tresult.x = horState.size;\r\n\t\t\t\t\tresult.x_inner = horState.scrollSize;\r\n\t\t\t\t}\r\n\t\t\t\tresult.x_pos = horState.position || 0;\r\n\t\t\t}\r\n\r\n\t\t\tif(scrollVer){\r\n\t\t\t\tvar verState = scrollVer.getScrollState();\r\n\t\t\t\tif(verState.visible){\r\n\t\t\t\t\tresult.y = verState.size;\r\n\r\n\t\t\t\t\tresult.y_inner = verState.scrollSize;\r\n\t\t\t\t}\r\n\t\t\t\tresult.y_pos = verState.position || 0;\r\n\t\t\t}\r\n\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\tgetScrollState: function(){\r\n\t\t\tvar state = this._scroll_state();\r\n\t\t\treturn { x:state.x_pos, y:state.y_pos, inner_width:state.x, inner_height:state.y, width: state.x_inner, height: state.y_inner };\r\n\t\t}\r\n\r\n\t};\r\n\r\n}\r\n\r\nmodule.exports = createLayoutFacade;\n\n/***/ }),\n/* 63 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\nvar facadeFactory = __webpack_require__(64);\r\nvar calculateScaleRange = __webpack_require__(19);\r\nfunction initDataStores(gantt){\r\n\r\n\tvar facade = facadeFactory.create();\r\n\tutils.mixin(gantt, facade);\r\n\tvar tasksStore = gantt.createDatastore({\r\n\t\tname: \"task\",\r\n\t\ttype: \"treeDatastore\",\r\n\t\trootId: function(){return gantt.config.root_id;},\r\n\t\tinitItem: utils.bind(_init_task, gantt)\r\n\t});\r\n\r\n\tvar linksStore = gantt.createDatastore({\r\n\t\tname: \"link\",\r\n\t\tinitItem: utils.bind(_init_link, gantt)\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onBeforeRefreshAll\", function(){\r\n\r\n\t\tvar order = tasksStore.getVisibleItems();\r\n\r\n\t\tfor(var i=0; i < order.length; i++){\r\n\t\t\tvar item = order[i];\r\n\t\t\titem.$index = i;\r\n\t\t\tgantt.resetProjectDates(item);\r\n\t\t}\r\n\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onFilterItem\", function(id, task){\r\n\t\tvar min = null, max = null;\r\n\t\tif (gantt.config.start_date && gantt.config.end_date) {\r\n\t\t\tif (gantt._isAllowedUnscheduledTask(task)) return true;\r\n\t\t\tmin = gantt.config.start_date.valueOf();\r\n\t\t\tmax = gantt.config.end_date.valueOf();\r\n\r\n\t\t\tif (+task.start_date > max || +task.end_date < +min)\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onIdChange\", function(oldId, newId){\r\n\t\tgantt._update_flags(oldId, newId);\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onAfterUpdate\", function(id){\r\n\t\tgantt._update_parents(id);\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onAfterItemMove\", function(sid, parent, tindex){\r\n\t\tvar source = gantt.getTask(sid);\r\n\r\n\t\tif(this.getNextSibling(sid) !== null){\r\n\t\t\tsource.$drop_target = this.getNextSibling(sid);\r\n\t\t} else if(this.getPrevSibling(sid) !== null){\r\n\t\t\tsource.$drop_target = \"next:\" + this.getPrevSibling(sid);\r\n\t\t}else{\r\n\t\t\tsource.$drop_target = \"next:null\";\r\n\t\t}\r\n\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onStoreUpdated\", function(id, item, action){\r\n\t\tif(action == \"delete\"){\r\n\t\t\tgantt._update_flags(id, null);\r\n\t\t}\r\n\r\n\t\tvar state = gantt.$services.getService(\"state\");\r\n\t\tif(state.getState(\"batchUpdate\").batch_update){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(gantt.config.fit_tasks && action !== \"paint\"){\r\n\t\t\tvar oldState = gantt.getState();\r\n\t\t\tcalculateScaleRange(gantt);\r\n\t\t\tvar newState = gantt.getState();\r\n\r\n\t\t\t//this._init_tasks_range();\r\n\t\t\tif (+oldState.min_date != +newState.min_date || +oldState.max_date != +newState.max_date) {\r\n\t\t\t\tgantt.render();\r\n\r\n\t\t\t\tgantt.callEvent(\"onScaleAdjusted\", []);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif(action == \"add\" || action == \"move\" || action == \"delete\"){\r\n\t\t\tgantt.$layout.resize();\r\n\t\t}else if(!id){\r\n\t\t\tlinksStore.refresh();\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tlinksStore.attachEvent(\"onAfterAdd\", function(id, link){\r\n\t\tsync_link(link);\r\n\t});\r\n\tlinksStore.attachEvent(\"onAfterUpdate\", function(id, link){\r\n\t\tsync_links();\r\n\t});\r\n\tlinksStore.attachEvent(\"onAfterDelete\", function(id, link){\r\n\t\tsync_link_delete(link);\r\n\t});\r\n\tlinksStore.attachEvent(\"onBeforeIdChange\", function(oldId, newId){\r\n\t\tsync_link_delete(gantt.mixin({id:oldId}, gantt.$data.linksStore.getItem(newId)));\r\n\t\tsync_link(gantt.$data.linksStore.getItem(newId));\r\n\t});\r\n\r\n\tlinksStore.attachEvent(\"onFilterItem\", function(id, link){\r\n\t\tif (!gantt.config.show_links) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (!(gantt.isTaskVisible(link.source) && gantt.isTaskVisible(link.target)) ||\r\n\t\t\tgantt._isAllowedUnscheduledTask(gantt.getTask(link.source)) || gantt._isAllowedUnscheduledTask(gantt.getTask(link.target)))\r\n\t\t\treturn false;\r\n\r\n\t\treturn gantt.callEvent(\"onBeforeLinkDisplay\", [id, link]);\r\n\t});\r\n\r\n\r\n\t(function(){\r\n\t\t// delete all connected links after task is deleted\r\n\t\tvar treeHelper = __webpack_require__(20);\r\n\t\tvar deletedLinks = {};\r\n\r\n\t\tgantt.attachEvent(\"onBeforeTaskDelete\", function(id, item){\r\n \t\t\tdeletedLinks[id] = treeHelper.getSubtreeLinks(gantt, id);\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onAfterTaskDelete\", function(id, item) {\r\n\t\t\tif(deletedLinks[id]){\r\n\t\t\t\tgantt.$data.linksStore.silent(function(){\r\n\t\t\t\t\tfor(var i in deletedLinks[id]){\r\n\t\t\t\t\t\tgantt.$data.linksStore.removeItem(i);\r\n\t\t\t\t\t\tsync_link_delete(deletedLinks[id][i]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdeletedLinks[id] = null;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t})();\r\n\r\n\tgantt.attachEvent(\"onAfterLinkDelete\", function(id, link) {\r\n\t\tgantt.refreshTask(link.source);\r\n\t\tgantt.refreshTask(link.target);\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onParse\", sync_links);\r\n\r\n\tmapEvents({\r\n\t\tsource: linksStore,\r\n\t\ttarget: gantt,\r\n\t\tevents:{\r\n\t\t\t\"onItemLoading\":\"onLinkLoading\",\r\n\t\t\t\"onBeforeAdd\":\"onBeforeLinkAdd\",\r\n\t\t\t\"onAfterAdd\":\"onAfterLinkAdd\",\r\n\t\t\t\"onBeforeUpdate\":\"onBeforeLinkUpdate\",\r\n\t\t\t\"onAfterUpdate\":\"onAfterLinkUpdate\",\r\n\t\t\t\"onBeforeDelete\":\"onBeforeLinkDelete\",\r\n\t\t\t\"onAfterDelete\":\"onAfterLinkDelete\",\r\n\t\t\t\"onIdChange\":\"onLinkIdChange\"\r\n\t\t}\r\n\t});\r\n\r\n\tmapEvents({\r\n\t\tsource: tasksStore,\r\n\t\ttarget: gantt,\r\n\t\tevents:{\r\n\t\t\t\"onItemLoading\":\"onTaskLoading\",\r\n\t\t\t\"onBeforeAdd\":\"onBeforeTaskAdd\",\r\n\t\t\t\"onAfterAdd\":\"onAfterTaskAdd\",\r\n\t\t\t\"onBeforeUpdate\":\"onBeforeTaskUpdate\",\r\n\t\t\t\"onAfterUpdate\":\"onAfterTaskUpdate\",\r\n\t\t\t\"onBeforeDelete\":\"onBeforeTaskDelete\",\r\n\t\t\t\"onAfterDelete\":\"onAfterTaskDelete\",\r\n\t\t\t\"onIdChange\":\"onTaskIdChange\",\r\n\t\t\t\"onBeforeItemMove\":\"onBeforeTaskMove\",\r\n\t\t\t\"onAfterItemMove\":\"onAfterTaskMove\",\r\n\t\t\t\"onFilterItem\":\"onBeforeTaskDisplay\",\r\n\t\t\t\"onItemOpen\":\"onTaskOpened\",\r\n\t\t\t\"onItemClose\":\"onTaskClosed\",\r\n\t\t\t\"onBeforeSelect\":\"onBeforeTaskSelected\",\r\n\t\t\t\"onAfterSelect\":\"onTaskSelected\",\r\n\t\t\t\"onAfterUnselect\":\"onTaskUnselected\"\r\n\t\t}\r\n\t});\r\n\r\n\tgantt.$data = {\r\n\t\ttasksStore: tasksStore,\r\n\t\tlinksStore: linksStore\r\n\t};\r\n\r\n\tfunction sync_link(link){\r\n\t\tif(gantt.isTaskExists(link.source)){\r\n\t\t\tvar sourceTask = gantt.getTask(link.source);\r\n\t\t\tsourceTask.$source = sourceTask.$source || [];\r\n\t\t\tsourceTask.$source.push(link.id);\r\n\t\t}\r\n\t\tif(gantt.isTaskExists(link.target)){\r\n\t\t\tvar targetTask = gantt.getTask(link.target);\r\n\t\t\ttargetTask.$target = targetTask.$target || [];\r\n\t\t\ttargetTask.$target.push(link.id);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction sync_link_delete(link){\r\n\t\tif(gantt.isTaskExists(link.source)){\r\n\t\t\tvar sourceTask = gantt.getTask(link.source);\r\n\t\t\tfor(var i = 0; i < sourceTask.$source.length; i++){\r\n\t\t\t\tif(sourceTask.$source[i] == link.id){\r\n\t\t\t\t\tsourceTask.$source.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(gantt.isTaskExists(link.target)){\r\n\t\t\tvar targetTask = gantt.getTask(link.target);\r\n\t\t\tfor(var i = 0; i < targetTask.$target.length; i++){\r\n\t\t\t\tif(targetTask.$target[i] == link.id){\r\n\t\t\t\t\ttargetTask.$target.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction sync_links() {\r\n\t\tvar task = null;\r\n\t\tvar tasks = gantt.$data.tasksStore.getItems();\r\n\r\n\t\tfor(var i = 0, len = tasks.length; i < len; i++){\r\n\t\t\ttask = tasks[i];\r\n\t\t\ttask.$source = [];\r\n\t\t\ttask.$target = [];\r\n\t\t}\r\n\r\n\t\tvar links = gantt.$data.linksStore.getItems();\r\n\t\tfor (var i = 0, len = links.length; i < len; i++) {\r\n\r\n\t\t\tvar link = links[i];\r\n\t\t\tsync_link(link);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction mapEvents(conf){\r\n\t\tvar mapFrom = conf.source;\r\n\t\tvar mapTo = conf.target;\r\n\t\tfor(var i in conf.events){\r\n\t\t\t(function(sourceEvent, targetEvent){\r\n\t\t\t\tmapFrom.attachEvent(sourceEvent, function(){\r\n\t\t\t\t\treturn mapTo.callEvent(targetEvent, Array.prototype.slice.call(arguments));\r\n\t\t\t\t}, targetEvent);\r\n\t\t\t})(i, conf.events[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _init_task(task) {\r\n\t\tif (!this.defined(task.id))\r\n\t\t\ttask.id = this.uid();\r\n\r\n\t\tif (task.start_date)\r\n\t\t\ttask.start_date = gantt.date.parseDate(task.start_date, \"xml_date\");\r\n\t\tif (task.end_date)\r\n\t\t\ttask.end_date = gantt.date.parseDate(task.end_date, \"xml_date\");\r\n\r\n\r\n\t\tvar duration = null;\r\n\t\tif (task.duration || task.duration === 0) {\r\n\t\t\ttask.duration = duration = task.duration * 1;\r\n\t\t}\r\n\r\n\t\tif (duration) {\r\n\t\t\tif (task.start_date && !task.end_date) {\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t} else if (!task.start_date && task.end_date) {\r\n\t\t\t\ttask.start_date = this.calculateEndDate({\r\n\t\t\t\t\tstart_date: task.end_date,\r\n\t\t\t\t\tduration: -task.duration,\r\n\t\t\t\t\ttask: task\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tif (this._isAllowedUnscheduledTask(task)) {\r\n\t\t\tthis._set_default_task_timing(task);\r\n\t\t}\r\n\t\tthis._init_task_timing(task);\r\n\t\tif (task.start_date && task.end_date)\r\n\t\t\tthis.correctTaskWorkTime(task);\r\n\r\n\t\ttask.$source = [];\r\n\t\ttask.$target = [];\r\n\t\tif (task.parent === undefined) {\r\n\t\t\tthis.setParent(task, this.config.root_id);\r\n\t\t}\r\n\r\n\t\treturn task;\r\n\t}\r\n\r\n\tfunction _init_link(link) {\r\n\t\tif (!this.defined(link.id))\r\n\t\t\tlink.id = this.uid();\r\n\t\treturn link;\r\n\t}\r\n}\r\n\r\n\r\nmodule.exports = initDataStores;\r\n\n\n/***/ }),\n/* 64 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\nvar createTasksFacade = __webpack_require__(65),\r\n\tcreateLinksFacade = __webpack_require__(66),\r\n\tDataStore = __webpack_require__(16),\r\n\tTreeDataStore = __webpack_require__(18),\r\n\tcreateDatastoreSelect = __webpack_require__(67);\r\nvar datastoreRender = __webpack_require__(68);\r\n\r\nfunction getDatastores(){\r\n\tvar storeNames = this.$services.getService(\"datastores\");\r\n\tvar res = [];\r\n\tfor(var i = 0; i < storeNames.length; i++){\r\n\t\tres.push(this.getDatastore(storeNames[i]));\r\n\t}\r\n\treturn res;\r\n}\r\n\r\nvar createDatastoreFacade = function(){\r\n\treturn {\r\n\tcreateDatastore: function(config){\r\n\r\n\t\tvar $StoreType = (config.type || \"\").toLowerCase() == \"treedatastore\" ? TreeDataStore : DataStore;\r\n\r\n\t\tif(config){\r\n\t\t\tvar self = this;\r\n\t\t\tconfig.openInitially = function(){ return self.config.open_tree_initially; };\r\n\t\t}\r\n\r\n\t\tvar store = new $StoreType(config);\r\n\t\tthis.mixin(store, createDatastoreSelect(store));\r\n\r\n\t\tif(config.name){\r\n\r\n\t\t\tthis.$services.setService(\"datastore:\" + config.name, function(){return store;});\r\n\t\t\tvar storeList = this.$services.getService(\"datastores\");\r\n\t\t\tif(!storeList){\r\n\t\t\t\tstoreList = [];\r\n\t\t\t\tthis.$services.setService(\"datastores\", function(){return storeList;});\r\n\t\t\t}\r\n\t\t\tstoreList.push(config.name);\r\n\r\n\t\t\tdatastoreRender.bindDataStore(config.name, this);\r\n\t\t}\r\n\r\n\t\treturn store;\r\n\t},\r\n\tgetDatastore: function(name){\r\n\t\treturn this.$services.getService(\"datastore:\" + name);\r\n\t},\r\n\r\n\trefreshData: function () {\r\n\t\tvar scrollState = this.getScrollState();\r\n\t\tthis.callEvent(\"onBeforeDataRender\", []);\r\n\r\n\t\tvar stores = getDatastores.call(this);\r\n\t\tfor(var i = 0; i < stores.length; i++){\r\n\t\t\tstores[i].refresh();\r\n\t\t}\r\n\r\n\t\tif(scrollState.x || scrollState.y){\r\n\t\t\tthis.scrollTo(scrollState.x, scrollState.y);\r\n\t\t}\r\n\t\tthis.callEvent(\"onDataRender\", []);\r\n\t},\r\n\r\n\tisChildOf: function(childId, parentId){\r\n\t\treturn this.$data.tasksStore.isChildOf(childId, parentId);\r\n\t},\r\n\r\n\trefreshTask: function (taskId, refresh_links) {\r\n\t\tvar task = this.getTask(taskId);\r\n\t\tif (task && this.isTaskVisible(taskId)) {\r\n\r\n\t\t\tthis.$data.tasksStore.refresh(taskId, !!this.getState().drag_id);// do quick refresh during drag and drop\r\n\r\n\t\t\tif (refresh_links !== undefined && !refresh_links)\r\n\t\t\t\treturn;\r\n\t\t\tfor (var i = 0; i < task.$source.length; i++) {\r\n\t\t\t\tthis.refreshLink(task.$source[i]);\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < task.$target.length; i++) {\r\n\t\t\t\tthis.refreshLink(task.$target[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t},\r\n\trefreshLink: function (linkId) {\r\n\t\tthis.$data.linksStore.refresh(linkId, !!this.getState().drag_id);// do quick refresh during drag and drop\r\n\t},\r\n\r\n\tsilent: function(code){\r\n\t\tvar gantt = this;\r\n\t\tgantt.$data.tasksStore.silent(function(){\r\n\t\t\tgantt.$data.linksStore.silent(function(){\r\n\t\t\t\tcode();\r\n\t\t\t});\r\n\t\t});\r\n\t},\r\n\r\n\tclearAll: function () {\r\n\t\tvar stores = getDatastores.call(this);\r\n\t\tfor(var i = 0; i < stores.length; i++){\r\n\t\t\tstores[i].clearAll();\r\n\t\t}\r\n\r\n\t\tthis._update_flags();\r\n\t\tthis.userdata = {};\r\n\t\tthis.callEvent(\"onClear\", []);\r\n\t\tthis.render();\r\n\t},\r\n\t_clear_data: function () {\r\n\t\tthis.$data.tasksStore.clearAll();\r\n\t\tthis.$data.linksStore.clearAll();\r\n\t\tthis._update_flags();\r\n\t\tthis.userdata = {};\r\n\t},\r\n\r\n\tselectTask: function(id){\r\n\t\tvar store = this.$data.tasksStore;\r\n\t\tif(!this.config.select_task)\r\n\t\t\treturn false;\r\n\t\tif (id){\r\n\r\n\t\t\tstore.select(id);\r\n\t\t}\r\n\t\treturn store.getSelectedId();\r\n\t},\r\n\tunselectTask: function(id){\r\n\t\tvar store = this.$data.tasksStore;\r\n\t\tstore.unselect(id);\r\n\t},\r\n\tgetSelectedId: function() {\r\n\t\treturn this.$data.tasksStore.getSelectedId();\r\n\t}\r\n};\r\n};\r\n\r\nfunction createFacade(){\r\n\tvar res = utils.mixin({}, createDatastoreFacade());\r\n\tutils.mixin(res, createTasksFacade());\r\n\tutils.mixin(res, createLinksFacade());\r\n\treturn res;\r\n}\r\n\r\n\r\n\r\n\r\nmodule.exports = {create: createFacade};\n\n/***/ }),\n/* 65 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\n\r\nvar createTasksDatastoreFacade = function(){\r\n\treturn {\r\n\tgetTask: function (id) {\r\n\t\tthis.assert(id, \"Invalid argument for gantt.getTask\");\r\n\t\tvar task = this.$data.tasksStore.getItem(id);\r\n\t\tthis.assert(task, \"Task not found id=\" + id);\r\n\t\treturn task;\r\n\t},\r\n\tgetTaskByTime: function (from, to) {\r\n\t\tvar p = this.$data.tasksStore.getItems();\r\n\r\n\t\tvar res = [];\r\n\r\n\t\tif (!(from || to)) {\r\n\t\t\tres = p;\r\n\t\t} else {\r\n\t\t\tfrom = +from || -Infinity;\r\n\t\t\tto = +to || Infinity;\r\n\t\t\tfor (var t = 0; t < p.length; t++){\r\n\t\t\t\tvar task = p[t];\r\n\t\t\t\tif (+task.start_date < to && +task.end_date > from)\r\n\t\t\t\t\tres.push(task);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\tisTaskExists: function (id) {\r\n\t\treturn this.$data.tasksStore.exists(id);\r\n\t},\r\n\tupdateTask: function (id, item) {\r\n\t\tif (!utils.defined(item)) item = this.getTask(id);\r\n\t\tthis.$data.tasksStore.updateItem(id, item);\r\n\t\tthis.refreshTask(id);\r\n\t},\r\n\taddTask: function (item, parent, index) {\r\n\t\tif (!utils.defined(item.id))\r\n\t\t\titem.id = utils.uid();\r\n\r\n\t\tif (!utils.defined(parent)) parent = this.getParent(item) || 0;\r\n\t\tif (!this.isTaskExists(parent)) parent = 0;\r\n\t\tthis.setParent(item, parent);\r\n\r\n\t\treturn this.$data.tasksStore.addItem(item, index, parent);\r\n\t},\r\n\tdeleteTask: function (id) {\r\n\t\treturn this.$data.tasksStore.removeItem(id);\r\n\t},\r\n\tgetTaskCount: function () {\r\n\t\treturn this.$data.tasksStore.count();\r\n\t},\r\n\tgetVisibleTaskCount: function () {\r\n\t\treturn this.$data.tasksStore.countVisible();\r\n\t},\r\n\tgetTaskIndex: function (id) {\r\n\t\treturn this.$data.tasksStore.getBranchIndex(id);\r\n\t},\r\n\tgetGlobalTaskIndex: function (id) {\r\n\t\tthis.assert(id, \"Invalid argument\");\r\n\t\treturn this.$data.tasksStore.getIndexById(id);\r\n\t},\r\n\teachTask: function (code, parent, master) {\r\n\t\treturn this.$data.tasksStore.eachItem(utils.bind(code, master||this), parent);\r\n\t},\r\n\teachParent: function (callback, startTask, master) {\r\n\t\treturn this.$data.tasksStore.eachParent(utils.bind(callback, master || this), startTask);\r\n\t},\r\n\tchangeTaskId: function (oldid, newid) {\r\n\t\tthis.$data.tasksStore.changeId(oldid, newid);\r\n\t\tvar task = this.$data.tasksStore.getItem(newid);\r\n\r\n\t\tvar links = [];\r\n\r\n\t\tif (task.$source) {\r\n\t\t\tlinks = links.concat(task.$source);\r\n\t\t}\r\n\t\tif (task.$target) {\r\n\t\t\tlinks = links.concat(task.$target);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\tvar link = this.getLink(links[i]);\r\n\t\t\tif (link.source == oldid) {\r\n\t\t\t\tlink.source = newid;\r\n\t\t\t}\r\n\t\t\tif (link.target == oldid) {\r\n\t\t\t\tlink.target = newid;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcalculateTaskLevel: function (item) {\r\n\t\treturn this.$data.tasksStore.calculateItemLevel(item);\r\n\t},\r\n\tgetNext: function (id) {\r\n\t\treturn this.$data.tasksStore.getNext(id);\r\n\t},\r\n\tgetPrev: function (id) {\r\n\t\treturn this.$data.tasksStore.getPrev(id);\r\n\t},\r\n\tgetParent: function (id) {\r\n\t\treturn this.$data.tasksStore.getParent(id);\r\n\t},\r\n\tsetParent: function (task, new_pid, silent) {\r\n\t\treturn this.$data.tasksStore.setParent(task, new_pid, silent);\r\n\t},\r\n\tgetSiblings: function (id) {\r\n\t\treturn this.$data.tasksStore.getSiblings(id).slice();\r\n\t},\r\n\tgetNextSibling: function (id) {\r\n\t\treturn this.$data.tasksStore.getNextSibling(id);\r\n\t},\r\n\tgetPrevSibling: function (id) {\r\n\t\treturn this.$data.tasksStore.getPrevSibling(id);\r\n\t},\r\n\tgetTaskByIndex: function(index){\r\n\t\tvar id = this.$data.tasksStore.getIdByIndex(index);\r\n\t\tif(this.isTaskExists(id)){\r\n\t\t\treturn this.getTask(id);\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\tgetChildren: function (id) {\r\n\t\tif(!this.hasChild(id)){\r\n\t\t\treturn [];\r\n\t\t}else{\r\n\t\t\treturn this.$data.tasksStore.getChildren(id).slice();\r\n\t\t}\r\n\t},\r\n\thasChild: function (id) {\r\n\t\treturn this.$data.tasksStore.hasChild(id);\r\n\t},\r\n\topen: function (id) {\r\n\t\tthis.$data.tasksStore.open(id);\r\n\t},\r\n\tclose: function (id) {\r\n\t\tthis.$data.tasksStore.close(id);\r\n\t},\r\n\tmoveTask: function (sid, tindex, parent) {\r\n\t\tthis.$data.tasksStore.move.apply(this.$data.tasksStore, arguments);\r\n\t},\r\n\tsort: function(field, desc, parent, silent) {\r\n\t\tvar render = !silent;//4th argument to cancel redraw after sorting\r\n\t\tthis.$data.tasksStore.sort(field, desc, parent);\r\n\t\tif (render) {\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t}\r\n};\r\n};\r\n\r\nmodule.exports = createTasksDatastoreFacade;\r\n\r\n\r\n\n\n/***/ }),\n/* 66 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\n\r\n\r\nvar createLinksStoreFacade = function(){\r\n\treturn {\r\n\tgetLinkCount: function () {\r\n\t\treturn this.$data.linksStore.count();\r\n\t},\r\n\r\n\tgetLink : function (id) {\r\n\t\treturn this.$data.linksStore.getItem(id);\r\n\t},\r\n\r\n\tgetLinks : function () {\r\n\t\treturn this.$data.linksStore.getItems();\r\n\t},\r\n\r\n\tisLinkExists : function (id) {\r\n\t\treturn this.$data.linksStore.exists(id);\r\n\t},\r\n\r\n\taddLink : function (link) {\r\n\t\treturn this.$data.linksStore.addItem(link);\r\n\t},\r\n\r\n\tupdateLink : function (id, data) {\r\n\t\tif (!utils.defined(data))\r\n\t\t\tdata = this.getLink(id);\r\n\t\tthis.$data.linksStore.updateItem(id, data);\r\n\t},\r\n\r\n\tdeleteLink : function (id) {\r\n\t\treturn this.$data.linksStore.removeItem(id);\r\n\t},\r\n\r\n\tchangeLinkId : function (oldid, newid) {\r\n\t\treturn this.$data.linksStore.changeId(oldid, newid);\r\n\t}\r\n};\r\n};\r\n\r\nmodule.exports = createLinksStoreFacade;\n\n/***/ }),\n/* 67 */\n/***/ (function(module, exports) {\n\n\r\nfunction createDataStoreSelectMixin(store){\r\n\tvar selectedId = null;\r\n\r\n\tvar deleteItem = store._removeItemInner;\r\n\tstore._removeItemInner = function(id){\r\n\t\tif(selectedId == id){\r\n\t\t\tselectedId = null;\r\n\t\t}\r\n\t\treturn deleteItem.apply(this, arguments);\r\n\t};\r\n\r\n\r\n\tstore.attachEvent(\"onIdChange\", function(oldId, newId) {\r\n\t\tif (store.getSelectedId() == oldId) {\r\n\t\t\tstore.silent(function () {\r\n\t\t\t\tstore.unselect(oldId);\r\n\t\t\t\tstore.select(newId);\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\treturn {\r\n\t\tselect: function(id){\r\n\t\t\tif (id){\r\n\r\n\t\t\t\tif(selectedId == id)\r\n\t\t\t\t\treturn selectedId;\r\n\r\n\t\t\t\tif(!this._skip_refresh) {\r\n\t\t\t\t\tif (!this.callEvent(\"onBeforeSelect\", [id])) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.unselect();\r\n\r\n\t\t\t\tselectedId = id;\r\n\r\n\t\t\t\tif(!this._skip_refresh) {\r\n\t\t\t\t\tthis.refresh(id);\r\n\t\t\t\t\tthis.callEvent(\"onAfterSelect\", [id]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn selectedId;\r\n\t\t},\r\n\t\tgetSelectedId: function(){\r\n\t\t\treturn selectedId;\r\n\t\t},\r\n\t\tunselect: function(id){\r\n\t\t\tvar id = id || selectedId;\r\n\t\t\tif(!id)\r\n\t\t\t\treturn;\r\n\t\t\tselectedId = null;\r\n\t\t\tif(!this._skip_refresh){\r\n\t\t\t\tthis.refresh(id);\r\n\t\t\t\tthis.callEvent(\"onAfterUnselect\", [id]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = createDataStoreSelectMixin;\n\n/***/ }),\n/* 68 */\n/***/ (function(module, exports) {\n\nvar storeRenderCreator = function(name, gantt){\r\n\tvar store = gantt.getDatastore(name);\r\n\r\n\tvar itemRepainter = {\r\n\t\trenderItem: function(id, renderer){\r\n\r\n\t\t\tvar renders = renderer.getLayers();\r\n\r\n\t\t\tvar item = store.getItem(id);\r\n\t\t\tif(item && store.isVisible(id)) {\r\n\t\t\t\tfor (var i = 0; i < renders.length; i++)\r\n\t\t\t\t\trenders[i].render_item(item);\r\n\t\t\t}\r\n\t\t},\r\n\t\trenderItems: function(renderer){\r\n\t\t\tvar renderers = renderer.getLayers();\r\n\t\t\tfor (var i = 0; i < renderers.length; i++) {\r\n\t\t\t\trenderers[i].clear();\r\n\t\t\t}\r\n\r\n\t\t\tvar data = store.getVisibleItems();\r\n\r\n\t\t\tfor (var i = 0; i < renderers.length; i++) {\r\n\t\t\t\trenderers[i].render_items(data);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tfunction skipRepaint(gantt){\r\n\t\tvar state = gantt.$services.getService(\"state\");\r\n\t\tif(state.getState(\"batchUpdate\").batch_update){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tstore.attachEvent(\"onStoreUpdated\", function(id, item, action){\r\n\t\tif(skipRepaint(gantt)){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar renderer = gantt.$services.getService(\"layers\").getDataRender(name);\r\n\r\n\t\tif(renderer){\r\n\t\t\tif(!id || action == \"move\" || action == \"delete\"){\r\n\t\t\t\tstore.callEvent(\"onBeforeRefreshAll\", []);\r\n\t\t\t\titemRepainter.renderItems(renderer);\r\n\t\t\t\tstore.callEvent(\"onAfterRefreshAll\", []);\r\n\t\t\t}else{\r\n\t\t\t\tstore.callEvent(\"onBeforeRefreshItem\", [item.id]);\r\n\t\t\t\titemRepainter.renderItem(item.id, renderer);\r\n\t\t\t\tstore.callEvent(\"onAfterRefreshItem\", [item.id]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t// TODO: probably can be done more in a more efficient way\r\n\tstore.attachEvent(\"onItemOpen\", function(){\r\n\t\tgantt.render();\r\n\t});\r\n\r\n\tstore.attachEvent(\"onItemClose\", function(){\r\n\t\tgantt.render();\r\n\t});\r\n\r\n\tfunction refreshId(renders, oldId, newId, item) {\r\n\t\tfor (var i = 0; i < renders.length; i++) {\r\n\t\t\trenders[i].change_id(oldId, newId);\r\n\t\t}\r\n\t}\r\n\r\n\tstore.attachEvent(\"onIdChange\", function(oldId, newId){\r\n\r\n\t\t// in case of linked datastores (tasks <-> links), id change should recalculate something in linked datastore before any repaint\r\n\t\t// use onBeforeIdChange for this hook.\r\n\t\t// TODO: use something more reasonable instead\r\n\t\tstore.callEvent(\"onBeforeIdChange\", [oldId, newId]);\r\n\r\n\t\tif(skipRepaint(gantt)){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar renderer = gantt.$services.getService(\"layers\").getDataRender(name);\r\n\t\trefreshId(renderer.getLayers(), oldId, newId, store.getItem(newId));\r\n\t\titemRepainter.renderItem(newId, renderer);\r\n\t});\r\n\r\n};\r\n\r\nmodule.exports = {\r\n\tbindDataStore: storeRenderCreator\r\n};\n\n/***/ }),\n/* 69 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar liveUpdateHooks = __webpack_require__(70);\r\nvar dateHelper = __webpack_require__(4);\r\nvar helpers = __webpack_require__(7);\r\n\r\nfunction addDataProcessorHooks(gantt) {\r\n\r\n\tgantt.dataProcessor = __webpack_require__(71);\r\n\r\n\tfunction detachDataProcessor(gantt, dp){\r\n\t\tdelete dp.$gantt;\r\n\t\tdelete dp.setGanttMode;\r\n\t\tdelete dp._getRowData;\r\n\t\tdp.afterUpdate = oldAfterUpdate;\r\n\r\n\t\tdelete gantt._dp;\r\n\t\tdelete gantt._change_id;\r\n\t\tdelete gantt._row_style;\r\n\t\tdelete gantt._delete_task;\r\n\t\tdelete gantt._sendTaskOrder;\r\n\r\n\t\thelpers.forEach(dataProcessorHandlers, function(e){\r\n\t\t\tgantt.detachEvent(e);\r\n\t\t});\r\n\t\tdataProcessorHandlers = [];\r\n\t}\r\n\r\n\tvar oldAfterUpdate;\r\n\tfunction extendDataProcessor(gantt, dp){\r\n\t\tdp.setGanttMode = function(mode){\r\n\t\t\tvar modes = dp.modes || {};\r\n\t\t\tif(dp._ganttMode){\r\n\t\t\t\tmodes[dp._ganttMode] = {\r\n\t\t\t\t\t_in_progress : dp._in_progress,\r\n\t\t\t\t\t_invalid : dp._invalid,\r\n\t\t\t\t\tupdatedRows : dp.updatedRows\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tvar newState = modes[mode];\r\n\t\t\tif(!newState){\r\n\t\t\t\tnewState = modes[mode] = {\r\n\t\t\t\t\t_in_progress : {},\r\n\t\t\t\t\t_invalid : {},\r\n\t\t\t\t\tupdatedRows : []\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tdp._in_progress = newState._in_progress;\r\n\t\t\tdp._invalid = newState._invalid;\r\n\t\t\tdp.updatedRows = newState.updatedRows;\r\n\t\t\tdp.modes = modes;\r\n\t\t\tdp._ganttMode = mode;\r\n\t\t};\r\n\r\n\t\toldAfterUpdate = dp.afterUpdate;\r\n\t\tdp.afterUpdate = function(){\r\n\t\t\tvar xml;\r\n\t\t\tif(arguments.length == 3){\r\n\t\t\t\txml = arguments[1];\r\n\t\t\t}else{\r\n\t\t\t\t// old dataprocessor\r\n\t\t\t\txml = arguments[4];\r\n\t\t\t}\r\n\t\t\tvar mode = dp._ganttMode;\r\n\t\t\tvar reqUrl = xml.filePath;\r\n\r\n\t\t\tif(this._tMode != \"REST\"){\r\n\t\t\t\tif (reqUrl.indexOf(\"gantt_mode=links\") != -1) {\r\n\t\t\t\t\tmode = \"links\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tmode = \"tasks\";\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(reqUrl.indexOf(\"/link\") > reqUrl.indexOf(\"/task\")){\r\n\t\t\t\t\tmode = \"links\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tmode = \"tasks\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdp.setGanttMode(mode);\r\n\r\n\t\t\tvar res = oldAfterUpdate.apply(dp, arguments);\r\n\t\t\tdp.setGanttMode(mode);\r\n\t\t\treturn res;\r\n\t\t};\r\n\r\n\t\tdp._getRowData=gantt.bind(function(id, pref) {\r\n\t\t\tvar task;\r\n\t\t\tif (dp._ganttMode == \"tasks\")\r\n\t\t\t\ttask = this.isTaskExists(id) ? this.getTask(id) : { id: id };\r\n\t\t\telse\r\n\t\t\t\ttask = this.isLinkExists(id) ? this.getLink(id) : { id: id };\r\n\r\n\t\t\ttask = gantt.copy(task);\r\n\r\n\t\t\tvar data = {};\r\n\t\t\tfor (var key in task) {\r\n\t\t\t\tif (key.substr(0, 1) == \"$\") continue;\r\n\t\t\t\tvar value = task[key];\r\n\t\t\t\tif (dateHelper.isDate(value))\r\n\t\t\t\t\tdata[key] = this.templates.xml_format(value);\r\n\t\t\t\telse if(value === null)\r\n\t\t\t\t\tdata[key] = \"\";\r\n\t\t\t\telse\r\n\t\t\t\t\tdata[key] = value;\r\n\t\t\t}\r\n\r\n\t\t\tvar taskTiming = this._get_task_timing_mode(task);\r\n\t\t\tif(taskTiming.$no_start){\r\n\t\t\t\ttask.start_date = \"\";\r\n\t\t\t\ttask.duration = \"\";\r\n\t\t\t}\r\n\t\t\tif(taskTiming.$no_end){\r\n\t\t\t\ttask.end_date = \"\";\r\n\t\t\t\ttask.duration = \"\";\r\n\t\t\t}\r\n\t\t\tdata[dp.action_param] = this.getUserData(id, dp.action_param);\r\n\t\t\treturn data;\r\n\t\t}, gantt);\r\n\t}\r\n\r\n\tfunction extendGantt(gantt, dp){\r\n\t\tgantt._change_id = gantt.bind(function(oldid, newid) {\r\n\t\t\tif (dp._ganttMode != \"tasks\")\r\n\t\t\t\tthis.changeLinkId(oldid, newid);\r\n\t\t\telse\r\n\t\t\t\tthis.changeTaskId(oldid, newid);\r\n\t\t}, this);\r\n\r\n\t\tgantt._row_style = function(row_id, classname){\r\n\t\t\tif (dp._ganttMode != \"tasks\") return;\r\n\t\t\tif(!gantt.isTaskExists(row_id))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar task = gantt.getTask(row_id);\r\n\t\t\ttask.$dataprocessor_class = classname;\r\n\t\t\tgantt.refreshTask(row_id);\r\n\t\t};\r\n\r\n\t\t// fake method for dataprocessor\r\n\t\tgantt._delete_task = function(row_id, node){};\r\n\r\n\t\tgantt._sendTaskOrder = function(id, item){\r\n\t\t\tif(item.$drop_target){\r\n\t\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\t\tthis.getTask(id).target = item.$drop_target;\r\n\t\t\t\tdp.setUpdated(id, true,\"order\");\r\n\t\t\t\tdelete this.getTask(id).$drop_target;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis._dp = dp;\r\n\t}\r\n\r\n\tfunction attachDataProcessorEvents(gantt, dp){\r\n\t\tfunction clientSideDelete(id){\r\n\t\t\tvar updated = dp.updatedRows.slice();\r\n\t\t\tvar clientOnly = false;\r\n\r\n\t\t\tfor(var i = 0; i < updated.length && !dp._in_progress[id]; i++){\r\n\t\t\t\tif(updated[i] == id ){\r\n\t\t\t\t\tif(gantt.getUserData(id, \"!nativeeditor_status\") == \"inserted\"){\r\n\t\t\t\t\t\tclientOnly = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdp.setUpdated(id,false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn clientOnly;\r\n\t\t}\r\n\r\n\t\tfunction getTaskLinks(task){\r\n\t\t\tvar links = [];\r\n\r\n\t\t\tif (task.$source) {\r\n\t\t\t\tlinks = links.concat(task.$source);\r\n\t\t\t}\r\n\t\t\tif (task.$target) {\r\n\t\t\t\tlinks = links.concat(task.$target);\r\n\t\t\t}\r\n\r\n\t\t\treturn links;\r\n\t\t}\r\n\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterTaskAdd\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\tdp.setUpdated(id,true,\"inserted\");\r\n\t\t}));\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterTaskUpdate\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\tdp.setUpdated(id,true);\r\n\r\n\t\t\tgantt._sendTaskOrder(id, item);\r\n\t\t}));\r\n\r\n\t\tvar treeHelper = __webpack_require__(20);\r\n\t\tvar cascadeDelete = {};\r\n\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onBeforeTaskDelete\", function(id, item){\r\n\t\t\tif(!gantt.config.cascade_delete){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tcascadeDelete[id] = {\r\n\t\t\t\ttasks: treeHelper.getSubtreeTasks(gantt, id),\r\n\t\t\t\tlinks: treeHelper.getSubtreeLinks(gantt, id)\r\n\t\t\t};\r\n\t\t\treturn true;\r\n\t\t}));\r\n\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterTaskDelete\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"tasks\");\r\n\r\n\t\t\t// not send delete request if item is not inserted into the db - just remove it from the client\r\n\t\t\tvar needDbDelete = !clientSideDelete(id);\r\n\t\t\tif(!needDbDelete)\r\n\t\t\t\treturn;\r\n\t\t\t\r\n\t\t\tif(gantt.config.cascade_delete && cascadeDelete[id]){\r\n\t\t\t\tvar dpMode = dp.updateMode;\r\n\t\t\t\tdp.setUpdateMode(\"off\");\r\n\r\n\t\t\t\tvar cascade = cascadeDelete[id];\r\n\t\t\t\tfor(var i in cascade.tasks){\r\n\t\t\t\t\tif(!clientSideDelete(i)){\r\n\t\t\t\t\t\tdp.setUpdated(i, true, \"deleted\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\t\tfor(var i in cascade.links){\r\n\t\t\t\t\tif(!clientSideDelete(i)){\r\n\t\t\t\t\t\tdp.setUpdated(i, true, \"deleted\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcascadeDelete[id] = null;\r\n\r\n\t\t\t\tif(dpMode != \"off\"){\r\n\t\t\t\t\tdp.sendAllData();\r\n\t\t\t\t}\r\n\t\t\t\tdp.setGanttMode(\"tasks\");\r\n\r\n\t\t\t\tdp.setUpdateMode(dpMode);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdp.setUpdated(id,true,\"deleted\");\r\n\r\n\t\t\tif(dp.updateMode != 'off' && !dp._tSend){\r\n\t\t\t\tdp.sendAllData();\r\n\t\t\t}\r\n\r\n\t\t}));\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterLinkUpdate\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\tdp.setUpdated(id, true);\r\n\t\t}));\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterLinkAdd\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\tdp.setUpdated(id, true,\"inserted\");\r\n\t\t}));\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterLinkDelete\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"links\");\r\n\r\n\t\t\tvar needDbDelete = !clientSideDelete(id);\r\n\t\t\tif(!needDbDelete)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tdp.setUpdated(id, true,\"deleted\");\r\n\t\t}));\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onRowDragEnd\", function(id, target) {\r\n\t\t\tgantt._sendTaskOrder(id, gantt.getTask(id));\r\n\t\t}));\r\n\r\n\t\tvar tasks = null,\r\n\t\t\tlinks = null;\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onTaskIdChange\",function(oldId, newId){\r\n\t\t\tif(!dp._waitMode) return;\r\n\r\n\t\t\tvar children = gantt.getChildren(newId);\r\n\t\t\tif(children.length) {\r\n\t\t\t\ttasks = tasks || {};\r\n\r\n\t\t\t\tfor (var i = 0; i < children.length; i++) {\r\n\t\t\t\t\tvar ch = this.getTask(children[i]);\r\n\t\t\t\t\ttasks[ch.id] = ch;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar item = this.getTask(newId),\r\n\t\t\t\titemLinks = getTaskLinks(item);\r\n\r\n\t\t\tif(itemLinks.length) {\r\n\t\t\t\tlinks = links || {};\r\n\r\n\t\t\t\tfor (var i = 0; i < itemLinks.length; i++) {\r\n\t\t\t\t\tvar link = this.getLink(itemLinks[i]);\r\n\t\t\t\t\tlinks[link.id] = link;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tdp.attachEvent(\"onAfterUpdateFinish\", function(){\r\n\t\t\tif(tasks || links){\r\n\t\t\t\tgantt.batchUpdate(function(){\r\n\t\t\t\t\tfor(var id in tasks){\r\n\t\t\t\t\t\tgantt.updateTask(tasks[id].id);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor(var id in links){\r\n\t\t\t\t\t\tgantt.updateLink(links[id].id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttasks = null;\r\n\t\t\t\t\tlinks = null;\r\n\t\t\t\t});\r\n\t\t\t\tif(tasks) {\r\n\t\t\t\t\tgantt._dp.setGanttMode(\"tasks\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tgantt._dp.setGanttMode(\"links\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdp.attachEvent(\"onBeforeDataSending\", function() {\r\n\t\t\tvar url = this._serverProcessor;\r\n\t\t\tif(this._tMode == \"REST\"){\r\n\t\t\t\tvar mode = this._ganttMode.substr(0, this._ganttMode.length - 1);// links, tasks -> /link/id, /task/id\r\n\r\n\t\t\t\turl = url.substring(0, url.indexOf(\"?\") > -1 ? url.indexOf(\"?\") : url.length);\r\n\t\t\t\t//editing=true&\r\n\t\t\t\tthis.serverProcessor = url + (url.slice(-1) == \"/\" ? \"\" : \"/\") + mode;\r\n\t\t\t}else{\r\n\t\t\t\tthis.serverProcessor = url + gantt.ajax.urlSeparator(url) + \"gantt_mode=\" + this._ganttMode;\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t});\r\n\t}\r\n\r\n\tvar dataProcessorHandlers = [];\r\n\r\n\tgantt._dp_init = function(dp) {\r\n\t\tgantt.assert(!this._dp, \"The dataProcessor is already attached to this gantt instance\");\r\n\r\n\t\tdp.setTransactionMode(\"POST\", true);\r\n\t\tdp.serverProcessor += (dp.serverProcessor.indexOf(\"?\") != -1 ? \"&\" : \"?\") + \"editing=true\";\r\n\t\tdp._serverProcessor = dp.serverProcessor;\r\n\t\tdp.$gantt = this;\r\n\t\tdp.styles = {\r\n\t\t\tupdated:\"gantt_updated\",\r\n\t\t\torder:\"gantt_updated\",\r\n\t\t\tinserted:\"gantt_inserted\",\r\n\t\t\tdeleted:\"gantt_deleted\",\r\n\t\t\tinvalid:\"gantt_invalid\",\r\n\t\t\terror:\"gantt_error\",\r\n\t\t\tclear:\"\"\r\n\t\t};\r\n\r\n\t\tdp._methods=[\"_row_style\",\"setCellTextStyle\",\"_change_id\",\"_delete_task\"];\r\n\r\n\t\textendDataProcessor.call(this, gantt, dp);\r\n\t\textendGantt.call(this, gantt, dp);\r\n\t\tattachDataProcessorEvents.call(this, gantt, dp);\r\n\r\n\t\tdp.attachEvent(\"onDestroy\", function(){\r\n\t\t\tdetachDataProcessor(gantt, dp);\r\n\t\t});\r\n\t\tliveUpdateHooks(gantt, dp);\r\n\t};\r\n\r\n\tgantt.getUserData = function(id, name) {\r\n\t\tif (!this.userdata) this.userdata = {};\r\n\t\tif (this.userdata[id] && this.userdata[id][name]) return this.userdata[id][name];\r\n\t\treturn \"\";\r\n\t};\r\n\tgantt.setUserData = function(id, name, value) {\r\n\t\tif (!this.userdata) this.userdata = {};\r\n\t\tif (!this.userdata[id]) this.userdata[id] = {};\r\n\t\tthis.userdata[id][name] = value;\r\n\t};\r\n}\r\n\r\nmodule.exports = addDataProcessorHooks;\r\n\n\n/***/ }),\n/* 70 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__ (0);\r\n\r\nfunction updateCallback(upd, id) {\r\n\tvar data = upd.data || this.xml._xmlNodeToJSON(upd.firstChild);\r\n\tif(!this.isTaskExists(id))\r\n\t\treturn;\r\n\tvar objData = this.getTask(id);\r\n\tfor(var key in data) {\r\n\t\tvar property = data[key];\r\n\t\tswitch(key) {\r\n\t\t\tcase \"id\":\r\n\t\t\t\tcontinue;\r\n\t\t\tcase \"start_date\":\r\n\t\t\tcase \"end_date\":\r\n\t\t\t\tproperty = this.templates.xml_date(property);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"duration\":\r\n\t\t\t\tobjData.end_date = this.calculateEndDate({start_date: objData.start_date, duration: property, task:objData});\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tobjData[key] = property;\r\n\t}\r\n\tthis.updateTask(id);\r\n\tthis.refreshData();\r\n}\r\n\r\nfunction insertCallback(upd, id, parent, mode) {\r\n\tvar data = upd.data || this.xml._xmlNodeToJSON(upd.firstChild),\r\n\t\tmethods = {\r\n\t\t\tadd: this.addTask,\r\n\t\t\tisExist: this.isTaskExists\r\n\t\t};\r\n\tif(mode == \"links\") {\r\n\t\tmethods.add = this.addLink;\r\n\t\tmethods.isExist = this.isLinkExists;\r\n\t}\r\n\tif(methods.isExist.call(this, id))\r\n\t\treturn;\r\n\tdata.id = id;\r\n\tmethods.add.call(this, data);\r\n}\r\n\r\nfunction deleteCallback(upd, id, parent, mode) {\r\n\tvar methods = {\r\n\t\t\"delete\": this.deleteTask,\r\n\t\t\"isExist\": this.isTaskExists\r\n\t};\r\n\tif(mode == \"links\") {\r\n\t\tmethods[\"delete\"] = this.deleteLink;\r\n\t\tmethods.isExist = this.isLinkExists;\r\n\t}\r\n\tif(methods.isExist.call(this, id))\r\n\t\tmethods[\"delete\"].call(this, id);\r\n}\r\n\r\nfunction patchDataProcessor(gantt, dataprocessor){\r\n\tdataprocessor.attachEvent(\"insertCallback\", utils.bind(insertCallback, gantt));\r\n\tdataprocessor.attachEvent(\"updateCallback\",  utils.bind(deleteCallback, gantt));\r\n\tdataprocessor.attachEvent(\"deleteCallback\",  utils.bind(deleteCallback, gantt));\r\n}\r\n\r\nmodule.exports = patchDataProcessor;\n\n/***/ }),\n/* 71 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\nvar eventable = __webpack_require__(2);\r\n\r\n/**\r\n\t* \t@desc: constructor, data processor object \r\n\t*\t@param: serverProcessorURL - url used for update\r\n\t*\t@type: public\r\n\t*/\r\nvar dataProcessor = function(serverProcessorURL){\r\n    this.serverProcessor = serverProcessorURL;\r\n    this.action_param=\"!nativeeditor_status\";\r\n    \r\n\tthis.object = null;\r\n\tthis.updatedRows = []; //ids of updated rows\r\n\t\r\n\tthis.autoUpdate = true;\r\n\tthis.updateMode = \"cell\";\r\n\tthis._tMode=\"GET\"; \r\n\tthis._headers = null;\r\n\tthis._payload = null;\r\n\tthis.post_delim = \"_\";\r\n\t\r\n    this._waitMode=0;\r\n    this._in_progress={};//?\r\n    this._invalid={};\r\n    this.mandatoryFields=[];\r\n    this.messages=[];\r\n    \r\n    this.styles={\r\n    \tupdated:\"font-weight:bold;\",\r\n    \tinserted:\"font-weight:bold;\",\r\n    \tdeleted:\"text-decoration : line-through;\",\r\n    \tinvalid:\"background-color:FFE0E0;\",\r\n    \tinvalid_cell:\"border-bottom:2px solid red;\",\r\n    \terror:\"color:red;\",\r\n    \tclear:\"font-weight:normal;text-decoration:none;\"\r\n    };\r\n    \r\n    this.enableUTFencoding(true);\r\n\teventable(this);\r\n\r\n    return this;\r\n};\r\n\r\ndataProcessor.prototype={\r\n\tsetTransactionMode:function(mode,total){\r\n\t\tif (typeof mode == \"object\"){\r\n\t\t\tthis._tMode = mode.mode || this._tMode;\r\n\r\n\t\t\tif(utils.defined(mode.headers)){\r\n\t\t\t\tthis._headers = mode.headers;\r\n\t\t\t}\r\n\r\n\t\t\tif(utils.defined(mode.payload)){\r\n\t\t\t\tthis._payload = mode.payload;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t} else {\r\n     \t    this._tMode=mode;\r\n\t\t\tthis._tSend=total;\r\n\t\t}\r\n\r\n\t\tif (this._tMode == \"REST\"){\r\n\t\t\tthis._tSend = false;\r\n\t\t\tthis._endnm = true;\r\n\t\t}\r\n\r\n\t\tif (this._tMode == \"JSON\"){\r\n\t\t\tthis._tSend = false;\r\n\t\t\tthis._endnm = true;\r\n\t\t\tthis._headers = this._headers || {};\r\n\t\t\tthis._headers[\"Content-type\"] = \"application/json\";\r\n\t\t}\r\n    },\r\n    escape:function(data){\r\n    \tif (this._utf)\r\n    \t\treturn encodeURIComponent(data);\r\n    \telse\r\n        \treturn escape(data);\r\n\t},\r\n    /**\r\n\t* \t@desc: allows to set escaping mode\r\n\t*\t@param: true - utf based escaping, simple - use current page encoding\r\n\t*\t@type: public\r\n\t*/\t\r\n\tenableUTFencoding:function(mode){\r\n        this._utf=!!mode;\r\n    },\r\n    /**\r\n\t* \t@desc: allows to define, which column may trigger update\r\n\t*\t@param: val - array or list of true/false values\r\n\t*\t@type: public\r\n\t*/\r\n\tsetDataColumns:function(val){\r\n\t\tthis._columns=(typeof val == \"string\")?val.split(\",\"):val;\r\n    },\r\n    /**\r\n\t* \t@desc: get state of updating\r\n\t*\t@returns:   true - all in sync with server, false - some items not updated yet.\r\n\t*\t@type: public\r\n\t*/\r\n\tgetSyncState:function(){\r\n\t\treturn !this.updatedRows.length;\r\n\t},\r\n\t/**\r\n\t* \t@desc: enable/disable named field for data syncing, will use column ids for grid\r\n\t*\t@param:   mode - true/false\r\n\t*\t@type: public\r\n\t*/\r\n\tenableDataNames:function(mode){\r\n\t\tthis._endnm= !!mode;\r\n\t},\r\n\t/**\r\n\t* \t@desc: enable/disable mode , when only changed fields and row id send to the server side, instead of all fields in default mode\r\n\t*\t@param:   mode - true/false\r\n\t*\t@type: public\r\n\t*/\r\n\tenablePartialDataSend:function(mode){\r\n\t\tthis._changed= !!mode;\r\n\t},\r\n\t/**\r\n\t* \t@desc: set if rows should be send to server automaticaly\r\n\t*\t@param: mode - \"row\" - based on row selection changed, \"cell\" - based on cell editing finished, \"off\" - manual data sending\r\n\t*\t@type: public\r\n\t*/\r\n\tsetUpdateMode:function(mode,dnd){\r\n\t\tthis.autoUpdate = (mode==\"cell\");\r\n\t\tthis.updateMode = mode;\r\n\t\tthis.dnd=dnd;\r\n\t},\r\n\tignore:function(code,master){\r\n\t\tthis._silent_mode=true;\r\n\t\tcode.call(master||window);\r\n\t\tthis._silent_mode=false;\r\n\t},\r\n\t/**\r\n\t* \t@desc: mark row as updated/normal. check mandatory fields,initiate autoupdate (if turned on)\r\n\t*\t@param: rowId - id of row to set update-status for\r\n\t*\t@param: state - true for \"updated\", false for \"not updated\"\r\n\t*\t@param: mode - update mode name\r\n\t*\t@type: public\r\n\t*/\r\n\tsetUpdated:function(rowId,state,mode){\r\n\t\tif (this._silent_mode) return;\r\n\t\tvar ind=this.findRow(rowId);\r\n\t\t\r\n\t\tmode=mode||\"updated\";\r\n\t\tvar existing = this.obj.getUserData(rowId,this.action_param);\r\n\t\tif (existing && mode == \"updated\") mode=existing;\r\n\t\tif (state){\r\n\t\t\tthis.set_invalid(rowId,false); //clear previous error flag\r\n\t\t\tthis.updatedRows[ind]=rowId;\r\n\t\t\tthis.obj.setUserData(rowId,this.action_param,mode);\r\n\t\t\tif (this._in_progress[rowId]) \r\n\t\t\t\tthis._in_progress[rowId]=\"wait\";\r\n\t\t} else{\r\n\t\t\tif (!this.is_invalid(rowId)){\r\n\t\t\t\tthis.updatedRows.splice(ind,1);\r\n\t\t\t\tthis.obj.setUserData(rowId,this.action_param,\"\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//clear changed flag\r\n\t\tif (!state)\r\n\t\t\tthis._clearUpdateFlag(rowId);\r\n     \t\t\t\r\n\t\tthis.markRow(rowId,state,mode);\r\n\t\tif (state && this.autoUpdate) this.sendData(rowId);\r\n\t},\r\n\t_clearUpdateFlag:function(id){},\r\n\tmarkRow:function(id,state,mode){ \r\n\t\tvar str=\"\";\r\n\t\tvar invalid=this.is_invalid(id);\r\n\t\tif (invalid){\r\n        \tstr=this.styles[invalid];\r\n        \tstate=true;\r\n    \t}\r\n\t\tif (this.callEvent(\"onRowMark\",[id,state,mode,invalid])){\r\n\t\t\t//default logic\r\n\t\t\tstr=this.styles[state?mode:\"clear\"]+str;\r\n\t\t\t\r\n        \tthis.obj[this._methods[0]](id,str);\r\n\r\n\t\t\tif (invalid && invalid.details){\r\n\t\t\t\tstr+=this.styles[invalid+\"_cell\"];\r\n\t\t\t\tfor (var i=0; i < invalid.details.length; i++)\r\n\t\t\t\t\tif (invalid.details[i])\r\n        \t\t\t\tthis.obj[this._methods[1]](id,i,str);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetState:function(id){\r\n\t\treturn this.obj.getUserData(id,this.action_param);\r\n\t},\r\n\tis_invalid:function(id){\r\n\t\treturn this._invalid[id];\r\n\t},\r\n\tset_invalid:function(id,mode,details){ \r\n\t\tif (details) mode={value:mode, details:details, toString:function(){ return this.value.toString(); }};\r\n\t\tthis._invalid[id]=mode;\r\n\t},\r\n\t/**\r\n\t* \t@desc: check mandatory fields and varify values of cells, initiate update (if specified)\r\n\t*\t@param: rowId - id of row to set update-status for\r\n\t*\t@type: public\r\n\t*/\r\n\tcheckBeforeUpdate:function(rowId){ \r\n\t\treturn true;\r\n\t},\r\n\t/**\r\n\t* \t@desc: send row(s) values to server\r\n\t*\t@param: rowId - id of row which data to send. If not specified, then all \"updated\" rows will be send\r\n\t*\t@type: public\r\n\t*/\r\n\tsendData:function(rowId){\r\n\t\tif (this._waitMode && (this.obj.mytype==\"tree\" || this.obj._h2)) return;\r\n\t\tif (this.obj.editStop) this.obj.editStop();\r\n\t\r\n\t\t\r\n\t\tif(typeof rowId == \"undefined\" || this._tSend) return this.sendAllData();\r\n\t\tif (this._in_progress[rowId]) return false;\r\n\t\t\r\n\t\tthis.messages=[];\r\n\t\tif (!this.checkBeforeUpdate(rowId) && this.callEvent(\"onValidationError\",[rowId,this.messages])) return false;\r\n\t\tthis._beforeSendData(this._getRowData(rowId),rowId);\r\n    },\r\n    _beforeSendData:function(data,rowId){\r\n    \tif (!this.callEvent(\"onBeforeUpdate\",[rowId,this.getState(rowId),data])) return false;\t\r\n\t\tthis._sendData(data,rowId);\r\n    },\r\n    serialize:function(data, id){\r\n    \tif (typeof data == \"string\")\r\n    \t\treturn data;\r\n    \tif (typeof id != \"undefined\")\r\n    \t\treturn this.serialize_one(data,\"\");\r\n    \telse{\r\n    \t\tvar stack = [];\r\n    \t\tvar keys = [];\r\n    \t\tfor (var key in data)\r\n    \t\t\tif (data.hasOwnProperty(key)){\r\n    \t\t\t\tstack.push(this.serialize_one(data[key],key+this.post_delim));\r\n    \t\t\t\tkeys.push(key);\r\n\t\t\t\t}\r\n    \t\tstack.push(\"ids=\"+this.escape(keys.join(\",\")));\r\n    \t\tif (this.$gantt.security_key)\r\n\t\t\t\tstack.push(\"dhx_security=\"+this.$gantt.security_key);\r\n    \t\treturn stack.join(\"&\");\r\n    \t}\r\n    },\r\n    serialize_one:function(data, pref){\r\n    \tif (typeof data == \"string\")\r\n    \t\treturn data;\r\n    \tvar stack = [];\r\n    \tfor (var key in data)\r\n    \t\tif (data.hasOwnProperty(key)){\r\n    \t\t\tif ((key == \"id\" || key == this.action_param) && this._tMode == \"REST\") continue;\r\n    \t\t\tstack.push(this.escape((pref||\"\")+key)+\"=\"+this.escape(data[key]));\r\n    \t\t}\r\n\t\treturn stack.join(\"&\");\r\n    },\r\n\t_applyPayload:function(url){\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\t\tif (this._payload)\r\n\t\t\tfor (var key in this._payload)\r\n\t\t\t\turl = url + ajax.urlSeparator(url) + this.escape(key) + \"=\" + this.escape(this._payload[key]);\r\n\t\treturn url;\r\n\t},\r\n    _sendData:function(a1,rowId){\r\n    \tif (!a1) return; //nothing to send\r\n\t\tif (!this.callEvent(\"onBeforeDataSending\",rowId?[rowId,this.getState(rowId),a1]:[null, null, a1])) return false;\t\t\t\t\r\n\t\t\r\n    \tif (rowId)\r\n\t\t\tthis._in_progress[rowId]=(new Date()).valueOf();\r\n\r\n\t\tvar that = this;\r\n\t\tvar back = function(xml){\r\n\t\t\tvar ids = [];\r\n\t\t\tif (rowId)\r\n\t\t\t\tids.push(rowId);\r\n\t\t\telse if (a1)\r\n\t\t\t\tfor (var key in a1)\r\n\t\t\t\t\tids.push(key);\r\n\r\n\t\t\treturn that.afterUpdate(that,xml,ids);\r\n\t\t};\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\r\n\t\tvar a3 = this.serverProcessor+(this._user?(ajax.urlSeparator(this.serverProcessor)+[\"dhx_user=\"+this._user,\"dhx_version=\"+this.obj.getUserData(0,\"version\")].join(\"&\")):\"\");\r\n\t\tvar a4 = this._applyPayload(a3);\r\n\r\n\t\tif (this._tMode==\"GET\") {\r\n\t\t\tajax.query({\r\n\t\t\t\turl: a4 + ajax.urlSeparator(a4) + this.serialize(a1, rowId),\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t\tcallback: back,\r\n\t\t\t\theaders: this._headers\r\n\t\t\t});\r\n\t\t} else if (this._tMode == \"POST\") {\r\n\t\t\tajax.query({\r\n\t\t\t\turl: a4,\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\theaders: this._headers,\r\n\t\t\t\tdata: this.serialize(a1, rowId),\r\n\t\t\t\tcallback: back\r\n\t\t\t});\r\n\t\t} else if (this._tMode == \"JSON\"){\r\n\t\t\tvar action = a1[this.action_param];\r\n\t\t\tvar data = {};\r\n\t\t\tfor (var key in a1) data[key] = a1[key];\r\n\t\t\tdelete data[this.action_param];\r\n\t\t\tdelete data.id;\r\n\t\t\tdelete data.gr_id;\r\n\r\n\t\t\tajax.query({\r\n\t\t\t\turl:a4,\r\n\t\t\t\tmethod:\"POST\",\r\n\t\t\t\theaders:this._headers,\r\n\t\t\t\tcallback:back,\r\n\t\t\t\tdata:JSON.stringify({\r\n\t\t\t\t\tid: rowId,\r\n\t\t\t\t\taction: action,\r\n\t\t\t\t\tdata: data\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n        else if (this._tMode == \"REST\"){\r\n        \tvar state = this.getState(rowId);\r\n        \tvar url = a3.replace(/(\\&|\\?)editing\\=true/,\"\");\r\n        \tvar data = \"\";\r\n        \tvar method = \"post\";\r\n\r\n        \tif (state == \"inserted\"){\r\n        \t\tdata = this.serialize(a1, rowId);\r\n        \t} else if (state == \"deleted\"){\r\n        \t\tmethod = \"DELETE\";\r\n        \t\turl = url + (url.slice(-1) == \"/\" ? \"\" : \"/\") + rowId;\r\n        \t} else {\r\n        \t\tmethod = \"PUT\";\r\n        \t\tdata = this.serialize(a1, rowId);\r\n        \t\turl = url + (url.slice(-1) == \"/\" ? \"\" : \"/\") + rowId;\r\n        \t}\r\n\r\n\r\n        \turl = this._applyPayload(url);\r\n        \tajax.query({\r\n        \t\turl:url,\r\n        \t\tmethod:method,\r\n        \t\theaders:this._headers,\r\n        \t\tdata:data,\r\n        \t\tcallback:back\r\n        \t});\r\n        }\r\n\r\n\t\tthis._waitMode++;\r\n    },\r\n\tsendAllData:function(){\r\n\t\tif (!this.updatedRows.length) return;\t\t\t\r\n\r\n\t\tthis.messages=[]; var valid=true;\r\n\t\tfor (var i=0; i<this.updatedRows.length; i++)\r\n\t\t\tvalid&=this.checkBeforeUpdate(this.updatedRows[i]);\r\n\t\tif (!valid && !this.callEvent(\"onValidationError\",[\"\",this.messages])) return false;\r\n\t\r\n\t\tif (this._tSend) \r\n\t\t\tthis._sendData(this._getAllData());\r\n\t\telse\r\n\t\t\tfor (var i=0; i<this.updatedRows.length; i++)\r\n\t\t\t\tif (!this._in_progress[this.updatedRows[i]]){\r\n\t\t\t\t\tif (this.is_invalid(this.updatedRows[i])) continue;\r\n\t\t\t\t\tthis._beforeSendData(this._getRowData(this.updatedRows[i]),this.updatedRows[i]);\r\n\t\t\t\t\tif (this._waitMode && (this.obj.mytype==\"tree\" || this.obj._h2)) return; //block send all for tree\r\n\t\t\t\t}\r\n\t},\r\n\r\n\t_getAllData:function(rowId){\r\n\t\tvar out={};\r\n\t\tvar has_one = false;\r\n\t\tfor(var i=0;i<this.updatedRows.length;i++){\r\n\t\t\tvar id=this.updatedRows[i];\r\n\t\t\tif (this._in_progress[id] || this.is_invalid(id)) continue;\r\n\t\t\tvar row = this._getRowData(id);\r\n\t\t\tif (!this.callEvent(\"onBeforeUpdate\",[id,this.getState(id), row])) continue;\r\n\t\t\tout[id]=row;\r\n\t\t\thas_one = true;\r\n\t\t\tthis._in_progress[id]=(new Date()).valueOf();\r\n\t\t}\r\n\t\treturn has_one?out:null;\r\n\t},\r\n\t\r\n\t\r\n\t/**\r\n\t* \t@desc: specify column which value should be varified before sending to server\r\n\t*\t@param: ind - column index (0 based)\r\n\t*\t@param: verifFunction - function (object) which should verify cell value (if not specified, then value will be compared to empty string). Two arguments will be passed into it: value and column name\r\n\t*\t@type: public\r\n\t*/\r\n\tsetVerificator:function(ind,verifFunction){\r\n\t\tthis.mandatoryFields[ind] = verifFunction||(function(value){return (value!==\"\");});\r\n\t},\r\n\t/**\r\n\t* \t@desc: remove column from list of those which should be verified\r\n\t*\t@param: ind - column Index (0 based)\r\n\t*\t@type: public\r\n\t*/\r\n\tclearVerificator:function(ind){\r\n\t\tthis.mandatoryFields[ind] = false;\r\n\t},\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\tfindRow:function(pattern){\r\n\t\tvar i=0;\r\n    \tfor(i=0;i<this.updatedRows.length;i++)\r\n\t\t    if(pattern==this.updatedRows[i]) break;\r\n\t    return i;\r\n    },\r\n\r\n   \r\n\t\r\n\r\n\r\n    \r\n\r\n\r\n\r\n\r\n\r\n\t/**\r\n\t* \t@desc: define custom actions\r\n\t*\t@param: name - name of action, same as value of action attribute\r\n\t*\t@param: handler - custom function, which receives a XMl response content for action\r\n\t*\t@type: private\r\n\t*/\r\n\tdefineAction:function(name,handler){\r\n        if (!this._uActions) this._uActions=[];\r\n            this._uActions[name]=handler;\r\n\t},\r\n\r\n\r\n\r\n\r\n\t/**\r\n*     @desc: used in combination with setOnBeforeUpdateHandler to create custom client-server transport system\r\n*     @param: sid - id of item before update\r\n*     @param: tid - id of item after up0ate\r\n*     @param: action - action name\r\n*     @type: public\r\n*     @topic: 0\r\n*/\r\n\tafterUpdateCallback:function(sid, tid, action, btag) {\r\n\t\tvar marker = sid;\r\n\t\tvar correct=(action!=\"error\" && action!=\"invalid\");\r\n\t\tif (!correct) this.set_invalid(sid,action);\r\n\t\tif ((this._uActions)&&(this._uActions[action])&&(!this._uActions[action](btag)))\r\n\t\t\treturn (delete this._in_progress[marker]);\r\n\r\n\t\tif (this._in_progress[marker]!=\"wait\")\r\n\t\t\tthis.setUpdated(sid, false);\r\n\r\n\t\tvar soid = sid;\r\n\r\n\t\tswitch (action) {\r\n\t\t\tcase \"inserted\":\r\n\t\t\tcase \"insert\":\r\n\t\t\t\tif (tid != sid) {\r\n\t\t\t\t\tthis.setUpdated(sid,false);\r\n\t\t\t\t\tthis.obj[this._methods[2]](sid, tid);\r\n\t\t\t\t\tsid = tid;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"delete\":\r\n\t\t\tcase \"deleted\":\r\n\t\t\t\tthis.obj.setUserData(sid, this.action_param, \"true_deleted\");\r\n\t\t\t\tthis.obj[this._methods[3]](sid);\r\n\t\t\t\tdelete this._in_progress[marker];\r\n\t\t\t\treturn this.callEvent(\"onAfterUpdate\", [sid, action, tid, btag]);\r\n\t\t}\r\n\r\n\t\tif (this._in_progress[marker]!=\"wait\"){\r\n\t\t\tif (correct) this.obj.setUserData(sid, this.action_param,'');\r\n\t\t\tdelete this._in_progress[marker];\r\n\t\t} else {\r\n\t\t\tdelete this._in_progress[marker];\r\n\t\t\tthis.setUpdated(tid,true,this.obj.getUserData(sid,this.action_param));\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onAfterUpdate\", [soid, action, tid, btag]);\r\n\t},\r\n\r\n\t/**\r\n\t* \t@desc: response from server\r\n\t*\t@param: xml - XMLLoader object with response XML\r\n\t*\t@type: private\r\n\t*/\r\n\tafterUpdate:function(that,xml,id){\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\t\t//try to use json first\r\n\t\tif (window.JSON){\r\n\t\t\tvar tag;\r\n\r\n\t\t\ttry{\r\n\t\t\t\ttag = JSON.parse(xml.xmlDoc.responseText);\r\n\t\t\t} catch(e){\r\n\r\n\t\t\t\t// empty response also can be processed by json handler\r\n\t\t\t\tif(!xml.xmlDoc.responseText.length){\r\n\t\t\t\t\ttag = {};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(tag){\r\n\t\t\t\tvar action = tag.action || this.getState(id) || \"updated\";\r\n\t\t\t\tvar sid = tag.sid || id[0];\r\n\t\t\t\tvar tid = tag.tid || id[0];\r\n\t\t\t\tthat.afterUpdateCallback(sid, tid, action, tag);\r\n\t\t\t\tthat.finalizeUpdate();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\t//xml response\r\n\t\tvar top = ajax.xmltop(\"data\", xml.xmlDoc); //fix incorrect content type in IE\r\n\t\tif (!top) return this.cleanUpdate(id);\r\n\t\tvar atag=ajax.xpath(\"//data/action\", top);\r\n\t\tif (!atag.length) return this.cleanUpdate(id);\r\n\r\n\t\tfor (var i=0; i<atag.length; i++){\r\n        \tvar btag=atag[i];\r\n\t\t\tvar action = btag.getAttribute(\"type\");\r\n\t\t\tvar sid = btag.getAttribute(\"sid\");\r\n\t\t\tvar tid = btag.getAttribute(\"tid\");\r\n\t\t\t\r\n\t\t\tthat.afterUpdateCallback(sid,tid,action,btag);\r\n\t\t}\r\n\t\tthat.finalizeUpdate();\r\n\t},\r\n\tcleanUpdate:function(id){\r\n\t\tif (id)\r\n\t\t\tfor (var i = 0; i < id.length; i++)\r\n\t\t\t\tdelete this._in_progress[id[i]];\r\n\t},\r\n\tfinalizeUpdate:function(){\r\n\t\tif (this._waitMode) this._waitMode--;\r\n\t\t\r\n\t\tif ((this.obj.mytype==\"tree\" || this.obj._h2) && this.updatedRows.length) \r\n\t\t\tthis.sendData();\r\n\t\tthis.callEvent(\"onAfterUpdateFinish\",[]);\r\n\t\tif (!this.updatedRows.length)\r\n\t\t\tthis.callEvent(\"onFullSync\",[]);\r\n\t},\r\n\r\n\r\n\r\n\r\n\t\r\n\t/**\r\n\t* \t@desc: initializes data-processor\r\n\t*\t@param: anObj - dhtmlxGrid object to attach this data-processor to\r\n\t*\t@type: public\r\n\t*/\r\n\tinit:function(anObj){\r\n\t\tthis.obj = anObj;\r\n\t\tif (this.obj._dp_init) \r\n\t\t\tthis.obj._dp_init(this);\r\n\t},\r\n\t\r\n\t\r\n\tsetOnAfterUpdate:function(ev){\r\n\t\tthis.attachEvent(\"onAfterUpdate\",ev);\r\n\t},\r\n\tenableDebug:function(mode){\r\n\t},\r\n\tsetOnBeforeUpdateHandler:function(func){  \r\n\t\tthis.attachEvent(\"onBeforeDataSending\",func);\r\n\t},\r\n\r\n\r\n\r\n\t/* starts autoupdate mode\r\n\t\t@param interval\r\n\t\t\ttime interval for sending update requests\r\n\t*/\r\n\tsetAutoUpdate: function(interval, user) {\r\n\t\tinterval = interval || 2000;\r\n\t\t\r\n\t\tthis._user = user || (new Date()).valueOf();\r\n\t\tthis._need_update = false;\r\n\t\t//this._loader = null;\r\n\t\tthis._update_busy = false;\r\n\t\t\r\n\t\tthis.attachEvent(\"onAfterUpdate\",function(sid,action,tid,xml_node){\r\n\t\t\tthis.afterAutoUpdate(sid, action, tid, xml_node);\r\n\t\t});\r\n\t\tthis.attachEvent(\"onFullSync\",function(){\r\n\t\t\tthis.fullSync();\r\n\t\t});\r\n\t\t\r\n\t\tvar self = this;\r\n\t\twindow.setInterval(function(){\r\n\t\t\tself.loadUpdate();\r\n\t\t}, interval);\r\n\t},\r\n\r\n\r\n\t/* process updating request answer\r\n\t\tif status == collision version is depricated\r\n\t\tset flag for autoupdating immidiatly\r\n\t*/\r\n\tafterAutoUpdate: function(sid, action, tid, xml_node) {\r\n\t\tif (action == 'collision') {\r\n\t\t\tthis._need_update = true;\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t/* callback function for onFillSync event\r\n\t\tcall update function if it's need\r\n\t*/\r\n\tfullSync: function() {\r\n\t\tif (this._need_update) {\r\n\t\t\tthis._need_update = false;\r\n\t\t\tthis.loadUpdate();\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\r\n\t/* sends query to the server and call callback function\r\n\t*/\r\n\tgetUpdates: function(url,callback){\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\t\tif (this._update_busy) \r\n\t\t\treturn false;\r\n\t\telse\r\n\t\t\tthis._update_busy = true;\r\n\t\t\r\n\t\t//this._loader = this._loader || new dtmlXMLLoaderObject(true);\r\n\t\t\r\n\t\t//this._loader.async=true;\r\n\t\t//this._loader.waitCall=callback;\r\n\t\t//this._loader.loadXML(url);\r\n\t\tajax.get(url, callback);\r\n\r\n\t},\r\n\r\n\r\n\t/* returns xml node value\r\n\t\t@param node\r\n\t\t\txml node\r\n\t*/\r\n\t_v: function(node) {\r\n\t\tif (node.firstChild) return node.firstChild.nodeValue;\r\n\t\treturn \"\";\r\n\t},\r\n\r\n\r\n\t/* returns values array of xml nodes array\r\n\t\t@param arr\r\n\t\t\tarray of xml nodes\r\n\t*/\r\n\t_a: function(arr) {\r\n\t\tvar res = [];\r\n\t\tfor (var i=0; i < arr.length; i++) {\r\n\t\t\tres[i]=this._v(arr[i]);\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\r\n\r\n\t/* loads updates and processes them\r\n\t*/\r\n\tloadUpdate: function(){\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\t\tvar self = this;\r\n\t\tvar version = this.obj.getUserData(0,\"version\");\r\n\t\tvar url = this.serverProcessor+ajax.urlSeparator(this.serverProcessor)+[\"dhx_user=\"+this._user,\"dhx_version=\"+version].join(\"&\");\r\n\t\turl = url.replace(\"editing=true&\",\"\");\r\n\t\tthis.getUpdates(url, function(xml){\r\n\t\t\tvar vers = ajax.xpath(\"//userdata\", xml);\r\n\t\t\tself.obj.setUserData(0,\"version\",self._v(vers[0]));\r\n\t\t\t\r\n\t\t\tvar upds = ajax.xpath(\"//update\", xml);\r\n\t\t\tif (upds.length){\r\n\t\t\t\tself._silent_mode = true;\r\n\t\t\t\t\r\n\t\t\t\tfor (var i=0; i<upds.length; i++) {\r\n\t\t\t\t\tvar status = upds[i].getAttribute('status');\r\n\t\t\t\t\tvar id = upds[i].getAttribute('id');\r\n\t\t\t\t\tvar parent = upds[i].getAttribute('parent');\r\n\t\t\t\t\tswitch (status) {\r\n\t\t\t\t\t\tcase 'inserted':\r\n\t\t\t\t\t\t\tself.callEvent(\"insertCallback\",[upds[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'updated':\r\n\t\t\t\t\t\t\tself.callEvent(\"updateCallback\",[upds[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'deleted':\r\n\t\t\t\t\t\t\tself.callEvent(\"deleteCallback\",[upds[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tself._silent_mode = false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tself._update_busy = false;\r\n\t\t\tself = null;\r\n\t\t});\r\n\t},\r\n\r\n\tdestructor: function(){\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\r\n\t\tthis.updatedRows = [];\r\n\t\tthis._in_progress={};//?\r\n\t\tthis._invalid={};\r\n\t\tthis._headers = null;\r\n\t\tthis._payload = null;\r\n\t\tthis.obj = null;\r\n\t}\r\n\r\n\r\n\r\n};\r\n\r\nmodule.exports = dataProcessor;\n\n/***/ }),\n/* 72 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = function(gantt){\r\n\tvar modules = [\r\n\t\t__webpack_require__(73),\r\n\t\t__webpack_require__(74),\r\n\t\t__webpack_require__(75),\r\n\t\t__webpack_require__(76),\r\n\t\t__webpack_require__(77),\r\n\t\t__webpack_require__(78)\r\n\t];\r\n\r\n\tfor(var i = 0; i < modules.length; i++){\r\n\t\tif(modules[i])\r\n\t\t\tmodules[i](gantt);\r\n\t}\r\n};\n\n/***/ }),\n/* 73 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar domHelpers = __webpack_require__(1);\r\n\r\nmodule.exports = function(gantt){\r\n\r\n\tvar scrollRange = 50,\r\n\t\tscrollStep = 30,\r\n\t\tscrollDelay = 10,\r\n\t\tscrollSpeed = 50;\r\n\r\n\tvar interval = null,\r\n\t\tisMove = false,\r\n\t\tdelayTimeout = null,\r\n\t\tbox = {},\r\n\t\tstartPos = {\r\n\t\t\tstarted: false\r\n\t\t},\r\n\t\teventPos = {};\r\n\r\n\tfunction getAutoscrollContainer(){\r\n\t\treturn gantt.$task || gantt.$grid || gantt.$root;\r\n\t}\r\n\r\n\tfunction isScrollState() {\r\n\t\tvar dragMarker = !!document.querySelector(\".gantt_drag_marker\");\r\n\t\tvar isResize = !!document.querySelector(\".gantt_drag_marker.gantt_grid_resize_area\");\r\n\t\tvar isLink = !!document.querySelector(\".gantt_link_direction\");\r\n\t\tisMove = dragMarker && !isResize && !isLink;\r\n\t\treturn !((!gantt.getState().drag_mode && !dragMarker) || isResize);\r\n\t}\r\n\r\n\tfunction defineDelayTimeout(state) {\r\n\t\tif (delayTimeout) {\r\n\t\t\tclearTimeout(delayTimeout);\r\n\t\t\tdelayTimeout = null;\r\n\t\t}\r\n\t\tif (state) {\r\n\t\t\tvar speed = gantt.config.autoscroll_speed;\r\n\t\t\tif (speed && speed < 10) // limit speed value to 10 \r\n\t\t\t\tspeed = 10;\r\n\r\n\t\t\tdelayTimeout = setTimeout(function() {\r\n\t\t\t\tinterval = setInterval(tick, speed || scrollSpeed);\r\n\t\t\t\tbox = domHelpers.getNodePosition(getAutoscrollContainer());\r\n\t\t\t}, gantt.config.autoscroll_delay || scrollDelay);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction defineScrollInterval(state) {\r\n\t\tif (state) {\r\n\t\t\tdefineDelayTimeout(true);\r\n\t\t\tif (!startPos.started) {\r\n\t\t\t\tstartPos.x = eventPos.x;\r\n\t\t\t\tstartPos.y = eventPos.y;\r\n\t\t\t\tstartPos.started = true;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (interval) {\r\n\t\t\t\tclearInterval(interval);\r\n\t\t\t\tinterval = null;\r\n\t\t\t}\r\n\t\t\tdefineDelayTimeout(false);\r\n\t\t\tstartPos.started = false;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction autoscrollInterval(event) {\r\n\r\n\t\tvar isScroll = isScrollState();\r\n\r\n\t\tif ((interval || delayTimeout) && !isScroll) { \r\n\t\t\tdefineScrollInterval(false);\r\n\t\t}\r\n\r\n\t\tif (!gantt.config.autoscroll || !isScroll) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\teventPos = {\r\n\t\t\tx: event.clientX,\r\n\t\t\ty: event.clientY\r\n\t\t};\r\n\r\n\t\tif (!interval && isScroll) {\r\n\t\t\tdefineScrollInterval(true);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction tick() {\r\n\r\n\t\tif (!isScrollState()) {\r\n\t\t\tdefineScrollInterval(false);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar box = domHelpers.getNodePosition(getAutoscrollContainer());\r\n\t\tvar posX = eventPos.x - box.x; \r\n\t\tvar posY = eventPos.y - box.y;\r\n\r\n\t\tvar scrollLeft = isMove ? 0 : need_scroll(posX, box.width, startPos.x - box.x);\r\n\t\tvar scrollTop = need_scroll(posY, box.height, startPos.y - box.y);\r\n\r\n\t\tvar scrollState = gantt.getScrollState();\r\n\r\n\t\tvar currentScrollTop = scrollState.y,\r\n\t\t\tscrollOuterHeight = scrollState.inner_height,\r\n\t\t\tscrollInnerHeight = scrollState.height,\r\n\t\t\tcurrentScrollLeft = scrollState.x,\r\n\t\t\tscrollOuterWidth = scrollState.inner_width,\r\n\t\t\tscrollInnerWidth = scrollState.width;\r\n\r\n\t\t// do scrolling only if we have scrollable area to do so\r\n\t\tif (scrollTop && !scrollOuterHeight) {\r\n\t\t\tscrollTop = 0;\r\n\t\t} else if (scrollTop < 0 && !currentScrollTop) {\r\n\t\t\tscrollTop = 0;\r\n\t\t} else if (scrollTop > 0 && currentScrollTop + scrollOuterHeight >= scrollInnerHeight + 2) {\r\n\t\t\tscrollTop = 0;\r\n\t\t}\r\n\r\n\t\tif (scrollLeft && !scrollOuterWidth) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t} else if (scrollLeft < 0 && !currentScrollLeft) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t} else if (scrollLeft > 0 && currentScrollLeft + scrollOuterWidth >= scrollInnerWidth) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t}\r\n\r\n\t\tvar step = gantt.config.autoscroll_step;\r\n\r\n\t\tif (step && step < 2) // limit step value to 2\r\n\t\t\tstep = 2;\r\n\r\n\t\tscrollLeft = scrollLeft * (step || scrollStep);\r\n\t\tscrollTop = scrollTop * (step || scrollStep);\r\n\r\n\t\tif (scrollLeft || scrollTop) {\r\n\t\t\tscroll(scrollLeft, scrollTop);\r\n\t\t} \r\n\r\n\t}\r\n\r\n\tfunction need_scroll(pos, boxSize, startCoord) {\r\n\t\tif ((pos - scrollRange < 0) && (pos < startCoord))\r\n\t\t\treturn -1;\r\n\t\telse if ((pos > boxSize - scrollRange) && (pos > startCoord))\r\n\t\t\treturn 1;\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tfunction scroll(left, top) {\r\n\t\tvar scrollState = gantt.getScrollState();\r\n\r\n\t\tvar scrollLeft = null,\r\n\t\t\tscrollTop = null;\r\n\r\n\t\tif (left) {\r\n\t\t\tscrollLeft = scrollState.x + left;\r\n\t\t\tscrollLeft = Math.min(scrollState.width, scrollLeft);\r\n\t\t\tscrollLeft = Math.max(0, scrollLeft);\r\n\t\t}\r\n\r\n\t\tif (top) {\r\n\t\t\tscrollTop = scrollState.y + top;\r\n\t\t\tscrollTop = Math.min(scrollState.height, scrollTop);\r\n\t\t\tscrollTop = Math.max(0, scrollTop);\r\n\t\t}\r\n\r\n\t\tgantt.scrollTo(scrollLeft, scrollTop);\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onGanttReady\", function() {\r\n\t\tgantt.eventRemove(document.body, \"mousemove\", autoscrollInterval);\r\n\t\tgantt.event(document.body, \"mousemove\", autoscrollInterval);\r\n\t});\r\n\r\n};\n\n/***/ }),\n/* 74 */\n/***/ (function(module, exports) {\n\nfunction createMethod(gantt){\r\n\tvar methods = {};\r\n\tvar isActive = false;\r\n\tfunction disableMethod(methodName, dummyMethod){\r\n\t\tdummyMethod = typeof dummyMethod == \"function\" ? dummyMethod : function(){};\r\n\r\n\t\tif(!methods[methodName]){\r\n\t\t\tmethods[methodName] = this[methodName];\r\n\t\t\tthis[methodName] = dummyMethod;\r\n\t\t}\r\n\t}\r\n\tfunction restoreMethod(methodName){\r\n\t\tif(methods[methodName]){\r\n\t\t\tthis[methodName] = methods[methodName];\r\n\t\t\tmethods[methodName] = null;\r\n\t\t}\r\n\t}\r\n\tfunction disableMethods(methodsHash){\r\n\t\tfor(var i in methodsHash){\r\n\t\t\tdisableMethod.call(this, i, methodsHash[i]);\r\n\t\t}\r\n\t}\r\n\t function restoreMethods(){\r\n\t\tfor(var i in methods){\r\n\t\t\trestoreMethod.call(this, i);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction batchUpdatePayload(callback){\r\n\t\ttry{\r\n\t\t\tcallback();\r\n\t\t}catch(e){\r\n\t\t\twindow.console.error(e);\r\n\t\t}\r\n\t}\r\n\r\n\tvar state = gantt.$services.getService(\"state\");\r\n\tstate.registerProvider(\"batchUpdate\", function(){\r\n\t\treturn {\r\n\t\t\tbatch_update: isActive\r\n\t\t};\r\n\t}, true);\r\n\r\n\treturn function batchUpdate(callback, noRedraw) {\r\n\t\tif(isActive){\r\n\t\t\t// batch mode is already active\r\n\t\t\tbatchUpdatePayload(callback);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar call_dp = (this._dp && this._dp.updateMode != \"off\");\r\n\t\tvar dp_mode;\r\n\t\tif (call_dp){\r\n\t\t\tdp_mode = this._dp.updateMode;\r\n\t\t\tthis._dp.setUpdateMode(\"off\");\r\n\t\t}\r\n\r\n\t\t// temporary disable some methods while updating multiple tasks\r\n\t\tvar resetProjects = {};\r\n\t\tvar methods = {\r\n\t\t\t\"render\":true,\r\n\t\t\t\"refreshData\":true,\r\n\t\t\t\"refreshTask\":true,\r\n\t\t\t\"refreshLink\":true,\r\n\t\t\t\"resetProjectDates\":function(task){\r\n\t\t\t\tresetProjects[task.id] = task;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tdisableMethods.call(this, methods);\r\n\r\n\t\tisActive = true;\r\n\t\tthis.callEvent(\"onBeforeBatchUpdate\", []);\r\n\r\n\t\tbatchUpdatePayload(callback);\r\n\r\n\t\tthis.callEvent(\"onAfterBatchUpdate\", []);\r\n\r\n\t\trestoreMethods.call(this);\r\n\r\n\t\t// do required updates after changes applied\r\n\t\tfor(var i in resetProjects){\r\n\t\t\tthis.resetProjectDates(resetProjects[i]);\r\n\t\t}\r\n\r\n\t\tisActive = false;\r\n\r\n\t\tif(!noRedraw){\r\n\t\t\tthis.render();\r\n\t\t}\r\n\r\n\t\tif (call_dp) {\r\n\t\t\tthis._dp.setUpdateMode(dp_mode);\r\n\t\t\tthis._dp.setGanttMode(\"tasks\");\r\n\t\t\tthis._dp.sendData();\r\n\t\t\tthis._dp.setGanttMode(\"links\");\r\n\t\t\tthis._dp.sendData();\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n}\r\n\r\nmodule.exports = function(gantt){\r\n\tgantt.batchUpdate = createMethod(gantt);\r\n};\n\n/***/ }),\n/* 75 */\n/***/ (function(module, exports) {\n\nvar createWbs = (function(gantt){\r\n\treturn {\r\n\t_needRecalc: true,\r\n\treset: function(){\r\n\t\tthis._needRecalc = true;\r\n\t},\r\n\t_isRecalcNeeded: function(){\r\n\t\treturn (!this._isGroupSort() && this._needRecalc);\r\n\t},\r\n\t_isGroupSort: function() {\r\n\t\treturn !!(gantt._groups && gantt._groups.is_active());\r\n\t},\r\n\t_getWBSCode: function(task) {\r\n\t\tif(!task) return \"\";\r\n\r\n\t\tif(this._isRecalcNeeded()){\r\n\t\t\tthis._calcWBS();\r\n\t\t}\r\n\r\n\t\tif(task.$virtual) return \"\";\r\n\t\tif(this._isGroupSort()) return task.$wbs || \"\";\r\n\r\n\t\tif(!task.$wbs) {\r\n\t\t\tthis.reset();\r\n\t\t\tthis._calcWBS();\r\n\t\t}\r\n\t\treturn task.$wbs;\r\n\t},\r\n\t_setWBSCode: function(task, value) {\r\n\t\ttask.$wbs = value;\r\n\t},\r\n\tgetWBSCode: function(task) {\r\n\t\treturn this._getWBSCode(task);\r\n\t},\r\n\t_calcWBS: function() {\r\n\t\tif(!this._isRecalcNeeded()) return;\r\n\r\n\t\tvar _isFirst = true;\r\n\t\tgantt.eachTask(function(ch) {\r\n\t\t\tif(_isFirst) {\r\n\t\t\t\t_isFirst = false;\r\n\t\t\t\tthis._setWBSCode(ch, \"1\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar _prevSibling = gantt.getPrevSibling(ch.id);\r\n\t\t\tif (_prevSibling !== null) {\r\n\t\t\t\tvar _wbs = gantt.getTask(_prevSibling).$wbs;\r\n\t\t\t\tif(_wbs) {\r\n\t\t\t\t\t_wbs = _wbs.split(\".\");\r\n\t\t\t\t\t_wbs[_wbs.length-1]++;\r\n\t\t\t\t\tthis._setWBSCode(ch, _wbs.join(\".\"));\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar _parent = gantt.getParent(ch.id);\r\n\t\t\t\tthis._setWBSCode(ch, gantt.getTask(_parent).$wbs + \".1\");\r\n\t\t\t}\r\n\t\t}, gantt.config.root_id, this);\r\n\r\n\t\tthis._needRecalc = false;\r\n\t}\r\n};\r\n});\r\n\r\nmodule.exports = function(gantt){\r\n\tvar wbs = createWbs(gantt);\r\n\tgantt.getWBSCode = function getWBSCode(task) {\r\n\t\treturn wbs.getWBSCode(task);\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onAfterTaskMove\", function() {\r\n\t\twbs.reset();\r\n\t\treturn true;\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onBeforeParse\", function() {\r\n\t\twbs.reset();\r\n\t\treturn true;\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onAfterTaskDelete\", function() {\r\n\t\twbs.reset();\r\n\t\treturn true;\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onAfterTaskAdd\", function() {\r\n\t\twbs.reset();\r\n\t\treturn true;\r\n\t});\r\n};\r\n\n\n/***/ }),\n/* 76 */\n/***/ (function(module, exports) {\n\nif (window.jQuery){\r\n\r\n\t(function( $ ){\r\n\r\n\t\tvar methods = [];\r\n\t\t$.fn.dhx_gantt = function(config){\r\n\t\t\tconfig = config || {};\r\n\t\t\tif (typeof(config) === 'string') {\r\n\t\t\t\tif (methods[config] ) {\r\n\t\t\t\t\treturn methods[config].apply(this, []);\r\n\t\t\t\t}else {\r\n\t\t\t\t\t$.error('Method ' +  config + ' does not exist on jQuery.dhx_gantt');\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar views = [];\r\n\t\t\t\tthis.each(function() {\r\n\t\t\t\t\tif (this && this.getAttribute){\r\n\t\t\t\t\t\tif (!this.gantt && !(window.gantt.$root == this)){\r\n\r\n\t\t\t\t\t\t\tvar newgantt = (window.gantt.$container && window.Gantt) ? window.Gantt.getGanttInstance():window.gantt;\r\n\t\t\t\t\t\t\tfor (var key in config)\r\n\t\t\t\t\t\t\t\tif (key!=\"data\")\r\n\t\t\t\t\t\t\t\t\tnewgantt.config[key] = config[key];\r\n\r\n\t\t\t\t\t\t\tnewgantt.init(this);\r\n\t\t\t\t\t\t\tif (config.data)\r\n\t\t\t\t\t\t\t\tnewgantt.parse(config.data);\r\n\r\n\t\t\t\t\t\t\tviews.push(newgantt);\r\n\t\t\t\t\t\t} else\r\n\t\t\t\t\t\t\tviews.push(typeof this.gantt == \"object\" ? this.gantt : window.gantt);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t\tif (views.length === 1) return views[0];\r\n\t\t\t\treturn views;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t})(jQuery);\r\n\r\n}\r\n\r\n\r\nmodule.exports = null;\n\n/***/ }),\n/* 77 */\n/***/ (function(module, exports) {\n\nif (window.dhtmlx){\r\n\r\n\tif (!dhtmlx.attaches)\r\n\t\tdhtmlx.attaches = {};\r\n\r\n\tdhtmlx.attaches.attachGantt=function(start, end, gantt){\r\n\t\tvar obj = document.createElement(\"DIV\");\r\n\r\n\t\tgantt = gantt || window.gantt;\r\n\r\n\t\tobj.id = \"gantt_\"+ gantt.uid();\r\n\t\tobj.style.width = \"100%\";\r\n\t\tobj.style.height = \"100%\";\r\n\t\tobj.cmp = \"grid\";\r\n\r\n\t\tdocument.body.appendChild(obj);\r\n\t\tthis.attachObject(obj.id);\r\n\t\tthis.dataType = \"gantt\";\r\n\t\tthis.dataObj = gantt;\r\n\r\n\t\tvar that = this.vs[this.av];\r\n\t\tthat.grid = gantt;\r\n\r\n\t\tgantt.init(obj.id, start, end);\r\n\t\tobj.firstChild.style.border = \"none\";\r\n\r\n\t\tthat.gridId = obj.id;\r\n\t\tthat.gridObj = obj;\r\n\r\n\t\tvar method_name=\"_viewRestore\";\r\n\t\treturn this.vs[this[method_name]()].grid;\r\n\t};\r\n\r\n}\r\nif (typeof(window.dhtmlXCellObject) != \"undefined\") {\r\n\r\n\tdhtmlXCellObject.prototype.attachGantt=function(start, end, gantt){\r\n\t\tgantt = gantt || window.gantt;\r\n\r\n\t\tvar obj = document.createElement(\"DIV\");\r\n\t\tobj.id = \"gantt_\"+gantt.uid();\r\n\t\tobj.style.width = \"100%\";\r\n\t\tobj.style.height = \"100%\";\r\n\t\tobj.cmp = \"grid\";\r\n\r\n\t\tdocument.body.appendChild(obj);\r\n\t\tthis.attachObject(obj.id);\r\n\r\n\t\tthis.dataType = \"gantt\";\r\n\t\tthis.dataObj = gantt;\r\n\r\n\t\tgantt.init(obj.id, start, end);\r\n\t\tobj.firstChild.style.border = \"none\";\r\n\t\tvar method_name=\"_viewRestore\";\r\n\t\tobj = null;\r\n\t\tthis.callEvent(\"_onContentAttach\",[]);\r\n\r\n\t\treturn this.dataObj;\r\n\t};\r\n}\r\n\r\nmodule.exports = null;\n\n/***/ }),\n/* 78 */\n/***/ (function(module, exports) {\n\nfunction createResourceMethods(gantt){\r\n\r\n\tvar resourceTaskCache = {},\r\n\t\tresourceLoadCache = {};\r\n\r\n\tgantt.$data.tasksStore.attachEvent(\"onStoreUpdated\", function(){\r\n\t\tresourceTaskCache = {};\r\n\t\tresourceLoadCache = {};\r\n\t});\r\n\r\n\tfunction getTaskBy(propertyName, propertyValue){\r\n\t\tif(typeof propertyName == \"function\"){\r\n\t\t\treturn filterResourceTasks(propertyName);\r\n\t\t}else{\r\n\t\t\tif(propertyValue instanceof Array){\r\n\t\t\t\treturn getResourceTasks(propertyName, propertyValue);\r\n\t\t\t}else{\r\n\t\t\t\treturn getResourceTasks(propertyName, [propertyValue]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction filterResourceTasks(filter){\r\n\t\tvar res = [];\r\n\t\tgantt.eachTask(function (task) {\r\n\t\t\tif (filter(task)) {\r\n\t\t\t\tres.push(task);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn res;\r\n\t}\r\n\r\n\tfunction getResourceTasks(property, resourceIds) {\r\n\t\tvar res;\r\n\r\n\t\tvar cacheKey = resourceIds.join(\"_\") + \"_\" + property;\r\n\r\n\t\tvar resourceHash = {};\r\n\t\tfor(var i = 0; i < resourceIds.length; i++){\r\n\t\t\tresourceHash[resourceIds[i]] = true;\r\n\t\t}\r\n\r\n\t\tif(!resourceTaskCache[cacheKey]){\r\n\t\t\tres = resourceTaskCache[cacheKey] = [];\r\n\t\t\tgantt.eachTask(function (task) {\r\n\t\t\t\tif (resourceHash[task[property]] && task.type != gantt.config.types.project) {\r\n\t\t\t\t\tres.push(task);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tres = resourceTaskCache[cacheKey];\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\tfunction getResourceLoad(resourceId, resourceProperty, scale, timeline){\r\n\t\tvar cacheKey = [resourceId, resourceProperty, scale.unit, scale.step].join(\"_\");\r\n\t\tvar res;\r\n\t\tif(!resourceTaskCache[cacheKey]){\r\n\t\t\tres = resourceTaskCache[cacheKey] = calculateResourceLoad(resourceId, resourceProperty, scale, timeline);\r\n\r\n\t\t}else{\r\n\t\t\tres = resourceTaskCache[cacheKey];\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\tfunction calculateResourceLoad(resourceProperty, resourceId, scale, timeline) {\r\n\r\n\t\tvar tasks = getTaskBy(resourceProperty, resourceId);\r\n\t\tvar step = scale.unit;\r\n\t\tvar timegrid = {};\r\n\r\n\t\tfor (var i = 0; i < tasks.length; i++) {\r\n\t\t\tvar task = tasks[i];\r\n\r\n\t\t\tvar currDate = gantt.date[step + \"_start\"](new Date(task.start_date));\r\n\r\n\t\t\twhile (currDate < task.end_date) {\r\n\r\n\t\t\t\tvar date = currDate;\r\n\t\t\t\tcurrDate = gantt.date.add(currDate, 1, step);\r\n\r\n\t\t\t\tif (!gantt.isWorkTime({date: date, task: task, unit: step})) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar timestamp = date.valueOf();\r\n\t\t\t\tif (!timegrid[timestamp]){\r\n\t\t\t\t\ttimegrid[timestamp] = [];\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttimegrid[timestamp].push(task);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar timetable = [];\r\n\t\tvar start, end, tasks;\r\n\t\tvar config = timeline.$getConfig();\r\n\r\n\t\tfor(var i = 0; i < scale.trace_x.length; i++){\r\n\t\t\tstart = new Date(scale.trace_x[i]);\r\n\t\t\tend = gantt.date.add(start, 1, step);\r\n\t\t\ttasks = timegrid[start.valueOf()] || [];\r\n\t\t\tif(tasks.length || config.resource_render_empty_cells){\r\n\t\t\t\ttimetable.push({\r\n\t\t\t\t\tstart_date: start,\r\n\t\t\t\t\tend_date: end,\r\n\t\t\t\t\ttasks: tasks\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn timetable;\r\n\t}\r\n\r\n\tfunction renderResourceLine(resource, timeline) {\r\n\t\tvar config = timeline.$getConfig(),\r\n\t\t\ttemplates = timeline.$getTemplates();\r\n\t\tvar timetable = getResourceLoad(config.resource_property, resource.id, timeline.getScale(), timeline);\r\n\r\n\t\tvar cells = [];\r\n\t\tfor (var i = 0; i < timetable.length; i++) {\r\n\r\n\t\t\tvar day = timetable[i];\r\n\r\n\t\t\tvar css = templates.resource_cell_class(day.start_date, day.end_date, resource, day.tasks);\r\n\t\t\tvar content = templates.resource_cell_value(day.start_date, day.end_date, resource, day.tasks);\r\n\r\n\t\t\tif(css || content){\r\n\t\t\t\tvar sizes = timeline.getItemPosition(resource, day.start_date, day.end_date);\r\n\t\t\t\tvar el = document.createElement('div');\r\n\t\t\t\tel.className = [\"gantt_resource_marker\", css].join(\" \");\r\n\r\n\t\t\t\tel.style.cssText = [\r\n\t\t\t\t\t'left:' + sizes.left + 'px',\r\n\t\t\t\t\t'width:' + sizes.width + 'px',\r\n\t\t\t\t\t'height:' + (config.row_height - 1) + 'px',\r\n\t\t\t\t\t'line-height:' + (config.row_height - 1) + 'px',\r\n\t\t\t\t\t'top:' + sizes.top + 'px'\r\n\t\t\t\t].join(\";\");\r\n\r\n\t\t\t\tif(content)\r\n\t\t\t\t\tel.innerHTML = content;\r\n\r\n\t\t\t\tcells.push(el);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar row = null;\r\n\t\tif(cells.length){\r\n\t\t\trow = document.createElement(\"div\");\r\n\t\t\tfor(var i = 0; i < cells.length; i++){\r\n\t\t\t\trow.appendChild(cells[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn row;\r\n\t}\r\n\treturn {\r\n\t\trenderLine: renderResourceLine,\r\n\t\tfilterTasks: getTaskBy\r\n\t};\r\n}\r\n\r\nmodule.exports = function(gantt){\r\n\tvar methods = createResourceMethods(gantt);\r\n\r\n\tgantt.getTaskBy = methods.filterTasks;\r\n\tgantt.$ui.layers.resourceRow = methods.renderLine;\r\n\tgantt.config.resource_property = \"owner_id\";\r\n\tgantt.config.resource_store = \"resource\";\r\n\tgantt.config.resource_render_empty_cells = false;\r\n\r\n\tgantt.templates.resource_cell_class = function(start, end, resource, tasks){\r\n\t\tvar css = \"\";\r\n\t\tif (tasks.length <= 1) {\r\n\t\t\tcss = \"gantt_resource_marker_ok\";\r\n\t\t} else {\r\n\t\t\tcss = \"gantt_resource_marker_overtime\";\r\n\t\t}\r\n\t\treturn css;\r\n\t};\r\n\r\n\tgantt.templates.resource_cell_value = function(start, end, resource, tasks){\r\n\t\treturn tasks.length * 8;\r\n\t};\r\n};\r\n\r\n\r\n\n\n/***/ }),\n/* 79 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = function(gantt) {\r\n\tvar TreeDataStore = __webpack_require__(18);\r\n\r\n\tvar old_has_children = TreeDataStore.prototype.hasChild;\r\n\tgantt.$data.tasksStore.hasChild = function (id) {\r\n\t\tif (old_has_children.apply(this, arguments))\r\n\t\t\treturn true;\r\n\t\tif (this.exists(id)) {\r\n\t\t\treturn this.getItem(id)[gantt.config.branch_loading_property];\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\tfunction needLoading(id) {\r\n\t\tif (gantt.config.branch_loading && gantt._load_url) {\r\n\t\t\tvar was_rendered = gantt.getUserData(id, \"was_rendered\");\r\n\t\t\t// call ajax only if branch has children\r\n\t\t\tif (!was_rendered && (!gantt.getChildren(id).length && gantt.hasChild(id))) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onTaskOpened\", function (id) {\r\n\t\tif (gantt.config.branch_loading && gantt._load_url) {\r\n\t\t\t// call ajax only if branch has children\r\n\t\t\tif (needLoading(id)) {\r\n\t\t\t\tvar url = gantt._load_url;\r\n\t\t\t\turl = url.replace(/(\\?|&)?parent_id=.+&?/, \"\");\r\n\t\t\t\tvar param = url.indexOf(\"?\") >= 0 ? \"&\" : \"?\";\r\n\t\t\t\tvar y = gantt.getScrollState().y || 0;\r\n\r\n\t\t\t\tgantt.load(url + param + \"parent_id=\" + encodeURIComponent(id), this._load_type, function () {\r\n\t\t\t\t\tif (y) {\r\n\t\t\t\t\t\tgantt.scrollTo(null, y);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgantt.setUserData(id, \"was_rendered\", true);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n};\n\n/***/ }),\n/* 80 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Grid = __webpack_require__(8);\r\n\r\nmodule.exports = function(gantt) {\r\n\t__webpack_require__(81)(gantt);\r\n\tGrid.prototype.getGridColumns = function () {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar columns = config.columns,\r\n\t\t\tvisibleColumns = [];\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tif (!columns[i].hide)\r\n\t\t\t\tvisibleColumns.push(columns[i]);\r\n\t\t}\r\n\r\n\t\treturn visibleColumns;\r\n\t};\r\n};\n\n/***/ }),\n/* 81 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\n\tgantt.getGridColumn = function (name) {\r\n\t\tvar columns = gantt.config.columns;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tif (columns[i].name == name)\r\n\t\t\t\treturn columns[i];\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t};\r\n};\n\n/***/ }),\n/* 82 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt){\r\n\r\n\tvar htmlTags = new RegExp(\"<(?:.|\\n)*?>\", \"gm\");\r\n\tvar extraSpaces = new RegExp(\" +\", \"gm\");\r\n\r\n\tfunction stripHTMLLite(htmlText){\r\n\t\treturn (htmlText + \"\")\r\n\t\t\t.replace(htmlTags, \" \").\r\n\t\t\treplace(extraSpaces, \" \");\r\n\t}\r\n\r\n\tvar singleQuotes = new RegExp(\"'\", \"gm\");\r\n\tfunction escapeQuotes(text){\r\n\t\treturn (text + \"\").replace(singleQuotes, \"&#39;\");\r\n\t}\r\n\r\n\tgantt._waiAria = {\r\n\t\tgetAttributeString: function(attr){\r\n\t\t\tvar attributes = [\" \"];\r\n\t\t\tfor(var i in attr){\r\n\t\t\t\tvar text = escapeQuotes(stripHTMLLite(attr[i]));\r\n\t\t\t\tattributes.push(i + \"='\" + text + \"'\");\r\n\t\t\t}\r\n\t\t\tattributes.push(\" \");\r\n\t\t\treturn attributes.join(\" \");\r\n\r\n\t\t},\r\n\r\n\t\tgetTimelineCellAttr:function(dateString){\r\n\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"aria-label\": dateString});\r\n\t\t},\r\n\r\n\r\n\t\t_taskCommonAttr: function(task, div){\r\n\r\n\t\t\tif(!(task.start_date && task.end_date))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tdiv.setAttribute(\"aria-label\", stripHTMLLite(gantt.templates.tooltip_text(task.start_date, task.end_date, task)));\r\n\r\n\t\t\tif(gantt.isReadonly(task)){\r\n\t\t\t\tdiv.setAttribute(\"aria-readonly\", true);\r\n\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(task.$dataprocessor_class){\r\n\t\t\t\tdiv.setAttribute(\"aria-busy\", true);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tdiv.setAttribute(\"aria-selected\",\r\n\t\t\t\t(gantt.getState().selected_task == task.id || (gantt.isSelectedTask && gantt.isSelectedTask(task.id))) ? \"true\" : \"false\");\r\n\t\t},\r\n\r\n\t\tsetTaskBarAttr: function(task, div){\r\n\t\t\tthis._taskCommonAttr(task, div);\r\n\r\n\t\t\tif(!gantt.isReadonly(task) && gantt.config.drag_move){\r\n\t\t\t\tif(task.id != gantt.getState().drag_id){\r\n\t\t\t\t\tdiv.setAttribute(\"aria-grabbed\", false);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdiv.setAttribute(\"aria-grabbed\", true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ttaskRowAttr: function(task, div){\r\n\r\n\t\t\tthis._taskCommonAttr(task, div);\r\n\r\n\t\t\tif(!gantt.isReadonly(task) && gantt.config.order_branch){\r\n\t\t\t\tdiv.setAttribute(\"aria-grabbed\", false);\r\n\t\t\t}\r\n\r\n\t\t\tdiv.setAttribute(\"role\", \"row\");\r\n\r\n\t\t\tdiv.setAttribute(\"aria-level\", task.$level);\r\n\r\n\t\t\tif(gantt.hasChild(task.id)){\r\n\t\t\t\tdiv.setAttribute(\"aria-expanded\", task.$open ? \"true\" : \"false\");\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tlinkAttr: function(link, div){\r\n\r\n\t\t\tvar linkTypes = gantt.config.links;\r\n\r\n\t\t\tvar toStart = link.type == linkTypes.finish_to_start || link.type == linkTypes.start_to_start;\r\n\t\t\tvar fromStart = link.type == linkTypes.start_to_start || link.type == linkTypes.start_to_finish;\r\n\r\n\t\t\tvar content = gantt.locale.labels.link + \" \" +  gantt.templates.drag_link(link.source, fromStart, link.target, toStart);\r\n\r\n\t\t\tdiv.setAttribute(\"aria-label\", stripHTMLLite(content));\r\n\t\t\tif(gantt.isReadonly(link)){\r\n\t\t\t\tdiv.setAttribute(\"aria-readonly\", true);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgridSeparatorAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"separator\");\r\n\t\t},\r\n\r\n\t\tlightboxHiddenAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t},\r\n\r\n\t\tlightboxVisibleAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"false\");\r\n\t\t},\r\n\r\n\t\tlightboxAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t\tdiv.firstChild.setAttribute(\"role\", \"heading\");\r\n\t\t},\r\n\r\n\t\tlightboxButtonAttrString:function(buttonName){\r\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\":gantt.locale.labels[buttonName], \"tabindex\":\"0\"});\r\n\t\t},\r\n\r\n\t\tlightboxHeader: function(div, headerText){\r\n\t\t\tdiv.setAttribute(\"aria-label\", headerText);\r\n\t\t},\r\n\r\n\t\tlightboxSelectAttrString: function(time_option){\r\n\t\t\tvar label = \"\";\r\n\r\n\t\t\tswitch (time_option) {\r\n\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.years;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%m\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.months;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%d\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.days;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%H:%i\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.hours + gantt.locale.labels.minutes;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"aria-label\": label});\r\n\t\t},\r\n\r\n\t\tlightboxDurationInputAttrString: function(section){\r\n\t\t\treturn this.getAttributeString({\"aria-label\": gantt.locale.labels.column_duration, \"aria-valuemin\": \"0\"});\r\n\t\t},\r\n\r\n\t\tgridAttrString: function(){\r\n\t\t\treturn [\" role='treegrid'\", gantt.config.multiselect ? \"aria-multiselectable='true'\" : \"aria-multiselectable='false'\", \" \"].join(\" \");\r\n\t\t},\r\n\r\n\r\n\t\tgridScaleRowAttrString: function(){\r\n\t\t\treturn \"role='row'\";\r\n\t\t},\r\n\r\n\t\tgridScaleCellAttrString: function(column, label){\r\n\t\t\tvar attrs = \"\";\r\n\t\t\tif(column.name == \"add\"){\r\n\t\t\t\tattrs = this.getAttributeString({\"role\":\"button\", \"aria-label\": gantt.locale.labels.new_task});\r\n\t\t\t}else{\r\n\r\n\t\t\t\tvar attributes = {\r\n\t\t\t\t\t\"role\":\"columnheader\",\r\n\t\t\t\t\t\"aria-label\": label\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(gantt._sort && gantt._sort.name == column.name){\r\n\t\t\t\t\tif(gantt._sort.direction == \"asc\"){\r\n\t\t\t\t\t\tattributes[\"aria-sort\"] = \"ascending\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tattributes[\"aria-sort\"] = \"descending\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tattrs = this.getAttributeString(attributes);\r\n\t\t\t}\r\n\t\t\treturn attrs;\r\n\t\t},\r\n\r\n\t\tgridDataAttrString: function(){\r\n\t\t\treturn \"role='rowgroup'\";\r\n\t\t},\r\n\r\n\t\tgridCellAttrString: function(column, textValue){\r\n\t\t\treturn this.getAttributeString({\"role\":\"gridcell\", \"aria-label\": textValue});\r\n\t\t},\r\n\r\n\t\tgridAddButtonAttrString: function(column){\r\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\": gantt.locale.labels.new_task});\r\n\t\t},\r\n\r\n\t\tmessageButtonAttrString: function(buttonLabel){\r\n\t\t\treturn \"tabindex='0' role='button' aria-label='\"+buttonLabel+\"'\";\r\n\t\t},\r\n\r\n\t\tmessageInfoAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"alert\");\r\n\t\t\t//div.setAttribute(\"tabindex\", \"-1\");\r\n\t\t},\r\n\r\n\t\tmessageModalAttr: function(div, uid){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t\tif(uid){\r\n\t\t\t\tdiv.setAttribute(\"aria-labelledby\", uid);\r\n\t\t\t}\r\n\r\n\t\t//\tdiv.setAttribute(\"tabindex\", \"-1\");\r\n\t\t},\r\n\r\n\t\tquickInfoAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t},\r\n\r\n\t\tquickInfoHeaderAttrString: function(){\r\n\t\t\treturn \" role='heading' \";\r\n\t\t},\r\n\r\n\t\tquickInfoHeader: function(div, header){\r\n\t\t\tdiv.setAttribute(\"aria-label\", header);\r\n\t\t},\r\n\r\n\t\tquickInfoButtonAttrString: function(label){\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"role\":\"button\", \"aria-label\":label, \"tabindex\":\"0\"});\r\n\t\t},\r\n\r\n\t\ttooltipAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"tooltip\");\r\n\t\t},\r\n\r\n\t\ttooltipVisibleAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"false\");\r\n\t\t},\r\n\r\n\t\ttooltipHiddenAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t}\r\n\t};\r\n\r\n\tfunction isDisabled(){\r\n\t\treturn !gantt.config.wai_aria_attributes;\r\n\t}\r\n\r\n\tfor(var i in gantt._waiAria){\r\n\t\tgantt._waiAria[i] = (function(payload){\r\n\t\t\treturn function(){\r\n\t\t\t\tif(isDisabled()){\r\n\t\t\t\t\treturn \"\";\r\n\t\t\t\t}\r\n\t\t\t\treturn payload.apply(this, arguments);\r\n\t\t\t};\r\n\t\t})(gantt._waiAria[i]);\r\n\t}\r\n\r\n\r\n};\n\n/***/ }),\n/* 83 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\n\tgantt.isReadonly = function (item) {\r\n\t\tif (item && item[this.config.editable_property]) {\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn (item && item[this.config.readonly_property]) || this.config.readonly;\r\n\t\t}\r\n\t};\r\n};\n\n/***/ }),\n/* 84 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\nvar dateHelper = __webpack_require__(4);\r\n\r\nmodule.exports = function(gantt) {\r\n\r\n\tgantt.load = function (url, type, callback) {\r\n\t\tthis._load_url = url;\r\n\t\tthis.assert(arguments.length, \"Invalid load arguments\");\r\n\r\n\t\tvar tp = 'json', cl = null;\r\n\t\tif (arguments.length >= 3) {\r\n\t\t\ttp = type;\r\n\t\t\tcl = callback;\r\n\t\t} else {\r\n\t\t\tif (typeof arguments[1] == \"string\")\r\n\t\t\t\ttp = arguments[1];\r\n\t\t\telse if (typeof arguments[1] == \"function\")\r\n\t\t\t\tcl = arguments[1];\r\n\t\t}\r\n\r\n\t\tthis._load_type = tp;\r\n\r\n\t\tthis.callEvent(\"onLoadStart\", [url, tp]);\r\n\r\n\t\tthis.ajax.get(url, gantt.bind(function (l) {\r\n\t\t\tthis.on_load(l, tp);\r\n\t\t\tthis.callEvent(\"onLoadEnd\", [url, tp]);\r\n\t\t\tif (typeof cl == \"function\")\r\n\t\t\t\tcl.call(this);\r\n\t\t}, this));\r\n\t};\r\n\tgantt.parse = function (data, type) {\r\n\t\tthis.on_load({xmlDoc: {responseText: data}}, type);\r\n\t};\r\n\r\n\tgantt.serialize = function (type) {\r\n\t\ttype = type || \"json\";\r\n\t\treturn this[type].serialize();\r\n\t};\r\n\r\n\t/*\r\n\ttasks and relations\r\n\t{\r\n\tdata:[\r\n\t\t{\r\n\t\t\t\"id\":\"string\",\r\n\t\t\t\"text\":\"...\",\r\n\t\t\t\"start_date\":\"Date or string\",\r\n\t\t\t\"end_date\":\"Date or string\",\r\n\t\t\t\"duration\":\"number\",\r\n\t\t\t\"progress\":\"0..1\",\r\n\t\t\t\"parent_id\":\"string\",\r\n\t\t\t\"order\":\"number\"\r\n\t\t},...],\r\n\tlinks:[\r\n\t\t{\r\n\t\t\tid:\"string\",\r\n\t\t\tsource:\"string\",\r\n\t\t\ttarget:\"string\",\r\n\t\t\ttype:\"string\"\r\n\t\t},...],\r\n\tcollections:{\r\n\t\t\tcollectionName:[\r\n\t\t\t\t{key:, label:, optional:...},...\r\n\t\t\t],...\r\n\t\t}\r\n\t}\r\n\r\n\t* */\r\n\r\n\tgantt.on_load = function (resp, type) {\r\n\t\tthis.callEvent(\"onBeforeParse\", []);\r\n\t\tif (!type)\r\n\t\t\ttype = \"json\";\r\n\t\tthis.assert(this[type], \"Invalid data type:'\" + type + \"'\");\r\n\r\n\t\tvar raw = resp.xmlDoc.responseText;\r\n\r\n\t\tvar data = this[type].parse(raw, resp);\r\n\t\tthis._process_loading(data);\r\n\t};\r\n\r\n\tgantt._process_loading = function (data) {\r\n\t\tif(data.collections)\r\n\t\t\tthis._load_collections(data.collections);\r\n\r\n\t\tthis.$data.tasksStore.parse(data.data);\r\n\t\tvar links = data.links || (data.collections ? data.collections.links : []);\r\n\t\tthis.$data.linksStore.parse(links);\r\n\r\n\t\t//this._sync_links();\r\n\t\tthis.callEvent(\"onParse\", []);\r\n\t\tthis.render();\r\n\t\tif(this.config.initial_scroll){\r\n\t\t\tvar firstTask = this.getTaskByIndex(0);\r\n\t\t\tvar id = firstTask ? firstTask.id : this.config.root_id;\r\n\t\t\tif(this.isTaskExists(id))\r\n\t\t\t\tthis.showTask(id);\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt._load_collections = function (collections) {\r\n\t\tvar collections_loaded = false;\r\n\t\tfor (var key in collections) {\r\n\t\t\tif (collections.hasOwnProperty(key)) {\r\n\t\t\t\tcollections_loaded = true;\r\n\t\t\t\tvar collection = collections[key];\r\n\t\t\t\tvar arr = this.serverList[key];\r\n\t\t\t\tif (!arr) continue;\r\n\t\t\t\tarr.splice(0, arr.length); //clear old options\r\n\t\t\t\tfor (var j = 0; j < collection.length; j++) {\r\n\t\t\t\t\tvar option = collection[j];\r\n\t\t\t\t\tvar obj = this.copy(option);\r\n\t\t\t\t\tobj.key = obj.value;// resulting option object\r\n\r\n\t\t\t\t\tfor (var option_key in option) {\r\n\t\t\t\t\t\tif (option.hasOwnProperty(option_key)) {\r\n\t\t\t\t\t\t\tif (option_key == \"value\" || option_key == \"label\")\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\tobj[option_key] = option[option_key]; // obj['value'] = option['value']\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tarr.push(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (collections_loaded)\r\n\t\t\tthis.callEvent(\"onOptionsLoad\", []);\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskDisplay\", function (id, task) {\r\n\t\treturn !task.$ignore;\r\n\t});\r\n\r\n\tgantt.json = {\r\n\t\tparse: function (data) {\r\n\t\t\tgantt.assert(data, \"Invalid data\");\r\n\r\n\t\t\tif (typeof data == \"string\") {\r\n\t\t\t\tif (window.JSON)\r\n\t\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t\telse {\r\n\t\t\t\t\tgantt.assert(false, \"JSON is not supported\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (data.dhx_security)\r\n\t\t\t\tgantt.security_key = data.dhx_security;\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\tserializeTask: function (task) {\r\n\t\t\treturn this._copyObject(task);\r\n\t\t},\r\n\t\tserializeLink: function (link) {\r\n\t\t\treturn this._copyLink(link);\r\n\t\t},\r\n\t\t_copyLink: function (obj) {\r\n\t\t\tvar copy = {};\r\n\t\t\tfor (var key in obj)\r\n\t\t\t\tcopy[key] = obj[key];\r\n\t\t\treturn copy;\r\n\t\t},\r\n\t\t_copyObject: function (obj) {\r\n\t\t\tvar copy = {};\r\n\t\t\tfor (var key in obj) {\r\n\t\t\t\tif (key.charAt(0) == \"$\")\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tcopy[key] = obj[key];\r\n\r\n\t\t\t\tif (dateHelper.isDate(copy[key])) {\r\n\t\t\t\t\tcopy[key] = gantt.templates.xml_format(copy[key]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn copy;\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tvar tasks = [];\r\n\t\t\tvar links = [];\r\n\r\n\t\t\tgantt.eachTask(function (obj) {\r\n\t\t\t\tgantt.resetProjectDates(obj);\r\n\t\t\t\ttasks.push(this.serializeTask(obj));\r\n\t\t\t}, gantt.config.root_id, this);\r\n\r\n\t\t\tvar rawLinks = gantt.getLinks();\r\n\t\t\tfor (var i = 0; i < rawLinks.length; i++) {\r\n\t\t\t\tlinks.push(this.serializeLink(rawLinks[i]));\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tdata: tasks,\r\n\t\t\t\tlinks: links\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n\r\n\t/*\r\n\t<data>\r\n\t\t<task id:\"some\" parent_id=\"0\" progress=\"0.5\">\r\n\t\t\t<text>My task 1</text>\r\n\t\t\t<start_date>16.08.2013</start_date>\r\n\t\t\t<end_date>22.08.2013</end_date>\r\n\t\t</task>\r\n\t\t<coll_options>\r\n\t\t\t<links>\r\n\t\t\t\t<link source='a1' target='b2' type='c3' />\r\n\t\t\t</links>\r\n\t\t</coll_options>\r\n\t</data>\r\n\t*/\r\n\r\n\tgantt.xml = {\r\n\t\t_xmlNodeToJSON: function (node, attrs_only) {\r\n\t\t\tvar t = {};\r\n\t\t\tfor (var i = 0; i < node.attributes.length; i++)\r\n\t\t\t\tt[node.attributes[i].name] = node.attributes[i].value;\r\n\r\n\t\t\tif (!attrs_only) {\r\n\t\t\t\tfor (var i = 0; i < node.childNodes.length; i++) {\r\n\t\t\t\t\tvar child = node.childNodes[i];\r\n\t\t\t\t\tif (child.nodeType == 1)\r\n\t\t\t\t\t\tt[child.tagName] = child.firstChild ? child.firstChild.nodeValue : \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!t.text) t.text = node.firstChild ? node.firstChild.nodeValue : \"\";\r\n\t\t\t}\r\n\r\n\t\t\treturn t;\r\n\t\t},\r\n\t\t_getCollections: function (loader) {\r\n\t\t\tvar collection = {};\r\n\t\t\tvar opts = gantt.ajax.xpath(\"//coll_options\", loader);\r\n\t\t\tfor (var i = 0; i < opts.length; i++) {\r\n\t\t\t\tvar bind = opts[i].getAttribute(\"for\");\r\n\t\t\t\tvar arr = collection[bind] = [];\r\n\t\t\t\tvar itms = gantt.ajax.xpath(\".//item\", opts[i]);\r\n\t\t\t\tfor (var j = 0; j < itms.length; j++) {\r\n\t\t\t\t\tvar itm = itms[j];\r\n\t\t\t\t\tvar attrs = itm.attributes;\r\n\t\t\t\t\tvar obj = {key: itms[j].getAttribute(\"value\"), label: itms[j].getAttribute(\"label\")};\r\n\t\t\t\t\tfor (var k = 0; k < attrs.length; k++) {\r\n\t\t\t\t\t\tvar attr = attrs[k];\r\n\t\t\t\t\t\tif (attr.nodeName == \"value\" || attr.nodeName == \"label\")\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\tobj[attr.nodeName] = attr.nodeValue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tarr.push(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn collection;\r\n\t\t},\r\n\t\t_getXML: function (text, loader, toptag) {\r\n\t\t\ttoptag = toptag || \"data\";\r\n\t\t\tif (!loader.getXMLTopNode) {\r\n\t\t\t\tloader = gantt.ajax.parse(loader);\r\n\t\t\t}\r\n\r\n\t\t\tvar xml = gantt.ajax.xmltop(toptag, loader.xmlDoc);\r\n\t\t\tif (!xml || xml.tagName != toptag) throw \"Invalid XML data\";\r\n\r\n\t\t\tvar skey = xml.getAttribute(\"dhx_security\");\r\n\t\t\tif (skey)\r\n\t\t\t\tgantt.security_key = skey;\r\n\r\n\t\t\treturn xml;\r\n\t\t},\r\n\t\tparse: function (text, loader) {\r\n\t\t\tloader = this._getXML(text, loader);\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tvar evs = data.data = [];\r\n\t\t\tvar xml = gantt.ajax.xpath(\"//task\", loader);\r\n\r\n\t\t\tfor (var i = 0; i < xml.length; i++)\r\n\t\t\t\tevs[i] = this._xmlNodeToJSON(xml[i]);\r\n\r\n\t\t\tdata.collections = this._getCollections(loader);\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\t_copyLink: function (obj) {\r\n\t\t\treturn \"<item id='\" + obj.id + \"' source='\" + obj.source + \"' target='\" + obj.target + \"' type='\" + obj.type + \"' />\";\r\n\t\t},\r\n\t\t_copyObject: function (obj) {\r\n\t\t\treturn \"<task id='\" + obj.id + \"' parent='\" + (obj.parent || \"\") + \"' start_date='\" + obj.start_date + \"' duration='\" + obj.duration + \"' open='\" + (!!obj.open) + \"' progress='\" + obj.progress + \"' end_date='\" + obj.end_date + \"'><![CDATA[\" + obj.text + \"]]></task>\";\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tvar tasks = [];\r\n\t\t\tvar links = [];\r\n\r\n\t\t\tvar json = gantt.json.serialize();\r\n\t\t\tfor (var i = 0, len = json.data.length; i < len; i++) {\r\n\t\t\t\ttasks.push(this._copyObject(json.data[i]));\r\n\t\t\t}\r\n\t\t\tfor (var i = 0, len = json.links.length; i < len; i++) {\r\n\t\t\t\tlinks.push(this._copyLink(json.links[i]));\r\n\t\t\t}\r\n\t\t\treturn \"<data>\" + tasks.join(\"\") + \"<coll_options for='links'>\" + links.join(\"\") + \"</coll_options></data>\";\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt.oldxml = {\r\n\t\tparse: function (text, loader) {\r\n\t\t\tloader = gantt.xml._getXML(text, loader, \"projects\");\r\n\t\t\tvar data = {collections: {links: []}};\r\n\r\n\t\t\tvar evs = data.data = [];\r\n\t\t\tvar xml = gantt.ajax.xpath(\"//task\", loader);\r\n\r\n\t\t\tfor (var i = 0; i < xml.length; i++) {\r\n\t\t\t\tevs[i] = gantt.xml._xmlNodeToJSON(xml[i]);\r\n\t\t\t\tvar parent = xml[i].parentNode;\r\n\r\n\t\t\t\tif (parent.tagName == \"project\")\r\n\t\t\t\t\tevs[i].parent = \"project-\" + parent.getAttribute(\"id\");\r\n\t\t\t\telse\r\n\t\t\t\t\tevs[i].parent = parent.parentNode.getAttribute(\"id\");\r\n\t\t\t}\r\n\r\n\t\t\txml = gantt.ajax.xpath(\"//project\", loader);\r\n\t\t\tfor (var i = 0; i < xml.length; i++) {\r\n\t\t\t\tvar ev = gantt.xml._xmlNodeToJSON(xml[i], true);\r\n\t\t\t\tev.id = \"project-\" + ev.id;\r\n\t\t\t\tevs.push(ev);\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < evs.length; i++) {\r\n\t\t\t\tvar ev = evs[i];\r\n\t\t\t\tev.start_date = ev.startdate || ev.est;\r\n\t\t\t\tev.end_date = ev.enddate;\r\n\t\t\t\tev.text = ev.name;\r\n\t\t\t\tev.duration = ev.duration / 8;\r\n\t\t\t\tev.open = 1;\r\n\t\t\t\tif (!ev.duration && !ev.end_date) ev.duration = 1;\r\n\t\t\t\tif (ev.predecessortasks)\r\n\t\t\t\t\tdata.collections.links.push({\r\n\t\t\t\t\t\ttarget: ev.id,\r\n\t\t\t\t\t\tsource: ev.predecessortasks,\r\n\t\t\t\t\t\ttype: gantt.config.links.finish_to_start\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tgantt.message(\"Serialization to 'old XML' is not implemented\");\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.serverList = function (name, array) {\r\n\t\tif (array) {\r\n\t\t\tthis.serverList[name] = array.slice(0);\r\n\t\t} else if (!this.serverList[name]) {\r\n\t\t\tthis.serverList[name] = [];\r\n\t\t}\r\n\t\treturn this.serverList[name];\r\n\t};\r\n\r\n};\n\n/***/ }),\n/* 85 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar CalendarManager = __webpack_require__(86),\r\n\tTimeCalculator = __webpack_require__(89),\r\n\tworktimeFacadeFactory = __webpack_require__(91),\r\n\tutils = __webpack_require__(0);\r\n\r\nmodule.exports = function (gantt) {\r\n\tvar manager = new CalendarManager(gantt),\r\n\ttimeCalculator = new TimeCalculator(manager);\r\n\tvar facade = worktimeFacadeFactory.create(manager, timeCalculator);\r\n\tutils.mixin(gantt, facade);\r\n};\r\n\n\n/***/ }),\n/* 86 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar utils = __webpack_require__(0);\r\nvar createArgumentsHelper = __webpack_require__(21);\r\nvar CalendarWorktimeStrategy = __webpack_require__(87);\r\n\r\nfunction CalendarManager (gantt){\r\n\tthis.$gantt = gantt;\r\n\tthis._calendars = {};\r\n}\r\n\r\nCalendarManager.prototype = {\r\n\t_calendars: {},\r\n\t_getDayHoursForMultiple: function (calendars, date) {\r\n\t\tvar units = [],\r\n\t\t\ttick = true,\r\n\t\t\tcurrPos = 0,\r\n\t\t\tis_work_hour = false,\r\n\t\t\tstart = this.$gantt.date.day_start(new Date(date));\r\n\t\tfor (var hour = 0; hour < 24; hour++) {\r\n\t\t\tis_work_hour = calendars.reduce(function (acc, calendar) {\r\n\t\t\t\treturn acc && calendar._is_work_hour(start);\r\n\t\t\t}, true);\r\n\t\t\tif (is_work_hour) {\r\n\t\t\t\tif (tick) {\r\n\t\t\t\t\tunits[currPos] = hour;\r\n\t\t\t\t\tunits[currPos + 1] = (hour + 1);\r\n\t\t\t\t\tcurrPos += 2;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tunits[currPos - 1] += 1;\r\n\t\t\t\t}\r\n\t\t\t\ttick = false;\r\n\t\t\t} else if (!tick) {\r\n\t\t\t\ttick = true;\r\n\t\t\t}\r\n\t\t\tstart = this.$gantt.date.add(start, 1, \"hour\");\r\n\t\t}\r\n\t\tif (!units.length)\r\n\t\t\tunits = false;\r\n\t\treturn units;\r\n\t},\r\n\tmergeCalendars: function () {\r\n\t\tvar newCalendar = this.createCalendar(),\r\n\t\t\tday,\r\n\t\t\tunits = [];\r\n\t\tvar calendars = Array.prototype.slice.call(arguments, 0);\r\n\t\tnewCalendar.worktime.hours = [0, 24];\r\n\t\tnewCalendar.worktime.dates = {};\r\n\t\tvar start = this.$gantt.date.day_start(new Date(259200000)); // 1970 day=0\r\n\t\tfor (day = 0; day < 7; day++) {\r\n\t\t\tunits = this._getDayHoursForMultiple(calendars, start);\r\n\t\t\tnewCalendar.worktime.dates[day] = units;\r\n\t\t\tstart = this.$gantt.date.add(start, 1, \"day\");\r\n\t\t}\r\n\t\tfor (var i = 0; i < calendars.length; i++) {\r\n\t\t\tfor (var value in calendars[i].worktime.dates) if (+value > 10000) {\r\n\t\t\t\tunits = this._getDayHoursForMultiple(calendars, new Date(+value));\r\n\t\t\t\tnewCalendar.worktime.dates[value] = units;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn newCalendar;\r\n\t},\r\n\r\n\t_convertWorktimeSettings: function (settings) {\r\n\t\tvar days = settings.days;\r\n\t\tif (days) {\r\n\t\t\tsettings.dates = settings.dates || {};\r\n\t\t\tfor (var i = 0; i < days.length; i++) {\r\n\t\t\t\tsettings.dates[i] = days[i];\r\n\t\t\t\tif (!(days[i] instanceof Array)) {\r\n\t\t\t\t\tsettings.dates[i] = !!days[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdelete settings.days;\r\n\t\t}\r\n\t\treturn settings;\r\n\t},\r\n\r\n\tcreateCalendar: function (parentCalendar) {\r\n\t\tvar settings;\r\n\r\n\t\tif (!parentCalendar) {\r\n\t\t\tparentCalendar = {};\r\n\t\t}\r\n\r\n\t\tif (parentCalendar.worktime) {\r\n\t\t\tsettings = utils.copy(parentCalendar.worktime);\r\n\t\t} else {\r\n\t\t\tsettings = utils.copy(parentCalendar);\r\n\t\t}\r\n\r\n\t\tvar defaults = utils.copy(this.defaults.fulltime.worktime);\r\n\t\tutils.mixin(settings, defaults);\r\n\r\n\t\tvar id = utils.uid();\r\n\t\tvar calendar = {\r\n\t\t\tid: id + \"\",\r\n\t\t\tworktime: this._convertWorktimeSettings(settings)\r\n\t\t};\r\n\r\n\t\tvar apiCore = new CalendarWorktimeStrategy(this.$gantt, createArgumentsHelper(this.$gantt));\r\n\t\tutils.mixin(apiCore, calendar);\r\n\r\n\t\t// validate/check if empty calendar\r\n\t\tif (!apiCore._tryChangeCalendarSettings(function () {\r\n\t\t\t})) {\r\n\t\t\treturn null;\r\n\t\t} else {\r\n\t\t\treturn apiCore;\r\n\t\t}\r\n\t},\r\n\r\n\tgetCalendar: function (id) {\r\n\t\tid = id || \"global\";\r\n\t\tthis.createDefaultCalendars();\r\n\t\treturn this._calendars[id];\r\n\t},\r\n\r\n\tgetCalendars: function () {\r\n\t\tvar res = [];\r\n\t\tfor (var i in this._calendars) {\r\n\t\t\tres.push(this.getCalendar(i));\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\r\n\tgetTaskCalendar: function (task) {\r\n\t\tvar config = this.$gantt.$services.config();\r\n\t\tif (!task) {\r\n\t\t\treturn this.getCalendar();\r\n\t\t} else if (task[config.calendar_property]) {\r\n\t\t\treturn this.getCalendar(task[config.calendar_property]);\r\n\t\t} else if (config.resource_calendars) {\r\n\r\n\t\t\tfor (var field in config.resource_calendars) {\r\n\t\t\t\tvar resource = config.resource_calendars[field];\r\n\t\t\t\tif (task[field]) {\r\n\t\t\t\t\tvar calendarId = resource[task[field]];\r\n\t\t\t\t\tif (calendarId) {\r\n\t\t\t\t\t\treturn this.getCalendar(calendarId);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this.getCalendar();\r\n\t},\r\n\r\n\taddCalendar: function (calendar) { // puts new calendar to Global Storage - gantt.calendarManager._calendars {}\r\n\t\tif (!(calendar instanceof CalendarWorktimeStrategy)) {\r\n\t\t\tvar id = calendar.id;\r\n\t\t\tcalendar = this.createCalendar(calendar);\r\n\t\t\tcalendar.id = id;\r\n\t\t}\r\n\t\tvar config = this.$gantt.$services.config();\r\n\r\n\t\tcalendar.id = calendar.id || utils.uid();\r\n\t\tthis._calendars[calendar.id] = calendar;\r\n\t\tif (!config.worktimes)\r\n\t\t\tconfig.worktimes = {};\r\n\t\tconfig.worktimes[calendar.id] = calendar.worktime;\r\n\t\treturn calendar.id;\r\n\t},\r\n\r\n\tdeleteCalendar: function (calendar) {\r\n\t\tvar config = this.$gantt.$services.config();\r\n\t\tif (!calendar) return false;\r\n\t\tif (this._calendars[calendar]) {\r\n\t\t\tdelete this._calendars[calendar];\r\n\t\t\tif (config.worktimes && config.worktimes[calendar])\r\n\t\t\t\tdelete config.worktimes[calendar];\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\t},\r\n\r\n\trestoreConfigCalendars: function (configs) {\r\n\t\tfor (var i in configs) {\r\n\t\t\tif (this._calendars[i])\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar settings = configs[i];\r\n\t\t\tvar calendar = this.createCalendar(settings);\r\n\t\t\tcalendar.id = i;\r\n\t\t\tthis.addCalendar(calendar);\r\n\t\t}\r\n\t},\r\n\r\n\tdefaults: {\r\n\t\tglobal: {\r\n\t\t\tid: \"global\",\r\n\t\t\tworktime: {\r\n\t\t\t\thours: [8, 17],\r\n\t\t\t\tdays: [0, 1, 1, 1, 1, 1, 0]\r\n\t\t\t}\r\n\t\t},\r\n\t\tfulltime: {\r\n\t\t\tid: \"fulltime\",\r\n\t\t\tworktime: {\r\n\t\t\t\thours: [0, 24],\r\n\t\t\t\tdays: [1, 1, 1, 1, 1, 1, 1]\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tcreateDefaultCalendars: function () {\r\n\t\tvar config = this.$gantt.$services.config();\r\n\t\tthis.restoreConfigCalendars(this.defaults);\r\n\t\tthis.restoreConfigCalendars(config.worktimes);\r\n\t}\r\n};\r\n\r\nmodule.exports = CalendarManager;\n\n/***/ }),\n/* 87 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Cache = __webpack_require__(88),\r\n\tutils = __webpack_require__(0);\r\n\r\nfunction CalendarWorkTimeStrategy(gantt, argumentsHelper){\r\n\tthis.argumentsHelper = argumentsHelper;\r\n\tthis.$gantt = gantt;\r\n\tthis._workingUnitsCache = new Cache();\r\n}\r\n\r\nCalendarWorkTimeStrategy.prototype = {\r\n\tunits: [\r\n\t\t\"year\",\r\n\t\t\"month\",\r\n\t\t\"week\",\r\n\t\t\"day\",\r\n\t\t\"hour\",\r\n\t\t\"minute\"\r\n\t],\r\n\t// cache previously calculated worktime\r\n\t_getUnitOrder: function (unit) {\r\n\t\tfor (var i = 0, len = this.units.length; i < len; i++) {\r\n\t\t\tif (this.units[i] == unit)\r\n\t\t\t\treturn i;\r\n\t\t}\r\n\t},\r\n\t_timestamp: function (settings) {\r\n\r\n\t\tvar timestamp = null;\r\n\t\tif ((settings.day || settings.day === 0)) {\r\n\t\t\ttimestamp = settings.day;\r\n\t\t} else if (settings.date) {\r\n\t\t\t// store worktime datestamp in utc so it could be recognized in different timezones (e.g. opened locally and sent to the export service in different timezone)\r\n\t\t\ttimestamp = Date.UTC(settings.date.getFullYear(), settings.date.getMonth(), settings.date.getDate());\r\n\t\t}\r\n\t\treturn timestamp;\r\n\t},\r\n\t_checkIfWorkingUnit: function (date, unit, order) {\r\n\t\tif (order === undefined) {\r\n\t\t\torder = this._getUnitOrder(unit);\r\n\t\t}\r\n\r\n\t\t// disable worktime check for custom time units\r\n\t\tif (order === undefined) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (order) {\r\n\t\t\t//check if bigger time unit is a work time (hour < day < month...)\r\n\t\t\t//i.e. don't check particular hour if the whole day is marked as not working\r\n\t\t\tif (!this._isWorkTime(date, this.units[order - 1], order - 1))\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t\tif (!this[\"_is_work_\" + unit])\r\n\t\t\treturn true;\r\n\t\treturn this[\"_is_work_\" + unit](date);\r\n\t},\r\n\t//checkings for particular time units\r\n\t//methods for month-year-week can be defined, otherwise always return 'true'\r\n\t_is_work_day: function (date) {\r\n\t\tvar val = this._getWorkHours(date);\r\n\r\n\t\tif (val instanceof Array) {\r\n\t\t\treturn val.length > 0;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t_is_work_hour: function (date) {\r\n\t\tvar hours = this._getWorkHours(date); // [7,12] or []\r\n\t\tvar hour = date.getHours();\r\n\t\tfor (var i = 0; i < hours.length; i += 2) {\r\n\t\t\tif (hours[i + 1] === undefined) {\r\n\t\t\t\treturn hours[i] == hour;\r\n\t\t\t} else {\r\n\t\t\t\tif (hour >= hours[i] && hour < hours[i + 1])\r\n\t\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t_internDatesPull: {},\r\n\t_nextDate: function (start, unit, step) {\r\n\t\tvar dateHelper = this.$gantt.date;\r\n\t\treturn dateHelper.add(start, step, unit);\r\n\r\n\t\t/*var start_value = +start,\r\n\t\t\tkey = unit + \"_\" + step;\r\n\t\tvar interned = this._internDatesPull[key];\r\n\t\tif(!interned){\r\n\t\t\tinterned = this._internDatesPull[key] = {};\r\n\t\t}\r\n\t\tvar calculated;\r\n\t\tif(!interned[start_value]){\r\n\t\t\tinterned[start_value] = calculated = dateHelper.add(start, step, unit);\r\n\t\t\t//interned[start_value] = dateHelper.add(start, step, unit);\r\n\t\t}\r\n\t\treturn calculated || interned[start_value];*/\r\n\t},\r\n\t_getWorkUnitsBetweenGeneric: function (from, to, unit, step) {\r\n\t\tvar dateHelper = this.$gantt.date;\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\t\tvar units = 0;\r\n\r\n\r\n\t\tvar next = null;\r\n\t\tvar stepStart,\r\n\t\t\tstepEnd;\r\n\r\n\t\t// calculating decimal durations, i.e. 2016-09-20 00:05:00 - 2016-09-20 01:00:00 ~ 0.95 instead of 1\r\n\t\t// and also  2016-09-20 00:00:00 - 2016-09-20 00:05:00 ~ 0.05 instead of 1\r\n\t\t// durations must be rounded later\r\n\t\tvar checkFirst = false;\r\n\t\tstepStart = dateHelper[unit + \"_start\"](new Date(start));\r\n\t\tif (stepStart.valueOf() != start.valueOf()) {\r\n\t\t\tcheckFirst = true;\r\n\t\t}\r\n\t\tvar checkLast = false;\r\n\t\tstepEnd = dateHelper[unit + \"_start\"](new Date(to));\r\n\t\tif (stepEnd.valueOf() != to.valueOf()) {\r\n\t\t\tcheckLast = true;\r\n\t\t}\r\n\r\n\t\tvar isLastStep = false;\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tnext = this._nextDate(start, unit, step);\r\n\t\t\tisLastStep = (next.valueOf() > end.valueOf());\r\n\r\n\t\t\tif (this._isWorkTime(start, unit)) {\r\n\t\t\t\tif (checkFirst || (checkLast && isLastStep)) {\r\n\t\t\t\t\tstepStart = dateHelper[unit + \"_start\"](new Date(start));\r\n\t\t\t\t\tstepEnd = dateHelper.add(stepStart, step, unit);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (checkFirst) {\r\n\t\t\t\t\tcheckFirst = false;\r\n\t\t\t\t\tnext = this._nextDate(stepStart, unit, step);\r\n\t\t\t\t\tunits += ((stepEnd.valueOf() - start.valueOf()) / (stepEnd.valueOf() - stepStart.valueOf()));\r\n\t\t\t\t} else if (checkLast && isLastStep) {\r\n\t\t\t\t\tcheckLast = false;\r\n\t\t\t\t\tunits += ((end.valueOf() - start.valueOf()) / (stepEnd.valueOf() - stepStart.valueOf()));\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tunits++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tstart = next;\r\n\t\t}\r\n\t\treturn units;\r\n\t},\r\n\t_getHoursPerDay: function (date) {\r\n\t\tvar hours = this._getWorkHours(date);\r\n\t\tvar res = 0;\r\n\t\tfor (var i = 0; i < hours.length; i += 2) {\r\n\t\t\tres += ((hours[i + 1] - hours[i]) || 0);\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\t_getWorkHoursForRange: function (from, to) {\r\n\t\tvar hours = 0;\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tif (this._isWorkTime(start, \"day\"))\r\n\t\t\t\thours += this._getHoursPerDay(start);\r\n\t\t\tstart = this._nextDate(start, \"day\", 1);\r\n\t\t}\r\n\t\treturn hours;\r\n\t},\r\n\t_getWorkUnitsBetweenHours: function (from, to, unit, step) {\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\r\n\t\tvar firstDayStart = new Date(start);\r\n\t\tvar firstDayEnd = this.$gantt.date.add(this.$gantt.date.day_start(new Date(start)), 1, \"day\");\r\n\r\n\t\tif (end.valueOf() <= firstDayEnd.valueOf()) {\r\n\t\t\treturn this._getWorkUnitsBetweenGeneric(from, to, unit, step);\r\n\t\t} else {\r\n\r\n\t\t\tvar lastDayStart = this.$gantt.date.day_start(new Date(end));\r\n\t\t\tvar lastDayEnd = end;\r\n\r\n\t\t\tvar startPart = this._getWorkUnitsBetweenGeneric(firstDayStart, firstDayEnd, unit, step);\r\n\t\t\tvar endPart = this._getWorkUnitsBetweenGeneric(lastDayStart, lastDayEnd, unit, step);\r\n\r\n\t\t\tvar hourRange = this._getWorkHoursForRange(firstDayEnd, lastDayStart);\r\n\t\t\thourRange = ((hourRange / step) + startPart + endPart);\r\n\r\n\t\t\treturn hourRange;\r\n\t\t}\r\n\t},\r\n\r\n\t_getCalendar: function () {\r\n\t\treturn this.worktime;\r\n\t},\r\n\t_setCalendar: function (settings) {\r\n\t\tthis.worktime = settings;\r\n\t},\r\n\r\n\t_tryChangeCalendarSettings: function (payload) {\r\n\t\tvar backup = JSON.stringify(this._getCalendar());\r\n\t\tpayload();\r\n\t\tif (this._isEmptyCalendar(this._getCalendar())) {\r\n\t\t\tthis.$gantt.assert(false, \"Invalid calendar settings, no worktime available\");\r\n\t\t\tthis._setCalendar(JSON.parse(backup));\r\n\t\t\tthis._workingUnitsCache.clear();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\t_isEmptyCalendar: function (settings) {\r\n\t\tvar result = false,\r\n\t\t\tdatesArray = [],\r\n\t\t\tisFullWeekSet = true;\r\n\t\tfor (var i in settings.dates) {\r\n\t\t\tresult |= !!settings.dates[i];\r\n\t\t\tdatesArray.push(i);\r\n\t\t}\r\n\r\n\t\tvar checkFullArray = [];\r\n\t\tfor (var i = 0; i < datesArray.length; i++) {\r\n\t\t\tif (datesArray[i] < 10) {\r\n\t\t\t\tcheckFullArray.push(datesArray[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcheckFullArray.sort();\r\n\r\n\t\tfor (var i = 0; i < 7; i++) {\r\n\t\t\tif (checkFullArray[i] != i)\r\n\t\t\t\tisFullWeekSet = false;\r\n\t\t}\r\n\t\tif (isFullWeekSet)\r\n\t\t\treturn !result;\r\n\t\treturn !(result || !!settings.hours); // can still return false if separated dates are set to true\r\n\t},\r\n\r\n\tgetWorkHours: function () {\r\n\t\tvar config = this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper, arguments);\r\n\t\treturn this._getWorkHours(config.date);\r\n\t},\r\n\t_getWorkHours: function (date) {\r\n\t\tvar t = this._timestamp({date: date});\r\n\t\tvar hours = true;\r\n\t\tvar calendar = this._getCalendar();\r\n\t\tif (calendar.dates[t] !== undefined) {\r\n\t\t\thours = calendar.dates[t];//custom day\r\n\t\t} else if (calendar.dates[date.getDay()] !== undefined) {\r\n\t\t\thours = calendar.dates[date.getDay()];//week day\r\n\t\t}\r\n\t\tif (hours === true) {\r\n\t\t\treturn calendar.hours;\r\n\t\t} else if (hours) {\r\n\t\t\treturn hours;\r\n\t\t}\r\n\t\treturn [];\r\n\t},\r\n\r\n\tsetWorkTime: function (settings) {\r\n\t\treturn this._tryChangeCalendarSettings(utils.bind(function () {\r\n\t\t\tvar hours = settings.hours !== undefined ? settings.hours : true;\r\n\t\t\tvar timestamp = this._timestamp(settings);\r\n\t\t\tif (timestamp !== null) {\r\n\t\t\t\tthis._getCalendar().dates[timestamp] = hours;\r\n\t\t\t} else {\r\n\t\t\t\tthis._getCalendar().hours = hours;\r\n\t\t\t}\r\n\t\t\tthis._workingUnitsCache.clear();\r\n\t\t}, this));\r\n\t},\r\n\r\n\tunsetWorkTime: function (settings) {\r\n\t\treturn this._tryChangeCalendarSettings(utils.bind(function () {\r\n\t\t\tif (!settings) {\r\n\t\t\t\tthis.reset_calendar();\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar timestamp = this._timestamp(settings);\r\n\r\n\t\t\t\tif (timestamp !== null) {\r\n\t\t\t\t\tdelete this._getCalendar().dates[timestamp];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// Clear work units cache\r\n\t\t\tthis._workingUnitsCache.clear();\r\n\t\t}, this));\r\n\t},\r\n\r\n\t_isWorkTime: function (date, unit, order) {\r\n\t\t//Check if this item has in the cache\r\n\t\tvar is_work_unit = this._workingUnitsCache.get(unit, date);\r\n\r\n\t\tif (is_work_unit == -1) {\r\n\t\t\t// calculate if not cached\r\n\t\t\tis_work_unit = this._checkIfWorkingUnit(date, unit, order);\r\n\t\t\tthis._workingUnitsCache.put(unit, date, is_work_unit);\r\n\t\t}\r\n\r\n\t\treturn is_work_unit;\r\n\t},\r\n\r\n\tisWorkTime: function () {\r\n\t\tvar config =  this.argumentsHelper.isWorkTimeArguments.apply( this.argumentsHelper, arguments);\r\n\t\treturn this._isWorkTime(config.date, config.unit);\r\n\t},\r\n\r\n\tcalculateDuration: function () {\r\n\t\tvar config =  this.argumentsHelper.getDurationArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tif (!config.unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar res = 0;\r\n\t\tif (config.unit == \"hour\") {\r\n\t\t\tres = this._getWorkUnitsBetweenHours(config.start_date, config.end_date, config.unit, config.step);\r\n\t\t} else {\r\n\t\t\tres = this._getWorkUnitsBetweenGeneric(config.start_date, config.end_date, config.unit, config.step);\r\n\t\t}\r\n\r\n\t\t// getDuration.. returns decimal durations\r\n\t\treturn Math.round(res);\r\n\t},\r\n\thasDuration: function () {\r\n\t\tvar config =  this.argumentsHelper.getDurationArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\tif (!unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tif (this._isWorkTime(start, unit))\r\n\t\t\t\treturn true;\r\n\t\t\tstart = this._nextDate(start, unit, step);\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\tcalculateEndDate: function () {\r\n\t\tvar config =  this.argumentsHelper.calculateEndDateArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tvar from = config.start_date,\r\n\t\t\tduration = config.duration,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\tvar mult = (config.duration >= 0) ? 1 : -1;\r\n\t\treturn this._calculateEndDate(from, duration, unit, step * mult);\r\n\t},\r\n\t_calculateEndDate: function (from, duration, unit, step) {\r\n\t\tif (!unit)\r\n\t\t\treturn false;\r\n\r\n\t\tvar start = new Date(from),\r\n\t\t\tadded = 0;\r\n\t\tstep = step || 1;\r\n\t\tduration = Math.abs(duration * 1);\r\n\r\n\t\twhile (added < duration) {\r\n\t\t\tvar next = this._nextDate(start, unit, step);\r\n\t\t\t//if(this.isWorkTime(step > 0 ? start : next, unit))\r\n\t\t\tif (this._isWorkTime(step > 0 ? new Date(next.valueOf() - 1) : new Date(next.valueOf() + 1), unit))\r\n\t\t\t\tadded++;\r\n\t\t\tstart = next;\r\n\t\t}\r\n\t\treturn start;\r\n\t},\r\n\r\n\tgetClosestWorkTime: function () {\r\n\t\tvar config =  this.argumentsHelper.getClosestWorkTimeArguments.apply( this.argumentsHelper, arguments);\r\n\t\treturn this._getClosestWorkTime(config);\r\n\t},\r\n\r\n\t_getClosestWorkTime: function (settings) {\r\n\t\tif (this._isWorkTime(settings.date, settings.unit))\r\n\t\t\treturn settings.date;\r\n\r\n\t\tvar unit = settings.unit;\r\n\r\n\t\tvar curr = this.$gantt.date[unit + '_start'](settings.date);\r\n\r\n\t\tvar future_target = new Date(curr),\r\n\t\t\tprev_target = new Date(curr),\r\n\t\t\ttick = true,\r\n\t\t\tmaximum_loop = 3000,//be extra sure we won't fall into infinite loop, 3k seems big enough\r\n\t\t\tcount = 0,\r\n\t\t\tboth_directins = (settings.dir == 'any' || !settings.dir);\r\n\r\n\t\tvar inc = 1;\r\n\t\tif (settings.dir == 'past')\r\n\t\t\tinc = -1;\r\n\r\n\t\tvar unitOrder = this._getUnitOrder(unit),\r\n\t\t\tbiggerTimeUnit = this.units[unitOrder - 1];\r\n\r\n\t\t//will seek closest working hour in future or in past, one step in one direction per iteration\r\n\t\twhile (!this._isWorkTime(curr, unit)) {\r\n\r\n\t\t\tif(biggerTimeUnit && !this._isWorkTime(curr, biggerTimeUnit)){\r\n\t\t\t\t// no need to check every hour/minute if we know that the whole day is not working\r\n\t\t\t\tvar biggerTimeUnitSettings = this.$gantt.copy(settings);\r\n\t\t\t\tbiggerTimeUnitSettings.date = curr;\r\n\t\t\t\tbiggerTimeUnitSettings.unit = biggerTimeUnit;\r\n\r\n\t\t\t\tcurr = this._getClosestWorkTime(biggerTimeUnitSettings);\r\n\t\t\t}\r\n\r\n\t\t\tif (both_directins) {\r\n\t\t\t\tcurr = tick ? future_target : prev_target;\r\n\t\t\t\tinc = inc * (-1);\r\n\t\t\t}\r\n\t\t\tvar tzOffset = curr.getTimezoneOffset();\r\n\t\t\tcurr = this.$gantt.date.add(curr, inc, unit);\r\n\r\n\t\t\tcurr = this.$gantt._correct_dst_change(curr, tzOffset, inc, unit);\r\n\t\t\tif (this.$gantt.date[unit + '_start'])\r\n\t\t\t\tcurr = this.$gantt.date[unit + '_start'](curr);\r\n\r\n\t\t\tif (both_directins) {\r\n\t\t\t\tif (tick) {\r\n\t\t\t\t\tfuture_target = curr;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tprev_target = curr;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttick = !tick;\r\n\t\t\tcount++;\r\n\t\t\tif (count > maximum_loop) {\r\n\t\t\t\tthis.$gantt.assert(false, \"Invalid working time check\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (curr == prev_target || settings.dir == 'past') {\r\n\t\t\tcurr = this.$gantt.date.add(curr, 1, unit);\r\n\t\t}\r\n\r\n\t\treturn curr;\r\n\t}\r\n};\r\n\r\nmodule.exports = CalendarWorkTimeStrategy;\n\n/***/ }),\n/* 88 */\n/***/ (function(module, exports) {\n\nfunction WorkUnitsCache() {\r\n\tthis._cache = {};\r\n}\r\n\r\nWorkUnitsCache.prototype = {\r\n\t// cache previously calculated worktime\r\n\tget: function (unit, date) {\r\n\t\tvar result = -1;// default value (if not existed in the cache)\r\n\r\n\t\tvar cache = this._cache;\r\n\t\tif (cache && cache[unit]) {\r\n\t\t\tvar units = cache[unit];\r\n\t\t\tvar time = date.getTime();\r\n\t\t\tif (units[time] !== undefined)\r\n\t\t\t\tresult = units[time];\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\r\n\tput: function (unit, date, value) {\r\n\t\tif (!unit || !date) return false;\r\n\r\n\t\tvar cache = this._cache;\r\n\r\n\t\tvar time = date.getTime();\r\n\r\n\t\tvalue = !!value;\r\n\r\n\t\tif (!cache) return false;\r\n\t\tif (!cache[unit]) cache[unit] = {};\r\n\t\tcache[unit][time] = value;\r\n\t\treturn true;\r\n\t},\r\n\r\n\tclear: function () {\r\n\t\tthis._cache = {};\r\n\t}\r\n};\r\n\r\nmodule.exports = WorkUnitsCache;\n\n/***/ }),\n/* 89 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar createArgumentsHelper = __webpack_require__(21),\r\n\tNoWorkTimeCalendar = __webpack_require__(90);\r\n\r\nfunction TimeCalculator(calendarManager){\r\n\r\n\tthis.$gantt = calendarManager.$gantt;\r\n\tthis.argumentsHelper = createArgumentsHelper(this.$gantt);\r\n\tthis.calendarManager = calendarManager;\r\n\tthis.$disabledCalendar = new NoWorkTimeCalendar(this.$gantt, this.argumentsHelper);\r\n}\r\n\r\nTimeCalculator.prototype = {\r\n\t_getCalendar: function (config) {\r\n\t\tvar calendar;\r\n\t\tif (!this.$gantt.$services.config().work_time) {\r\n\t\t\tcalendar = this.$disabledCalendar;\r\n\t\t} else {\r\n\t\t\tvar manager = this.calendarManager;\r\n\t\t\tif (config.task) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar(config.task);\r\n\t\t\t} else if (config.id) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar(config);\r\n\t\t\t} else if (config.calendar) {\r\n\t\t\t\tcalendar = config.calendar;\r\n\t\t\t}\r\n\t\t\tif (!calendar) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn calendar;\r\n\t},\r\n\r\n\tgetWorkHours: function (config) {\r\n\t\tconfig = this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.getWorkHours(config.date);\r\n\t},\r\n\r\n\tsetWorkTime: function (config, calendar) {\r\n\t\tconfig = this.argumentsHelper.setWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tif (!calendar)\r\n\t\t\tcalendar = this.calendarManager.getCalendar(); // Global\r\n\t\treturn calendar.setWorkTime(config);\r\n\t},\r\n\r\n\tunsetWorkTime: function (config, calendar) {\r\n\t\tconfig = this.argumentsHelper.unsetWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tif (!calendar)\r\n\t\t\tcalendar = this.calendarManager.getCalendar(); // Global\r\n\t\treturn calendar.unsetWorkTime(config);\r\n\t},\r\n\tisWorkTime: function (date, unit, task, calendar) {\r\n\t\tvar config = this.argumentsHelper.isWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tcalendar = this._getCalendar(config);\r\n\t\treturn calendar.isWorkTime(config);\r\n\t},\r\n\tgetClosestWorkTime: function (config) {\r\n\t\tconfig = this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.getClosestWorkTime(config);\r\n\t},\r\n\r\n\tcalculateDuration: function () { // start_date_date, end_date, task\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\t\treturn calendar.calculateDuration(config);\r\n\t},\r\n\thasDuration: function () {\r\n\t\tvar config = this.argumentsHelper.hasDurationArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.hasDuration(config);\r\n\t},\r\n\tcalculateEndDate: function (config) { // start_date, duration, unit, task\r\n\t\tvar config = this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\t\treturn calendar.calculateEndDate(config);\r\n\t}\r\n};\r\n\r\nmodule.exports = TimeCalculator;\r\n\r\n\n\n/***/ }),\n/* 90 */\n/***/ (function(module, exports) {\n\nfunction CalendarDisabledTimeStrategy(gantt, argumentsHelper){\r\n\tthis.argumentsHelper = argumentsHelper;\r\n\tthis.$gantt = gantt;\r\n}\r\n\r\nCalendarDisabledTimeStrategy.prototype = {\r\n\tgetWorkHours: function () {\r\n\t\treturn [0, 24];\r\n\t},\r\n\tsetWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tunsetWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tisWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tgetClosestWorkTime: function (config) {\r\n\t\tvar config = this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\t\treturn config.date;\r\n\t},\r\n\r\n\tcalculateDuration: function () {\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\treturn this._calculateDuration(from, to, unit, step);\r\n\t},\r\n\t_calculateDuration: function (start, end, unit, step) {\r\n\t\tvar dateHelper = this.$gantt.date;\r\n\t\tvar fixedUnits = {\r\n\t\t\t\"week\": 1000 * 60 * 60 * 24 * 7,\r\n\t\t\t\"day\": 1000 * 60 * 60 * 24,\r\n\t\t\t\"hour\": 1000 * 60 * 60,\r\n\t\t\t\"minute\": 1000 * 60\r\n\t\t};\r\n\r\n\t\tvar res = 0;\r\n\t\tif (fixedUnits[unit]) {\r\n\t\t\tres = Math.round((end - start) / (step * fixedUnits[unit]));\r\n\t\t} else {\r\n\t\t\tvar from = new Date(start),\r\n\t\t\t\tto = new Date(end);\r\n\t\t\twhile (from.valueOf() < to.valueOf()) {\r\n\t\t\t\tres += 1;\r\n\t\t\t\tfrom = dateHelper.add(from, step, unit);\r\n\t\t\t}\r\n\r\n\t\t\tif (from.valueOf() != end.valueOf()) {\r\n\t\t\t\tres += (to - from) / (dateHelper.add(from, step, unit) - from);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn Math.round(res);\r\n\t},\r\n\r\n\thasDuration: function () {\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\tif (!unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tfrom = new Date(from);\r\n\t\tto = new Date(to);\r\n\r\n\t\treturn (from.valueOf() < to.valueOf());\r\n\t},\r\n\r\n\tcalculateEndDate: function () {\r\n\t\tvar config = this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar start = config.start_date,\r\n\t\t\tduration = config.duration,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\treturn this.$gantt.date.add(start, step * duration, unit);\r\n\t}\r\n};\r\n\r\nmodule.exports = CalendarDisabledTimeStrategy;\n\n/***/ }),\n/* 91 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// TODO: rework public api for date methods\r\nvar utils = __webpack_require__(0);\r\n\r\nvar createWorktimeFacade = function(calendarManager, timeCalculator){\r\n\treturn {\r\n\t\tgetWorkHours: function (date) {\r\n\t\t\treturn timeCalculator.getWorkHours(date);\r\n\t\t},\r\n\r\n\t\tsetWorkTime: function (config) {\r\n\t\t\treturn timeCalculator.setWorkTime(config);\r\n\t\t},\r\n\r\n\t\tunsetWorkTime: function (config) {\r\n\t\t\ttimeCalculator.unsetWorkTime(config);\r\n\t\t},\r\n\r\n\t\tisWorkTime: function (date, unit, task) {\r\n\t\t\treturn timeCalculator.isWorkTime(date, unit, task);\r\n\t\t},\r\n\r\n\t\tgetClosestWorkTime: function (config) {\r\n\t\t\treturn timeCalculator.getClosestWorkTime(config);\r\n\t\t},\r\n\r\n\t\tcalculateDuration: function (start_date, end_date, task) {\r\n\t\t\treturn timeCalculator.calculateDuration(start_date, end_date, task);\r\n\t\t},\r\n\t\t_hasDuration: function (start_date, end_date, task) {\r\n\t\t\treturn timeCalculator.hasDuration(start_date, end_date, task);\r\n\t\t},\r\n\r\n\t\tcalculateEndDate: function (start, duration, unit, task) {\r\n\t\t\treturn timeCalculator.calculateEndDate(start, duration, unit, task);\r\n\t\t},\r\n\r\n\t\tcreateCalendar: utils.bind(calendarManager.createCalendar, calendarManager),\r\n\t\taddCalendar: utils.bind(calendarManager.addCalendar, calendarManager),\r\n\t\tgetCalendar: utils.bind(calendarManager.getCalendar, calendarManager),\r\n\t\tgetCalendars: utils.bind(calendarManager.getCalendars, calendarManager),\r\n\t\tgetTaskCalendar: utils.bind(calendarManager.getTaskCalendar, calendarManager),\r\n\t\tdeleteCalendar: utils.bind(calendarManager.deleteCalendar, calendarManager)\r\n\t};\r\n};\r\n\r\n\r\nmodule.exports = { create: createWorktimeFacade };\r\n\n\n/***/ }),\n/* 92 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar dateHelper = __webpack_require__(4),\r\n\thelpers = __webpack_require__(7);\r\n\r\nmodule.exports = function(gantt) {\r\n\r\n\tgantt.isUnscheduledTask = function (task) {\r\n\t\treturn (!!task.unscheduled || !task.start_date);\r\n\t};\r\n\r\n\tgantt._isAllowedUnscheduledTask = function (task) {\r\n\t\treturn !!(task.unscheduled && gantt.config.show_unscheduled);\r\n\t};\r\n\r\n\tgantt.isTaskVisible = function (id) {\r\n\t\tif (!this.isTaskExists(id))\r\n\t\t\treturn false;\r\n\r\n\t\tvar task = this.getTask(id),\r\n\t\t\ttype = this.getTaskType(task.type);\r\n\r\n\t\tif (!(gantt._isAllowedUnscheduledTask(task) || (task.start_date.valueOf() <= this._max_date.valueOf() && task.end_date.valueOf() >= this._min_date.valueOf()))){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn !!(gantt.getGlobalTaskIndex(id) >= 0);\r\n\t};\r\n\r\n\tgantt._defaultTaskDate = function (item, parent_id) {\r\n\t\tvar parent = (parent_id && parent_id != this.config.root_id) ? this.getTask(parent_id) : false,\r\n\t\t\tstartDate = '';\r\n\t\tif (parent) {\r\n\t\t\tstartDate = parent.start_date;\r\n\t\t} else {\r\n\t\t\tvar first = this.getTaskByIndex(0);\r\n\t\t\tstartDate = first ? (first.start_date ? first.start_date : (first.end_date ? this.calculateEndDate({\r\n\t\t\t\tstart_date: first.end_date,\r\n\t\t\t\tduration: -this.config.duration_step\r\n\t\t\t}) : '')) : this.config.start_date || this.getState().min_date;\r\n\t\t}\r\n\t\tgantt.assert(startDate, \"Invalid dates\");\r\n\t\treturn new Date(startDate);\r\n\t};\r\n\r\n\tgantt._set_default_task_timing = function (task) {\r\n\t\ttask.start_date = task.start_date || gantt._defaultTaskDate(task, this.getParent(task));\r\n\t\ttask.duration = task.duration || this.config.duration_step;\r\n\t\ttask.end_date = task.end_date || this.calculateEndDate(task);\r\n\t};\r\n\r\n\tgantt.createTask = function (item, parent, index) {\r\n\t\titem = item || {};\r\n\t\tif (!gantt.defined(item.id))\r\n\t\t\titem.id = gantt.uid();\r\n\r\n\t\tif (!item.start_date) {\r\n\t\t\titem.start_date = gantt._defaultTaskDate(item, parent);\r\n\t\t}\r\n\t\tif (item.text === undefined) {\r\n\t\t\titem.text = gantt.locale.labels.new_task;\r\n\t\t}\r\n\t\tif (item.duration === undefined) {\r\n\t\t\titem.duration = 1;\r\n\t\t}\r\n\r\n\t\tif (parent) {\r\n\t\t\tthis.setParent(item, parent, true);\r\n\t\t\tvar parentObj = this.getTask(parent);\r\n\t\t\tparentObj.$open = true;\r\n\t\t}\r\n\r\n\t\tif (!this.callEvent(\"onTaskCreated\", [item])) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (this.config.details_on_create) {\r\n\t\t\titem.$new = true;\r\n\t\t\tthis.silent(function(){\r\n\t\t\t\tgantt.$data.tasksStore.addItem(item, index);\r\n\t\t\t});\r\n\t\t\tthis.selectTask(item.id);\r\n\t\t\tthis.refreshData();\r\n\t\t\tthis.showLightbox(item.id);\r\n\t\t} else {\r\n\t\t\tif (this.addTask(item, parent, index)) {\r\n\t\t\t\tthis.showTask(item.id);\r\n\t\t\t\tthis.selectTask(item.id);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn item.id;\r\n\t};\r\n\r\n\tgantt._update_flags = function (oldid, newid) {\r\n\t\t//  TODO: need a proper way to update all possible flags\r\n\t\tvar store = gantt.$data.tasksStore;\r\n\t\tif (oldid === undefined) {\r\n\t\t\tthis._lightbox_id = null;\r\n\r\n\t\t\tstore.silent(function(){\r\n\t\t\t\tstore.unselect();\r\n\t\t\t});\r\n\r\n\t\t\tif (this._tasks_dnd && this._tasks_dnd.drag) {\r\n\t\t\t\tthis._tasks_dnd.drag.id = null;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (this._lightbox_id == oldid)\r\n\t\t\t\tthis._lightbox_id = newid;\r\n\r\n\t\t\t// TODO: probably can be removed\r\n\t\t\tif (store.getSelectedId() == oldid) {\r\n\t\t\t\tstore.silent(function(){\r\n\t\t\t\t\tstore.unselect(oldid);\r\n\t\t\t\t\tstore.select(newid);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (this._tasks_dnd && this._tasks_dnd.drag && this._tasks_dnd.drag.id == oldid) {\r\n\t\t\t\tthis._tasks_dnd.drag.id = newid;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._get_task_timing_mode = function (task, force) {\r\n\t\tvar task_type = this.getTaskType(task.type);\r\n\r\n\t\tvar state = {\r\n\t\t\ttype: task_type,\r\n\t\t\t$no_start: false,\r\n\t\t\t$no_end: false\r\n\t\t};\r\n\r\n\t\tif (!force && task_type == task.$rendered_type) {\r\n\t\t\tstate.$no_start = task.$no_start;\r\n\t\t\tstate.$no_end = task.$no_end;\r\n\t\t\treturn state;\r\n\t\t}\r\n\r\n\t\tif (task_type == this.config.types.project) {\r\n\t\t\t//project duration is always defined by children duration\r\n\t\t\tstate.$no_end = state.$no_start = true;\r\n\t\t} else if (task_type != this.config.types.milestone) {\r\n\t\t\t//tasks can have fixed duration, children duration(as projects), or one date fixed, and other defined by nested items\r\n\t\t\tstate.$no_end = !(task.end_date || task.duration);\r\n\t\t\tstate.$no_start = !task.start_date;\r\n\r\n\t\t\tif (this._isAllowedUnscheduledTask(task)) {\r\n\t\t\t\tstate.$no_end = state.$no_start = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn state;\r\n\t};\r\n\r\n\tgantt._init_task_timing = function (task) {\r\n\t\tvar task_mode = gantt._get_task_timing_mode(task, true);\r\n\r\n\t\tvar dirty = task.$rendered_type != task_mode.type;\r\n\r\n\t\tvar task_type = task_mode.type;\r\n\r\n\t\tif (dirty) {\r\n\t\t\ttask.$no_start = task_mode.$no_start;\r\n\t\t\ttask.$no_end = task_mode.$no_end;\r\n\t\t\ttask.$rendered_type = task_mode.type;\r\n\t\t}\r\n\r\n\t\tif (dirty && task_type != this.config.types.milestone) {\r\n\t\t\tif (task_type == this.config.types.project) {\r\n\t\t\t\t//project duration is always defined by children duration\r\n\t\t\t\tthis._set_default_task_timing(task);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (task_type == this.config.types.milestone) {\r\n\t\t\ttask.end_date = task.start_date;\r\n\t\t}\r\n\t\tif (task.start_date && task.end_date) {\r\n\t\t\ttask.duration = this.calculateDuration(task);\r\n\t\t}\r\n\t\ttask.duration = task.duration || 0;\r\n\t};\r\n\r\n\tgantt.isSummaryTask = function (task) {\r\n\t\tvar mode = gantt._get_task_timing_mode(task);\r\n\r\n\t\treturn !!(mode.$no_end || mode.$no_start);\r\n\t};\r\n\r\n// downward calculation of project duration\r\n\tgantt.resetProjectDates = function (task) {\r\n\t\tvar taskMode = this._get_task_timing_mode(task);\r\n\t\tif (taskMode.$no_end || taskMode.$no_start) {\r\n\t\t\tvar dates = this.getSubtaskDates(task.id);\r\n\t\t\tthis._assign_project_dates(task, dates.start_date, dates.end_date);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.getSubtaskDuration = function (task_id) {\r\n\t\tvar res = 0,\r\n\t\t\troot = task_id !== undefined ? task_id : gantt.config.root_id;\r\n\r\n\t\tthis.eachTask(function (child) {\r\n\t\t\tif (this.getTaskType(child.type) == gantt.config.types.project || this.isUnscheduledTask(child))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tres += child.duration;\r\n\t\t}, root);\r\n\r\n\t\treturn res;\r\n\t};\r\n\r\n\tgantt.getSubtaskDates = function (task_id) {\r\n\t\tvar min = null,\r\n\t\t\tmax = null,\r\n\t\t\troot = task_id !== undefined ? task_id : gantt.config.root_id;\r\n\r\n\t\tthis.eachTask(function (child) {\r\n\t\t\tif (this.getTaskType(child.type) == gantt.config.types.project || this.isUnscheduledTask(child))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif ((child.start_date && !child.$no_start) && (!min || min > child.start_date.valueOf()))\r\n\t\t\t\tmin = child.start_date.valueOf();\r\n\t\t\tif ((child.end_date && !child.$no_end) && (!max || max < child.end_date.valueOf()))\r\n\t\t\t\tmax = child.end_date.valueOf();\r\n\t\t}, root);\r\n\r\n\t\treturn {\r\n\t\t\tstart_date: min ? new Date(min) : null,\r\n\t\t\tend_date: max ? new Date(max) : null\r\n\t\t};\r\n\t};\r\n\r\n\tgantt._assign_project_dates = function (task, from, to) {\r\n\t\tvar taskTiming = this._get_task_timing_mode(task);\r\n\t\tif (taskTiming.$no_start) {\r\n\t\t\tif (from && from != Infinity) {\r\n\t\t\t\ttask.start_date = new Date(from);\r\n\t\t\t} else {\r\n\t\t\t\ttask.start_date = this._defaultTaskDate(task, this.getParent(task));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (taskTiming.$no_end) {\r\n\t\t\tif (to && to != -Infinity) {\r\n\t\t\t\ttask.end_date = new Date(to);\r\n\t\t\t} else {\r\n\t\t\t\ttask.end_date = this.calculateEndDate({\r\n\t\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\t\tduration: this.config.duration_step,\r\n\t\t\t\t\ttask: task\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (taskTiming.$no_start || taskTiming.$no_end) {\r\n\t\t\tthis._init_task_timing(task);\r\n\t\t}\r\n\t};\r\n\r\n// upward calculation of project duration\r\n\tgantt._update_parents = function (taskId, silent) {\r\n\t\tif (!taskId) return;\r\n\r\n\t\tvar task = this.getTask(taskId);\r\n\t\tvar pid = this.getParent(task);\r\n\r\n\t\tvar taskTiming = this._get_task_timing_mode(task);\r\n\r\n\t\tvar has_changed = true;\r\n\r\n\t\tif (taskTiming.$no_start || taskTiming.$no_end) {\r\n\t\t\tvar oldStart = task.start_date.valueOf(),\r\n\t\t\t\toldEnd = task.end_date.valueOf();\r\n\r\n\t\t\tgantt.resetProjectDates(task);\r\n\r\n\t\t\t// not refresh parent projects if dates hasn't changed\r\n\t\t\tif (oldStart == task.start_date.valueOf() && oldEnd == task.end_date.valueOf()) {\r\n\t\t\t\thas_changed = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (has_changed && !silent) {\r\n\t\t\t\tthis.refreshTask(task.id, true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tif (has_changed && pid && this.isTaskExists(pid)) {\r\n\t\t\tthis._update_parents(pid, silent);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.roundDate = function (config) {\r\n\t\tvar scale = gantt.getScale();\r\n\r\n\t\tif (dateHelper.isDate(config)) {\r\n\t\t\tconfig = {\r\n\t\t\t\tdate: config,\r\n\t\t\t\tunit: scale ? scale.unit : gantt.config.duration_unit,\r\n\t\t\t\tstep: scale ?  scale.step : gantt.config.duration_step\r\n\t\t\t};\r\n\t\t}\r\n\t\tvar date = config.date,\r\n\t\t\tsteps = config.step,\r\n\t\t\tunit = config.unit;\r\n\r\n\t\tif(!scale){\r\n\t\t\treturn date;\r\n\t\t}\r\n\r\n\t\tvar upper, lower, colIndex;\r\n\t\tif (unit == scale.unit && steps == scale.step &&\r\n\t\t\t+date >= +scale.min_date && +date <= +scale.max_date) {\r\n\t\t\t//find date in time scale config\r\n\t\t\tcolIndex = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\tif (!scale.trace_x[colIndex]) {\r\n\t\t\t\tcolIndex -= 1;// end of time scale\r\n\t\t\t\tif(scale.rtl){\r\n\t\t\t\t\tcolIndex = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlower = new Date(scale.trace_x[colIndex]);\r\n\t\t\tupper = gantt.date.add(lower, steps, unit);\r\n\t\t} else {\r\n\t\t\tcolIndex = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\tupper = gantt.date[unit + \"_start\"](new Date(scale.min_date));\r\n\t\t\tif (scale.trace_x[colIndex]) {\r\n\t\t\t\tupper = gantt.date[unit + \"_start\"](scale.trace_x[colIndex]);// end of time scale\r\n\t\t\t}\r\n\r\n\t\t\twhile (+upper < +date) {\r\n\t\t\t\tupper = gantt.date[unit + \"_start\"](gantt.date.add(upper, steps, unit));\r\n\r\n\t\t\t\tvar tzOffset = upper.getTimezoneOffset();\r\n\r\n\t\t\t\tupper = gantt._correct_dst_change(upper, tzOffset, upper, unit);\r\n\t\t\t\tif (gantt.date[unit + '_start'])\r\n\t\t\t\t\tupper = gantt.date[unit + '_start'](upper);\r\n\t\t\t}\r\n\r\n\t\t\tlower = gantt.date.add(upper, -1 * steps, unit);\r\n\r\n\t\t}\r\n\t\tif (config.dir && config.dir == 'future')\r\n\t\t\treturn upper;\r\n\t\tif (config.dir && config.dir == 'past')\r\n\t\t\treturn lower;\r\n\r\n\t\tif (Math.abs(date - lower) < Math.abs(upper - date)) {\r\n\t\t\treturn lower;\r\n\t\t} else {\r\n\t\t\treturn upper;\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tgantt.correctTaskWorkTime = function (task) {\r\n\t\tif (gantt.config.work_time && gantt.config.correct_work_time) {\r\n\t\t\tif (!this.isWorkTime(task.start_date, undefined, task)) {\r\n\t\t\t\ttask.start_date = this.getClosestWorkTime({date: task.start_date, dir: 'future', task: task});\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t} else if (!this.isWorkTime(new Date(+task.end_date - 1), undefined, task)) {\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskUpdate\", function (id, task) {\r\n\t\tgantt._init_task_timing(task);\r\n\t\treturn true;\r\n\t});\r\n\tgantt.attachEvent(\"onBeforeTaskAdd\", function (id, task) {\r\n\t\tgantt._init_task_timing(task);\r\n\t\treturn true;\r\n\t});\r\n\r\n};\n\n/***/ }),\n/* 93 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = function(gantt) {\r\n\tvar domHelpers = __webpack_require__(1),\r\n\t\thelpers = __webpack_require__(7);\r\n\r\n\tgantt._lightbox_methods = {};\r\n\tgantt._lightbox_template = \"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span></div><div class='gantt_cal_larea'></div>\";\r\n\r\n\r\n\t//TODO: gantt._lightbox_id is changed from data.js and accessed from autoscheduling, check if it can be removed from gantt object\r\n\tvar state = gantt.$services.getService(\"state\");\r\n\tstate.registerProvider(\"lightbox\", function(){\r\n\t\treturn {\r\n\t\t\tlightbox: gantt._lightbox_id\r\n\t\t};\r\n\t});\r\n\r\n\tgantt.showLightbox = function (id) {\r\n\t\tif (!id || gantt.isReadonly(this.getTask(id))) return;\r\n\t\tif (!this.callEvent(\"onBeforeLightbox\", [id])) return;\r\n\r\n\t\tvar task = this.getTask(id);\r\n\r\n\t\tvar box = this.getLightbox(this.getTaskType(task.type));\r\n\t\tthis._center_lightbox(box);\r\n\t\tthis.showCover();\r\n\t\tthis._fill_lightbox(id, box);\r\n\r\n\t\tthis._waiAria.lightboxVisibleAttr(box);\r\n\r\n\t\tthis.callEvent(\"onLightbox\", [id]);\r\n\t};\r\n\r\n\tfunction _is_chart_visible(gantt) {\r\n\t\tvar timeline = gantt.$ui.getView(\"timeline\");\r\n\t\tif(timeline && timeline.isVisible()){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tgantt._get_timepicker_step = function () {\r\n\t\tif (this.config.round_dnd_dates) {\r\n\t\t\tvar step;\r\n\t\t\tif (_is_chart_visible(this)) {\r\n\t\t\t\tvar scale = gantt.getScale();\r\n\t\t\t\tstep = (helpers.getSecondsInUnit(scale.unit) * scale.step) / 60;//timepicker step is measured in minutes\r\n\t\t\t}\r\n\r\n\t\t\tif(!step || step >= 60 * 24){\r\n\t\t\t\tstep = this.config.time_step;\r\n\t\t\t}\r\n\t\t\treturn step;\r\n\t\t}\r\n\t\treturn this.config.time_step;\r\n\t};\r\n\tgantt.getLabel = function (property, key) {\r\n\t\tvar sections = this._get_typed_lightbox_config();\r\n\t\tfor (var i = 0; i < sections.length; i++) {\r\n\t\t\tif (sections[i].map_to == property) {\r\n\t\t\t\tvar options = sections[i].options;\r\n\t\t\t\tfor (var j = 0; j < options.length; j++) {\r\n\t\t\t\t\tif (options[j].key == key) {\r\n\t\t\t\t\t\treturn options[j].label;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"\";\r\n\t};\r\n\r\n\tgantt.updateCollection = function (list_name, collection) {\r\n\t\tcollection = collection.slice(0);\r\n\t\tvar list = gantt.serverList(list_name);\r\n\t\tif (!list) return false;\r\n\t\tlist.splice(0, list.length);\r\n\t\tlist.push.apply(list, collection || []);\r\n\t\tgantt.resetLightbox();\r\n\t};\r\n\tgantt.getLightboxType = function () {\r\n\t\treturn this.getTaskType(this._lightbox_type);\r\n\t};\r\n\tgantt.getLightbox = function (type) {\r\n\t\tif (type === undefined)\r\n\t\t\ttype = this.getLightboxType();\r\n\r\n\t\tif (!this._lightbox || this.getLightboxType() != this.getTaskType(type)) {\r\n\t\t\tthis._lightbox_type = this.getTaskType(type);\r\n\t\t\tvar d = document.createElement(\"DIV\");\r\n\t\t\td.className = \"gantt_cal_light\";\r\n\r\n\t\t\tvar full_width = this._is_lightbox_timepicker();\r\n\t\t\tif (gantt.config.wide_form || full_width)\r\n\t\t\t\td.className += \" gantt_cal_light_wide\";\r\n\r\n\t\t\tif (full_width) {\r\n\t\t\t\tgantt.config.wide_form = true;\r\n\t\t\t\td.className += \" gantt_cal_light_full\";\r\n\t\t\t}\r\n\r\n\r\n\t\t\td.style.visibility = \"hidden\";\r\n\r\n\t\t\tvar html = this._lightbox_template;\r\n\r\n\t\t\tvar ariaAttr;\r\n\t\t\tvar buttons = this.config.buttons_left;\r\n\t\t\tfor (var i = 0; i < buttons.length; i++) {\r\n\t\t\t\t// needed to migrate from 'dhx_something' to 'gantt_something' naming in a lightbox\r\n\t\t\t\tvar button = this.config._migrate_buttons[buttons[i]] ? this.config._migrate_buttons[buttons[i]] : buttons[i];\r\n\r\n\t\t\t\tariaAttr = this._waiAria.lightboxButtonAttrString(button);\r\n\t\t\t\thtml += \"<div \" + ariaAttr + \" class='gantt_btn_set gantt_left_btn_set \" + button + \"_set'><div dhx_button='1' data-dhx-button='1' class='\" + button + \"'></div><div>\" + this.locale.labels[button] + \"</div></div>\";\r\n\r\n\t\t\t}\r\n\t\t\tbuttons = this.config.buttons_right;\r\n\t\t\tfor (var i = 0; i < buttons.length; i++) {\r\n\t\t\t\tvar button = this.config._migrate_buttons[buttons[i]] ? this.config._migrate_buttons[buttons[i]] : buttons[i];\r\n\t\t\t\tariaAttr = this._waiAria.lightboxButtonAttrString(button);\r\n\r\n\t\t\t\thtml += \"<div \" + ariaAttr + \" class='gantt_btn_set gantt_right_btn_set \" + button + \"_set' style='float:right;'><div dhx_button='1' data-dhx-button='1' class='\" + button + \"'></div><div>\" + this.locale.labels[button] + \"</div></div>\";\r\n\r\n\t\t\t}\r\n\t\t\thtml += \"</div>\";\r\n\t\t\td.innerHTML = html;\r\n\r\n\t\t\tgantt._waiAria.lightboxAttr(d);\r\n\r\n\t\t\tif (gantt.config.drag_lightbox) {\r\n\t\t\t\td.firstChild.onmousedown = gantt._ready_to_dnd;\r\n\t\t\t\td.firstChild.onselectstart = function () {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t};\r\n\t\t\t\td.firstChild.style.cursor = \"pointer\";\r\n\t\t\t\tgantt._init_dnd_events();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdocument.body.insertBefore(d, document.body.firstChild);\r\n\t\t\tthis._lightbox = d;\r\n\r\n\t\t\tvar sns = this._get_typed_lightbox_config(type);\r\n\t\t\thtml = this._render_sections(sns);\r\n\r\n\t\t\tvar ds = d.getElementsByTagName(\"div\");\r\n\t\t\tfor (var i = 0; i < ds.length; i++) {\r\n\t\t\t\tvar t_ds = ds[i];\r\n\t\t\t\tif (t_ds.className == \"gantt_cal_larea\") {\r\n\t\t\t\t\tt_ds.innerHTML = html;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// bind labels to lightbox inputs\r\n\t\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\t\tvar section = sns[i];\r\n\t\t\t\tif (!section.id || !document.getElementById(section.id))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tvar labelBlock = document.getElementById(section.id);\r\n\t\t\t\tvar label = labelBlock.querySelector(\"label\");\r\n\t\t\t\tvar inputBlock = labelBlock.nextSibling;\r\n\t\t\t\tif (!inputBlock)\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tvar input = inputBlock.querySelector(\"input, select, textarea\");\r\n\t\t\t\tif (input) {\r\n\t\t\t\t\tsection.inputId = input.id || \"input_\" + gantt.uid();\r\n\t\t\t\t\tif (!input.id)\r\n\t\t\t\t\t\tinput.id = section.inputId;\r\n\r\n\t\t\t\t\tlabel.setAttribute(\"for\", section.inputId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//sizes\r\n\t\t\tthis.resizeLightbox();\r\n\r\n\t\t\tthis._init_lightbox_events(this);\r\n\t\t\td.style.display = \"none\";\r\n\t\t\td.style.visibility = \"visible\";\r\n\t\t}\r\n\t\treturn this._lightbox;\r\n\t};\r\n\r\n\tgantt._render_sections = function (sns) {\r\n\t\tvar html = \"\";\r\n\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\tvar block = this.form_blocks[sns[i].type];\r\n\t\t\tif (!block) continue; //ignore incorrect blocks\r\n\t\t\tsns[i].id = \"area_\" + this.uid();\r\n\r\n\t\t\tvar display = sns[i].hidden ? \" style='display:none'\" : \"\";\r\n\t\t\tvar button = \"\";\r\n\t\t\tif (sns[i].button) {\r\n\t\t\t\tbutton = \"<div class='gantt_custom_button' data-index='\" + i + \"'><div class='gantt_custom_button_\" + sns[i].button + \"'></div><div class='gantt_custom_button_label'>\" + this.locale.labels[\"button_\" + sns[i].button] + \"</div></div>\";\r\n\t\t\t}\r\n\t\t\tif (this.config.wide_form) {\r\n\t\t\t\thtml += \"<div class='gantt_wrap_section' \" + display + \">\";\r\n\t\t\t}\r\n\t\t\thtml += \"<div id='\" + sns[i].id + \"' class='gantt_cal_lsection'><label>\" + button + this.locale.labels[\"section_\" + sns[i].name] + \"</label></div>\" + block.render.call(this, sns[i]);\r\n\t\t\thtml += \"</div>\";\r\n\t\t}\r\n\t\treturn html;\r\n\t};\r\n\r\n\r\n\tgantt.resizeLightbox = function () {\r\n\t\tvar d = this._lightbox;\r\n\t\tif (!d) return;\r\n\r\n\t\tvar con = d.childNodes[1];\r\n\t\tcon.style.height = \"0px\";\r\n\t\tcon.style.height = con.scrollHeight + \"px\";\r\n\t\td.style.height = con.scrollHeight + this.config.lightbox_additional_height + \"px\";\r\n\t\tcon.style.height = con.scrollHeight + \"px\"; //it is incredible , how ugly IE can be\r\n\r\n\r\n\t};\r\n\r\n\tgantt._center_lightbox = function (box) {\r\n\t\tif (box) {\r\n\t\t\tbox.style.display = \"block\";\r\n\r\n\t\t\tvar scroll_top = window.pageYOffset || document.body.scrollTop || document.documentElement.scrollTop;\r\n\t\t\tvar scroll_left = window.pageXOffset || document.body.scrollLeft || document.documentElement.scrollLeft;\r\n\r\n\t\t\tvar view_height = window.innerHeight || document.documentElement.clientHeight;\r\n\r\n\t\t\tif (scroll_top) // if vertical scroll on window\r\n\t\t\t\tbox.style.top = Math.round(scroll_top + Math.max((view_height - box.offsetHeight) / 2, 0)) + \"px\";\r\n\t\t\telse // vertical scroll on body\r\n\t\t\t\tbox.style.top = Math.round(Math.max(((view_height - box.offsetHeight) / 2), 0) + 9) + \"px\"; // +9 for compatibility with auto tests\r\n\r\n\t\t\t// not quite accurate but used for compatibility reasons\r\n\t\t\tif (document.documentElement.scrollWidth > document.body.offsetWidth) // if horizontal scroll on the window\r\n\t\t\t\tbox.style.left = Math.round(scroll_left + (document.body.offsetWidth - box.offsetWidth) / 2) + \"px\";\r\n\t\t\telse // horizontal scroll on the body\r\n\t\t\t\tbox.style.left = Math.round((document.body.offsetWidth - box.offsetWidth) / 2) + \"px\";\r\n\t\t}\r\n\t};\r\n\tgantt.showCover = function () {\r\n\t\tif (this._cover) return;\r\n\r\n\t\tthis._cover = document.createElement(\"DIV\");\r\n\t\tthis._cover.className = \"gantt_cal_cover\";\r\n\t\tvar _document_height = ((document.height !== undefined) ? document.height : document.body.offsetHeight);\r\n\t\tvar _scroll_height = ((document.documentElement) ? document.documentElement.scrollHeight : 0);\r\n\t\tthis._cover.style.height = Math.max(_document_height, _scroll_height) + 'px';\r\n\t\tdocument.body.appendChild(this._cover);\r\n\t};\r\n\r\n\r\n\tgantt._init_lightbox_events = function () {\r\n\t\tgantt.lightbox_events = {};\r\n\r\n\r\n\t\tgantt.lightbox_events[\"gantt_save_btn\"] = function (e) {\r\n\t\t\tgantt._save_lightbox();\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events[\"gantt_delete_btn\"] = function (e) {\r\n\t\t\tif (!gantt.callEvent(\"onLightboxDelete\", [gantt._lightbox_id]))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif (gantt.isTaskExists(gantt._lightbox_id)) {\r\n\t\t\t\tgantt.$click.buttons[\"delete\"](gantt._lightbox_id);\r\n\t\t\t} else {\r\n\t\t\t\tgantt.hideLightbox();\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events[\"gantt_cancel_btn\"] = function (e) {\r\n\t\t\tgantt._cancel_lightbox();\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events[\"default\"] = function (e, src) {\r\n\t\t\tif (src.getAttribute(\"data-dhx-button\")) {\r\n\t\t\t\tgantt.callEvent(\"onLightboxButton\", [src.className, src, e]);\r\n\t\t\t} else {\r\n\t\t\t\tvar index, block, sec;\r\n\r\n\t\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\t\tif (className.indexOf(\"gantt_custom_button\") != -1) {\r\n\t\t\t\t\tif (className.indexOf(\"gantt_custom_button_\") != -1) {\r\n\t\t\t\t\t\tindex = src.parentNode.getAttribute(\"data-index\");\r\n\t\t\t\t\t\tsec = src;\r\n\t\t\t\t\t\twhile (sec && domHelpers.getClassName(sec).indexOf(\"gantt_cal_lsection\") == -1) {\r\n\t\t\t\t\t\t\tsec = sec.parentNode;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tindex = src.getAttribute(\"data-index\");\r\n\t\t\t\t\t\tsec = src.parentNode;\r\n\t\t\t\t\t\tsrc = src.firstChild;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar sections = gantt._get_typed_lightbox_config();\r\n\r\n\t\t\t\tif (index) {\r\n\t\t\t\t\tindex = index * 1;\r\n\t\t\t\t\tblock = gantt.form_blocks[sections[index * 1].type];\r\n\t\t\t\t\tblock.button_click(index, src, sec, sec.nextSibling);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.event(gantt.getLightbox(), \"click\", function (e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar src = e.target ? e.target : e.srcElement;\r\n\r\n\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\tif (!className) {\r\n\t\t\t\tsrc = src.previousSibling;\r\n\t\t\t\tclassName = domHelpers.getClassName(src);\r\n\t\t\t}\r\n\t\t\tif (src && className && className.indexOf(\"gantt_btn_set\") === 0) {\r\n\t\t\t\tsrc = src.firstChild;\r\n\t\t\t\tclassName = domHelpers.getClassName(src);\r\n\t\t\t}\r\n\t\t\tif (src && className) {\r\n\t\t\t\tvar func = gantt.defined(gantt.lightbox_events[src.className]) ? gantt.lightbox_events[src.className] : gantt.lightbox_events[\"default\"];\r\n\t\t\t\treturn func(e, src);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\tgantt.getLightbox().onkeydown = function (e) {\r\n\t\t\tvar event = e || window.event;\r\n\t\t\tvar target = e.target || e.srcElement;\r\n\t\t\tvar buttonTarget = !!(domHelpers.getClassName(target).indexOf(\"gantt_btn_set\") > -1);\r\n\r\n\t\t\tswitch ((e || event).keyCode) {\r\n\t\t\t\tcase 32: {//space\r\n\t\t\t\t\tif ((e || event).shiftKey) return;\r\n\t\t\t\t\tif (buttonTarget && target.click) {\r\n\t\t\t\t\t\ttarget.click();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase gantt.keys.edit_save:\r\n\t\t\t\t\tif ((e || event).shiftKey) return;\r\n\t\t\t\t\tif (buttonTarget && target.click) {\r\n\t\t\t\t\t\ttarget.click();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tgantt._save_lightbox();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase gantt.keys.edit_cancel:\r\n\t\t\t\t\tgantt._cancel_lightbox();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\tgantt._cancel_lightbox = function () {\r\n\t\tvar task = this.getLightboxValues();\r\n\t\tthis.callEvent(\"onLightboxCancel\", [this._lightbox_id, task.$new]);\r\n\t\tif (gantt.isTaskExists(task.id) && task.$new) {\r\n\t\t\tthis.silent(function(){\r\n\t\t\t\tgantt.$data.tasksStore.removeItem(task.id);\r\n\t\t\t\tgantt._update_flags(task.id, null);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.refreshData();\r\n\t\tthis.hideLightbox();\r\n\t};\r\n\r\n\tgantt._save_lightbox = function () {\r\n\t\tvar task = this.getLightboxValues();\r\n\t\tif (!this.callEvent(\"onLightboxSave\", [this._lightbox_id, task, !!task.$new]))\r\n\t\t\treturn;\r\n\r\n\t\tif (task.$new) {\r\n\t\t\tdelete task.$new;\r\n\t\t\tthis.addTask(task);\r\n\t\t}else if(this.isTaskExists(task.id)){\r\n\t\t\tthis.mixin(this.getTask(task.id), task, true);\r\n\t\t\tthis.refreshTask(task.id);\r\n\t\t\tthis.updateTask(task.id);\r\n\t\t}\r\n\t\tthis.refreshData();\r\n\r\n\t\t// TODO: do we need any blockable events here to prevent closing lightbox?\r\n\t\tthis.hideLightbox();\r\n\t};\r\n\r\n\tgantt._resolve_default_mapping = function (section) {\r\n\t\tvar mapping = section.map_to;\r\n\t\tvar time_controls = {\"time\": true, \"time_optional\": true, \"duration\": true, \"duration_optional\": true};\r\n\t\tif (time_controls[section.type]) {\r\n\t\t\tif (section.map_to == 'auto') {\r\n\t\t\t\tmapping = {start_date: \"start_date\", end_date: \"end_date\", duration: \"duration\"};\r\n\t\t\t} else if (typeof(section.map_to) === \"string\") {\r\n\t\t\t\tmapping = {start_date: section.map_to};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn mapping;\r\n\t};\r\n\r\n\tgantt.getLightboxValues = function () {\r\n\t\tvar task = {};\r\n\r\n\t\tif (gantt.isTaskExists(this._lightbox_id)) {\r\n\t\t\ttask = this.mixin({}, this.getTask(this._lightbox_id));\r\n\t\t}\r\n\r\n\t\tvar sns = this._get_typed_lightbox_config();\r\n\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\tvar node = document.getElementById(sns[i].id);\r\n\t\t\tnode = (node ? node.nextSibling : node);\r\n\t\t\tvar block = this.form_blocks[sns[i].type];\r\n\t\t\tif (!block) continue;\r\n\t\t\tvar res = block.get_value.call(this, node, task, sns[i]);\r\n\t\t\tvar map_to = gantt._resolve_default_mapping(sns[i]);\r\n\t\t\tif (typeof map_to == \"string\" && map_to != \"auto\") {\r\n\t\t\t\ttask[map_to] = res;\r\n\t\t\t} else if (typeof map_to == \"object\") {\r\n\t\t\t\tfor (var property in map_to) {\r\n\t\t\t\t\tif (map_to[property])\r\n\t\t\t\t\t\ttask[map_to[property]] = res[property];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn task;\r\n\t};\r\n\r\n\r\n\tgantt.hideLightbox = function () {\r\n\t\tvar box = this.getLightbox();\r\n\t\tif (box) box.style.display = \"none\";\r\n\r\n\t\tthis._waiAria.lightboxHiddenAttr(box);\r\n\t\tthis._lightbox_id = null;\r\n\r\n\t\tthis.hideCover();\r\n\t\tthis.callEvent(\"onAfterLightbox\", []);\r\n\t};\r\n\tgantt.hideCover = function () {\r\n\t\tif (this._cover)\r\n\t\t\tthis._cover.parentNode.removeChild(this._cover);\r\n\t\tthis._cover = null;\r\n\t};\r\n\r\n\tgantt.resetLightbox = function () {\r\n\t\tif (gantt._lightbox && !gantt._custom_lightbox)\r\n\t\t\tgantt._lightbox.parentNode.removeChild(gantt._lightbox);\r\n\t\tgantt._lightbox = null;\r\n\t};\r\n\tgantt._set_lightbox_values = function (data, box) {\r\n\t\tvar task = data;\r\n\t\tvar s = box.getElementsByTagName(\"span\");\r\n\t\tvar lightboxHeader = [];\r\n\t\tif (gantt.templates.lightbox_header) {\r\n\t\t\tlightboxHeader.push(\"\");\r\n\t\t\tlightboxHeader.push(gantt.templates.lightbox_header(task.start_date, task.end_date, task));\r\n\t\t\ts[1].innerHTML = \"\";\r\n\t\t\ts[2].innerHTML = gantt.templates.lightbox_header(task.start_date, task.end_date, task);\r\n\t\t} else {\r\n\t\t\tlightboxHeader.push(this.templates.task_time(task.start_date, task.end_date, task));\r\n\t\t\tlightboxHeader.push((this.templates.task_text(task.start_date, task.end_date, task) || \"\").substr(0, 70)); //IE6 fix\r\n\t\t\ts[1].innerHTML = this.templates.task_time(task.start_date, task.end_date, task);\r\n\t\t\ts[2].innerHTML = (this.templates.task_text(task.start_date, task.end_date, task) || \"\").substr(0, 70); //IE6 fix\r\n\t\t}\r\n\t\ts[1].innerHTML = lightboxHeader[0];\r\n\t\ts[2].innerHTML = lightboxHeader[1];\r\n\r\n\t\tgantt._waiAria.lightboxHeader(box, lightboxHeader.join(\" \"));\r\n\r\n\t\tvar sns = this._get_typed_lightbox_config(this.getLightboxType());\r\n\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\tvar section = sns[i];\r\n\r\n\t\t\tif (!this.form_blocks[section.type]) {\r\n\t\t\t\tcontinue;//skip incorrect sections, same check is done during rendering\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvar node = document.getElementById(section.id).nextSibling;\r\n\t\t\tvar block = this.form_blocks[section.type];\r\n\t\t\tvar map_to = gantt._resolve_default_mapping(sns[i]);\r\n\t\t\tvar value = this.defined(task[map_to]) ? task[map_to] : section.default_value;\r\n\t\t\tblock.set_value.call(gantt, node, value, task, section);\r\n\r\n\t\t\tif (section.focus)\r\n\t\t\t\tblock.focus.call(gantt, node);\r\n\t\t}\r\n\t\tif (data.id)\r\n\t\t\tgantt._lightbox_id = data.id;\r\n\t};\r\n\tgantt._fill_lightbox = function (id, box) {\r\n\t\tvar task = this.getTask(id);\r\n\t\tthis._set_lightbox_values(task, box);\r\n\t};\r\n\r\n\r\n\tgantt.getLightboxSection = function (name) {\r\n\t\tvar config = this._get_typed_lightbox_config();\r\n\t\tvar i = 0;\r\n\t\tfor (i; i < config.length; i++)\r\n\t\t\tif (config[i].name == name)\r\n\t\t\t\tbreak;\r\n\t\tvar section = config[i];\r\n\t\tif (!section)\r\n\t\t\treturn null;\r\n\r\n\t\tif (!this._lightbox)\r\n\t\t\tthis.getLightbox();\r\n\t\tvar header = document.getElementById(section.id);\r\n\t\tvar node = header.nextSibling;\r\n\r\n\t\tvar result = {\r\n\t\t\tsection: section,\r\n\t\t\theader: header,\r\n\t\t\tnode: node,\r\n\t\t\tgetValue: function (ev) {\r\n\t\t\t\treturn gantt.form_blocks[section.type].get_value.call(gantt, node, (ev || {}), section);\r\n\t\t\t},\r\n\t\t\tsetValue: function (value, ev) {\r\n\t\t\t\treturn gantt.form_blocks[section.type].set_value.call(gantt, node, value, (ev || {}), section);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar handler = this._lightbox_methods[\"get_\" + section.type + \"_control\"];\r\n\t\treturn handler ? handler(result) : result;\r\n\t};\r\n\r\n\tgantt._lightbox_methods.get_template_control = function (result) {\r\n\t\tresult.control = result.node;\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_select_control = function (result) {\r\n\t\tresult.control = result.node.getElementsByTagName('select')[0];\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_textarea_control = function (result) {\r\n\t\tresult.control = result.node.getElementsByTagName('textarea')[0];\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_time_control = function (result) {\r\n\t\tresult.control = result.node.getElementsByTagName('select'); // array\r\n\t\treturn result;\r\n\t};\r\n\r\n\r\n\tgantt._init_dnd_events = function () {\r\n\t\tthis.event(document.body, \"mousemove\", gantt._move_while_dnd);\r\n\t\tthis.event(document.body, \"mouseup\", gantt._finish_dnd);\r\n\t\tgantt._init_dnd_events = function () {\r\n\t\t};\r\n\t};\r\n\tgantt._move_while_dnd = function (e) {\r\n\t\tif (gantt._dnd_start_lb) {\r\n\t\t\tif (!document.gantt_unselectable) {\r\n\t\t\t\tdocument.body.className += \" gantt_unselectable\";\r\n\t\t\t\tdocument.gantt_unselectable = true;\r\n\t\t\t}\r\n\t\t\tvar lb = gantt.getLightbox();\r\n\t\t\tvar now = (e && e.target) ? [e.pageX, e.pageY] : [event.clientX, event.clientY];\r\n\t\t\tlb.style.top = gantt._lb_start[1] + now[1] - gantt._dnd_start_lb[1] + \"px\";\r\n\t\t\tlb.style.left = gantt._lb_start[0] + now[0] - gantt._dnd_start_lb[0] + \"px\";\r\n\t\t}\r\n\t};\r\n\tgantt._ready_to_dnd = function (e) {\r\n\t\tvar lb = gantt.getLightbox();\r\n\t\tgantt._lb_start = [parseInt(lb.style.left, 10), parseInt(lb.style.top, 10)];\r\n\t\tgantt._dnd_start_lb = (e && e.target) ? [e.pageX, e.pageY] : [event.clientX, event.clientY];\r\n\t};\r\n\tgantt._finish_dnd = function () {\r\n\t\tif (gantt._lb_start) {\r\n\t\t\tgantt._lb_start = gantt._dnd_start_lb = false;\r\n\t\t\tdocument.body.className = document.body.className.replace(\" gantt_unselectable\", \"\");\r\n\t\t\tdocument.gantt_unselectable = false;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt._focus = function (node, select) {\r\n\t\tif (node && node.focus) {\r\n\t\t\tif (gantt.config.touch) {\r\n\t\t\t\t//do not focus editor, to prevent auto-zoom\r\n\t\t\t} else {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (select && node.select) node.select();\r\n\t\t\t\t\tnode.focus();\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt.form_blocks = {\r\n\t\tgetTimePicker: function (sns, hidden) {\r\n\t\t\tvar time_format = sns.time_format;\r\n\t\t\tif (!time_format) {\r\n\t\t\t\t// default order\r\n\t\t\t\tvar time_format = [\"%d\", \"%m\", \"%Y\"];\r\n\r\n\t\t\t\tvar scale = gantt.getScale();\r\n\t\t\t\tvar unit = scale ? scale.unit : gantt.config.duration_unit;\r\n\r\n\t\t\t\tif (helpers.getSecondsInUnit(unit) < helpers.getSecondsInUnit(\"day\")) {\r\n\t\t\t\t\ttime_format.push(\"%H:%i\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// map: default order => real one\r\n\t\t\tsns._time_format_order = {size: 0};\r\n\r\n\r\n\t\t\tvar cfg = this.config;\r\n\t\t\tvar dt = this.date.date_part(new Date(gantt._min_date.valueOf()));\r\n\t\t\tvar last = 24 * 60, first = 0;\r\n\t\t\tif (gantt.config.limit_time_select) {\r\n\t\t\t\tlast = 60 * cfg.last_hour + 1;\r\n\t\t\t\tfirst = 60 * cfg.first_hour;\r\n\t\t\t\tdt.setHours(cfg.first_hour);\r\n\t\t\t}\r\n\t\t\tvar html = \"\";\r\n\r\n\t\t\tfor (var p = 0; p < time_format.length; p++) {\r\n\t\t\t\tvar time_option = time_format[p];\r\n\r\n\t\t\t\t// adding spaces between selects\r\n\t\t\t\tif (p > 0) {\r\n\t\t\t\t\thtml += \" \";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar options = '';\r\n\t\t\t\tswitch (time_option) {\r\n\t\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\t\tsns._time_format_order[2] = p;\r\n\t\t\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t\t\t//year\r\n\r\n\t\t\t\t\t\tvar range, offset, start_year, end_year;\r\n\r\n\t\t\t\t\t\tif (sns.year_range) {\r\n\t\t\t\t\t\t\tif (!isNaN(sns.year_range)) {\r\n\t\t\t\t\t\t\t\trange = sns.year_range;\r\n\t\t\t\t\t\t\t} else if (sns.year_range.push) {\r\n\t\t\t\t\t\t\t\t// if\r\n\t\t\t\t\t\t\t\tstart_year = sns.year_range[0];\r\n\t\t\t\t\t\t\t\tend_year = sns.year_range[1];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\trange = range || 10;\r\n\t\t\t\t\t\toffset = offset || Math.floor(range / 2);\r\n\t\t\t\t\t\tstart_year = start_year || dt.getFullYear() - offset;\r\n\t\t\t\t\t\tend_year = end_year || start_year + range;\r\n\r\n\r\n\t\t\t\t\t\tfor (var i = start_year; i < end_year; i++)\r\n\t\t\t\t\t\t\toptions += \"<option value='\" + (i) + \"'>\" + (i) + \"</option>\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%m\":\r\n\t\t\t\t\t\tsns._time_format_order[1] = p;\r\n\t\t\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t\t\t//month\r\n\t\t\t\t\t\tfor (var i = 0; i < 12; i++)\r\n\t\t\t\t\t\t\toptions += \"<option value='\" + i + \"'>\" + this.locale.date.month_full[i] + \"</option>\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%d\":\r\n\t\t\t\t\t\tsns._time_format_order[0] = p;\r\n\t\t\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t\t\t//days\r\n\t\t\t\t\t\tfor (var i = 1; i < 32; i++)\r\n\t\t\t\t\t\t\toptions += \"<option value='\" + i + \"'>\" + i + \"</option>\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%H:%i\":\r\n\t\t\t\t\t\t//  var last = 24*60, first = 0;\r\n\t\t\t\t\t\tsns._time_format_order[3] = p;\r\n\t\t\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t\t\t//hours\r\n\t\t\t\t\t\tvar i = first;\r\n\t\t\t\t\t\tvar tdate = dt.getDate();\r\n\t\t\t\t\t\tsns._time_values = [];\r\n\r\n\t\t\t\t\t\twhile (i < last) {\r\n\t\t\t\t\t\t\tvar time = this.templates.time_picker(dt);\r\n\t\t\t\t\t\t\toptions += \"<option value='\" + i + \"'>\" + time + \"</option>\";\r\n\t\t\t\t\t\t\tsns._time_values.push(i);\r\n\t\t\t\t\t\t\tdt.setTime(dt.valueOf() + this._get_timepicker_step() * 60 * 1000);\r\n\t\t\t\t\t\t\tvar diff = (dt.getDate() != tdate) ? 1 : 0; // moved or not to the next day\r\n\t\t\t\t\t\t\ti = diff * 24 * 60 + dt.getHours() * 60 + dt.getMinutes();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (options) {\r\n\r\n\t\t\t\t\tvar ariaAttrs = gantt._waiAria.lightboxSelectAttrString(time_option);\r\n\r\n\t\t\t\t\tvar readonly = sns.readonly ? \"disabled='disabled'\" : \"\";\r\n\t\t\t\t\tvar display = hidden ? \" style='display:none' \" : \"\";\r\n\t\t\t\t\thtml += \"<select \" + readonly + display + ariaAttrs + \">\" + options + \"</select>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn html;\r\n\t\t},\r\n\t\t_fill_lightbox_select: function (s, i, d, map, cfg) {\r\n\t\t\ts[i + map[0]].value = d.getDate();\r\n\t\t\ts[i + map[1]].value = d.getMonth();\r\n\t\t\ts[i + map[2]].value = d.getFullYear();\r\n\t\t\tif (gantt.defined(map[3])) {\r\n\t\t\t\tvar v = d.getHours() * 60 + d.getMinutes();\r\n\t\t\t\tv = Math.round(v / gantt._get_timepicker_step()) * gantt._get_timepicker_step();\r\n\t\t\t\tvar input = s[i + map[3]];\r\n\t\t\t\tinput.value = v;\r\n\t\t\t\t//in case option not shown\r\n\t\t\t\tinput.setAttribute('data-value', v);\r\n\t\t\t}\r\n\t\t},\r\n\t\ttemplate: {\r\n\t\t\trender: function (sns) {\r\n\t\t\t\tvar height = (sns.height || \"30\") + \"px\";\r\n\t\t\t\treturn \"<div class='gantt_cal_ltext gantt_cal_template' style='height:\" + height + \";'></div>\";\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev, config) {\r\n\t\t\t\tnode.innerHTML = value || \"\";\r\n\t\t\t},\r\n\t\t\tget_value: function (node, ev, config) {\r\n\t\t\t\treturn node.innerHTML || \"\";\r\n\t\t\t},\r\n\t\t\tfocus: function (node) {\r\n\t\t\t}\r\n\t\t},\r\n\t\ttextarea: {\r\n\t\t\trender: function (sns) {\r\n\t\t\t\tvar height = (sns.height || \"130\") + \"px\";\r\n\t\t\t\treturn \"<div class='gantt_cal_ltext' style='height:\" + height + \";'><textarea></textarea></div>\";\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev) {\r\n\t\t\t\tthis.form_blocks.textarea._get_input(node).value = value || \"\";\r\n\t\t\t},\r\n\t\t\tget_value: function (node, ev) {\r\n\t\t\t\treturn this.form_blocks.textarea._get_input(node).value;\r\n\t\t\t},\r\n\t\t\tfocus: function (node) {\r\n\t\t\t\tvar a = this.form_blocks.textarea._get_input(node);\r\n\t\t\t\tgantt._focus(a, true);\r\n\t\t\t},\r\n\t\t\t_get_input: function (node) {\r\n\t\t\t\treturn node.querySelector(\"textarea\");\r\n\t\t\t}\r\n\t\t},\r\n\t\tselect: {\r\n\t\t\trender: function (sns) {\r\n\t\t\t\tvar height = (sns.height || \"23\") + \"px\";\r\n\t\t\t\tvar html = \"<div class='gantt_cal_ltext' style='height:\" + height + \";'><select style='width:100%;'>\";\r\n\t\t\t\tfor (var i = 0; i < sns.options.length; i++)\r\n\t\t\t\t\thtml += \"<option value='\" + sns.options[i].key + \"'>\" + sns.options[i].label + \"</option>\";\r\n\t\t\t\thtml += \"</select></div>\";\r\n\t\t\t\treturn html;\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev, sns) {\r\n\t\t\t\tvar select = node.firstChild;\r\n\t\t\t\tif (!select._dhx_onchange && sns.onchange) {\r\n\t\t\t\t\tselect.onchange = sns.onchange;\r\n\t\t\t\t\tselect._dhx_onchange = true;\r\n\t\t\t\t}\r\n\t\t\t\tif (typeof value == \"undefined\")\r\n\t\t\t\t\tvalue = (select.options[0] || {}).value;\r\n\t\t\t\tselect.value = value || \"\";\r\n\t\t\t},\r\n\t\t\tget_value: function (node, ev) {\r\n\t\t\t\treturn node.firstChild.value;\r\n\t\t\t},\r\n\t\t\tfocus: function (node) {\r\n\t\t\t\tvar a = node.firstChild;\r\n\t\t\t\tgantt._focus(a, true);\r\n\t\t\t}\r\n\t\t},\r\n\t\ttime: {\r\n\t\t\trender: function (sns) {\r\n\t\t\t\tvar time = this.form_blocks.getTimePicker.call(this, sns);\r\n\t\t\t\tvar parts = [\"<div style='height:\" + (sns.height || 30) + \"px;padding-top:0px;font-size:inherit;text-align:center;' class='gantt_section_time'>\"];\r\n\t\t\t\tparts.push(time);\r\n\r\n\t\t\t\tif (sns.single_date) {\r\n\t\t\t\t\ttime = this.form_blocks.getTimePicker.call(this, sns, true);\r\n\t\t\t\t\tparts.push(\"<span></span>\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tparts.push(\"<span style='font-weight:normal; font-size:10pt;'> &nbsp;&ndash;&nbsp; </span>\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tparts.push(time);\r\n\t\t\t\tparts.push(\"</div>\");\r\n\t\t\t\treturn parts.join('');\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev, config) {\r\n\t\t\t\tvar cfg = config;\r\n\t\t\t\tvar s = node.getElementsByTagName(\"select\");\r\n\r\n\t\t\t\tvar map = config._time_format_order;\r\n\t\t\t\tvar map_size = config._time_format_size;\r\n\r\n\t\t\t\tif (cfg.auto_end_date) {\r\n\t\t\t\t\tvar _update_lightbox_select = function () {\r\n\t\t\t\t\t\tstart_date = new Date(s[map[2]].value, s[map[1]].value, s[map[0]].value, 0, 0);\r\n\t\t\t\t\t\tend_date = gantt.calculateEndDate({start_date: start_date, duration: 1, task: ev});\r\n\t\t\t\t\t\tthis.form_blocks._fill_lightbox_select(s, map.size, end_date, map, cfg);\r\n\t\t\t\t\t};\r\n\t\t\t\t\tfor (var i = 0; i < 4; i++) {\r\n\t\t\t\t\t\ts[i].onchange = _update_lightbox_select;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar mapping = gantt._resolve_default_mapping(config);\r\n\r\n\t\t\t\tif (typeof(mapping) === \"string\") mapping = {start_date: mapping};\r\n\r\n\t\t\t\tvar start_date = ev[mapping.start_date] || new Date();\r\n\t\t\t\tvar end_date = ev[mapping.end_date] || gantt.calculateEndDate({\r\n\t\t\t\t\tstart_date: start_date,\r\n\t\t\t\t\tduration: 1,\r\n\t\t\t\t\ttask: ev\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.form_blocks._fill_lightbox_select(s, 0, start_date, map, cfg);\r\n\t\t\t\tthis.form_blocks._fill_lightbox_select(s, map.size, end_date, map, cfg);\r\n\t\t\t},\r\n\r\n\t\t\tget_value: function (node, ev, config) {\r\n\t\t\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\t\t\tvar map = config._time_format_order;\r\n\r\n\t\t\t\tvar hours = 0, minutes = 0;\r\n\t\t\t\tif (gantt.defined(map[3])) {\r\n\t\t\t\t\tvar time = parseInt(s[map[3]].value, 10);\r\n\t\t\t\t\thours = Math.floor(time / 60);\r\n\t\t\t\t\tminutes = time % 60;\r\n\t\t\t\t}\r\n\t\t\t\tvar start_date = new Date(s[map[2]].value, s[map[1]].value, s[map[0]].value, hours, minutes);\r\n\r\n\t\t\t\thours = minutes = 0;\r\n\t\t\t\tif (gantt.defined(map[3])) {\r\n\t\t\t\t\tvar time = parseInt(s[map.size + map[3]].value, 10);\r\n\t\t\t\t\thours = Math.floor(time / 60);\r\n\t\t\t\t\tminutes = time % 60;\r\n\t\t\t\t}\r\n\t\t\t\tvar end_date = new Date(s[map[2] + map.size].value, s[map[1] + map.size].value, s[map[0] + map.size].value, hours, minutes);\r\n\r\n\t\t\t\tif (end_date <= start_date)\r\n\t\t\t\t\tend_date = gantt.date.add(start_date, gantt._get_timepicker_step(), \"minute\");\r\n\r\n\t\t\t\tvar mapped_fields = gantt._resolve_default_mapping(config);\r\n\r\n\t\t\t\tvar res = {\r\n\t\t\t\t\tstart_date: new Date(start_date),\r\n\t\t\t\t\tend_date: new Date(end_date)\r\n\t\t\t\t};\r\n\t\t\t\tif (typeof mapped_fields == \"string\") {\r\n\t\t\t\t\treturn res.start_date;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn res;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfocus: function (node) {\r\n\t\t\t\tgantt._focus(node.getElementsByTagName(\"select\")[0]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tduration: {\r\n\t\t\trender: function (sns) {\r\n\t\t\t\tvar time = this.form_blocks.getTimePicker.call(this, sns);\r\n\t\t\t\ttime = \"<div class='gantt_time_selects'>\" + time + \"</div>\";\r\n\t\t\t\tvar label = this.locale.labels[this.config.duration_unit + \"s\"];\r\n\r\n\t\t\t\tvar singleDate = sns.single_date ? ' style=\"display:none\"' : \"\";\r\n\t\t\t\tvar readonly = sns.readonly ? \" disabled='disabled'\" : \"\";\r\n\r\n\t\t\t\tvar ariaAttr = this._waiAria.lightboxDurationInputAttrString(sns);\r\n\r\n\t\t\t\tvar duration = \"<div class='gantt_duration' \" + singleDate + \">\" +\r\n\t\t\t\t\t\"<input type='button' class='gantt_duration_dec' value=''\" + readonly + \">\" +\r\n\t\t\t\t\t\"<input type='text' value='5' class='gantt_duration_value'\" + readonly + \" \" + ariaAttr + \">\" +\r\n\t\t\t\t\t\"<input type='button' class='gantt_duration_inc' value='+'\" + readonly + \"> \" + label + \" <span></span>\" +\r\n\t\t\t\t\t\"</div>\";\r\n\t\t\t\tvar html = \"<div style='height:\" + (sns.height || 30) + \"px;padding-top:0px;font-size:inherit;' class='gantt_section_time'>\" + time + \" \" + duration + \"</div>\";\r\n\t\t\t\treturn html;\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev, config) {\r\n\t\t\t\tvar cfg = config;\r\n\t\t\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\t\t\tvar inps = node.getElementsByTagName(\"input\");\r\n\r\n\t\t\t\tvar duration = inps[1];\r\n\t\t\t\tvar btns = [inps[0], inps[2]];\r\n\t\t\t\tvar endspan = node.getElementsByTagName(\"span\")[0];\r\n\r\n\t\t\t\tvar map = config._time_format_order;\r\n\r\n\t\t\t\tfunction _calc_date() {\r\n\t\t\t\t\tvar start_date = gantt.form_blocks.duration._get_start_date.call(gantt, node, config);\r\n\t\t\t\t\tvar duration = gantt.form_blocks.duration._get_duration.call(gantt, node, config);\r\n\t\t\t\t\tvar end_date = gantt.calculateEndDate({start_date: start_date, duration: duration, task: ev});\r\n\r\n\t\t\t\t\tendspan.innerHTML = gantt.templates.task_date(end_date);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction _change_duration(step) {\r\n\t\t\t\t\tvar value = duration.value;\r\n\t\t\t\t\tvalue = parseInt(value, 10);\r\n\t\t\t\t\tif (window.isNaN(value))\r\n\t\t\t\t\t\tvalue = 0;\r\n\t\t\t\t\tvalue += step;\r\n\t\t\t\t\tif (value < 1) value = 1;\r\n\t\t\t\t\tduration.value = value;\r\n\t\t\t\t\t_calc_date();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbtns[0].onclick = gantt.bind(function () {\r\n\t\t\t\t\t_change_duration(-1 * this.config.duration_step);\r\n\t\t\t\t}, this);\r\n\t\t\t\tbtns[1].onclick = gantt.bind(function () {\r\n\t\t\t\t\t_change_duration(1 * this.config.duration_step);\r\n\t\t\t\t}, this);\r\n\t\t\t\ts[0].onchange = _calc_date;\r\n\t\t\t\ts[1].onchange = _calc_date;\r\n\t\t\t\ts[2].onchange = _calc_date;\r\n\t\t\t\tif (s[3]) s[3].onchange = _calc_date;\r\n\t\t\t\tduration.onkeydown = gantt.bind(function (e) {\r\n\t\t\t\t\te = e || window.event;\r\n\t\t\t\t\t// up\r\n\t\t\t\t\tvar code = (e.charCode || e.keyCode || e.which);\r\n\r\n\t\t\t\t\tif (code == 40) {\r\n\t\t\t\t\t\t_change_duration(-1 * this.config.duration_step);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// down\r\n\t\t\t\t\tif (code == 38) {\r\n\t\t\t\t\t\t_change_duration(1 * this.config.duration_step);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\twindow.setTimeout(function (e) {\r\n\t\t\t\t\t\t_calc_date();\r\n\t\t\t\t\t}, 1);\r\n\t\t\t\t}, this);\r\n\r\n\t\t\t\tduration.onchange = gantt.bind(function (e) {\r\n\t\t\t\t\t_calc_date();\r\n\t\t\t\t}, this);\r\n\r\n\t\t\t\tvar mapping = gantt._resolve_default_mapping(config);\r\n\t\t\t\tif (typeof(mapping) === \"string\") mapping = {start_date: mapping};\r\n\r\n\t\t\t\tvar start_date = ev[mapping.start_date] || new Date();\r\n\t\t\t\tvar end_date = ev[mapping.end_date] || gantt.calculateEndDate({\r\n\t\t\t\t\tstart_date: start_date,\r\n\t\t\t\t\tduration: 1,\r\n\t\t\t\t\ttask: ev\r\n\t\t\t\t});\r\n\t\t\t\tvar duration_val = Math.round(ev[mapping.duration]) || gantt.calculateDuration({\r\n\t\t\t\t\tstart_date: start_date,\r\n\t\t\t\t\tend_date: end_date,\r\n\t\t\t\t\ttask: ev\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgantt.form_blocks._fill_lightbox_select(s, 0, start_date, map, cfg);\r\n\t\t\t\tduration.value = duration_val;\r\n\t\t\t\t_calc_date();\r\n\t\t\t},\r\n\r\n\t\t\t_get_start_date: function (node, config) {\r\n\t\t\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\t\t\tvar map = config._time_format_order;\r\n\t\t\t\tvar hours = 0;\r\n\t\t\t\tvar minutes = 0;\r\n\t\t\t\tif (gantt.defined(map[3])) {\r\n\t\t\t\t\tvar input = s[map[3]];\r\n\t\t\t\t\tvar time = parseInt(input.value, 10);\r\n\t\t\t\t\tif (isNaN(time) && input.hasAttribute(\"data-value\")) {\r\n\t\t\t\t\t\ttime = parseInt(input.getAttribute(\"data-value\"), 10);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\thours = Math.floor(time / 60);\r\n\t\t\t\t\tminutes = time % 60;\r\n\t\t\t\t}\r\n\t\t\t\treturn new Date(s[map[2]].value, s[map[1]].value, s[map[0]].value, hours, minutes);\r\n\t\t\t},\r\n\t\t\t_get_duration: function (node, config) {\r\n\t\t\t\tvar duration = node.getElementsByTagName(\"input\")[1];\r\n\t\t\t\tduration = parseInt(duration.value, 10);\r\n\t\t\t\tif (!duration || window.isNaN(duration)) duration = 1;\r\n\t\t\t\tif (duration < 0) duration *= -1;\r\n\t\t\t\treturn duration;\r\n\t\t\t},\r\n\r\n\t\t\tget_value: function (node, ev, config) {\r\n\t\t\t\tvar start_date = gantt.form_blocks.duration._get_start_date(node, config);\r\n\t\t\t\tvar duration = gantt.form_blocks.duration._get_duration(node, config);\r\n\r\n\t\t\t\tvar end_date = gantt.calculateEndDate({start_date: start_date, duration: duration, task: ev});\r\n\t\t\t\tvar mapped_fields = gantt._resolve_default_mapping(config);\r\n\t\t\t\tvar res = {\r\n\t\t\t\t\tstart_date: new Date(start_date),\r\n\t\t\t\t\tend_date: new Date(end_date),\r\n\t\t\t\t\tduration: duration\r\n\t\t\t\t};\r\n\t\t\t\tif (typeof mapped_fields == \"string\") {\r\n\t\t\t\t\treturn res.start_date;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn res;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfocus: function (node) {\r\n\t\t\t\tgantt._focus(node.getElementsByTagName(\"select\")[0]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tparent: {\r\n\t\t\t_filter: function (options, config, item_id) {\r\n\t\t\t\tvar filter = config.filter || function () {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t};\r\n\r\n\t\t\t\toptions = options.slice(0);\r\n\r\n\t\t\t\tfor (var i = 0; i < options.length; i++) {\r\n\t\t\t\t\tvar task = options[i];\r\n\t\t\t\t\tif (task.id == item_id || gantt.isChildOf(task.id, item_id) || filter(task.id, task) === false) {\r\n\t\t\t\t\t\toptions.splice(i, 1);\r\n\t\t\t\t\t\ti--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn options;\r\n\t\t\t},\r\n\r\n\t\t\t_display: function (config, item_id) {\r\n\t\t\t\tvar tasks = [],\r\n\t\t\t\t\toptions = [];\r\n\t\t\t\tif (item_id) {\r\n\t\t\t\t\ttasks = gantt.getTaskByTime();\r\n\t\t\t\t\tif (config.allow_root) {\r\n\t\t\t\t\t\ttasks.unshift({id: gantt.config.root_id, text: config.root_label || \"\"});\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttasks = this._filter(tasks, config, item_id);\r\n\t\t\t\t\tif (config.sort) {\r\n\t\t\t\t\t\ttasks.sort(config.sort);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar text = config.template || gantt.templates.task_text;\r\n\t\t\t\tfor (var i = 0; i < tasks.length; i++) {\r\n\t\t\t\t\tvar label = text.apply(gantt, [tasks[i].start_date, tasks[i].end_date, tasks[i]]);\r\n\t\t\t\t\tif (label === undefined) {\r\n\t\t\t\t\t\tlabel = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\toptions.push({\r\n\t\t\t\t\t\tkey: tasks[i].id,\r\n\t\t\t\t\t\tlabel: label\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tconfig.options = options;\r\n\t\t\t\tconfig.map_to = config.map_to || \"parent\";\r\n\t\t\t\treturn gantt.form_blocks.select.render.apply(this, arguments);\r\n\t\t\t},\r\n\t\t\trender: function (sns) {\r\n\t\t\t\treturn gantt.form_blocks.parent._display(sns, false);\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev, config) {\r\n\t\t\t\tvar tmpDom = document.createElement(\"div\");\r\n\t\t\t\ttmpDom.innerHTML = gantt.form_blocks.parent._display(config, ev.id);\r\n\t\t\t\tvar newOptions = tmpDom.removeChild(tmpDom.firstChild);\r\n\t\t\t\tnode.onselect = null;\r\n\t\t\t\tnode.parentNode.replaceChild(newOptions, node);\r\n\r\n\t\t\t\treturn gantt.form_blocks.select.set_value.apply(gantt, [newOptions, value, ev, config]);\r\n\t\t\t},\r\n\t\t\tget_value: function () {\r\n\t\t\t\treturn gantt.form_blocks.select.get_value.apply(gantt, arguments);\r\n\t\t\t},\r\n\t\t\tfocus: function () {\r\n\t\t\t\treturn gantt.form_blocks.select.focus.apply(gantt, arguments);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._is_lightbox_timepicker = function () {\r\n\t\tvar s = this._get_typed_lightbox_config();\r\n\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\tif (s[i].name == \"time\" && s[i].type == \"time\")\r\n\t\t\t\treturn true;\r\n\t\treturn false;\r\n\t};\r\n\r\n\tgantt._dhtmlx_confirm = function (message, title, callback, ok) {\r\n\t\tif (!message)\r\n\t\t\treturn callback();\r\n\t\tvar opts = {text: message};\r\n\t\tif (title)\r\n\t\t\topts.title = title;\r\n\t\tif (ok) {\r\n\t\t\topts.ok = ok;\r\n\t\t}\r\n\t\tif (callback) {\r\n\t\t\topts.callback = function (result) {\r\n\t\t\t\tif (result)\r\n\t\t\t\t\tcallback();\r\n\t\t\t};\r\n\t\t}\r\n\t\tgantt.confirm(opts);\r\n\t};\r\n\r\n\tfunction _get_type_name(type_value) {\r\n\t\tfor (var i in this.config.types) {\r\n\t\t\tif (this.config.types[i] == type_value) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"task\";\r\n\t}\r\n\r\n\tgantt._get_typed_lightbox_config = function (type) {\r\n\t\tif (type === undefined) {\r\n\t\t\ttype = this.getLightboxType();\r\n\t\t}\r\n\r\n\t\tvar field = _get_type_name.call(this, type);\r\n\r\n\t\tif (gantt.config.lightbox[field + \"_sections\"]) {\r\n\t\t\treturn gantt.config.lightbox[field + \"_sections\"];\r\n\t\t} else {\r\n\t\t\treturn gantt.config.lightbox.sections;\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._silent_redraw_lightbox = function (type) {\r\n\t\tvar oldType = this.getLightboxType();\r\n\r\n\t\tif (this.getState().lightbox) {\r\n\t\t\tvar taskId = this.getState().lightbox;\r\n\t\t\tvar formData = this.getLightboxValues(),\r\n\t\t\t\ttask = this.copy(this.getTask(taskId));\r\n\r\n\t\t\tthis.resetLightbox();\r\n\r\n\t\t\tvar updTask = this.mixin(task, formData, true);\r\n\t\t\tvar box = this.getLightbox(type ? type : undefined);\r\n\t\t\tthis._center_lightbox(this.getLightbox());\r\n\t\t\tthis._set_lightbox_values(updTask, box);\r\n\t\t} else {\r\n\t\t\tthis.resetLightbox();\r\n\t\t\tthis.getLightbox(type ? type : undefined);\r\n\t\t}\r\n\t\tthis.callEvent(\"onLightboxChange\", [oldType, this.getLightboxType()]);\r\n\t};\r\n\r\n};\n\n/***/ }),\n/* 94 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\n\r\n\tgantt._extend_to_optional = function (lightbox_block) {\r\n\r\n\t\tvar duration = lightbox_block;\r\n\t\tvar optional_time = {\r\n\t\t\trender: duration.render,\r\n\t\t\tfocus: duration.focus,\r\n\t\t\tset_value: function (node, value, task, section) {\r\n\t\t\t\tvar mapping = gantt._resolve_default_mapping(section);\r\n\t\t\t\tif (!task[mapping.start_date] || (mapping.start_date == \"start_date\" && this._isAllowedUnscheduledTask(task))) {\r\n\t\t\t\t\toptional_time.disable(node, section);\r\n\t\t\t\t\tvar val = {};\r\n\r\n\t\t\t\t\tfor (var i in mapping) {\r\n\t\t\t\t\t\t//take default values from the time control from task start/end dates\r\n\t\t\t\t\t\tval[mapping[i]] = task[i];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn duration.set_value.call(gantt, node, value, val, section);//set default value\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptional_time.enable(node, section);\r\n\t\t\t\t\treturn duration.set_value.call(gantt, node, value, task, section);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tget_value: function (node, task, section) {\r\n\t\t\t\tif (section.disabled) {\r\n\t\t\t\t\treturn {start_date: null};\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn duration.get_value.call(gantt, node, task, section);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tupdate_block: function (node, section) {\r\n\t\t\t\tgantt.callEvent(\"onSectionToggle\", [gantt._lightbox_id, section]);\r\n\t\t\t\tnode.style.display = section.disabled ? \"none\" : \"block\";\r\n\r\n\t\t\t\tif (section.button) {\r\n\t\t\t\t\tvar button = node.previousSibling.querySelector(\".gantt_custom_button_label\"),\r\n\t\t\t\t\t\tlabels = gantt.locale.labels;\r\n\r\n\t\t\t\t\tvar button_text = section.disabled ? labels[section.name + \"_enable_button\"] : labels[section.name + \"_disable_button\"];\r\n\r\n\t\t\t\t\tbutton.innerHTML = button_text;\r\n\t\t\t\t}\r\n\t\t\t\tgantt.resizeLightbox();\r\n\t\t\t},\r\n\t\t\tdisable: function (node, section) {\r\n\t\t\t\tsection.disabled = true;\r\n\t\t\t\toptional_time.update_block(node, section);\r\n\r\n\t\t\t},\r\n\t\t\tenable: function (node, section) {\r\n\t\t\t\tsection.disabled = false;\r\n\t\t\t\toptional_time.update_block(node, section);\r\n\t\t\t},\r\n\t\t\tbutton_click: function (index, el, section, container) {\r\n\t\t\t\tif (gantt.callEvent(\"onSectionButton\", [gantt._lightbox_id, section]) === false) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar config = gantt._get_typed_lightbox_config()[index];\r\n\t\t\t\tif (config.disabled) {\r\n\t\t\t\t\toptional_time.enable(container, config);\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptional_time.disable(container, config);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn optional_time;\r\n\t};\r\n\r\n\tgantt.form_blocks.duration_optional = gantt._extend_to_optional(gantt.form_blocks.duration);\r\n\tgantt.form_blocks.time_optional = gantt._extend_to_optional(gantt.form_blocks.time);\r\n\r\n};\n\n/***/ }),\n/* 95 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\n\r\n\tgantt.getTaskType = function (type) {\r\n\t\tvar checkType = type;\r\n\t\tif(type && typeof type == \"object\"){\r\n\t\t\tcheckType = type.type;\r\n\t\t}\r\n\r\n\t\tfor (var i in this.config.types) {\r\n\t\t\tif (this.config.types[i] == checkType) {\r\n\t\t\t\treturn checkType;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn gantt.config.types.task;\r\n\t};\r\n\r\n\tgantt.form_blocks.typeselect = {\r\n\t\trender: function (sns) {\r\n\t\t\tvar types = gantt.config.types,\r\n\t\t\t\tlocale = gantt.locale.labels,\r\n\t\t\t\toptions = [];\r\n\r\n\t\t\tvar filter = sns.filter || function () {\r\n\t\t\t\treturn true;\r\n\t\t\t};\r\n\t\t\tfor (var i in types) {\r\n\t\t\t\tif (!filter(i, types[i]) === false) {\r\n\t\t\t\t\toptions.push({key: types[i], label: locale[\"type_\" + i]});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tsns.options = options;\r\n\r\n\t\t\tvar oldOnChange = sns.onchange;\r\n\t\t\tsns.onchange = function () {\r\n\t\t\t\tvar tId = gantt.getState().lightbox;\r\n\r\n\t\t\t\tgantt.changeLightboxType(this.value);\r\n\t\t\t\tif (typeof oldOnChange == 'function') {\r\n\t\t\t\t\toldOnChange.apply(this, arguments);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\treturn gantt.form_blocks.select.render.apply(gantt, arguments);\r\n\t\t},\r\n\t\tset_value: function () {\r\n\t\t\treturn gantt.form_blocks.select.set_value.apply(gantt, arguments);\r\n\t\t},\r\n\t\tget_value: function () {\r\n\t\t\treturn gantt.form_blocks.select.get_value.apply(gantt, arguments);\r\n\t\t},\r\n\t\tfocus: function () {\r\n\t\t\treturn gantt.form_blocks.select.focus.apply(this, arguments);\r\n\t\t}\r\n\t};\r\n\r\n};\n\n/***/ }),\n/* 96 */\n/***/ (function(module, exports) {\n\n/*\r\n reuse results of functions that can be recalculated during rendering\r\n greatly increases the rendering speed when critical path enabled\r\n Sample - 94_dev/critical_path.html\r\n\r\n */\r\nmodule.exports = function(gantt){\r\n\r\ngantt._cached_functions = {\r\n\tcache: {},\r\n\tmode: false,\r\n\tcritical_path_mode: false,\r\n\twrap_methods : function(methods, object){\r\n\t\tif(object._prefetch_originals){\r\n\t\t\tfor(var i in object._prefetch_originals){\r\n\t\t\t\tobject[i] = object._prefetch_originals[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\tobject._prefetch_originals = {};\r\n\t\tfor(var i = 0; i < methods.length; i++)\r\n\t\t\tthis.prefetch(methods[i], object);\r\n\r\n\t},\r\n\tprefetch : function(methodname, host){\r\n\t\tvar original = host[methodname];\r\n\t\tif(original){\r\n\t\t\tvar optimizer = this;\r\n\r\n\t\t\thost._prefetch_originals[methodname] = original;\r\n\t\t\thost[methodname] = function get_prefetched_value(){\r\n\r\n\t\t\t\tvar argumentsArray = new Array(arguments.length);\r\n\t\t\t\tfor (var i = 0, l = arguments.length; i < l; i++) {\r\n\t\t\t\t\targumentsArray[i] = arguments[i];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(optimizer.active){\r\n\t\t\t\t\tvar args = optimizer.get_arguments_hash(Array.prototype.slice.call(argumentsArray));\r\n\t\t\t\t\tif(!optimizer.cache[methodname]){\r\n\t\t\t\t\t\toptimizer.cache[methodname] = {};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar cached_values = optimizer.cache[methodname];\r\n\r\n\t\t\t\t\tif(optimizer.has_cached_value(cached_values, args)){\r\n\t\t\t\t\t\treturn optimizer.get_cached_value(cached_values, args);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar value = original.apply(this, argumentsArray);\r\n\t\t\t\t\t\toptimizer.cache_value(cached_values, args, value);\r\n\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn original.apply(this, argumentsArray);\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn original;\r\n\t},\r\n\tcache_value: function(cache, arguments_hash, value){\r\n\t\tif(this.is_date(value))\r\n\t\t\tvalue = new Date(value);\r\n\t\tcache[arguments_hash] = value;\r\n\t},\r\n\thas_cached_value: function(cache, arguments_hash){\r\n\t\treturn cache.hasOwnProperty(arguments_hash);\r\n\t},\r\n\tget_cached_value: function(cache, arguments_hash){\r\n\t\tvar data = cache[arguments_hash];\r\n\r\n\t\t//for cached dates - return copy\r\n\t\tif(this.is_date(data)){\r\n\t\t\tdata = new Date(data);\r\n\t\t}\r\n\t\treturn data;\r\n\t},\r\n\tis_date: function(value){\r\n\t\treturn (value && value.getUTCDate);\r\n\t},\r\n\tget_arguments_hash:function(args){\r\n\t\tvar values = [];\r\n\t\tfor(var i = 0; i < args.length; i++){\r\n\t\t\tvalues.push(this.stringify_argument(args[i]));\r\n\t\t}\r\n\t\treturn \"(\" + values.join(\";\") + \")\";\r\n\t},\r\n\tstringify_argument: function(value){\r\n\t\t//expecting task or link, or any other data entries, dates and primitive values\r\n\t\tvar ret = \"\";\r\n\t\tif(value.id){\r\n\t\t\tret = value.id;\r\n\t\t}else if(this.is_date(value)){\r\n\t\t\tret = value.valueOf();\r\n\t\t}else{\r\n\t\t\tret = value;\r\n\t\t}\r\n\t\treturn ret + \"\";\r\n\t},\r\n\tactivate: function(){\r\n\t\tthis.clear();\r\n\t\tthis.active = true;\r\n\t},\r\n\tdeactivate: function(){\r\n\t\tthis.clear();\r\n\t\tthis.active = false;\r\n\t},\r\n\tclear: function(){\r\n\t\tthis.cache = {};\r\n\t},\r\n\r\n\tsetup: function(gantt){\r\n\t\tvar override_gantt = [];\r\n\r\n\t\tvar gantt_methods  = [\r\n\t\t\t'_isCriticalTask',\r\n\t\t\t'isCriticalLink',\r\n\t\t\t'_isProjectEnd',\r\n\t\t\t'_getProjectEnd',\r\n\t\t\t'_getSlack'\r\n\t\t];\r\n\r\n\r\n\r\n\t\tif(this.mode == 'auto'){\r\n\t\t\tif(gantt.config.highlight_critical_path){\r\n\t\t\t\toverride_gantt = gantt_methods;\r\n\t\t\t}\r\n\t\t}else if(this.mode === true){\r\n\t\t\toverride_gantt = gantt_methods;\r\n\t\t}\r\n\r\n\t\tthis.wrap_methods(override_gantt, gantt);\r\n\r\n\t},\r\n\tupdate_if_changed: function(gantt){\r\n\t\tvar changed = (this.critical_path_mode != gantt.config.highlight_critical_path ||\r\n\t\t\t\t\t\tthis.mode !== gantt.config.optimize_render);\r\n\t\tif(changed){\r\n\t\t\tthis.critical_path_mode = gantt.config.highlight_critical_path;\r\n\t\t\tthis.mode = gantt.config.optimize_render;\r\n\t\t\tthis.setup(gantt);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nfunction activate(){\r\n\tgantt._cached_functions.update_if_changed(gantt);\r\n\tif(!gantt._cached_functions.active){\r\n\t\tgantt._cached_functions.activate();\r\n\t}\r\n\treturn true;\r\n}\r\ngantt.attachEvent(\"onBeforeGanttRender\", activate);\r\ngantt.attachEvent(\"onBeforeDataRender\", activate);\r\ngantt.attachEvent(\"onBeforeSmartRender\",  function(){\r\n\tactivate();\r\n});\r\ngantt.attachEvent(\"onBeforeParse\", activate);\r\ngantt.attachEvent(\"onDataRender\", function(){\r\n\tgantt._cached_functions.deactivate();\r\n});\r\nvar deactivTimeout = null;\r\ngantt.attachEvent(\"onSmartRender\", function(){\r\n\tif(deactivTimeout)\r\n\t\tclearTimeout(deactivTimeout);\r\n\tdeactivTimeout = setTimeout(function(){\r\n\t\tgantt._cached_functions.deactivate();\r\n\t}, 1000);\r\n});\r\n\r\ngantt.attachEvent(\"onBeforeGanttReady\", function(){\r\n\tgantt._cached_functions.update_if_changed(gantt);\r\n\treturn true;\r\n});\r\n\r\n};\n\n/***/ }),\n/* 97 */\n/***/ (function(module, exports) {\n\nfunction _configure(col, data, force) {\r\n\tfor (var key in data)\r\n\t\tif (typeof col[key] == \"undefined\" || force)\r\n\t\t\tcol[key] = data[key];\r\n}\r\n\r\nfunction _get_skin(force, gantt) {\r\n\tvar skin = gantt.skin;\r\n\tif (!skin || force) {\r\n\t\tvar links = document.getElementsByTagName(\"link\");\r\n\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\tvar res = links[i].href.match(\"dhtmlxgantt_([a-z\\_]+).css\");\r\n\t\t\tif (res) {\r\n\t\t\t\tif (gantt.skins[res[1]] || !skin) {\r\n\t\t\t\t\tskin = res[1];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.skin = skin || \"terrace\";\r\n\tvar skinset = gantt.skins[gantt.skin] || gantt.skins[\"terrace\"];\r\n\r\n\t//apply skin related settings\r\n\t_configure(gantt.config, skinset.config, force);\r\n\r\n\tvar config = gantt.getGridColumns();\r\n\tif (config[1] && !gantt.defined(config[1].width))\r\n\t\tconfig[1].width = skinset._second_column_width;\r\n\tif (config[2] && !gantt.defined(config[2].width))\r\n\t\tconfig[2].width = skinset._third_column_width;\r\n\t\r\n\tfor (var i=0; i<config.length; i++) {\r\n\t\tvar column = config[i];\r\n\t\tif (column.name == \"add\") {\r\n\t\t\tif(!column.width){\r\n\t\t\t\tcolumn.width = 44;\r\n\t\t\t}\r\n\t\t\tif (!(gantt.defined(column.min_width) && gantt.defined(column.max_width))) {\r\n\t\t\t\tcolumn.min_width = column.min_width || column.width;\r\n\t\t\t\tcolumn.max_width = column.max_width || column.width;\r\n\t\t\t}\r\n\t\t\tif (column.min_width)\r\n\t\t\t\tcolumn.min_width = +column.min_width;\r\n\t\t\tif (column.max_width)\r\n\t\t\t\tcolumn.max_width = +column.max_width;\r\n\t\t\tif (column.width) {\r\n\t\t\t\tcolumn.width = +column.width;\r\n\t\t\t\tcolumn.width = (column.min_width && column.min_width > column.width) ? column.min_width : column.width;\r\n\t\t\t\tcolumn.width = (column.max_width && column.max_width < column.width) ? column.max_width : column.width;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif (skinset.config.task_height)\r\n\t\tgantt.config.task_height = skinset.config.task_height || \"full\"; \r\n\r\n\tif (skinset._lightbox_template)\r\n\t\tgantt._lightbox_template = skinset._lightbox_template;\r\n\r\n\tif (skinset._redefine_lightbox_buttons) {\r\n\t\tgantt.config.buttons_right = skinset._redefine_lightbox_buttons[\"buttons_right\"];\r\n\t\tgantt.config.buttons_left = skinset._redefine_lightbox_buttons[\"buttons_left\"];\r\n\t}\r\n\r\n\r\n\tgantt.resetLightbox();\r\n}\r\n\r\nmodule.exports = function(gantt) {\r\n\tif(!gantt.resetSkin){\r\n\t\tgantt.resetSkin = function () {\r\n\t\t\tthis.skin = \"\";\r\n\t\t\t_get_skin(true, this);\r\n\t\t};\r\n\t\tgantt.skins = {};\r\n\r\n\t\tgantt.attachEvent(\"onGanttLayoutReady\", function(){\r\n\t\t\t_get_skin(false, this);\r\n\t\t});\r\n\t}\r\n};\n\n/***/ }),\n/* 98 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\ngantt.skins.skyblue = {\r\n\tconfig:{\r\n\t\tgrid_width:350,\r\n\t\trow_height: 27,\r\n\t\tscale_height: 27,\r\n\t\tlink_line_width:1,\r\n\t\tlink_arrow_size:8,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:95,\r\n\t_third_column_width:80\r\n};\r\n\r\n};\n\n/***/ }),\n/* 99 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\ngantt.skins.meadow = {\r\n\tconfig:{\r\n\t\tgrid_width:350,\r\n\t\trow_height: 27,\r\n\t\tscale_height: 30,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:72\r\n\t},\r\n\t_second_column_width:95,\r\n\t_third_column_width:80\r\n};\r\n\r\n};\n\n/***/ }),\n/* 100 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\ngantt.skins.terrace = {\r\n\tconfig:{\r\n\t\tgrid_width:360,\r\n\t\trow_height: 35,\r\n\t\tscale_height: 35,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:90,\r\n\t_third_column_width:70\t\t\r\n};\r\n\r\n};\n\n/***/ }),\n/* 101 */\n/***/ (function(module, exports) {\n\n\r\n\r\nmodule.exports = function(gantt) {\r\n\tgantt.skins.broadway = {\r\n\t\tconfig: {\r\n\t\t\tgrid_width: 360,\r\n\t\t\trow_height: 35,\r\n\t\t\tscale_height: 35,\r\n\t\t\tlink_line_width: 1,\r\n\t\t\tlink_arrow_size: 7,\r\n\t\t\tlightbox_additional_height: 86\r\n\t\t},\r\n\t\t_second_column_width: 90,\r\n\t\t_third_column_width: 80,\r\n\r\n\t\t_lightbox_template: \"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span><div class='gantt_cancel_btn'></div></div><div class='gantt_cal_larea'></div>\",\r\n\t\t_config_buttons_left: {},\r\n\t\t_config_buttons_right: {\r\n\t\t\t\"gantt_delete_btn\": \"icon_delete\",\r\n\t\t\t\"gantt_save_btn\": \"icon_save\"\r\n\t\t}\r\n\t};\r\n};\n\n/***/ }),\n/* 102 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\n\tgantt.skins.material = {\r\n\t\tconfig: {\r\n\t\t\tgrid_width: 411,\r\n\t\t\trow_height: 34,\r\n\t\t\ttask_height_offset: 6,\r\n\t\t\tscale_height: 36,\r\n\t\t\tlink_line_width: 2,\r\n\t\t\tlink_arrow_size: 6,\r\n\t\t\tlightbox_additional_height: 80\r\n\t\t},\r\n\t\t_second_column_width: 110,\r\n\t\t_third_column_width: 75,\r\n\t\t_redefine_lightbox_buttons: {\r\n\t\t\t\"buttons_left\": [\"dhx_delete_btn\"],\r\n\t\t\t\"buttons_right\": [\"dhx_save_btn\", \"dhx_cancel_btn\"]\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onAfterTaskDrag\", function (id) {\r\n\t\tvar t = gantt.getTaskNode(id);\r\n\t\tif (t) {\r\n\t\t\tt.className += \" gantt_drag_animation\";\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tvar indx = t.className.indexOf(\" gantt_drag_animation\");\r\n\t\t\t\tif (indx > -1) {\r\n\t\t\t\t\tt.className = t.className.slice(0, indx);\r\n\t\t\t\t}\r\n\t\t\t}, 200);\r\n\t\t}\r\n\t});\r\n\r\n};\n\n/***/ }),\n/* 103 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\ngantt.skins[\"contrast_black\"] = {\r\n\tconfig:{\r\n\t\tgrid_width:360,\r\n\t\trow_height: 35,\r\n\t\tscale_height: 35,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:100,\r\n\t_third_column_width:80\r\n};\r\n\r\n};\n\n/***/ }),\n/* 104 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\ngantt.skins[\"contrast_white\"] = {\r\n\tconfig:{\r\n\t\tgrid_width:360,\r\n\t\trow_height: 35,\r\n\t\tscale_height: 35,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:100,\r\n\t_third_column_width:80\r\n};\r\n\r\n};\n\n/***/ }),\n/* 105 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\n\r\n\tgantt.config.touch_drag = 500; //nearly immediate dnd\r\n\tgantt.config.touch = true;\r\n\tgantt.config.touch_feedback = true;\r\n\tgantt.config.touch_feedback_duration = 1;\r\n\tgantt._prevent_touch_scroll = false;\r\n\r\n\r\n\tgantt._touch_feedback = function () {\r\n\t\tif (gantt.config.touch_feedback) {\r\n\t\t\tif (navigator.vibrate)\r\n\t\t\t\tnavigator.vibrate(gantt.config.touch_feedback_duration);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onGanttReady\", gantt.bind(function(){\r\n\t\tif (this.config.touch != \"force\")\r\n\t\t\tthis.config.touch = this.config.touch &&\r\n\t\t\t\t((navigator.userAgent.indexOf(\"Mobile\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"iPad\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"Android\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"Touch\") != -1));\r\n\r\n\t\tif (this.config.touch) {\r\n\r\n\t\t\tvar touchEventsSupported = true;\r\n\t\t\ttry {\r\n\t\t\t\tdocument.createEvent(\"TouchEvent\");\r\n\t\t\t} catch (e) {\r\n\t\t\t\ttouchEventsSupported = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (touchEventsSupported) {\r\n\t\t\t\tthis._touch_events([\"touchmove\", \"touchstart\", \"touchend\"], function (ev) {\r\n\t\t\t\t\tif (ev.touches && ev.touches.length > 1) return null;\r\n\t\t\t\t\tif (ev.touches[0])\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\ttarget: ev.target,\r\n\t\t\t\t\t\t\tpageX: ev.touches[0].pageX,\r\n\t\t\t\t\t\t\tpageY: ev.touches[0].pageY,\r\n\t\t\t\t\t\t\tclientX: ev.touches[0].clientX,\r\n\t\t\t\t\t\t\tclientY: ev.touches[0].clientY\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function () {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t} else if (window.navigator.pointerEnabled) {\r\n\t\t\t\tthis._touch_events([\"pointermove\", \"pointerdown\", \"pointerup\"], function (ev) {\r\n\t\t\t\t\tif (ev.pointerType == \"mouse\") return null;\r\n\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function (ev) {\r\n\t\t\t\t\treturn (!ev || (ev.pointerType == \"mouse\" ));\r\n\t\t\t\t});\r\n\t\t\t} else if (window.navigator.msPointerEnabled) {\r\n\t\t\t\tthis._touch_events([\"MSPointerMove\", \"MSPointerDown\", \"MSPointerUp\"], function (ev) {\r\n\t\t\t\t\tif (ev.pointerType == ev.MSPOINTER_TYPE_MOUSE) return null;\r\n\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function (ev) {\r\n\t\t\t\t\treturn (!ev || ev.pointerType == ev.MSPOINTER_TYPE_MOUSE);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}, gantt));\r\n\r\n\r\n\tfunction getTaskDND(){\r\n\t\tvar _tasks_dnd;\r\n\t\tif(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t_tasks_dnd = gantt.$ui.getView(\"timeline\")._tasks_dnd;\r\n\t\t}\r\n\t\treturn _tasks_dnd;\r\n\t}\r\n\r\n\tvar touchHandlers = [];\r\n\r\n//we can't use native scrolling, as we need to sync momentum between different parts\r\n//so we will block native scroll and use the custom one\r\n//in future we can add custom momentum\r\n\tgantt._touch_events = function (names, accessor, ignore) {\r\n\t\t//webkit on android need to be handled separately\r\n\t\tvar dblclicktime = 0;\r\n\t\tvar action_mode = false;\r\n\t\tvar scroll_mode = false;\r\n\t\tvar dblclick_timer = 0;\r\n\t\tvar action_start = null;\r\n\t\tvar scroll_state;\r\n\t\tvar long_tap_timer = null;\r\n\t\tvar current_target = null;\r\n\r\n\r\n\r\n\t\tfor(var i = 0; i < touchHandlers.length; i++){\r\n\t\t\tgantt.eventRemove(touchHandlers[i][0], touchHandlers[i][1], touchHandlers[i][2]);\r\n\t\t}\r\n\t\ttouchHandlers = [];\r\n\r\n\t\t//touch move\r\n\t\ttouchHandlers.push([gantt.$container, names[0], function (e) {\r\n\t\t\tvar _tasks_dnd = getTaskDND();\r\n\r\n\t\t\t\tif (ignore(e)) return;\r\n\r\n\t\t\t\t//ignore common and scrolling moves\r\n\t\t\t\tif (!action_mode) return;\r\n\r\n\t\t\t\tif (long_tap_timer) clearTimeout(long_tap_timer);\r\n\r\n\t\t\t\tvar source = accessor(e);\r\n\t\t\t\tif (_tasks_dnd && (_tasks_dnd.drag.id || _tasks_dnd.drag.start_drag)) {\r\n\t\t\t\t\t_tasks_dnd.on_mouse_move(source);\r\n\t\t\t\t\tif (e.preventDefault)\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\te.cancelBubble = true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (!gantt._prevent_touch_scroll) {\r\n\t\t\t\t\tif (source && action_start) {\r\n\t\t\t\t\t\tvar dx = action_start.pageX - source.pageX;\r\n\t\t\t\t\t\tvar dy = action_start.pageY - source.pageY;\r\n\t\t\t\t\t\tif (!scroll_mode && (Math.abs(dx) > 5 || Math.abs(dy) > 5)) {\r\n\t\t\t\t\t\t\tgantt._touch_scroll_active = scroll_mode = true;\r\n\t\t\t\t\t\t\tdblclicktime = 0;\r\n\t\t\t\t\t\t\tscroll_state = gantt.getScrollState();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (scroll_mode) {\r\n\t\t\t\t\t\t\tgantt.scrollTo(scroll_state.x + dx, scroll_state.y + dy);\r\n\t\t\t\t\t\t\tvar new_scroll_state = gantt.getScrollState();\r\n\r\n\t\t\t\t\t\t\tif ((scroll_state.x != new_scroll_state.x && dy > 2 * dx) ||\r\n\t\t\t\t\t\t\t\t(scroll_state.y != new_scroll_state.y && dx > 2 * dy )) {\r\n\t\t\t\t\t\t\t\treturn block_action(e);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn block_action(e);\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}]);\r\n\r\n\r\n\t\t//block touch context menu in IE10\r\n\t\ttouchHandlers.push([this.$container, \"contextmenu\", function (e) {\r\n\t\t\tif (action_mode)\r\n\t\t\t\treturn block_action(e);\r\n\t\t}]);\r\n\r\n\t\t//touch start\r\n\t\ttouchHandlers.push([this.$container, names[1], function (e) {\r\n\t\t\tif (ignore(e)) return;\r\n\t\t\tif (e.touches && e.touches.length > 1) {\r\n\t\t\t\taction_mode = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\taction_start = accessor(e);\r\n\t\t\tif (!gantt._locate_css(action_start, \"gantt_hor_scroll\") && !gantt._locate_css(action_start, \"gantt_ver_scroll\")) {\r\n\t\t\t\taction_mode = true;\r\n\t\t\t}\r\n\t\t\tvar _tasks_dnd = getTaskDND();\r\n\r\n\t\t\t//long tap\r\n\t\t\tlong_tap_timer = setTimeout(function () {\r\n\t\t\t\tvar taskId = gantt.locate(action_start);\r\n\t\t\t\tif (_tasks_dnd && (taskId && !gantt._locate_css(action_start, \"gantt_link_control\") && !gantt._locate_css(action_start, \"gantt_grid_data\"))) {\r\n\t\t\t\t\t_tasks_dnd.on_mouse_down(action_start);\r\n\r\n\t\t\t\t\tif (_tasks_dnd.drag && _tasks_dnd.drag.start_drag) {\r\n\t\t\t\t\t\tcloneTaskRendered(taskId);\r\n\t\t\t\t\t\t_tasks_dnd._start_dnd(action_start);\r\n\t\t\t\t\t\tgantt._touch_drag = true;\r\n\r\n\t\t\t\t\t\tgantt.refreshTask(taskId);\r\n\r\n\t\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlong_tap_timer = null;\r\n\t\t\t}, gantt.config.touch_drag);\r\n\t\t}]);\r\n\r\n\t\t//touch end\r\n\t\ttouchHandlers.push([this.$container, names[2], function (e) {\r\n\t\t\tif (ignore(e)) return;\r\n\t\t\tif (long_tap_timer) clearTimeout(long_tap_timer);\r\n\t\t\tgantt._touch_drag = false;\r\n\t\t\taction_mode = false;\r\n\t\t\tvar source = accessor(e);\r\n\r\n\t\t\tvar _tasks_dnd = getTaskDND();\r\n\r\n\t\t\tif(_tasks_dnd)\r\n\t\t\t\t_tasks_dnd.on_mouse_up(source);\r\n\r\n\t\t\tif (current_target) {\r\n\t\t\t\tgantt.refreshTask(gantt.locate(current_target));\r\n\t\t\t\tif (current_target.parentNode) {\r\n\t\t\t\t\tcurrent_target.parentNode.removeChild(current_target);\r\n\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tgantt._touch_scroll_active = action_mode = scroll_mode = false;\r\n\t\t\tcurrent_target = null;\r\n\r\n\t\t\t//dbl-tap handling\r\n\t\t\tif (action_start && dblclicktime) {\r\n\t\t\t\tvar now = new Date();\r\n\t\t\t\tif ((now - dblclicktime) < 500) {\r\n\r\n\t\t\t\t\tvar mouseEvents = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\t\t\tmouseEvents.onDoubleClick(action_start);\r\n\t\t\t\t\tblock_action(e);\r\n\t\t\t\t} else\r\n\t\t\t\t\tdblclicktime = now;\r\n\t\t\t} else {\r\n\t\t\t\tdblclicktime = new Date();\r\n\t\t\t}\r\n\t\t}]);\r\n\r\n\t\tfor(var i = 0; i < touchHandlers.length; i++){\r\n\t\t\tgantt.event(touchHandlers[i][0], touchHandlers[i][1], touchHandlers[i][2]);\r\n\t\t}\r\n\r\n\t\t//common helper, prevents event\r\n\t\tfunction block_action(e) {\r\n\t\t\tif (e && e.preventDefault)\r\n\t\t\t\te.preventDefault();\r\n\t\t\t(e || event).cancelBubble = true;\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfunction cloneTaskRendered(taskId) {\r\n\t\t\tvar renders = gantt._getTaskLayers();\r\n\t\t\tvar task = gantt.getTask(taskId);\r\n\t\t\tif (task && gantt.isTaskVisible(taskId)) {\r\n\t\t\t\tfor (var i = 0; i < renders.length; i++) {\r\n\t\t\t\t\ttask = renders[i].rendered[taskId];\r\n\t\t\t\t\tif (task && task.getAttribute(gantt.config.task_attribute) && task.getAttribute(gantt.config.task_attribute) == taskId) {\r\n\t\t\t\t\t\tvar copy = task.cloneNode(true);\r\n\t\t\t\t\t\tcurrent_target = task;\r\n\t\t\t\t\t\trenders[i].rendered[taskId] = copy;\r\n\t\t\t\t\t\ttask.style.display = \"none\";\r\n\t\t\t\t\t\tcopy.className += \" gantt_drag_move \";\r\n\t\t\t\t\t\ttask.parentNode.appendChild(copy);\r\n\t\t\t\t\t\t//return copy;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n};\n\n/***/ }),\n/* 106 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt) {\r\n\tgantt.locale = {\r\n\t\tdate: {\r\n\t\t\tmonth_full: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\r\n\t\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\r\n\t\t\tday_full: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\r\n\t\t\tday_short: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"]\r\n\t\t},\r\n\t\tlabels: {\r\n\t\t\tnew_task: \"New task\",\r\n\t\t\ticon_save: \"Save\",\r\n\t\t\ticon_cancel: \"Cancel\",\r\n\t\t\ticon_details: \"Details\",\r\n\t\t\ticon_edit: \"Edit\",\r\n\t\t\ticon_delete: \"Delete\",\r\n\t\t\tconfirm_closing: \"\",//Your changes will be lost, are you sure?\r\n\t\t\tconfirm_deleting: \"Task will be deleted permanently, are you sure?\",\r\n\t\t\tsection_description: \"Description\",\r\n\t\t\tsection_time: \"Time period\",\r\n\t\t\tsection_type: \"Type\",\r\n\r\n\t\t\t/* grid columns */\r\n\t\t\tcolumn_wbs: \"WBS\",\r\n\t\t\tcolumn_text: \"Task name\",\r\n\t\t\tcolumn_start_date: \"Start time\",\r\n\t\t\tcolumn_duration: \"Duration\",\r\n\t\t\tcolumn_add: \"\",\r\n\r\n\t\t\t/* link confirmation */\r\n\t\t\tlink: \"Link\",\r\n\t\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\t\tlink_start: \" (start)\",\r\n\t\t\tlink_end: \" (end)\",\r\n\r\n\t\t\ttype_task: \"Task\",\r\n\t\t\ttype_project: \"Project\",\r\n\t\t\ttype_milestone: \"Milestone\",\r\n\r\n\t\t\tminutes: \"Minutes\",\r\n\t\t\thours: \"Hours\",\r\n\t\t\tdays: \"Days\",\r\n\t\t\tweeks: \"Week\",\r\n\t\t\tmonths: \"Months\",\r\n\t\t\tyears: \"Years\",\r\n\r\n\t\t\t/* message popup */\r\n\t\t\tmessage_ok: \"OK\",\r\n\t\t\tmessage_cancel: \"Cancel\"\r\n\r\n\t\t}\r\n\t};\r\n};\r\n\r\n\n\n/***/ }),\n/* 107 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar domHelpers = __webpack_require__(1),\r\n\thelpers = __webpack_require__(7);\r\n\r\nmodule.exports = function(gantt){\r\n\tvar calculateScaleRange = __webpack_require__(19);\r\n\r\n\tgantt.assert = __webpack_require__(108)(gantt);\r\n\r\n//initial initialization\r\n\tgantt.init = function(node, from, to){\r\n\t\tif(from && to){\r\n\t\t\tthis.config.start_date = this._min_date = new Date(from);\r\n\t\t\tthis.config.end_date = this._max_date = new Date(to);\r\n\t\t}\r\n\t\tthis.date.init();\r\n\r\n\t\tif (!this.config.scroll_size)\r\n\t\t\tthis.config.scroll_size = domHelpers.getScrollSize() || 1;\r\n\r\n\t\tvar resizeDelay;\r\n\t\tgantt.event(window, \"resize\", function(){\r\n\t\t\tclearTimeout(resizeDelay);\r\n\t\t\tresizeDelay = setTimeout(function(){\r\n\t\t\t\tgantt.render();\r\n\t\t\t}, 300);\r\n\t\t});\r\n\r\n\t\t//can be called only once\r\n\t\tthis.init = function(node){\r\n\t\t\tif (this.$container && this.$container.parentNode){\r\n\t\t\t\tthis.$container.parentNode.removeChild(this.$container);\r\n\t\t\t\tthis.$container = null;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.$layout){\r\n\t\t\t\tthis.$layout.clear();\r\n\t\t\t}\r\n\t\t\tthis._reinit(node);\r\n\t\t};\r\n\r\n\t\tthis._reinit(node);\r\n\t};\r\n\r\n\tgantt._reinit = function(node){\r\n\t\tthis.callEvent(\"onBeforeGanttReady\", []);\r\n\t\t//this._init_tasks_range();\r\n\t\tthis.resetLightbox();\r\n\t\tthis._update_flags();\r\n\r\n\r\n\t\tvar config = this.$services.getService(\"templateLoader\");\r\n\t\tconfig.initTemplates(this);\r\n\r\n\t\tthis._clearTaskLayers();\r\n\t\tthis._clearLinkLayers();\r\n\r\n\t\t//this.clear\r\n\t\tif(this.$layout){\r\n\t\t\tthis.$layout.destructor();\r\n\t\t\tthis.$ui.reset();\r\n\t\t}\r\n\r\n\t\tthis.$root = domHelpers.toNode(node);\r\n\t\tif(this.$root){\r\n\t\t\tthis.$root.innerHTML = \"\";\r\n\t\t}\r\n\t\tthis.$root.gantt = this;\r\n\t\tcalculateScaleRange(this);\r\n\t\tthis.config.layout.id = \"main\";\r\n\t\tthis.$layout = this.$ui.createView(\"layout\", node, this.config.layout);\r\n\r\n\t\tthis.$layout.attachEvent(\"onBeforeResize\", function(){\r\n\t\t\tvar storeNames = gantt.$services.getService(\"datastores\");\r\n\t\t\tfor(var i = 0; i < storeNames.length; i++){\r\n\t\t\t\tgantt.getDatastore(storeNames[i]).filter();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.$layout.attachEvent(\"onResize\", function(){\r\n\t\t\tgantt.refreshData();\r\n\t\t});\r\n\r\n\t\tthis.callEvent(\"onGanttLayoutReady\", []);\r\n\t\tthis.$layout.render();\r\n\r\n\t\tgantt.$container = this.$layout.$container.firstChild;\r\n\t\tthis.callEvent(\"onTemplatesReady\",[]);\r\n\t\tthis.$mouseEvents.reset(this.$root);\r\n\t\tthis.callEvent(\"onGanttReady\", []);\r\n\r\n\t\tthis.render();\r\n\t};\r\n\r\n\tgantt.$click={\r\n\t\tbuttons:{\r\n\t\t\t\"edit\":function(id){\r\n\t\t\t\tgantt.showLightbox(id);\r\n\t\t\t},\r\n\t\t\t\"delete\":function(id){\r\n\t\t\t\tvar question = gantt.locale.labels.confirm_deleting;\r\n\t\t\t\tvar title = gantt.locale.labels.confirm_deleting_title;\r\n\r\n\t\t\t\tgantt._dhtmlx_confirm(question, title, function(){\r\n\t\t\t\t\tif(!gantt.isTaskExists(id)){\r\n\t\t\t\t\t\tgantt.hideLightbox();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar task = gantt.getTask(id);\r\n\t\t\t\t\tif(task.$new){\r\n\t\t\t\t\t\tgantt.silent(function(){\r\n\t\t\t\t\t\t\tgantt.deleteTask(id, true);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tgantt.refreshData();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tgantt.deleteTask(id);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgantt.hideLightbox();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n//renders self\r\n\tgantt.render = function(){\r\n\t\tthis.callEvent(\"onBeforeGanttRender\", []);\r\n\r\n\t\tvar pos = this.getScrollState();\r\n\t\tvar posX = pos ? pos.x : 0;\r\n\t\tif(this._getHorizontalScrollbar()){\r\n\t\t\tvar scrollbar = this._getHorizontalScrollbar();\r\n\t\t\tposX = scrollbar.$config.codeScrollLeft || posX || 0;\r\n\t\t}\r\n\r\n\r\n\t\tvar visible_date = null;\r\n\t\tif(posX){\r\n\t\t\tvisible_date = gantt.dateFromPos(posX + this.config.task_scroll_offset);\r\n\t\t}\r\n\t\tcalculateScaleRange(this);\r\n\r\n\t\tthis.$layout.$config.autosize = this.config.autosize;\r\n\t\tthis.$layout.resize();\r\n\r\n\t\tif(this.config.preserve_scroll && pos){\r\n\r\n\t\t\tif(posX){\r\n\t\t\t\tvar new_pos = gantt.getScrollState();\r\n\t\t\t\tvar new_date = gantt.dateFromPos(new_pos.x);\r\n\t\t\t\tif(!(+visible_date == +new_date && new_pos.y == pos.y)){\r\n\t\t\t\t\tif(visible_date){\r\n\t\t\t\t\t\tthis.showDate(visible_date);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(pos.y)\r\n\t\t\t\t\t\tgantt.scrollTo(undefined, pos.y);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onGanttRender\", []);\r\n\t};\r\n\r\n\t//TODO: add layout.resize method that wouldn't trigger data repaint\r\n\tgantt.setSizes = gantt.render;\r\n\r\n\tgantt.locate = function(e) {\r\n\t\tvar trg = domHelpers.getTargetNode(e);\r\n\r\n\t\t//ignore empty cells\r\n\t\tvar className = domHelpers.getClassName(trg);\r\n\t\tif ((className || \"\").indexOf(\"gantt_task_cell\") >= 0) return null;\r\n\r\n\t\tvar targetAttribute = arguments[1] || this.config.task_attribute;\r\n\r\n\t\tvar node = domHelpers.locateAttribute(trg, targetAttribute);\r\n\t\tif(node){\r\n\t\t\treturn node.getAttribute(targetAttribute);\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._locate_css = function(e, classname, strict){\r\n\t\treturn domHelpers.locateClassName(e, classname, strict);\r\n\t};\r\n\r\n\tgantt._locateHTML = function(e, attribute) {\r\n\t\treturn domHelpers.locateAttribute(e, attribute || this.config.task_attribute);\r\n\t};\r\n\r\n\tgantt.getTaskRowNode = function(id) {\r\n\t\tvar els = this.$grid_data.childNodes;\r\n\t\tvar attribute = this.config.task_attribute;\r\n\t\tfor (var i = 0; i < els.length; i++) {\r\n\t\t\tif (els[i].getAttribute) {\r\n\t\t\t\tvar value = els[i].getAttribute(attribute);\r\n\t\t\t\tif (value == id) return els[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\r\n\tgantt.changeLightboxType = function(type){\r\n\t\tif(this.getLightboxType() == type)\r\n\t\t\treturn true;\r\n\t\tgantt._silent_redraw_lightbox(type);\r\n\t};\r\n\r\n\r\n\tgantt._get_link_type = function (from_start, to_start) {\r\n\t\tvar type = null;\r\n\t\tif (from_start && to_start) {\r\n\t\t\ttype = gantt.config.links.start_to_start;\r\n\t\t} else if (!from_start && to_start) {\r\n\t\t\ttype = gantt.config.links.finish_to_start;\r\n\t\t} else if (!from_start && !to_start) {\r\n\t\t\ttype = gantt.config.links.finish_to_finish;\r\n\t\t} else if (from_start && !to_start) {\r\n\t\t\ttype = gantt.config.links.start_to_finish;\r\n\t\t}\r\n\t\treturn type;\r\n\t};\r\n\r\n\tgantt.isLinkAllowed = function (from, to, from_start, to_start) {\r\n\t\tvar link = null;\r\n\t\tif (typeof(from) == \"object\") {\r\n\t\t\tlink = from;\r\n\t\t} else {\r\n\t\t\tlink = {source: from, target: to, type: this._get_link_type(from_start, to_start)};\r\n\t\t}\r\n\r\n\t\tif (!link) return false;\r\n\t\tif (!(link.source && link.target && link.type)) return false;\r\n\t\tif (link.source == link.target) return false;\r\n\r\n\t\tvar res = true;\r\n\t\t//any custom rules\r\n\t\tif (this.checkEvent(\"onLinkValidation\"))\r\n\t\t\tres = this.callEvent(\"onLinkValidation\", [link]);\r\n\r\n\t\treturn res;\r\n\t};\r\n\r\n\r\n\tgantt._correct_dst_change = function(date, prevOffset, step, unit){\r\n\t\tvar time_unit = helpers.getSecondsInUnit(unit) * step;\r\n\t\tif(time_unit > 60*60 && time_unit < 60*60*24){\r\n\t\t\t//correct dst change only if current unit is more than one hour and less than day (days have own checking), e.g. 12h\r\n\t\t\tvar offsetChanged = date.getTimezoneOffset() - prevOffset;\r\n\t\t\tif(offsetChanged){\r\n\t\t\t\tdate = gantt.date.add(date, offsetChanged, \"minute\");\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn date;\r\n\t};\r\n\r\n\tgantt.getGridColumns = function(){\r\n\t\treturn gantt.config.columns.slice();\r\n\t};\r\n\r\n\tgantt._is_icon_open_click = function(e) {\r\n\t\tif (!e)\r\n\t\t\treturn false;\r\n\t\tvar target = e.target || e.srcElement;\r\n\t\tif (!(target && target.className))\r\n\t\t\treturn false;\r\n\t\tvar className = domHelpers.getClassName(target);\r\n\t\tif (className.indexOf(\"gantt_tree_icon\") !== -1 && (className.indexOf(\"gantt_close\") !== -1 || className.indexOf(\"gantt_open\") !== -1))\r\n\t\t\treturn true;\r\n\t\treturn false;\r\n\t};\r\n\r\n};\n\n/***/ }),\n/* 108 */\n/***/ (function(module, exports) {\n\n/*\r\n \tasserts will be removed in final code, so you can place them anythere\r\n\twithout caring about performance impacts\r\n*/\r\n\r\nmodule.exports = function(gantt){\r\n\treturn function assert(check, message){\r\n\t\t//jshint -W087\r\n\t\tif (!check){\r\n\t\t\tif(gantt.config.show_errors && gantt.callEvent(\"onError\",[message]) !== false) {\r\n\t\t\t\tgantt.message({type: \"error\", text: message, expire: -1});\r\n\t\t\t\tdebugger;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n};\n\n/***/ }),\n/* 109 */\n/***/ (function(module, exports) {\n\nfunction extend(gantt){\r\n\r\n\tgantt.destructor = function(){\r\n\t\tgantt.callEvent(\"onDestroy\", []);\r\n\r\n\t\tthis.clearAll();\r\n\t\tthis.detachAllEvents();\r\n\r\n\t\tif(this.$root){\r\n\t\t\tdelete this.$root.gantt;\r\n\t\t}\r\n\r\n\t\tthis._eventRemoveAll();\r\n\t\tif(this.$layout){\r\n\t\t\tthis.$layout.destructor();\r\n\t\t}\r\n\r\n\t\tthis.resetLightbox();\r\n\r\n\t\tif(this._dp && this._dp.destructor){\r\n\t\t\tthis._dp.destructor();\r\n\t\t}\r\n\r\n\t\tthis.$services.destructor();\r\n\r\n\t\tfor(var i in this){\r\n\t\t\tif(i.indexOf(\"$\") === 0){\r\n\t\t\t\tdelete this[i];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = extend;\r\n\n\n/***/ }),\n/* 110 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(gantt){\r\n\r\n\tfunction deprecated(badCode, goodCode) {\r\n\r\n\t\tvar formatting = gantt.env.isIE ? \"\" : \"%c\";\r\n\r\n\r\n\t\tvar message = [\r\n\t\t\tformatting, \"\\\"\", badCode, \"\\\"\",  formatting,\r\n\t\t\t\" has been deprecated in dhtmlxGantt v4.0 and will stop working in v6.0. Use \",\r\n\t\t\tformatting, \"\\\"\", goodCode, \"\\\"\",  formatting,\r\n\t\t\t\" instead. \\nSee more details at http://docs.dhtmlx.com/gantt/migrating.html \"\r\n\t\t].join(\"\");\r\n\r\n\t\tvar log = window.console.warn || window.console.log;\r\n\r\n\t\tvar args = [message];\r\n\t\tif(!gantt.env.isIE){\r\n\t\t\targs = args.concat([\"font-weight:bold\", \"font-weight:normal\", \"font-weight:bold\", \"font-weight:normal\"]);\r\n\t\t}\r\n\r\n\t\tlog.apply(window.console, args);\r\n\t}\r\n\r\n\tfunction wrapDeprecated(method) {\r\n\t\treturn function () {\r\n\t\t\tdeprecated(\"dhtmlx.\" + method, \"gantt.\" + method);\r\n\t\t\treturn gantt[method].apply(gantt, arguments);\r\n\t\t};\r\n\t}\r\n\r\n\t/* dhtmlx */\r\n\r\n\r\n\tif (!window.dhtmlx)\r\n\t\twindow.dhtmlx = {};\r\n\r\n\tvar dhtmlxMethods = [\r\n\t\t\"message\",\r\n\t\t\"alert\",\r\n\t\t\"confirm\",\r\n\t\t\"modalbox\",\r\n\t\t\"uid\",\r\n\t\t\"copy\",\r\n\t\t\"mixin\",\r\n\t\t\"defined\",\r\n\t\t\"bind\",\r\n\t\t\"assert\"\r\n\t];\r\n\r\n\tvar dynMethods = [];\r\n\r\n\tfor(var i = 0; i < dhtmlxMethods.length; i++){\r\n\t\t// wrap dhtmlx methods with 'deprecated' warnings\r\n\t\t// do not wrap if methods are defined by dhtmlxSuite\r\n\t\tif(!window.dhtmlx[dhtmlxMethods[i]]){\r\n\t\t\tdynMethods.push(dhtmlxMethods[i]);\r\n\t\t\tdhtmlx[dhtmlxMethods[i]] = wrapDeprecated(dhtmlxMethods[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\tfor(var i = 0; i < dynMethods.length; i++){\r\n\t\t\tdelete window.dhtmlx[dynMethods[i]];\r\n\t\t}\r\n\t\tdynMethods = null;\r\n\r\n\t});\r\n\r\n\t/* global functions */\r\n\r\n\r\n\tif (!window.dataProcessor) {\r\n\t\twindow.dataProcessor = function (url) {\r\n\t\t\tdeprecated(\"new dataProcessor(url)\", \"new gantt.dataProcessor(url)\");\r\n\t\t\treturn new gantt.dataProcessor(url);\r\n\t\t};\r\n\t\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\t\twindow.dataProcessor = null;\r\n\t\t});\r\n\t}\r\n\r\n};\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// dhtmlxgantt.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 22);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1cc7feb9aaf70c7ba1d2","var dateHelper = require(\"./date_helpers\");\r\n\r\nfunction copy(object) {\r\n\tvar i, t, result; // iterator, types array, result\r\n\r\n\tif (object && typeof object == \"object\") {\r\n\t\tresult = {};\r\n\t\tt = [Array,Number,String,Boolean];\r\n\t\tfor (i=0; i<t.length; i++) {\r\n\t\t\tif (object instanceof t[i])\r\n\t\t\t\tresult = i ? new t[i](object) : new t[i](); // first one is array\r\n\t\t}\r\n\r\n\t\tif (dateHelper.isDate(object)) {\r\n\t\t\tresult = new Date(object);\r\n\t\t}\r\n\r\n\t\tfor (i in object) {\r\n\t\t\tif (Object.prototype.hasOwnProperty.apply(object, [i]))\r\n\t\t\t\tresult[i] = copy(object[i]);\r\n\t\t}\r\n\t}\r\n\treturn result || object;\r\n}\r\n\r\nfunction mixin (target, source, force){\r\n\tfor (var f in source)\r\n\t\tif (((target[f] === undefined) || force)) target[f]=source[f];\r\n\treturn target;\r\n}\r\n\r\nfunction defined(obj) {\r\n\treturn typeof(obj) != \"undefined\";\r\n}\r\n\r\nvar seed;\r\nfunction uid() {\r\n\tif (!seed)\r\n\t\tseed = (new Date()).valueOf();\r\n\r\n\tseed++;\r\n\treturn seed;\r\n}\r\n\r\n//creates function with specified \"this\" pointer\r\nfunction bind(functor, object){\r\n\tif(functor.bind)\r\n\t\treturn functor.bind(object);\r\n\telse\r\n\t\treturn function(){ return functor.apply(object,arguments); };\r\n}\r\n\r\nfunction event(el, event, handler, capture){\r\n\tif (el.addEventListener)\r\n\t\tel.addEventListener(event, handler, capture === undefined ? false : capture);\r\n\r\n\telse if (el.attachEvent)\r\n\t\tel.attachEvent(\"on\"+event, handler);\r\n}\r\n\r\nfunction eventRemove(el, event, handler, capture){\r\n\tif (el.removeEventListener)\r\n\t\tel.removeEventListener(event, handler, capture === undefined ? false : capture);\r\n\r\n\telse if (el.detachEvent)\r\n\t\tel.detachEvent(\"on\"+event, handler);\r\n}\r\n\r\n\r\nmodule.exports = {\r\n\tcopy: copy,\r\n\tdefined: defined,\r\n\tmixin: mixin,\r\n\tuid: uid,\r\n\tbind: bind,\r\n\tevent: event,\r\n\teventRemove: eventRemove\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/utils/utils.js\n// module id = 0\n// module chunks = 0","//returns position of html element on the page\r\nfunction elementPosition(elem) {\r\n\tvar top=0, left=0, right=0, bottom=0;\r\n\tif (elem.getBoundingClientRect) { //HTML5 method\r\n\t\tvar box = elem.getBoundingClientRect();\r\n\t\tvar body = document.body;\r\n\t\tvar docElem = (document.documentElement ||\r\n\t\t\tdocument.body.parentNode ||\r\n\t\t\tdocument.body);\r\n\r\n\t\tvar scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;\r\n\t\tvar scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;\r\n\t\tvar clientTop = docElem.clientTop || body.clientTop || 0;\r\n\t\tvar clientLeft = docElem.clientLeft || body.clientLeft || 0;\r\n\t\ttop  = box.top +  scrollTop - clientTop;\r\n\t\tleft = box.left + scrollLeft - clientLeft;\r\n\r\n\t\tright = document.body.offsetWidth - box.right;\r\n\t\tbottom = document.body.offsetHeight - box.bottom;\r\n\t} else { //fallback to naive approach\r\n\t\twhile(elem) {\r\n\t\t\ttop = top + parseInt(elem.offsetTop,10);\r\n\t\t\tleft = left + parseInt(elem.offsetLeft,10);\r\n\t\t\telem = elem.offsetParent;\r\n\t\t}\r\n\r\n\t\tright = document.body.offsetWidth - elem.offsetWidth - left;\r\n\t\tbottom = document.body.offsetHeight - elem.offsetHeight - top;\r\n\t}\r\n\treturn { y: Math.round(top), x: Math.round(left), width:elem.offsetWidth, height:elem.offsetHeight, right: Math.round(right), bottom: Math.round(bottom) };\r\n}\r\n\r\nfunction isVisible(node){\r\n\tvar display = false,\r\n\t\tvisibility = false;\r\n\tif(window.getComputedStyle){\r\n\t\tvar style = window.getComputedStyle(node, null);\r\n\t\tdisplay = style[\"display\"];\r\n\t\tvisibility = style[\"visibility\"];\r\n\t}else if(node.currentStyle){\r\n\t\tdisplay = node.currentStyle[\"display\"];\r\n\t\tvisibility = node.currentStyle[\"visibility\"];\r\n\t}\r\n\treturn (display != \"none\" && visibility != \"hidden\");\r\n}\r\n\r\nfunction hasNonNegativeTabIndex(node){\r\n\treturn !isNaN(node.getAttribute(\"tabindex\")) && (node.getAttribute(\"tabindex\")*1 >= 0);\r\n}\r\n\r\nfunction hasHref(node){\r\n\tvar canHaveHref = {\"a\": true, \"area\": true};\r\n\tif(canHaveHref[node.nodeName.loLowerCase()]){\r\n\t\treturn !!node.getAttribute(\"href\");\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nfunction isEnabled(node){\r\n\tvar canDisable = {\"input\":true, \"select\":true, \"textarea\":true, \"button\":true, \"object\":true};\r\n\tif(canDisable[node.nodeName.toLowerCase()]){\r\n\t\treturn !node.hasAttribute(\"disabled\");\r\n\t}\r\n\r\n\treturn true;\r\n}\r\n\r\nfunction getFocusableNodes(root){\r\n\tvar nodes = root.querySelectorAll([\r\n\t\t\"a[href]\",\r\n\t\t\"area[href]\",\r\n\t\t\"input\",\r\n\t\t\"select\",\r\n\t\t\"textarea\",\r\n\t\t\"button\",\r\n\t\t\"iframe\",\r\n\t\t\"object\",\r\n\t\t\"embed\",\r\n\t\t\"[tabindex]\",\r\n\t\t\"[contenteditable]\"\r\n\t].join(\", \"));\r\n\r\n\tvar nodesArray = Array.prototype.slice.call(nodes, 0);\r\n\tfor(var i = 0; i < nodesArray.length; i++){\r\n\t\tvar node = nodesArray[i];\r\n\t\tvar isValid = (hasNonNegativeTabIndex(node)  || isEnabled(node) || hasHref(node)) && isVisible(node);\r\n\t\tif(!isValid){\r\n\t\t\tnodesArray.splice(i, 1);\r\n\t\t\ti--;\r\n\t\t}\r\n\t}\r\n\treturn nodesArray;\r\n}\r\n\r\nfunction getScrollSize(){\r\n\tvar div = document.createElement(\"div\");\r\n\tdiv.style.cssText=\"visibility:hidden;position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;height:110px;min-height:100px;overflow-y:scroll;\";\r\n\r\n\tdocument.body.appendChild(div);\r\n\tvar width = div.offsetWidth-div.clientWidth;\r\n\tdocument.body.removeChild(div);\r\n\r\n\treturn width;\r\n}\r\n\r\nfunction getClassName(node){\r\n\tif(!node) return \"\";\r\n\r\n\tvar className = node.className || \"\";\r\n\tif(className.baseVal)//'className' exist but not a string - IE svg element in DOM\r\n\t\tclassName = className.baseVal;\r\n\r\n\tif(!className.indexOf)\r\n\t\tclassName = '';\r\n\r\n\treturn _trimString(className);\r\n}\r\n\r\nfunction addClassName(node, className){\r\n\tif (className && node.className.indexOf(className) === -1) {\r\n\t\tnode.className += \" \" + className;\r\n\t}\r\n}\r\n\r\nfunction removeClassName(node, name) {\r\n\tname = name.split(\" \");\r\n\tfor (var i = 0; i < name.length; i++) {\r\n\t\tvar regEx = new RegExp('\\\\s?\\\\b' + name[i] + '\\\\b(?![-_\\.])', \"\");\r\n\t\tnode.className = node.className.replace(regEx, \"\");\r\n\t}\r\n}\r\n\r\nfunction toNode(node) {\r\n\tif (typeof node === \"string\") {\r\n\t\treturn (document.getElementById(node) || document.querySelector(node) || document.body);\r\n\t}\r\n\treturn node || document.body;\r\n}\r\n\r\nvar _slave = document.createElement(\"div\");\r\nfunction insert(node, newone) {\r\n\t_slave.innerHTML = newone;\r\n\tvar child = _slave.firstChild;\r\n\tnode.appendChild(child);\r\n\treturn child;\r\n}\r\n\r\nfunction remove(node) {\r\n\tif (node && node.parentNode) {\r\n\t\tnode.parentNode.removeChild(node);\r\n\t}\r\n}\r\n\r\nfunction getChildren(node, css) {\r\n\tvar ch = node.childNodes;\r\n\tvar len = ch.length;\r\n\tvar out = [];\r\n\tfor (var i = 0; i < len; i++) {\r\n\t\tvar obj = ch[i];\r\n\t\tif (obj.className && obj.className.indexOf(css) !== -1) {\r\n\t\t\tout.push(obj);\r\n\t\t}\r\n\t}\r\n\treturn out;\r\n}\r\n\r\nfunction getTargetNode(e){\r\n\tvar trg;\r\n\tif (e.tagName)\r\n\t\ttrg = e;\r\n\telse {\r\n\t\te=e||window.event;\r\n\t\ttrg=e.target||e.srcElement;\r\n\t}\r\n\treturn trg;\r\n}\r\n\r\nfunction locateAttribute(e, attribute) {\r\n\tif(!attribute) return;\r\n\r\n\tvar trg = getTargetNode(e);\r\n\r\n\twhile (trg){\r\n\t\tif (trg.getAttribute){\t//text nodes has not getAttribute\r\n\t\t\tvar test = trg.getAttribute(attribute);\r\n\t\t\tif (test) return trg;\r\n\t\t}\r\n\t\ttrg=trg.parentNode;\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nfunction _trimString(str){\r\n\tvar func = String.prototype.trim || function(){ return this.replace(/^\\s+|\\s+$/g, \"\"); };\r\n\treturn func.apply(str);\r\n}\r\n\r\nfunction locateClassName(e, classname, strict){\r\n\tif(strict === undefined)\r\n\t\tstrict = true;\r\n\r\n\tvar trg = getTargetNode(e);\r\n\tvar css = '';\r\n\tvar test = false;\r\n\twhile (trg){\r\n\t\tcss = getClassName(trg);\r\n\r\n\t\tif(css){\r\n\t\t\tvar ind = css.indexOf(classname);\r\n\t\t\tif (ind >= 0){\r\n\t\t\t\tif (!strict)\r\n\t\t\t\t\treturn trg;\r\n\r\n\t\t\t\t//check that we have exact match\r\n\t\t\t\tvar left = (ind === 0) || (!_trimString(css.charAt(ind - 1)));\r\n\t\t\t\tvar right = ((ind + classname.length >= css.length)) || (!_trimString(css.charAt(ind + classname.length)));\r\n\r\n\t\t\t\tif (left && right)\r\n\t\t\t\t\treturn trg;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttrg=trg.parentNode;\r\n\t}\r\n\treturn null;\r\n}\r\n\r\n/*\r\nevent position relatively to DOM element\r\n */\r\nfunction getRelativeEventPosition(ev, node){\r\n\tif (ev.pageX || ev.pageY)\r\n\t\tvar pos = {x: ev.pageX, y: ev.pageY};\r\n\r\n\tvar d = document.documentElement;\r\n\tvar pos = {\r\n\t\tx: ev.clientX + d.scrollLeft - d.clientLeft,\r\n\t\ty: ev.clientY + d.scrollTop - d.clientTop\r\n\t};\r\n\r\n\tvar box = elementPosition(node);\r\n\tpos.x = pos.x - box.x + node.scrollLeft;\r\n\tpos.y = pos.y - box.y + node.scrollTop;\r\n\treturn pos;\r\n}\r\n\r\n\r\nfunction isChildOf(child, parent){\r\n\tif(!child || !parent){\r\n\t\treturn false;\r\n\t}\r\n\r\n\twhile(child && child != parent) {\r\n\t\tchild = child.parentNode;\r\n\t}\r\n\r\n\treturn child === parent;\r\n}\r\n\r\nmodule.exports = {\r\n\tgetNodePosition: elementPosition,\r\n\tgetFocusableNodes: getFocusableNodes,\r\n\tgetScrollSize: getScrollSize,\r\n\tgetClassName: getClassName,\r\n\taddClassName: addClassName,\r\n\tremoveClassName: removeClassName,\r\n\tinsertNode: insert,\r\n\tremoveNode: remove,\r\n\tgetChildNodes: getChildren,\r\n\ttoNode: toNode,\r\n\tlocateClassName:locateClassName,\r\n\tlocateAttribute: locateAttribute,\r\n\tgetTargetNode: getTargetNode,\r\n\tgetRelativeEventPosition: getRelativeEventPosition,\r\n\tisChildOf: isChildOf,\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/utils/dom_helpers.js\n// module id = 1\n// module chunks = 0","var EventHost = function(){\r\n\tthis._connected = [];\r\n\tthis._silent_mode = false;\r\n};\r\n\r\nEventHost.prototype = {\r\n\t_silentStart: function() {\r\n\t\tthis._silent_mode = true;\r\n\t},\r\n\t_silentEnd: function() {\r\n\t\tthis._silent_mode = false;\r\n\t}\r\n};\r\n\r\nvar\tcreateEventStorage = function(obj) {\r\n\tvar dhx_catch = [];\r\n\tvar z = function(){\r\n\t\tvar res = true;\r\n\t\tfor (var i = 0; i < dhx_catch.length; i++){\r\n\t\t\tif (dhx_catch[i]){\r\n\t\t\t\tvar zr = dhx_catch[i].apply(obj, arguments);\r\n\t\t\t\tres=res&&zr;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\tz.addEvent=function(ev){\r\n\t\tif (typeof (ev) == \"function\")\r\n\t\t\treturn dhx_catch.push(ev)-1;\r\n\t\treturn false;\r\n\t};\r\n\tz.removeEvent=function(id){\r\n\t\tdhx_catch[id]=null;\r\n\t};\r\n\treturn z;\r\n};\r\n\r\nfunction makeEventable(obj){\r\n\r\n\tvar eventHost = new EventHost();\r\n\tobj.attachEvent=function(name, catcher, callObj){\r\n\t\tname='ev_'+name.toLowerCase();\r\n\t\tif (!eventHost[name])\r\n\t\t\teventHost[name] = createEventStorage(callObj||this);\r\n\r\n\t\treturn(name+':'+eventHost[name].addEvent(catcher)); //return ID (event name & event ID)\r\n\t};\r\n\tobj.attachAll = function(callback, callObj){\r\n\t\tthis.attachEvent('listen_all', callback, callObj);\r\n\t};\r\n\r\n\tobj.callEvent=function(name, arg0, callObj){\r\n\t\tif (eventHost._silent_mode) return true;\r\n\r\n\t\tvar handlerName = 'ev_'+name.toLowerCase();\r\n\r\n\t\tif (eventHost['ev_listen_all']){\r\n\t\t\teventHost['ev_listen_all'].apply(callObj || this, [name].concat(arg0));\r\n\t\t}\r\n\r\n\t\tif (eventHost[handlerName])\r\n\t\t\treturn eventHost[handlerName].apply(callObj || this, arg0);\r\n\t\treturn true;\r\n\t};\r\n\tobj.checkEvent=function(name){\r\n\t\treturn (!!eventHost['ev_'+name.toLowerCase()]);\r\n\t};\r\n\tobj.detachEvent=function(id){\r\n\t\tif (id){\r\n\t\t\tvar list = id.split(':');           //get EventName and ID\r\n\t\t\teventHost[list[0]].removeEvent(list[1]); //remove event\r\n\t\t}\r\n\t};\r\n\tobj.detachAllEvents = function(){\r\n\t\tfor (var name in eventHost){\r\n\t\t\tif (name.indexOf(\"ev_\") === 0)\r\n\t\t\t\tdelete eventHost[name];\r\n\t\t}\r\n\t};\r\n\r\n}\r\n\r\nmodule.exports = makeEventable;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/utils/eventable.js\n// module id = 2\n// module chunks = 0","module.exports = function (d, b) {\r\n\tfor (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\tfunction __() { this.constructor = d; }\r\n\td.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/utils/extends.js\n// module id = 3\n// module chunks = 0","function isDate(obj) {\r\n\tif (obj && typeof obj == \"object\") {\r\n\t\treturn !!(obj.getFullYear && obj.getMonth && obj.getDate);\r\n\t} else {\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nmodule.exports = {\r\n\tisDate: isDate\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/utils/date_helpers.js\n// module id = 4\n// module chunks = 0","var utils = require(\"../../../utils/utils\"),\r\n\tdomEventsScope = require(\"../../../utils/dom_event_scope\"),\r\n\teventable = require(\"../../../utils/eventable\"),\r\n\tdomHelpers = require(\"../../../utils/dom_helpers\");\r\n\r\nvar Cell = (function () {\r\n\t\"use strict\";\r\n\r\n\tfunction Cell(parent, config, factory, gantt) {\r\n\t\tif (parent) {\r\n\t\t\tthis.$container = domHelpers.toNode(parent);\r\n\t\t\tthis.$parent = parent;\r\n\t\t}\r\n\t\t// save config\r\n\t\tthis.$config = utils.mixin(config, {\r\n\t\t\theaderHeight: 33\r\n\t\t});\r\n\t\tthis.$gantt = gantt;\r\n\t\tthis.$domEvents = gantt._createDomEventScope();\r\n\t\t// set id\r\n\t\tthis.$id = config.id || \"c\" + utils.uid();\r\n\r\n\t\tthis.$name = \"cell\";\r\n\t\tthis.$factory = factory;\r\n\r\n\t\teventable(this);\r\n\r\n\t}\r\n\r\n\tCell.prototype.destructor = function () {\r\n\t\tthis.$parent = this.$container = this.$view = null;\r\n\t\tvar mouse = this.$gantt.$services.getService(\"mouseEvents\");\r\n\t\tmouse.detach(\"click\", \"gantt_header_arrow\", this._headerClickHandler);\r\n\t\tthis.$domEvents.detachAll();\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\t};\r\n\tCell.prototype.cell = function (id) {\r\n\t\treturn null;\r\n\t};\r\n\r\n\tCell.prototype.scrollTo = function(left, top){\r\n\r\n\t\tif (left*1 == left){\r\n\t\t\tthis.$view.scrollLeft = left;\r\n\t\t}\r\n\t\tif(top*1 == top){\r\n\t\t\tthis.$view.scrollTop = top;\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype.clear = function(){\r\n\t\tthis.getNode().innerHTML = \"\";\r\n\t\tthis.getNode().className = \"gantt_layout_content\";\r\n\t\tthis.getNode().style.padding = \"0\";\r\n\t};\r\n\r\n\tCell.prototype.resize = function (final) {\r\n\t\tif (this.$parent) {\r\n\t\t\treturn this.$parent.resize(final);\r\n\t\t}\r\n\r\n\t\tif(final === false){\r\n\t\t\tthis.$preResize = true;\r\n\t\t}\r\n\r\n\t\tvar topCont = this.$container;\r\n\t\tvar x = topCont.offsetWidth;\r\n\t\tvar y = topCont.offsetHeight;\r\n\t\tvar topSize = this.getSize();\r\n\t\tif (topCont === document.body) {\r\n\t\t\tx = document.body.offsetWidth;\r\n\t\t\ty = document.body.offsetHeight;\r\n\t\t}\r\n\t\tif (x < topSize.minWidth) {\r\n\t\t\tx = topSize.minWidth;\r\n\t\t}\r\n\t\tif (x > topSize.maxWidth) {\r\n\t\t\tx = topSize.maxWidth;\r\n\t\t}\r\n\t\tif (y < topSize.minHeight) {\r\n\t\t\ty = topSize.minHeight;\r\n\t\t}\r\n\t\tif (y > topSize.maxHeight) {\r\n\t\t\ty = topSize.maxHeight;\r\n\t\t}\r\n\t\tthis.setSize(x, y);\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tif(!this.$preResize){\r\n\t\t//\tself.callEvent(\"onResize\", [x, y]);\r\n\t\t}\r\n\t\tthis.$preResize = false;\r\n\t};\r\n\r\n\tCell.prototype.hide = function () {\r\n\t\tthis._hide(true);\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype.show = function (force) {\r\n\t\tthis._hide(false);\r\n\t\tif (force && this.$parent) {\r\n\t\t\tthis.$parent.show();\r\n\t\t}\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype._hide = function (mode) {\r\n\t\tif (mode === true && this.$view.parentNode) {\r\n\t\t\tthis.$view.parentNode.removeChild(this.$view);\r\n\t\t}\r\n\t\telse if (mode === false && !this.$view.parentNode) {\r\n\t\t\tvar index = this.$parent.cellIndex(this.$id);\r\n\t\t\tthis.$parent.moveView(this, index);\r\n\t\t}\r\n\t\tthis.$config.hidden = mode;\r\n\t};\r\n\tCell.prototype.$toHTML = function (content, css) {\r\n\t\tif (content === void 0) { content = \"\"; }\r\n\t\tcss = [(css || \"\"), (this.$config.css || \"\")].join(\" \");\r\n\t\tvar obj = this.$config;\r\n\t\tvar header = \"\";\r\n\t\tif (obj.raw) {\r\n\t\t\tcontent = typeof obj.raw === \"string\" ? obj.raw : \"\";\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (!content) {\r\n\t\t\t\tcontent = \"<div class='gantt_layout_content' \"+(css ? \" class='\"+css+\"' \" : \"\")+\" >\" + (obj.html || \"\") + \"</div>\";\r\n\t\t\t}\r\n\t\t\tif (obj.header) {\r\n\t\t\t\tvar collapseIcon = obj.canCollapse ? \"<div class='gantt_layout_header_arrow'></div>\" : \"\";\r\n\t\t\t\theader = \"<div class='gantt_layout_header'>\" + collapseIcon + \"<div class='gantt_layout_header_content'>\" + obj.header + \"</div></div>\";\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"<div class='gantt_layout_cell \" + css + \"' data-cell-id='\" + this.$id + \"'>\" + header + content + \"</div>\";\r\n\t};\r\n\tCell.prototype.$fill = function (node, parent) {\r\n\t\tthis.$view = node;\r\n\t\tthis.$parent = parent;\r\n\t\tthis.init();\r\n\t};\r\n\tCell.prototype.getNode = function () {\r\n\t\treturn (this.$view.querySelector(\"gantt_layout_cell\") || this.$view);\r\n\t};\r\n\tCell.prototype.init = function () {\r\n\t\t// [NOT-GOOD] code is executed for each component, while it still has only one handler, it is no good\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tthis._headerClickHandler = function(e){\r\n\t\t\tvar cellId = domHelpers.locateAttribute(e, \"data-cell-id\");\r\n\t\t\tif(cellId == self.$id){\r\n\t\t\t\tself.toggle();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar mouse = this.$gantt.$services.getService(\"mouseEvents\");\r\n\t\tmouse.delegate(\"click\", \"gantt_header_arrow\", this._headerClickHandler);\r\n\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t};\r\n\tCell.prototype.toggle = function () {\r\n\t\tthis.$config.collapsed = !this.$config.collapsed;\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype.getSize = function () {\r\n\t\tvar size = {\r\n\t\t\theight: this.$config.height || 0,\r\n\t\t\twidth: this.$config.width || 0,\r\n\t\t\tgravity: this.$config.gravity || 1,\r\n\t\t\tminHeight: this.$config.minHeight || 0,\r\n\t\t\tminWidth: this.$config.minWidth || 0,\r\n\t\t\tmaxHeight: this.$config.maxHeight || 100000,\r\n\t\t\tmaxWidth: this.$config.maxWidth || 100000\r\n\t\t};\r\n\t\tif (this.$config.collapsed) {\r\n\t\t\tvar mode = this.$config.mode === \"x\";\r\n\t\t\tsize[mode ? \"width\" : \"height\"] = size[mode ? \"maxWidth\" : \"maxHeight\"] = this.$config.headerHeight;\r\n\t\t}\r\n\t\treturn size;\r\n\t};\r\n\r\n\tCell.prototype.getContentSize = function(){\r\n\r\n\t\tvar width = this.$lastSize.contentX;\r\n\t\tif(width !== width*1){\r\n\t\t\twidth = this.$lastSize.width;\r\n\t\t}\r\n\r\n\t\tvar height = this.$lastSize.contentY;\r\n\t\tif(height !== height*1){\r\n\t\t\theight = this.$lastSize.height;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\twidth: width,\r\n\t\t\theight: height\r\n\t\t};\r\n\t};\r\n\r\n\tCell.prototype._getBorderSizes = function(){\r\n\t\tvar borders = {\r\n\t\t\ttop: 0,\r\n\t\t\tright: 0,\r\n\t\t\tbottom: 0,\r\n\t\t\tleft: 0,\r\n\t\t\thorizontal: 0,\r\n\t\t\tvertical: 0\r\n\t\t};\r\n\t\tif(this._currentBorders){\r\n\t\t\tif(this._currentBorders[this._borders.left]){\r\n\t\t\t\tborders.left = 1;\r\n\t\t\t\tborders.horizontal++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.right]){\r\n\t\t\t\tborders.right = 1;\r\n\t\t\t\tborders.horizontal++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.top]){\r\n\t\t\t\tborders.top = 1;\r\n\t\t\t\tborders.vertical++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.bottom]){\r\n\t\t\t\tborders.bottom = 1;\r\n\t\t\t\tborders.vertical++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn borders;\r\n\r\n\t};\r\n\r\n\tCell.prototype.setSize = function (x, y) {\r\n\t\tthis.$view.style.width = x + \"px\";\r\n\t\tthis.$view.style.height = y + \"px\";\r\n\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tvar contentY = y - borders.vertical;\r\n\t\tvar contentX = x - borders.horizontal;\r\n\r\n\t\tthis.$lastSize = { x: x, y: y, contentX: contentX, contentY: contentY };\r\n\t\tif (this.$config.header) {\r\n\t\t\tthis._sizeHeader();\r\n\t\t}else{\r\n\t\t\tthis._sizeContent();\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype._borders = {\r\n\t\t\"left\":\"gantt_layout_cell_border_left\",\r\n\t\t\"right\":\"gantt_layout_cell_border_right\",\r\n\t\t\"top\":\"gantt_layout_cell_border_top\",\r\n\t\t\"bottom\":\"gantt_layout_cell_border_bottom\"\r\n\t};\r\n\r\n\tCell.prototype._setBorders = function(css, view){\r\n\t\tif(!view) {\r\n\t\t\tview = this;\r\n\t\t}\r\n\t\tvar node = view.$view;\r\n\r\n\t\tfor( var i in this._borders){\r\n\t\t\tdomHelpers.removeClassName(node, this._borders[i]);\r\n\t\t}\r\n\r\n\t\tif(typeof css == \"string\"){\r\n\t\t\tcss = [css];\r\n\t\t}\r\n\r\n\t\tvar cssHash = {};\r\n\r\n\t\tfor(var i = 0; i < css.length; i++){\r\n\t\t\tdomHelpers.addClassName(node, css[i]);\r\n\t\t\tcssHash[css[i]] = true;\r\n\t\t}\r\n\r\n\t\tview._currentBorders = cssHash;\r\n\t};\r\n\r\n\r\n\tCell.prototype._sizeContent = function(){\r\n\t\tvar content = this.$view.childNodes[0];\r\n\t\tif(content && content.className == \"gantt_layout_content\"){\r\n\t\t\tcontent.style.height = this.$lastSize.contentY + \"px\";\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype._sizeHeader = function () {\r\n\t\tvar size = this.$lastSize;\r\n\t\tsize.contentY -= this.$config.headerHeight;\r\n\t\tvar header = this.$view.childNodes[0];\r\n\t\tvar content = this.$view.childNodes[1];\r\n\t\tvar xLayout = this.$config.mode === \"x\";\r\n\t\tif (this.$config.collapsed) {\r\n\t\t\tcontent.style.display = \"none\";\r\n\t\t\tif (xLayout) {\r\n\t\t\t\theader.className = \"gantt_layout_header collapsed_x\";\r\n\t\t\t\theader.style.width = size.y + \"px\";\r\n\t\t\t\tvar d = Math.floor(size.y / 2 - size.x / 2);\r\n\t\t\t\theader.style.transform = \"rotate(90deg) translate(\" + d + \"px, \" + d + \"px)\";\r\n\t\t\t\tcontent.style.display = \"none\";\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\theader.className = \"gantt_layout_header collapsed_y\";\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (xLayout) {\r\n\t\t\t\theader.className = \"gantt_layout_header\";\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\theader.className = \"gantt_layout_header vertical\";\r\n\t\t\t}\r\n\t\t\theader.style.width = 'auto';\r\n\t\t\theader.style.transform = '';\r\n\t\t\tcontent.style.display = \"\";\r\n\t\t\tcontent.style.height = size.contentY + \"px\";\r\n\t\t}\r\n\t\theader.style.height = this.$config.headerHeight + \"px\";\r\n\t};\r\n\treturn Cell;\r\n}());\r\n\r\nmodule.exports = Cell;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/layout/cell.js\n// module id = 5\n// module chunks = 0","var env = {\r\n\tisIE: (navigator.userAgent.indexOf(\"MSIE\") >= 0 || navigator.userAgent.indexOf(\"Trident\") >= 0),\r\n\tisIE6: (!window.XMLHttpRequest && navigator.userAgent.indexOf(\"MSIE\") >= 0),\r\n\tisIE7: (navigator.userAgent.indexOf(\"MSIE 7.0\") >= 0 && navigator.userAgent.indexOf(\"Trident\") < 0),\r\n\tisIE8: (navigator.userAgent.indexOf(\"MSIE 8.0\") >= 0 && navigator.userAgent.indexOf(\"Trident\") >= 0),\r\n\tisOpera: (navigator.userAgent.indexOf(\"Opera\") >= 0),\r\n\tisChrome: (navigator.userAgent.indexOf(\"Chrome\") >= 0),\r\n\tisKHTML: (navigator.userAgent.indexOf(\"Safari\") >= 0 || navigator.userAgent.indexOf(\"Konqueror\") >= 0),\r\n\tisFF: (navigator.userAgent.indexOf(\"Firefox\") >= 0),\r\n\tisIPad: (navigator.userAgent.search(/iPad/gi) >= 0),\r\n\tisEdge: (navigator.userAgent.indexOf(\"Edge\")!=-1)\r\n};\r\n\r\nmodule.exports = env;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/utils/env.js\n// module id = 6\n// module chunks = 0","var units = {\r\n\t\"second\": 1,\r\n\t\"minute\": 60,\r\n\t\"hour\": 60 * 60,\r\n\t\"day\": 60 * 60 * 24,\r\n\t\"week\": 60 * 60 * 24 * 7,\r\n\t\"month\": 60 * 60 * 24 * 30,\r\n\t\"quarter\": 60 * 60 * 24 * 30 * 3,\r\n\t\"year\": 60 * 60 * 24 * 365\r\n};\r\nfunction getSecondsInUnit(unit){\r\n\treturn units[unit] || units.hour;\r\n}\r\n\r\nfunction forEach(arr, callback){\r\n\tif(arr.forEach){\r\n\t\tarr.forEach(callback);\r\n\t}else{\r\n\t\tvar workArray = arr.slice();\r\n\t\tfor(var i = 0; i < workArray.length; i++){\r\n\t\t\tcallback(workArray[i], i);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction arrayMap(arr, callback){\r\n\tif(arr.map){\r\n\t\treturn arr.map(callback);\r\n\t}else{\r\n\t\tvar workArray = arr.slice();\r\n\t\tvar resArray = [];\r\n\r\n\t\tfor(var i = 0; i < workArray.length; i++){\r\n\t\t\tresArray.push(callback(workArray[i], i));\r\n\t\t}\r\n\r\n\t\treturn resArray;\r\n\t}\r\n\r\n}\r\n\r\nmodule.exports = {\r\n\tgetSecondsInUnit: getSecondsInUnit,\r\n\tforEach: forEach,\r\n\tarrayMap: arrayMap\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/utils/helpers.js\n// module id = 7\n// module chunks = 0","var domHelpers = require(\"../../../utils/dom_helpers\"),\r\n\tutils = require(\"../../../utils/utils\"),\r\n\teventable = require(\"../../../utils/eventable\"),\r\n\tgridResize = require(\"./grid_resize\");\r\n\r\nvar Grid = function(parent, config, factory, gantt){\r\n\tthis.$config = utils.mixin({}, config || {});\r\n\tthis.$gantt = gantt;\r\n\tthis.$parent = parent;\r\n\teventable(this);\r\n\tthis.$state = {};\r\n};\r\n\r\nGrid.prototype = {\r\n\tinit: function(container){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar gridAriaAttr = gantt._waiAria.gridAttrString();\r\n\t\tvar gridDataAriaAttr = gantt._waiAria.gridDataAttrString();\r\n\r\n\t\tcontainer.innerHTML = \"<div class='gantt_grid' style='height:inherit;width:inherit;' \"+gridAriaAttr+\"></div>\";\r\n\t\tthis.$grid = container.childNodes[0];\r\n\r\n\t\tthis.$grid.innerHTML = \"<div class='gantt_grid_scale' \"+\r\n\t\t\tgantt._waiAria.gridScaleRowAttrString()+\"></div><div class='gantt_grid_data' \"+gridDataAriaAttr+\"></div>\";\r\n\r\n\t\tthis.$grid_scale = this.$grid.childNodes[0];\r\n\t\tthis.$grid_data = this.$grid.childNodes[1];\r\n\r\n\t\tvar attr = this.$getConfig()[this.$config.bind + \"_attribute\"];\r\n\t\tif(!attr && this.$config.bind){\r\n\t\t\tattr = this.$config.bind + \"_id\";\r\n\t\t}\r\n\t\tthis.$config.item_attribute = attr || null;\r\n\t\t\r\n\t\tif(!this.$config.layers){\r\n\t\t\tvar layers = this._createLayerConfig();\r\n\t\t\tthis.$config.layers = layers;\r\n\t\t}\r\n\r\n\t\tvar resizer = gridResize(gantt, this);\r\n\t\tresizer.init();\r\n\t\tthis._renderHeaderResizers = resizer.doOnRender;\r\n\t\tthis._mouseDelegates = require(\"../mouse_event_container\")(gantt);\r\n\r\n\t\tthis._addLayers(this.$gantt);\r\n\t\tthis._initEvents();\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\t//this.refresh();\r\n\t},\r\n\tsetSize: function(width, height){\r\n\t\tthis.$config.width = this.$state.width = width;\r\n\t\tthis.$state.height = height;\r\n\r\n\t\t// TODO: maybe inherit and override in a subclass instead of extending here\r\n\r\n\t\tvar columns = this.getGridColumns(),\r\n\t\t\tinnerWidth = 0;\r\n\r\n\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\tinnerWidth += columns[i].width*1;\r\n\t\t}\r\n\r\n\t\tvar outerWidth;\r\n\t\tif(isNaN(innerWidth) || !this.$config.scrollable){\r\n\t\t\touterWidth = this._setColumnsWidth(width + 1);\r\n\t\t\tinnerWidth = outerWidth;\r\n\t\t}\r\n\r\n\t\tif(this.$config.scrollable){\r\n\t\t\tthis.$grid_scale.style.width = innerWidth + \"px\";\r\n\t\t\tthis.$grid_data.style.width = innerWidth + \"px\";\r\n\t\t}else{\r\n\t\t\tthis.$grid_scale.style.width = \"inherit\";\r\n\t\t\tthis.$grid_data.style.width = \"inherit\";\r\n\t\t}\r\n\t\tthis.$config.width -= 1;\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tif(outerWidth !== width){\r\n\t\t\tconfig.grid_width = outerWidth;\r\n\t\t\tthis.$config.width = outerWidth - 1;\r\n\t\t}\r\n\r\n\t\tvar dataHeight = Math.max(this.$state.height - config.scale_height, 0);\r\n\t\tthis.$grid_data.style.height = dataHeight + \"px\";\r\n\t\tthis.refresh();\r\n\t},\r\n\tgetSize: function(){\r\n\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tvar store = this.$config.rowStore;\r\n\r\n\t\tvar contentHeight = store ? config.row_height * store.countVisible() : 0,\r\n\t\t\tcontentWidth = this._getGridWidth();\r\n\r\n\t\tvar size = {\r\n\t\t\tx: this.$state.width,\r\n\t\t\ty: this.$state.height,\r\n\t\t\tcontentX: this.isVisible() ? contentWidth: 0,\r\n\t\t\tcontentY: this.isVisible() ? (config.scale_height + contentHeight) : 0,\r\n\t\t\tscrollHeight: this.isVisible() ? contentHeight: 0,\r\n\t\t\tscrollWidth: this.isVisible() ? contentWidth : 0\r\n\t\t};\r\n\r\n\t\treturn size;\r\n\t},\r\n\trefresh: function(){\r\n\t\tif(this.$config.bind)\r\n\t\t\tthis.$config.rowStore = this.$gantt.getDatastore(this.$config.bind);\r\n\r\n\t\tthis._initSmartRenderingPlaceholder();\r\n\r\n\t\tthis._calculateGridWidth();\r\n\t\tthis._renderGridHeader();\r\n\t},\r\n\tscrollTo: function(left, top){\r\n\t\tif(!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tif (left*1 == left){\r\n\t\t\tthis.$state.scrollLeft = this.$grid.scrollLeft = left;\r\n\t\t}\r\n\r\n\t\t// var config = this.$getConfig();\r\n\t\tif(top*1 == top){\r\n\t\t\tthis.$state.scrollTop = this.$grid_data.scrollTop = top;\r\n\t\t}\r\n\t},\r\n\tgetGridColumns: function(){\r\n\t\tvar config = this.$getConfig();\r\n\t\treturn config.columns.slice();\r\n\t},\r\n\tisVisible: function(){\r\n\t\tif(this.$parent && this.$parent.$config){\r\n\t\t\treturn !this.$parent.$config.hidden;\r\n\t\t}else{\r\n\t\t\treturn this.$grid.offsetWidth;\r\n\t\t}\r\n\t},\r\n\r\n\tgetItemTop: function(id){\r\n\t\tif(this.$config.rowStore){\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif(!store) return 0;\r\n\r\n\t\t\treturn store.getIndexById(id) * this.$getConfig().row_height;\r\n\r\n\t\t}else{\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t},\r\n\r\n\tgetItemHeight: function(){\r\n\t\tvar config = this.$getConfig();\r\n\t\treturn config.row_height;\r\n\t},\r\n\r\n\t_createLayerConfig: function(){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar self = this;\r\n\t\tvar layers = [\r\n\t\t\t{\r\n\t\t\t\trenderer: gantt.$ui.layers.gridLine,\r\n\t\t\t\tcontainer: this.$grid_data,\r\n\t\t\t\tfilter: [function(){\r\n\t\t\t\t\treturn self.isVisible();\r\n\t\t\t\t}]\r\n\t\t\t}\r\n\t\t];\r\n\t\treturn layers;\r\n\t},\r\n\r\n\t_addLayers: function(gantt){\r\n\t\tif(!this.$config.bind)\r\n\t\t\treturn;\r\n\r\n\t\tthis._taskLayers = [];\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\tif(!taskRenderer){\r\n\t\t\ttaskRenderer = layers.createDataRender({\r\n\t\t\t\tname: this.$config.bind,\r\n\t\t\t\tdefaultContainer: function(){ return self.$grid_data;}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tvar taskLayers = this.$config.layers;\r\n\t\tfor(var i = 0; taskLayers && i < taskLayers.length; i++){\r\n\t\t\tvar layer = taskLayers[i];\r\n\t\t\tlayer.host = this;\r\n\t\t\tvar bar_layer = taskRenderer.addLayer(layer);\r\n\t\t\tthis._taskLayers.push(bar_layer);\r\n\t\t}\r\n\r\n\t\tif(this.$config.bind)\r\n\t\t\tthis.$config.rowStore = this.$gantt.getDatastore(this.$config.bind);\r\n\r\n\t\tthis._initSmartRenderingPlaceholder();\r\n\t},\r\n\r\n\t_initSmartRenderingPlaceholder: function(){\r\n\t\tvar self = this;\r\n\t\tvar store = this.$config.rowStore;\r\n\t\tif(!store){\r\n\t\t\treturn;\r\n\t\t}else{\r\n\t\t\tthis._initSmartRenderingPlaceholder = function(){};\r\n\t\t}\r\n\t\tthis._staticBgHandler = store.attachEvent(\"onStoreUpdated\", function(id, item, mode){\r\n\t\t\tif(id !== null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!self.isVisible())\r\n\t\t\t\treturn;\r\n\t\t\tvar config = self.$getConfig();\r\n\t\t\tif(config.smart_rendering) {\r\n\t\t\t\tvar contentHeight = store ? config.row_height * store.countVisible() : 0;\r\n\t\t\t\tif(contentHeight){\r\n\t\t\t\t\tif(self.$rowsPlaceholder && self.$rowsPlaceholder.parentNode){\r\n\t\t\t\t\t\tself.$rowsPlaceholder.parentNode.removeChild(self.$rowsPlaceholder);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar placeholder = self.$rowsPlaceholder = document.createElement(\"div\");\r\n\t\t\t\t\tplaceholder.style.visibility = \"hidden\";\r\n\t\t\t\t\tplaceholder.style.height = contentHeight + \"px\";\r\n\t\t\t\t\tplaceholder.style.width = \"1px\";\r\n\t\t\t\t\tself.$grid_data.appendChild(placeholder);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t_initEvents: function(){\r\n\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_close\", gantt.bind(function (e, id, trg) {\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif(!store) return true;\r\n\r\n\t\t\tvar target = domHelpers.locateAttribute(e, this.$config.item_attribute);\r\n\t\t\tif(target){\r\n\t\t\t\tstore.close(target.getAttribute(this.$config.item_attribute));\r\n\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}, this), this.$grid);\r\n\r\n\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_open\", gantt.bind(function (e, id, trg) {\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif(!store) return true;\r\n\r\n\t\t\tvar target = domHelpers.locateAttribute(e, this.$config.item_attribute);\r\n\t\t\tif(target){\r\n\t\t\t\tstore.open(target.getAttribute(this.$config.item_attribute));\r\n\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}, this), this.$grid);\r\n\t},\r\n\r\n\t_clearLayers: function(gantt){\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\tfor(var i = 0; i < this._taskLayers.length; i++){\r\n\t\t\ttaskRenderer.removeLayer(this._taskLayers[i]);\r\n\t\t}\r\n\r\n\t\tthis._taskLayers = [];\r\n\t},\r\n\r\n\t_getColumnWidth: function(column, config, width) {\r\n\t\tvar min_width = column.min_width || config.min_grid_column_width;\r\n\t\tvar new_width = Math.max(width, min_width || 10);\r\n\t\tif (column.max_width)\r\n\t\t\tnew_width = Math.min(new_width, column.max_width);\r\n\t\treturn new_width;\r\n\t},\r\n\t// return min and max possible grid width according to restricts\r\n\t_getGridWidthLimits: function() {\r\n\t\tvar config = this.$getConfig(),\r\n\t\t\tcolumns = this.getGridColumns(),\r\n\t\t\tmin_limit = 0,\r\n\t\t\tmax_limit = 0;\r\n\r\n\t\t\tfor (var i=0; i<columns.length; i++) {\r\n\t\t\t\tmin_limit += columns[i].min_width ? columns[i].min_width : config.min_grid_column_width;\r\n\t\t\t\tif (max_limit !== undefined) {\r\n\t\t\t\t\tmax_limit = columns[i].max_width ? (max_limit + columns[i].max_width) : undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn [min_limit, max_limit];\r\n\t},\r\n\t// resize columns to get total newWidth, starting from columns[start_index]  \r\n\t_setColumnsWidth: function(newWidth, start_index) {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar columns = this.getGridColumns(),\r\n\t\t\tcolumns_width = 0,\r\n\t\t\tfinal_width = newWidth;\r\n\r\n\t\tstart_index = !window.isNaN(start_index) ? start_index : -1;\r\n\r\n\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\tcolumns_width += columns[i].width*1;\r\n\t\t}\r\n\r\n\t\tif (window.isNaN(columns_width)) {\r\n\t\t\tthis._calculateGridWidth(); \r\n\t\t\tcolumns_width = 0;\r\n\t\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\t\tcolumns_width += columns[i].width*1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar extra_width = final_width - columns_width;\r\n\r\n\t\tvar start_width = 0;\r\n\t\tfor (var i=0; i<start_index+1; i++) {\r\n\t\t\tstart_width += columns[i].width;\r\n\t\t}\r\n\r\n\t\tcolumns_width -= start_width;\r\n\r\n\t\tfor (var i=start_index+1; i<columns.length; i++) {\r\n\r\n\t\t\tvar col = columns[i];\r\n\t\t\tvar\tshare = Math.round(extra_width * (col.width / columns_width));\r\n\r\n\t\t\t// columns have 2 additional restrict fields - min_width & max_width that are set by user\r\n\t\t\tif (extra_width < 0) {\r\n\t\t\t\tif (col.min_width && col.width+share < col.min_width)\r\n\t\t\t\t\tshare = col.min_width - col.width;\r\n\t\t\t\telse if (!col.min_width && config.min_grid_column_width && col.width+share < config.min_grid_column_width)\r\n\t\t\t\t\tshare = config.min_grid_column_width - col.width;\r\n\t\t\t} else if (col.max_width && col.width+share > col.max_width)\r\n\t\t\t\tshare = col.max_width - col.width;\r\n\r\n\t\t\tcolumns_width -= col.width;\r\n\t\t\tcol.width += share;\r\n\t\t\textra_width -= share;\r\n\r\n\t\t}\r\n\r\n\t\tvar iterator = extra_width > 0 ? 1 : -1;\r\n\t\twhile ((extra_width > 0 && iterator === 1) || (extra_width < 0 && iterator === -1)) {\r\n\t\t\tvar curExtra = extra_width;\r\n\t\t\tfor (i = start_index+1; i<columns.length; i++) {\r\n\t\t\t\tvar new_width = columns[i].width + iterator;\r\n\r\n\t\t\t\tif (new_width == this._getColumnWidth(columns[i], config, new_width)) {\r\n\t\t\t\t\textra_width -= iterator;\r\n\t\t\t\t\tcolumns[i].width = new_width;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!extra_width)\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif (curExtra == extra_width)\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\t// if impossible to resize the right-side columns, resize the start column\r\n\t\tif (extra_width && start_index > -1) {\r\n\t\t\tvar new_width = columns[start_index].width + extra_width;\r\n\t\t\tif (new_width == this._getColumnWidth(columns[start_index], config, new_width))\r\n\t\t\t\tcolumns[start_index].width = new_width;\r\n\t\t}\r\n\r\n\t\t//if (this.callEvent(\"onGridResizeEnd\", [config.grid_width, final_width]) === false)\r\n\t\t//\treturn;\r\n\r\n\t\treturn this._getColsTotalWidth();\r\n\t},\r\n\r\n\t_getColsTotalWidth: function(){\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tvar cols_width = 0;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar v = parseFloat(columns[i].width);\r\n\t\t\tif (window.isNaN(v)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tcols_width += v;\r\n\t\t}\r\n\t\treturn cols_width;\r\n\t},\r\n\t_calculateGridWidth: function() {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tvar cols_width = 0;\r\n\t\tvar unknown = [];\r\n\t\tvar width = [];\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar v = parseFloat(columns[i].width);\r\n\t\t\tif (window.isNaN(v)) {\r\n\t\t\t\tv = config.min_grid_column_width || 10;\r\n\t\t\t\tunknown.push(i);\r\n\t\t\t}\r\n\t\t\twidth[i] = v;\r\n\t\t\tcols_width += v;\r\n\t\t}\r\n\t\tvar gridWidth = this._getGridWidth() + 1;\r\n\t\tif (config.autofit || unknown.length) {\r\n\t\t\tvar diff = gridWidth - cols_width;\r\n\t\t\t// TODO: logic may be improved for proportional changing of width\r\n\t\t\tif (config.autofit) {\r\n\t\t\t\t// delta must be added for all columns\r\n\t\t\t\tfor (var i = 0; i < width.length; i++) {\r\n\t\t\t\t\tvar delta = Math.round(diff / (width.length-i));\r\n\t\t\t\t\twidth[i] += delta;\r\n\t\t\t\t\tvar new_width = this._getColumnWidth(columns[i], config, width[i]);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (new_width != width[i]) {\r\n\t\t\t\t\t\tdelta = new_width - width[i];\r\n\t\t\t\t\t\twidth[i] = new_width;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdiff -= delta;\r\n\t\t\t\t}\r\n\t\t\t} else if (unknown.length) {\r\n\t\t\t\t// there are several columns with undefined width\r\n\t\t\t\tfor (var i = 0; i < unknown.length; i++) {\r\n\t\t\t\t\tvar delta = Math.round(diff / (unknown.length-i)); // no float values, just integer\r\n\t\t\t\t\tvar index = unknown[i];\r\n\t\t\t\t\twidth[index] += delta;\r\n\t\t\t\t\tvar new_width = this._getColumnWidth(columns[index], config, width[index]);\r\n\t\t\t\t\tif (new_width != width[index]) {\r\n\t\t\t\t\t\tdelta = new_width - width[index];\r\n\t\t\t\t\t\twidth[index] = new_width;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdiff -= delta;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < width.length; i++) {\r\n\t\t\t\tcolumns[i].width = width[i];\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar changed = (gridWidth != cols_width);\r\n\t\t\tthis.$config.width = cols_width - 1;\r\n\t\t\tconfig.grid_width = cols_width;\r\n\t\t\tif(changed){\r\n\t\t\t\tthis.$parent._setContentSize(this.$config.width, this.$config.height);\r\n//\t\t\t\tthis.$parent.$config.width = cols_width;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_renderGridHeader: function(){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar locale = this.$gantt.locale;\r\n\t\tvar templates = this.$gantt.templates;\r\n\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tif(config.rtl){\r\n\t\t\tcolumns = columns.reverse();\r\n\t\t}\r\n\t\tvar cells = [];\r\n\t\tvar width = 0,\r\n\t\t\tlabels = locale.labels;\r\n\r\n\t\tvar lineHeigth = config.scale_height - 1;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar last = i == columns.length - 1;\r\n\t\t\tvar col = columns[i];\r\n\r\n\t\t\t// ensure columns have non-empty names\r\n\t\t\tif (!col.name) {\r\n\t\t\t\tcol.name = gantt.uid() + \"\";\r\n\t\t\t}\r\n\r\n\t\t\tvar colWidth = col.width * 1;\r\n\r\n\t\t\tvar gridWidth = this._getGridWidth();\r\n\t\t\tif (last && gridWidth > width + colWidth)\r\n\t\t\t\tcol.width = colWidth = gridWidth - width;\r\n\t\t\twidth += colWidth;\r\n\t\t\tvar sort = (gantt._sort && col.name == gantt._sort.name) ? (\"<div class='gantt_sort gantt_\" + gantt._sort.direction + \"'></div>\") : \"\";\r\n\t\t\tvar cssClass = [\"gantt_grid_head_cell\",\r\n\t\t\t\t(\"gantt_grid_head_\" + col.name),\r\n\t\t\t\t(last ? \"gantt_last_cell\" : \"\"),\r\n\t\t\t\ttemplates.grid_header_class(col.name, col)].join(\" \");\r\n\r\n\t\t\tvar style = \"width:\" + (colWidth - (last ? 1 : 0)) + \"px;\";\r\n\t\t\tvar label = (col.label || labels[\"column_\" + col.name]);\r\n\t\t\tlabel = label || \"\";\r\n\r\n\t\t\tvar ariaAttrs = gantt._waiAria.gridScaleCellAttrString(col, label);\r\n\r\n\t\t\tvar cell = \"<div class='\" + cssClass + \"' style='\" + style + \"' \" + ariaAttrs + \" data-column-id='\" + col.name + \"' column_id='\" + col.name + \"'>\" + label + sort + \"</div>\";\r\n\t\t\tcells.push(cell);\r\n\t\t}\r\n\t\tthis.$grid_scale.style.height = (config.scale_height) + \"px\";\r\n\t\tthis.$grid_scale.style.lineHeight = lineHeigth + \"px\";\r\n\t\t//this.$grid_scale.style.width = \"inherit\";\r\n\t\tthis.$grid_scale.innerHTML = cells.join(\"\");\r\n\r\n\t\tif(this._renderHeaderResizers){\r\n\t\t\tthis._renderHeaderResizers();\r\n\t\t}\r\n\t},\r\n\r\n\t_getGridWidth: function(){\r\n\t\t// TODO: refactor/remove/comment some of _getGridWidth/this.$config.width/this.$state.width, it's not clear what they do\r\n\t\treturn this.$config.width;\r\n\t},\r\n\r\n\tdestructor: function(){\r\n\t\tthis._clearLayers(this.$gantt);\r\n\t\tthis._mouseDelegates.destructor();\r\n\t\tthis._mouseDelegates = null;\r\n\t\tthis.$grid = null;\r\n\t\tthis.$grid_scale = null;\r\n\t\tthis.$grid_data = null;\r\n\t\tthis.$gantt = null;\r\n\r\n\t\tif(this.$config.rowStore){\r\n\t\t\tthis.$config.rowStore.detachEvent(this._staticBgHandler);\r\n\t\t\tthis.$config.rowStore = null;\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\t}\r\n};\r\n\r\nmodule.exports = Grid;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/grid/grid.js\n// module id = 8\n// module chunks = 0","function create(gantt){\r\n\tvar events = [];\r\n\r\n\treturn {\r\n\t\tdelegate:function(event, className, handler, root) {\r\n\t\t\tevents.push([event, className, handler, root]);\r\n\r\n\t\t\tvar helper = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\thelper.delegate(event, className, handler, root);\r\n\t\t},\r\n\t\tdestructor: function(){\r\n\t\t\tvar mouseEvents = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\tfor(var i = 0; i < events.length; i++){\r\n\t\t\t\tvar h = events[i];\r\n\t\t\t\tmouseEvents.detach(h[0], h[1], h[2], h[3]);\r\n\t\t\t}\r\n\t\t\tevents = [];\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = create;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/mouse_event_container.js\n// module id = 9\n// module chunks = 0","function checkTimeout(host, updPerSecond){\r\n\tif (!updPerSecond)\r\n\t\treturn true;\r\n\t\r\n\tif (host._on_timeout)\r\n\t\treturn false;\r\n\t\r\n\tvar timeout = Math.ceil(1000/updPerSecond);\r\n\tif (timeout < 2) return true;\r\n\r\n\tsetTimeout(function(){\r\n\t\tdelete host._on_timeout;\r\n\t}, timeout);\r\n\r\n\thost._on_timeout = true;\r\n\treturn true;\r\n}\r\n\r\nmodule.exports = checkTimeout;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/utils/timeout.js\n// module id = 10\n// module chunks = 0","var utils = require(\"./utils\");\r\n\r\nfunction createScope(addEvent, removeEvent){\r\n\taddEvent = addEvent || utils.event;\r\n\tremoveEvent = removeEvent || utils.eventRemove;\r\n\r\n\tvar handlers = [];\r\n\r\n\treturn {\r\n\t\tattach: function(el, event, handler, capture){\r\n\t\t\thandlers.push({element: el, event:event, callback: handler, capture: capture});\r\n\t\t\taddEvent(el, event, handler, capture);\r\n\t\t},\r\n\t\tdetach: function(el, event, handler, capture){\r\n\t\t\tremoveEvent(el, event, handler, capture);\r\n\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\tvar handler = handlers[i];\r\n\t\t\t\tif(handler.element === el && handler.event === event && handler.callback === handler && handler.capture === capture){\r\n\t\t\t\t\thandlers.splice(i, 1);\r\n\t\t\t\t\ti--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tdetachAll: function(){\r\n\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\tremoveEvent(handlers[i].element, handlers[i].event, handlers[i].callback, handlers[i].capture);\r\n\t\t\t\tremoveEvent(handlers[i].element, handlers[i].event, handlers[i].callback, undefined);\r\n\t\t\t\tremoveEvent(handlers[i].element, handlers[i].event, handlers[i].callback, false);\r\n\t\t\t\tremoveEvent(handlers[i].element, handlers[i].event, handlers[i].callback, true);\r\n\t\t\t}\r\n\t\t\thandlers = [];\r\n\t\t},\r\n\t\textend: function(){\r\n\t\t\treturn createScope(this.event, this.eventRemove);\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = createScope;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/utils/dom_event_scope.js\n// module id = 11\n// module chunks = 0","var __extends = require(\"../../../utils/extends\"),\r\n\tdomHelpers = require(\"../../../utils/dom_helpers\"),\r\n\tutils = require(\"../../../utils/utils\"),\r\n\tCell = require(\"./cell\");\r\n\r\nvar Layout = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(Layout, _super);\r\n\tfunction Layout(parent, config, factory) {\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\r\n\t\tif(parent)\r\n\t\t\t_this.$root = true;\r\n\r\n\t\t_this._parseConfig(config);\r\n\t\t_this.$name = \"layout\";\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tLayout.prototype.destructor = function () {\r\n\t\tif (this.$container && this.$view) {\r\n\t\t\tdomHelpers.removeNode(this.$view);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tvar child = this.$cells[i];\r\n\t\t\tchild.destructor();\r\n\t\t}\r\n\t\tthis.$cells = [];\r\n\r\n\t\t_super.prototype.destructor.call(this);\r\n\t};\r\n\r\n\tLayout.prototype._resizeScrollbars = function(autosize, scrollbars){\r\n\t\tvar scrollChanged = false;\r\n\t\tvar visibleScrollbars = [],\r\n\t\t\thiddenSrollbars = [];\r\n\r\n\t\tfunction showScrollbar(scrollbar){\r\n\t\t\tscrollbar.$parent.show();\r\n\t\t\tscrollChanged = true;\r\n\t\t\tvisibleScrollbars.push(scrollbar);\r\n\t\t}\r\n\t\tfunction hideScrollbar(scrollbar){\r\n\t\t\tscrollbar.$parent.hide();\r\n\t\t\tscrollChanged = true;\r\n\t\t\thiddenSrollbars.push(scrollbar);\r\n\t\t}\r\n\r\n\t\tvar scrollbar;\r\n\t\tfor(var i = 0; i < scrollbars.length; i++){\r\n\t\t\tscrollbar = scrollbars[i];\r\n\r\n\t\t\tif(autosize[scrollbar.$config.scroll]) {\r\n\t\t\t\thideScrollbar(scrollbar);\r\n\t\t\t}else if(scrollbar.shouldHide()){\r\n\t\t\t\thideScrollbar(scrollbar);\r\n\t\t\t}else if(scrollbar.shouldShow()){\r\n\t\t\t\tshowScrollbar(scrollbar);\r\n\t\t\t}else{\r\n\t\t\t\tif(scrollbar.isVisible()){\r\n\t\t\t\t\tvisibleScrollbars.push(scrollbar);\r\n\t\t\t\t}else{\r\n\t\t\t\t\thiddenSrollbars.push(scrollbar);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar visibleGroups = {};\r\n\t\tfor(var i = 0; i < visibleScrollbars.length; i++){\r\n\t\t\tif(visibleScrollbars[i].$config.group){\r\n\t\t\t\tvisibleGroups[visibleScrollbars[i].$config.group] = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor(var i = 0; i < hiddenSrollbars.length; i++){\r\n\t\t\tscrollbar = hiddenSrollbars[i];\r\n\r\n\t\t\tif(scrollbar.$config.group && visibleGroups[scrollbar.$config.group]){\r\n\t\t\t\tshowScrollbar(scrollbar);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn scrollChanged;\r\n\t};\r\n\r\n\tLayout.prototype._syncCellSizes = function(groupName, newSize){\r\n\t\tif(!groupName)\r\n\t\t\treturn;\r\n\r\n\t\tvar groups = {};\r\n\r\n\t\tthis._eachChild(function(cell){\r\n\t\t\tif(cell.$config.group && cell.$name != \"scrollbar\" && cell.$name != \"resizer\"){\r\n\t\t\t\tif(!groups[cell.$config.group]){\r\n\t\t\t\t\tgroups[cell.$config.group] = [];\r\n\t\t\t\t}\r\n\t\t\t\tgroups[cell.$config.group].push(cell);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(groups[groupName]){\r\n\t\t\tthis._syncGroupSize(groups[groupName], newSize);\r\n\t\t}\r\n\t\treturn groups[groupName];\r\n\t};\r\n\r\n\tLayout.prototype._syncGroupSize = function(cells, newSize){\r\n\t\tif(!cells.length) return;\r\n\r\n\t\tvar property = cells[0].$parent._xLayout ? \"width\" : \"height\";\r\n\t\tvar direction = cells[0].$parent.getNextSibling(cells[0].$id) ? 1 : -1;\r\n\r\n\t\tfor(var i = 0; i < cells.length; i++){\r\n\t\t\tvar ownSize = cells[i].getSize();\r\n\r\n\t\t\tvar resizeSibling = direction > 0 ? cells[i].$parent.getNextSibling(cells[i].$id) : cells[i].$parent.getPrevSibling(cells[i].$id);\r\n\t\t\tif(resizeSibling.$name == \"resizer\"){\r\n\t\t\t\tresizeSibling = direction > 0 ? resizeSibling.$parent.getNextSibling(resizeSibling.$id) : resizeSibling.$parent.getPrevSibling(resizeSibling.$id);\r\n\t\t\t}\r\n\t\t\tvar siblingSize = resizeSibling.getSize();\r\n\r\n\t\t\tif(resizeSibling[property]){\r\n\t\t\t\tvar totalGravity = ownSize.gravity + siblingSize.gravity;\r\n\t\t\t\tvar totalSize = ownSize[property] + siblingSize[property];\r\n\t\t\t\tvar k = totalGravity / totalSize;\r\n\t\t\t\tcells[i].$config.gravity = k * newSize;\r\n\r\n\t\t\t\tresizeSibling.$config[property] = totalSize - newSize;\r\n\t\t\t\tresizeSibling.$config.gravity = totalGravity - k * newSize;\r\n\t\t\t}else{\r\n\r\n\r\n\t\t\t\tcells[i].$config[property] = newSize;\r\n\t\t\t}\r\n\r\n\t\t\tvar mainGrid = this.$gantt.$ui.getView(\"grid\");\r\n\t\t\tif(mainGrid && cells[i].$content === mainGrid && !mainGrid.$config.scrollable){\r\n\t\t\t\tthis.$gantt.config.grid_width = newSize;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.resize = function(startStage){\r\n\t\tvar mainCall = false;\r\n\t\tif(this.$root && !this._resizeInProgress){\r\n\t\t\tthis.callEvent(\"onBeforeResize\", []);\r\n\t\t\tmainCall = true;\r\n\t\t\tthis._resizeInProgress = true;\r\n\t\t}\r\n\r\n\t\t_super.prototype.resize.call(this, true);\r\n\t\t_super.prototype.resize.call(this, false);\r\n\r\n\t\tif(mainCall){\r\n\r\n\t\t\tvar contentViews = [];\r\n\t\t\tcontentViews = contentViews.concat(this.getCellsByType(\"viewCell\"));\r\n\t\t\tcontentViews = contentViews.concat(this.getCellsByType(\"viewLayout\"));\r\n\t\t\tcontentViews = contentViews.concat(this.getCellsByType(\"hostCell\"));\r\n\r\n\t\t\tvar scrollbars = this.getCellsByType(\"scroller\");\r\n\r\n\t\t\tfor(var i = 0; i < contentViews.length; i++){\r\n\t\t\t\tif(!contentViews[i].$config.hidden)\r\n\t\t\t\t\tcontentViews[i].setContentSize();\r\n\t\t\t}\r\n\r\n\t\t\tvar autosize = this._getAutosizeMode(this.$config.autosize);\r\n\r\n\t\t\tvar scrollChanged = this._resizeScrollbars(autosize, scrollbars);\r\n\r\n\t\t\tif(this.$config.autosize){\r\n\t\t\t\tthis.autosize(this.$config.autosize);\r\n\t\t\t\tscrollChanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif(scrollChanged){\r\n\t\t\t\tthis.resize();\r\n\t\t\t\tfor(var i = 0; i < contentViews.length; i++){\r\n\t\t\t\t\tif(!contentViews[i].$config.hidden)\r\n\t\t\t\t\t\tcontentViews[i].setContentSize();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.callEvent(\"onResize\", []);\r\n\t\t}\r\n\t\tif(mainCall){\r\n\t\t\tthis._resizeInProgress = false;\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype._eachChild = function(code, cell){\r\n\t\tcell = cell || this;\r\n\t\tcode(cell);\r\n\t\tif(cell.$cells){\r\n\t\t\tfor(var i = 0; i < cell.$cells.length; i++){\r\n\t\t\t\tthis._eachChild(code, cell.$cells[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.isChild = function(view){\r\n\t\tvar res = false;\r\n\t\tthis._eachChild(function(child){\r\n\t\t\tif(child === view || child.$content === view){\r\n\t\t\t\tres = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn res;\r\n\t};\r\n\r\n\tLayout.prototype.getCellsByType = function(type){\r\n\t\tvar res = [];\r\n\t\tif(type === this.$name){\r\n\t\t\tres.push(this);\r\n\t\t}\r\n\r\n\t\tif(this.$content && this.$content.$name == type){\r\n\t\t\tres.push(this.$content);\r\n\t\t}\r\n\r\n\t\tif(this.$cells){\r\n\t\t\tfor(var i = 0; i < this.$cells.length; i++){\r\n\t\t\t\tvar children = Layout.prototype.getCellsByType.call(this.$cells[i], type);\r\n\t\t\t\tif(children.length){\r\n\t\t\t\t\tres.push.apply(res, children);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\tLayout.prototype.getNextSibling = function(cellId){\r\n\t\tvar index = this.cellIndex(cellId);\r\n\t\tif(index >= 0 && this.$cells[index + 1]){\r\n\t\t\treturn this.$cells[index + 1];\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.getPrevSibling = function(cellId){\r\n\t\tvar index = this.cellIndex(cellId);\r\n\t\tif(index >= 0 && this.$cells[index - 1]){\r\n\t\t\treturn this.$cells[index - 1];\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tLayout.prototype.cell = function (id) {\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tvar child = this.$cells[i];\r\n\t\t\tif (child.$id === id) {\r\n\t\t\t\treturn child;\r\n\t\t\t}\r\n\t\t\tvar sub = child.cell(id);\r\n\t\t\tif (sub) {\r\n\t\t\t\treturn sub;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.cellIndex = function (id) {\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tif (this.$cells[i].$id === id) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t};\r\n\tLayout.prototype.moveView = function (view, ind) {\r\n\t\tif (this.$cells[ind] !== view) {\r\n\t\t\treturn window.alert(\"Not implemented\");\r\n\t\t}\r\n\t\telse {\r\n\t\t\tind += this.$config.header ? 1 : 0;\r\n\t\t\tvar node = this.$view;\r\n\t\t\tif (ind >= node.childNodes.length) {\r\n\t\t\t\tnode.appendChild(view.$view);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tnode.insertBefore(view.$view, node.childNodes[ind]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype._parseConfig = function (config) {\r\n\t\tthis.$cells = [];\r\n\t\tthis._xLayout = !config.rows;\r\n\t\tvar cells = config.rows || config.cols || config.views;\r\n\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\tvar cell = cells[i];\r\n\t\t\tcell.mode = this._xLayout ? \"x\" : \"y\";\r\n\t\t\tvar $content = this.$factory.initUI(cell, this);\r\n\t\t\tif(!$content){\r\n\t\t\t\tcells.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}else{\r\n\t\t\t\t$content.$parent = this;\r\n\t\t\t\tthis.$cells.push($content);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.getCells = function () {\r\n\t\treturn this.$cells;\r\n\t};\r\n\tLayout.prototype.render = function () {\r\n\t\tvar view = domHelpers.insertNode(this.$container, this.$toHTML());\r\n\t\tthis.$fill(view, null);\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\tthis.resize();\r\n\r\n\t\t// do simple repaint after the first call\r\n\t\tthis.render = this.resize;\r\n\t};\r\n\tLayout.prototype.$fill = function (node, parent) {\r\n\t\tthis.$view = node;\r\n\t\tthis.$parent = parent;\r\n\t\tvar cells = domHelpers.getChildNodes(node, \"gantt_layout_cell\");\r\n\t\tfor (var i = cells.length - 1; i >= 0; i--) {\r\n\t\t\tvar sub = this.$cells[i];\r\n\t\t\tsub.$fill(cells[i], this);\r\n\t\t\t// initially hidden cell\r\n\t\t\tif (sub.$config.hidden) {\r\n\t\t\t\tsub.$view.parentNode.removeChild(sub.$view);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.$toHTML = function () {\r\n\t\tvar mode = this._xLayout ? \"x\" : \"y\";\r\n\t\tvar html = [];\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\thtml.push(this.$cells[i].$toHTML());\r\n\t\t}\r\n\t\treturn _super.prototype.$toHTML.call(this, html.join(\"\"), (this.$root ? \"gantt_layout_root \" : \"\") + \"gantt_layout gantt_layout_\" + mode);\r\n\t};\r\n\r\n\tLayout.prototype.getContentSize = function(mode){\r\n\t\tvar contentWidth = 0,\r\n\t\t\tcontentHeight = 0;\r\n\r\n\t\tvar cellSize, cell, borders;\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\t\t\tif(cell.$config.hidden)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tcellSize = cell.getContentSize(mode);\r\n\r\n\t\t\tif(cell.$config.view === \"scrollbar\" && mode[cell.$config.scroll]){\r\n\t\t\t\tcellSize.height = 0;\r\n\t\t\t\tcellSize.width = 0;\r\n\t\t\t}\r\n\r\n\t\t\tif(cell.$config.resizer){\r\n\t\t\t\tif(this._xLayout){\r\n\t\t\t\t\tcellSize.height = 0;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcellSize.width = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tborders = cell._getBorderSizes();\r\n\r\n\t\t\tif(this._xLayout){\r\n\t\t\t\tcontentWidth += (cellSize.width + borders.horizontal);\r\n\t\t\t\tcontentHeight = Math.max(contentHeight, (cellSize.height + borders.vertical));\r\n\t\t\t}else{\r\n\t\t\t\tcontentWidth = Math.max(contentWidth, cellSize.width + borders.horizontal);\r\n\t\t\t\tcontentHeight += cellSize.height + borders.vertical;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tborders = this._getBorderSizes();\r\n\t\tcontentWidth += borders.horizontal;\r\n\t\tcontentHeight += borders.vertical;\r\n\r\n\t\tif(this.$root){\r\n\t\t\tcontentWidth += 1;\r\n\t\t\tcontentHeight += 1;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\twidth: contentWidth,\r\n\t\t\theight: contentHeight\r\n\t\t};\r\n\t};\r\n\r\n\tLayout.prototype._cleanElSize = function(value){\r\n\t\treturn ((value || \"\").toString().replace(\"px\", \"\") * 1 || 0);\r\n\t};\r\n\tLayout.prototype._getBoxStyles = function(div){\r\n\t\tvar computed = null;\r\n\t\tif(window.getComputedStyle){\r\n\t\t\tcomputed = window.getComputedStyle(div, null);\r\n\t\t}else{\r\n\t\t\t//IE with elem.currentStyle does not calculate sizes from %, so will use the default approach\r\n\t\t\tcomputed = {\r\n\t\t\t\t\"width\":div.clientWidth,\r\n\t\t\t\t\"height\":div.clientHeight\r\n\t\t\t};\r\n\t\t}\r\n\t\tvar properties = [\r\n\t\t\t\"width\",\r\n\t\t\t\"height\",\r\n\r\n\t\t\t\"paddingTop\",\r\n\t\t\t\"paddingBottom\",\r\n\t\t\t\"paddingLeft\",\r\n\t\t\t\"paddingRight\",\r\n\r\n\t\t\t\"borderLeftWidth\",\r\n\t\t\t\"borderRightWidth\",\r\n\t\t\t\"borderTopWidth\",\r\n\t\t\t\"borderBottomWidth\"\r\n\t\t];\r\n\t\tvar styles = {\r\n\t\t\tboxSizing:(computed.boxSizing == \"border-box\")\r\n\t\t};\r\n\r\n\t\tif(computed.MozBoxSizing){\r\n\t\t\tstyles.boxSizing = (computed.MozBoxSizing == \"border-box\");\r\n\t\t}\r\n\t\tfor(var i =0; i < properties.length; i++){\r\n\t\t\tstyles[properties[i]] = computed[properties[i]] ? this._cleanElSize(computed[properties[i]]) : 0;\r\n\t\t}\r\n\r\n\r\n\t\tvar box = {\r\n\t\t\thorPaddings : (styles.paddingLeft + styles.paddingRight + styles.borderLeftWidth + styles.borderRightWidth),\r\n\t\t\tvertPaddings : (styles.paddingTop + styles.paddingBottom + styles.borderTopWidth + styles.borderBottomWidth),\r\n\t\t\tborderBox: styles.boxSizing,\r\n\t\t\tinnerWidth : styles.width,\r\n\t\t\tinnerHeight : styles.height,\r\n\t\t\touterWidth : styles.width,\r\n\t\t\touterHeight : styles.height\r\n\t\t};\r\n\r\n\r\n\t\tif(box.borderBox){\r\n\t\t\tbox.innerWidth -= box.horPaddings;\r\n\t\t\tbox.innerHeight -= box.vertPaddings;\r\n\t\t}else{\r\n\t\t\tbox.outerWidth += box.horPaddings;\r\n\t\t\tbox.outerHeight += box.vertPaddings;\r\n\t\t}\r\n\r\n\t\treturn box;\r\n\t};\r\n\r\n\tLayout.prototype._getAutosizeMode = function(config){\r\n\t\tvar res = {x:false, y:false};\r\n\t\tif(config === \"xy\"){\r\n\t\t\tres.x = res.y = true;\r\n\t\t}else if(config === \"y\" || config === true){\r\n\t\t\tres.y = true;\r\n\t\t}else if(config === \"x\"){\r\n\t\t\tres.x = true;\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\tLayout.prototype.autosize = function(mode) {\r\n\t\tvar res = this._getAutosizeMode(mode);\r\n\t\tvar boxSizes = this._getBoxStyles(this.$container);\r\n\t\tvar contentSizes = this.getContentSize(mode);\r\n\r\n\t\tvar node = this.$container;\r\n\t\tif(res.x){\r\n\t\t\tif(boxSizes.borderBox){\r\n\t\t\t\tcontentSizes.width += boxSizes.horPaddings;\r\n\t\t\t}\r\n\t\t\tnode.style.width = contentSizes.width + \"px\";\r\n\t\t}\r\n\t\tif(res.y){\r\n\t\t\tif(boxSizes.borderBox){\r\n\t\t\t\tcontentSizes.height += boxSizes.vertPaddings;\r\n\t\t\t}\r\n\t\t\tnode.style.height = contentSizes.height + \"px\";\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.getSize = function () {\r\n\t\tthis._sizes = [];\r\n\t\tvar width = 0;\r\n\t\tvar minWidth = 0;\r\n\t\tvar maxWidth = 100000;\r\n\t\tvar height = 0;\r\n\t\tvar maxHeight = 100000;\r\n\t\tvar minHeight = 0;\r\n\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\r\n\t\t\tvar size = this._sizes[i] = this.$cells[i].getSize();\r\n\t\t\tif (this.$cells[i].$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tif (!size.width && size.minWidth) {\r\n\t\t\t\t\twidth += size.minWidth;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\twidth += size.width;\r\n\t\t\t\t}\r\n\t\t\t\tmaxWidth += size.maxWidth;\r\n\t\t\t\tminWidth += size.minWidth;\r\n\t\t\t\theight = Math.max(height, size.height);\r\n\t\t\t\tmaxHeight = Math.min(maxHeight, size.maxHeight); // min of maxHeight\r\n\t\t\t\tminHeight = Math.max(minHeight, size.minHeight); // max of minHeight\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (!size.height && size.minHeight) {\r\n\t\t\t\t\theight += size.minHeight;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\theight += size.height;\r\n\t\t\t\t}\r\n\t\t\t\tmaxHeight += size.maxHeight;\r\n\t\t\t\tminHeight += size.minHeight;\r\n\t\t\t\twidth = Math.max(width, size.width);\r\n\t\t\t\tmaxWidth = Math.min(maxWidth, size.maxWidth); // min of maxWidth\r\n\t\t\t\tminWidth = Math.max(minWidth, size.minWidth); // max of minWidth\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar self = _super.prototype.getSize.call(this);\r\n\t\t// maxWidth\r\n\t\tif (self.maxWidth >= 100000) {\r\n\t\t\tself.maxWidth = maxWidth;\r\n\t\t}\r\n\t\t// maxHeight\r\n\t\tif (self.maxHeight >= 100000) {\r\n\t\t\tself.maxHeight = maxHeight;\r\n\t\t}\r\n\t\t// minWidth\r\n\t\tself.minWidth = self.minWidth !== self.minWidth ? 0 : self.minWidth;// || self.width || Math.max(minWidth, width);\r\n\t\t// minHeight\r\n\t\tself.minHeight = self.minHeight !== self.minHeight ? 0 : self.minHeight;//self.minHeight || self.height || Math.max(minHeight, height);\r\n\t\t// sizes with paddings and margins\r\n\t\tif (this._xLayout) {\r\n\t\t\tself.minWidth += this.$config.margin * (this.$cells.length) || 0;\r\n\t\t\tself.minWidth += this.$config.padding * 2 || 0;\r\n\t\t\tself.minHeight += (this.$config.padding * 2) || 0;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tself.minHeight += this.$config.margin * (this.$cells.length) || 0;\r\n\t\t\tself.minHeight += (this.$config.padding * 2) || 0;\r\n\t\t}\r\n\t\t\r\n\t\treturn self;\r\n\t};\r\n\t// calc total gravity and free space\r\n\tLayout.prototype._calcFreeSpace = function (s, cell, xLayout) {\r\n\t\tvar min = xLayout ? cell.minWidth : cell.minHeight;\r\n\t\tvar max = xLayout ? cell.maxWidth : cell.maxWidth;\r\n\t\tvar side = s;\r\n\t\tif (!side) {\r\n\t\t\tside = Math.floor(this._free / this._gravity * cell.gravity);\r\n\t\t\tif (side > max) {\r\n\t\t\t\tside = max;\r\n\t\t\t\tthis._free -= side;\r\n\t\t\t\tthis._gravity -= cell.gravity;\r\n\t\t\t}\r\n\t\t\tif (side < min) {\r\n\t\t\t\tside = min;\r\n\t\t\t\tthis._free -= side;\r\n\t\t\t\tthis._gravity -= cell.gravity;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (side > max) {\r\n\t\t\t\tside = max;\r\n\t\t\t}\r\n\t\t\tif (side < min) {\r\n\t\t\t\tside = min;\r\n\t\t\t}\r\n\t\t\tthis._free -= side;\r\n\t\t}\r\n\t\treturn side;\r\n\t};\r\n\tLayout.prototype._calcSize = function (s, size, xLayout) {\r\n\t\tvar side = s;\r\n\t\tvar min = xLayout ? size.minWidth : size.minHeight;\r\n\t\tvar max = xLayout ? size.maxWidth : size.maxHeight;\r\n\t\tif (!side) {\r\n\t\t\tside = Math.floor(this._free / this._gravity * size.gravity);\r\n\t\t}\r\n\t\tif (side > max) {\r\n\t\t\tside = max;\r\n\t\t}\r\n\t\tif (side < min) {\r\n\t\t\tside = min;\r\n\t\t}\r\n\t\treturn side;\r\n\t};\r\n\r\n\tLayout.prototype._configureBorders = function(){\r\n\t\tif(this.$root){\r\n\t\t\tthis._setBorders([\r\n\t\t\t\tthis._borders.left,\r\n\t\t\t\tthis._borders.top,\r\n\t\t\t\tthis._borders.right,\r\n\t\t\t\tthis._borders.bottom\r\n\t\t\t],\r\n\t\t\tthis);\r\n\t\t}\r\n\r\n\t\tvar borderClass = this._xLayout ? this._borders.right : this._borders.bottom;\r\n\r\n\t\tvar cells = this.$cells;\r\n\r\n\t\tvar lastVisibleIndex = cells.length - 1;\r\n\t\tfor(var i = lastVisibleIndex; i >= 0; i--){\r\n\t\t\tif (!cells[i].$config.hidden) {\r\n\t\t\t\tlastVisibleIndex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\tif (cells[i].$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tvar lastCell = i >= lastVisibleIndex;\r\n\t\t\tvar borderColorClass = \"\";\r\n\t\t\tif(!lastCell && cells[i + 1]){\r\n\t\t\t\tif(cells[i + 1].$config.view == \"scrollbar\"){\r\n\t\t\t\t\tif(this._xLayout){\r\n\t\t\t\t\t\tlastCell = true;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tborderColorClass = \"gantt_layout_cell_border_transparent\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tthis._setBorders(lastCell ? [] : [borderClass, borderColorClass], cells[i]);\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype._updateCellVisibility = function(){\r\n\t\tvar oldVisibleCells = this._visibleCells || {};\r\n\t\tvar firstCall = !this._visibleCells;\r\n\t\tvar visibleCells = {};\r\n\t\tvar cell;\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (!firstCall && cell.$config.hidden && oldVisibleCells[cell.$id]) {\r\n\t\t\t\tcell._hide(true);\r\n\t\t\t}else if(!cell.$config.hidden && !oldVisibleCells[cell.$id]){\r\n\t\t\t\tcell._hide(false);\r\n\t\t\t}\r\n\r\n\t\t\tif(!cell.$config.hidden){\r\n\t\t\t\tvisibleCells[cell.$id] = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._visibleCells = visibleCells;\r\n\t};\r\n\r\n\tLayout.prototype.setSize = function (x, y) {\r\n\t\tthis._configureBorders();\r\n\t\t_super.prototype.setSize.call(this, x, y);\r\n\t\ty = this.$lastSize.contentY;\r\n\t\tx = this.$lastSize.contentX;\r\n\r\n\t\tvar padding = (this.$config.padding || 0);\r\n\t\tthis.$view.style.padding = padding + \"px\";\r\n\t\tthis._gravity = 0;\r\n\t\tthis._free = this._xLayout ? x : y;\r\n\t\tthis._free -= padding * 2;\r\n\t\t// calc all gravity\r\n\r\n\t\tvar cell,\r\n\t\t\tsize;\r\n\r\n\t\tthis._updateCellVisibility();\r\n\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tvar margin = (this.$config.margin || 0);\r\n\t\t\tif(cell.$name == \"resizer\" && !margin){\r\n\t\t\t\tmargin = -1;\r\n\t\t\t}\r\n\r\n\t\t\t// set margins to child cell\r\n\t\t\tvar cellView = cell.$view;\r\n\r\n\t\t\tvar marginSide = this._xLayout ? \"marginRight\" : \"marginBottom\";\r\n\t\t\tif (i !== this.$cells.length - 1) {\r\n\t\t\t\tcellView.style[marginSide] = margin + \"px\";\r\n\t\t\t\tthis._free -= margin; // calc free space without margin\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tif (!size.width) {\r\n\t\t\t\t\tthis._gravity += size.gravity;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (!size.height) {\r\n\t\t\t\t\tthis._gravity += size.gravity;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tvar width = size.width;\r\n\t\t\tvar height = size.height;\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tthis._calcFreeSpace(width, size, true);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._calcFreeSpace(height, size, false);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tvar dx = void 0;\r\n\t\t\tvar dy = void 0;\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tdx = this._calcSize(size.width, size, true);\r\n\t\t\t\tdy = y - padding * 2; // layout height without paddings\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tdx = x - padding * 2; // layout width without paddings\r\n\t\t\t\tdy = this._calcSize(size.height, size, false);\r\n\t\t\t}\r\n\r\n\t\t\tcell.setSize(dx, dy);\r\n\t\t}\r\n\r\n\t};\r\n\r\n\treturn Layout;\r\n}(Cell));\r\n\r\nmodule.exports = Layout;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/layout/layout.js\n// module id = 12\n// module chunks = 0","var ScaleHelper = require(\"./scales_ignore\");\r\nvar eventable = require(\"../../../utils/eventable\");\r\nvar utils = require(\"../../../utils/utils\");\r\n\r\nvar canvasRender = require(\"./tasks_canvas_render\");\r\n\r\nvar Timeline = function(parent, config, factory, gantt){\r\n\tthis.$config = utils.mixin({}, config || {});\r\n\tthis.$scaleHelper = new ScaleHelper(gantt);\r\n\tthis.$gantt = gantt;\r\n\teventable(this);\r\n};\r\n\r\nTimeline.prototype = {\r\n\tinit: function(container){\r\n\t\tcontainer.innerHTML += \"<div class='gantt_task' style='width:inherit;height:inherit;'></div>\";\r\n\t\tthis.$task = container.childNodes[0];\r\n\r\n\t\tthis.$task.innerHTML = \"<div class='gantt_task_scale'></div><div class='gantt_data_area'></div>\";\r\n\t\tthis.$task_scale = this.$task.childNodes[0];\r\n\r\n\t\tthis.$task_data = this.$task.childNodes[1];\r\n\t\tthis.$task_data.innerHTML = \"<div class='gantt_task_bg'></div><div class='gantt_links_area'></div><div class='gantt_bars_area'></div>\";\r\n\t\tthis.$task_bg = this.$task_data.childNodes[0];\r\n\t\tthis.$task_links = this.$task_data.childNodes[1];\r\n\t\tthis.$task_bars = this.$task_data.childNodes[2];\r\n\r\n\t\tthis._tasks = {\r\n\t\t\tcol_width: 0,\r\n\t\t\twidth: [], // width of each column\r\n\t\t\tfull_width: 0, // width of all columns\r\n\t\t\ttrace_x: [],\r\n\t\t\trendered: {}\r\n\t\t};\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar attr = config[this.$config.bind + \"_attribute\"];\r\n\t\tvar linksAttr = config[this.$config.bindLinks + \"_attribute\"];\r\n\t\tif(!attr && this.$config.bind){\r\n\t\t\tattr = this.$config.bind + \"_id\";\r\n\t\t}\r\n\t\tif(!linksAttr && this.$config.bindLinks){\r\n\t\t\tlinksAttr = this.$config.bindLinks + \"_id\";\r\n\t\t}\r\n\t\tthis.$config.item_attribute = attr || null;\r\n\t\tthis.$config.link_attribute = linksAttr || null;\r\n\r\n\t\tvar layers = this._createLayerConfig();\r\n\t\tif(!this.$config.layers){\r\n\t\t\tthis.$config.layers = layers.tasks;\r\n\t\t}\r\n\t\tif(!this.$config.linkLayers){\r\n\t\t\tthis.$config.linkLayers = layers.links;\r\n\t\t}\r\n\r\n\t\tthis._attachLayers(this.$gantt);\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\t//this.refresh();\r\n\t},\r\n\r\n\tsetSize: function(width, height){\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tif(width*1 === width){\r\n\t\t\tthis.$config.width = width;\r\n\t\t}\r\n\t\tif(height*1 === height){\r\n\r\n\t\t\tthis.$config.height = height;\r\n\t\t\tvar dataHeight = Math.max(this.$config.height - config.scale_height);\r\n\t\t\tthis.$task_data.style.height = dataHeight + 'px';\r\n\t\t}\r\n\r\n\t\tthis.refresh();\r\n\t\tthis.$task_bg.style.backgroundImage = \"\";\r\n\r\n\t\tif(config.smart_rendering && this.$config.rowStore){\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tthis.$task_bg.style.height = config.row_height * store.countVisible() +\"px\";\r\n\t\t}else{\r\n\t\t\tthis.$task_bg.style.height = \"\";\r\n\t\t}\r\n\r\n\t\tvar scale = this._tasks;\r\n\t\t//timeline area layers\r\n\t\tvar data_els = this.$task_data.childNodes;\r\n\t\tfor(var i= 0, len = data_els.length; i < len; i++){\r\n\t\t\tvar el = data_els[i];\r\n\t\t\tif(el.hasAttribute(\"data-layer\") && el.style)\r\n\t\t\t\tel.style.width = scale.full_width + \"px\";\r\n\t\t}\r\n\t},\r\n\r\n\tisVisible: function(){\r\n\t\tif(this.$parent && this.$parent.$config){\r\n\t\t\treturn !this.$parent.$config.hidden;\r\n\t\t}else{\r\n\t\t\treturn this.$task.offsetWidth;\r\n\t\t}\r\n\t},\r\n\r\n\tgetSize: function(){\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar store = this.$config.rowStore;\r\n\r\n\t\tvar contentHeight = store ? config.row_height * store.countVisible() : 0,\r\n\t\t\tcontentWidth = this._tasks.full_width;\r\n\r\n\t\treturn {\r\n\t\t\tx: this.$config.width,\r\n\t\t\ty: this.$config.height,\r\n\t\t\tcontentX: this.isVisible() ? contentWidth : 0,\r\n\t\t\tcontentY: this.isVisible() ? (config.scale_height + contentHeight) : 0,\r\n\t\t\tscrollHeight: this.isVisible() ? contentHeight : 0,\r\n\t\t\tscrollWidth: this.isVisible() ? contentWidth : 0\r\n\t\t};\r\n\t},\r\n\r\n\tscrollTo: function(left, top){\r\n\t\tif(!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tif(top*1 === top){\r\n\t\t\tthis.$config.scrollTop = top;\r\n\t\t\tthis.$task_data.scrollTop = this.$config.scrollTop;\r\n\t\t}\r\n\t\tif (left*1 === left){\r\n\t\t\tthis.$task.scrollLeft = left;\r\n\t\t\tthis.$config.scrollLeft = this.$task.scrollLeft;\r\n\t\t\tthis._refreshScales();\r\n\t\t}\r\n\t},\r\n\r\n\t_refreshScales: function _refreshScales() {\r\n\t\tif(!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tif (!config.smart_scales) return;\r\n\r\n\t\tvar x = this.$config.scrollLeft;\r\n\t\tvar width = this.$config.width;\r\n\r\n\t\tvar scales = this._scales;\r\n\t\tthis.$task_scale.innerHTML = this._getScaleChunkHtml(scales, x, x + width);\r\n\t},\r\n\t_createLayerConfig: function(){\r\n\t\tvar self = this;\r\n\t\tvar taskFilter = function(){\r\n\t\t\treturn self.isVisible();\r\n\t\t};\r\n\r\n\t\tvar taskLayers = [\r\n\t\t\t{\r\n\t\t\t\texpose: true,\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.taskBar,\r\n\t\t\t\tcontainer: this.$task_bars,\r\n\t\t\t\tfilter: [taskFilter]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.taskBg,\r\n\t\t\t\tcontainer: this.$task_bg,\r\n\t\t\t\tfilter: [\r\n\t\t\t\t\tfunction(){\r\n\t\t\t\t\t\treturn !self.$getConfig().static_background;\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttaskFilter\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\tvar linkLayers = [\r\n\t\t\t{\r\n\t\t\t\texpose: true,\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.link,\r\n\t\t\t\tcontainer: this.$task_links,\r\n\t\t\t\tfilter: [taskFilter]\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\treturn {\r\n\t\t\ttasks: taskLayers,\r\n\t\t\tlinks: linkLayers\r\n\t\t};\r\n\r\n\t},\r\n\r\n\t_attachLayers: function(gantt){\r\n\t\tthis._taskLayers = [];\r\n\t\tthis._linkLayers = [];\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\r\n\t\tif(this.$config.bind){\r\n\r\n\t\t\tself.$config.rowStore = self.$gantt.getDatastore(self.$config.bind);\r\n\r\n\t\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\t\tif(!taskRenderer){\r\n\t\t\t\ttaskRenderer = layers.createDataRender({\r\n\t\t\t\t\tname: this.$config.bind,\r\n\t\t\t\t\tdefaultContainer: function(){ return self.$task_data;}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\ttaskRenderer.container = function(){ return self.$task_data;};\r\n\r\n\t\t\tvar taskLayers = this.$config.layers;\r\n\t\t\tfor(var i = 0; taskLayers && i < taskLayers.length; i++){\r\n\t\t\t\tvar layer = taskLayers[i];\r\n\r\n\t\t\t\tif(typeof layer == \"string\"){\r\n\t\t\t\t\tlayer = this.$gantt.$ui.layers[layer];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(typeof layer == \"function\"){\r\n\t\t\t\t\tlayer = {renderer: layer};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlayer.host = this;\r\n\t\t\t\tvar bar_layer = taskRenderer.addLayer(layer);\r\n\t\t\t\tthis._taskLayers.push(bar_layer);\r\n\t\t\t\tif(layer.expose){\r\n\t\t\t\t\tthis._taskRenderer = taskRenderer.getLayer(bar_layer);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._initStaticBackgroundRender();\r\n\t\t}\r\n\r\n\t\tif(this.$config.bindLinks){\r\n\t\t\tself.$config.linkStore = self.$gantt.getDatastore(self.$config.bindLinks);\r\n\r\n\t\t\tvar linkRenderer = layers.getDataRender(this.$config.bindLinks);\r\n\r\n\t\t\tif(!linkRenderer){\r\n\t\t\t\tlinkRenderer = layers.createDataRender({\r\n\t\t\t\t\tname: this.$config.bindLinks,\r\n\t\t\t\t\tdefaultContainer: function(){ return self.$task_data;}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tvar linkLayers = this.$config.linkLayers;\r\n\t\t\tfor(var i = 0; linkLayers && i < linkLayers.length; i++){\r\n\r\n\t\t\t\tif(typeof layer == \"string\"){\r\n\t\t\t\t\tlayer = this.$gantt.$ui.layers[layer];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar layer = linkLayers[i];\r\n\t\t\t\tlayer.host = this;\r\n\t\t\t\tvar linkLayer = linkRenderer.addLayer(layer);\r\n\t\t\t\tthis._taskLayers.push(linkLayer);\r\n\t\t\t\tif(linkLayers[i].expose){\r\n\t\t\t\t\tthis._linkRenderer = linkRenderer.getLayer(linkLayer);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_initStaticBackgroundRender: function(){\r\n\t\tvar self = this;\r\n\t\tvar staticRender = canvasRender.create();\r\n\t\tvar store = self.$config.rowStore;\r\n\t\tif(!store) return;\r\n\r\n\t\tthis._staticBgHandler = store.attachEvent(\"onStoreUpdated\", function(id, item, mode){\r\n\t\t\tif(id !== null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!self.isVisible())\r\n\t\t\t\treturn;\r\n\t\t\tvar config = self.$getConfig();\r\n\t\t\tif(config.static_background) {\r\n\t\t\t\tvar store = self.$gantt.getDatastore(self.$config.bind);\r\n\t\t\t\tif (store) {\r\n\t\t\t\t\tstaticRender.render(self.$task_bg, config, self.getScale(), config.row_height * store.countVisible());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis._initStaticBackgroundRender = function(){};//init once\r\n\t},\r\n\r\n\t_clearLayers: function(gantt){\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\t\tvar linkRenderer = layers.getDataRender(this.$config.bindLinks);\r\n\r\n\t\tfor(var i = 0; i < this._taskLayers.length; i++){\r\n\t\t\ttaskRenderer.removeLayer(this._taskLayers[i]);\r\n\t\t}\r\n\t\tfor(var i = 0; i < this._linkLayers.length; i++){\r\n\t\t\tlinkRenderer.removeLayer(this._linkLayers[i]);\r\n\t\t}\r\n\r\n\t\tthis._linkLayers = [];\r\n\t\tthis._taskLayers = [];\r\n\t},\r\n\r\n\t_render_tasks_scales: function _render_tasks_scales() {\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tvar scales_html = \"\",\r\n\t\t\touter_width = 0,\r\n\t\t\tscale_height = 0;\r\n\r\n\t\tvar state = this.$gantt.getState();\r\n\r\n\t\tif (this.isVisible()) {\r\n\t\t\tvar helpers = this.$scaleHelper;\r\n\t\t\tvar scales = this._getScales();\r\n\t\t\tscale_height = config.scale_height;\r\n\r\n\t\t\tvar availWidth = this.$config.width;\r\n\t\t\tif(config.autosize == \"x\" || config.autosize == \"xy\"){\r\n\t\t\t\tavailWidth = Math.max(config.autosize_min_width, 0);\r\n\t\t\t}\r\n\r\n\t\t\tvar cfgs = helpers.prepareConfigs(scales, config.min_column_width, availWidth, scale_height - 1, state.min_date, state.max_date, config.rtl);\r\n\t\t\tvar cfg = this._tasks = cfgs[cfgs.length - 1];\r\n\t\t\tthis._scales = cfgs;\r\n\r\n\t\t\tscales_html = this._getScaleChunkHtml(cfgs, 0, this.$config.width);\r\n\r\n\t\t\touter_width = cfg.full_width + \"px\";//cfg.full_width + (this._scroll_sizes().y ? scrollSizes.scroll_size : 0) + \"px\";\r\n\t\t\tscale_height += \"px\";\r\n\t\t}\r\n\r\n\t\tthis.$task_scale.style.height = scale_height;\r\n\r\n\t\tthis.$task_data.style.width =\r\n\t\t\tthis.$task_scale.style.width = outer_width;\r\n\r\n\t\tthis.$task_scale.innerHTML = scales_html;\r\n\r\n\t},\r\n\r\n\t_getScaleChunkHtml: function _get_scale_chunk_html (scales, fromPos, toPos) {\r\n\t\tvar templates = this.$gantt.$services.templates();\r\n\t\tvar html = [];\r\n\r\n\t\tvar css = templates.scale_row_class;\r\n\t\tfor (var i = 0; i < scales.length; i++) {\r\n\t\t\tvar cssClass = \"gantt_scale_line\";\r\n\t\t\tvar tplClass = css(scales[i]);\r\n\t\t\tif (tplClass) {\r\n\t\t\t\tcssClass += \" \" + tplClass;\r\n\t\t\t}\r\n\r\n\t\t\thtml.push(\"<div class=\\\"\" + cssClass + \"\\\" style=\\\"height:\" + (scales[i].height) +\r\n\t\t\t\t\"px;position:relative;line-height:\" + (scales[i].height) + \"px\\\">\" + this._prepareScaleHtml(scales[i], fromPos, toPos) + \"</div>\");\r\n\t\t}\r\n\r\n\t\treturn html.join(\"\");\r\n\t},\r\n\t_prepareScaleHtml: function _prepare_scale_html(config, fromPos, toPos) {\r\n\t\tvar globalConfig = this.$getConfig();\r\n\t\tvar globalTemplates = this.$gantt.$services.templates();\r\n\r\n\t\tvar cells = [];\r\n\t\tvar date = null, content = null, css = null;\r\n\r\n\t\tif (config.template || config.date) {\r\n\t\t\tcontent = config.template || this.$gantt.date.date_to_str(config.date);\r\n\t\t}\r\n\r\n\t\tvar startIndex = 0,\r\n\t\t\tendIndex = config.count;\r\n\r\n\t\tif (globalConfig.smart_scales && (!isNaN(fromPos) && !isNaN(toPos))) {\r\n\t\t\tstartIndex = _findBinary(config.left, fromPos);\r\n\t\t\tendIndex = _findBinary(config.left, toPos) + 1;\r\n\t\t}\r\n\r\n\t\tcss = config.css || function () {\r\n\t\t\t};\r\n\t\tif (!config.css && globalConfig.inherit_scale_class) {\r\n\t\t\tcss = globalTemplates.scale_cell_class;\r\n\t\t}\r\n\r\n\t\tfor (var i = startIndex; i < endIndex; i++) {\r\n\t\t\tif (!config.trace_x[i]) break;\r\n\r\n\t\t\tdate = new Date(config.trace_x[i]);\r\n\t\t\tvar value = content.call(this, date),\r\n\t\t\t\twidth = config.width[i],\r\n\t\t\t\theight = config.height,\r\n\t\t\t\tleft = config.left[i],\r\n\t\t\t\tstyle = \"\",\r\n\t\t\t\ttemplate = \"\",\r\n\t\t\t\tcssclass = \"\";\r\n\r\n\t\t\tif (width) {\r\n\t\t\t\tvar position = globalConfig.smart_scales ? (\"position:absolute;left:\" + left + \"px\") : \"\";\r\n\r\n\t\t\t\tstyle = \"width:\" + (width) + \"px;height:\" + height + \"px;\" + position;\r\n\t\t\t\tcssclass = \"gantt_scale_cell\" + (i == config.count - 1 ? \" gantt_last_cell\" : \"\");\r\n\r\n\t\t\t\ttemplate = css.call(this, date);\r\n\t\t\t\tif (template) cssclass += \" \" + template;\r\n\r\n\t\t\t\tvar ariaAttr = this.$gantt._waiAria.getTimelineCellAttr(value);\r\n\t\t\t\tvar cell = \"<div class='\" + cssclass + \"'\" + ariaAttr + \" style='\" + style + \"'>\" + value + \"</div>\";\r\n\t\t\t\tcells.push(cell);\r\n\t\t\t} else {\r\n\t\t\t\t//do not render ignored cells\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn cells.join(\"\");\r\n\t},\r\n\tdateFromPos: function dateFromPos(x) {\r\n\t\tvar scale = this._tasks;\r\n\t\tif (x < 0 || x > scale.full_width || !scale.full_width) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tvar ind = _findBinary(this._tasks.left, x);\r\n\t\tvar summ = this._tasks.left[ind];\r\n\r\n\t\tvar col_width = scale.width[ind] || scale.col_width;\r\n\t\tvar part = 0;\r\n\t\tif (col_width) {\r\n\t\t\tpart = (x - summ) / col_width;\r\n\t\t\tif(scale.rtl){\r\n\t\t\t\tpart = 1 - part;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar unit = 0;\r\n\t\tif (part) {\r\n\t\t\tunit = this._getColumnDuration(scale, scale.trace_x[ind]);\r\n\t\t}\r\n\r\n\t\tvar date = new Date(scale.trace_x[ind].valueOf() + Math.round(part * unit));\r\n\t\treturn date;\r\n\t},\r\n\tposFromDate: function posFromDate(date) {\r\n\t\tif (!this.isVisible())\r\n\t\t\treturn 0;\r\n\r\n\t\tvar ind = this.columnIndexByDate(date);\r\n\t\tthis.$gantt.assert(ind >= 0, \"Invalid day index\");\r\n\r\n\t\tvar wholeCells = Math.floor(ind);\r\n\t\tvar partCell = ind % 1;\r\n\r\n\t\tvar pos = this._tasks.left[Math.min(wholeCells, this._tasks.width.length - 1)];\r\n\t\tif (wholeCells == this._tasks.width.length)\r\n\t\t\tpos += this._tasks.width[this._tasks.width.length - 1];\r\n\t\t//for(var i=1; i <= wholeCells; i++)\r\n\t\t//\tpos += gantt._tasks.width[i-1];\r\n\r\n\t\tif (partCell) {\r\n\t\t\tif (wholeCells < this._tasks.width.length) {\r\n\t\t\t\tpos += this._tasks.width[wholeCells] * (partCell % 1);\r\n\t\t\t} else {\r\n\t\t\t\tpos += 1;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn Math.round(pos);\r\n\t},\r\n\tcolumnIndexByDate: function columnIndexByDate(date) {\r\n\t\tvar pos = new Date(date).valueOf();\r\n\t\tvar days = this._tasks.trace_x_ascending,\r\n\t\t\tignores = this._tasks.ignore_x;\r\n\r\n\t\tvar state = this.$gantt.getState();\r\n\r\n\t\tif (pos <= state.min_date) {\r\n\t\t\tif(this._tasks.rtl){\r\n\t\t\t\treturn days.length;\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif (pos >= state.max_date) {\r\n\t\t\tif(this._tasks.rtl){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn days.length;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*var day = null;\r\n\t\t for (var xind = 0, length = days.length-1; xind < length; xind++) {\r\n\t\t // | 8:00, 8:30 | 8:15 should be checked against 8:30\r\n\t\t // clicking at the most left part of the cell, say 8:30 should create event in that cell, not previous one\r\n\t\t day = +days[xind+1];\r\n\t\t if (pos < day && !ignores[day])\r\n\t\t break;\r\n\t\t }*/\r\n\r\n\t\tvar day_ind = _findBinary(days, pos);\r\n\t\tvar day = +days[day_ind];\r\n\t\twhile (ignores[day]) {\r\n\t\t\tday = +days[++day_ind];\r\n\t\t}\r\n\r\n\t\tvar transition = this._tasks.trace_index_transition;\r\n\t\tvar index = day_ind;\r\n\t\tif(!day){\r\n\t\t\tif(transition){\r\n\t\t\t\treturn transition[0];\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar part = ((date - days[day_ind]) / this._getColumnDuration(this._tasks, days[day_ind]));\r\n\t\tif(transition){\r\n\t\t\treturn transition[index] + (1 - part);\r\n\t\t}else{\r\n\t\t\treturn index + part;\r\n\t\t}\r\n\r\n\t\t//return day_ind + ((date - days[day_ind]) / this._getColumnDuration(this._tasks, days[day_ind]));\r\n\t},\r\n\tgetItemPosition:function (task, start_date, end_date) {\r\n\t\tvar xLeft, xRight, width;\r\n\t\tif(this._tasks.rtl){\r\n\t\t\txRight = this.posFromDate(start_date || task.start_date);\r\n\t\t\txLeft = this.posFromDate(end_date || task.end_date);\r\n\t\t}else{\r\n\t\t\txLeft = this.posFromDate(start_date || task.start_date);\r\n\t\t\txRight = this.posFromDate(end_date || task.end_date);\r\n\t\t}\r\n\t\twidth =  Math.max((xRight - xLeft), 0);\r\n\r\n\t\tvar y = this.getItemTop(task.id);\r\n\t\tvar height = this.getItemHeight();\r\n\t\treturn {\r\n\t\t\tleft: xLeft,\r\n\t\t\ttop: y,\r\n\t\t\theight: height,\r\n\t\t\twidth: width\r\n\t\t};\r\n\t},\r\n\r\n\tgetItemHeight: function(){\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\t// height of the bar item\r\n\t\tvar height = config.task_height;\r\n\r\n\t\tif (height == \"full\") {\r\n\t\t\tvar offset = config.task_height_offset || 5;\r\n\t\t\theight = config.row_height - offset;\r\n\t\t}\r\n\t\t//item height cannot be bigger than row height\r\n\t\theight = Math.min(height, config.row_height);\r\n\t\treturn Math.max(height, 0);\r\n\t},\r\n\r\n\tgetRowTop: function(index){\r\n\t\treturn index * this.$getConfig().row_height;\r\n\t},\r\n\r\n\tgetItemTop: function (task_id) {\r\n\t\tif(this.$config.rowStore){\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif(!store) return 0;\r\n\r\n\t\t\treturn store.getIndexById(task_id) * this.$getConfig().row_height;\r\n\r\n\t\t}else{\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetScale: function(){\r\n\t\treturn this._tasks;\r\n\t},\r\n\r\n\t_getScales: function _get_scales() {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar helpers = this.$scaleHelper;\r\n\t\tvar scales = [helpers.primaryScale()].concat(config.subscales);\r\n\r\n\t\thelpers.sortScales(scales);\r\n\t\treturn scales;\r\n\t},\r\n\r\n\t_getColumnDuration: function _get_coll_duration(scale, date) {\r\n\t\treturn this.$gantt.date.add(date, scale.step, scale.unit) - date;\r\n\t},\r\n\r\n\trefresh: function(){\r\n\t\tif(this.$config.bind) {\r\n\t\t\tthis.$config.rowStore = this.$gantt.getDatastore(this.$config.bind);\r\n\t\t}\r\n\r\n\t\tif(this.$config.bindLinks) {\r\n\t\t\tthis.$config.linkStore = this.$gantt.getDatastore(this.$config.bindLinks);\r\n\t\t}\r\n\r\n\t\tthis._initStaticBackgroundRender();\r\n\t\tthis._render_tasks_scales();\r\n\t},\r\n\r\n\tdestructor: function(){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tthis._clearLayers(gantt);\r\n\r\n\t\tthis.$task = null;\r\n\t\tthis.$task_scale = null;\r\n\t\tthis.$task_data = null;\r\n\t\tthis.$task_bg = null;\r\n\t\tthis.$task_links = null;\r\n\t\tthis.$task_bars = null;\r\n\r\n\t\tthis.$gantt = null;\r\n\r\n\t\tif(this.$config.rowStore){\r\n\t\t\tthis.$config.rowStore.detachEvent(this._staticBgHandler);\r\n\t\t\tthis.$config.rowStore = null;\r\n\t\t}\r\n\t\tif(this.$config.linkStore){\r\n\t\t\tthis.$config.linkStore = null;\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\r\n\t}\r\n};\r\n\r\nmodule.exports = Timeline;\r\n\r\nfunction _findBinary(array, target) {\r\n\t// modified binary search, target value not exactly match array elements, looking for closest one\r\n\r\n\tvar low = 0, high = array.length - 1, i, item, prev;\r\n\twhile (low <= high) {\r\n\r\n\t\ti = Math.floor((low + high) / 2);\r\n\t\titem = +array[i];\r\n\t\tprev = +array[i - 1];\r\n\t\tif (item < target) {\r\n\t\t\tlow = i + 1;\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tif (item > target) {\r\n\t\t\tif (!(!isNaN(prev) && prev < target)) {\r\n\t\t\t\thigh = i - 1;\r\n\t\t\t\tcontinue;\r\n\t\t\t} else {\r\n\t\t\t\t// if target is between 'i' and 'i-1' return 'i - 1'\r\n\t\t\t\treturn i - 1;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\twhile (+array[i] == +array[i + 1]) i++;\r\n\r\n\t\treturn i;\r\n\t}\r\n\treturn array.length - 1;\r\n}\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/timeline/timeline.js\n// module id = 13\n// module chunks = 0","\r\nvar ScaleHelper = require(\"./scales\");\r\n\r\nfunction ScaleIgnoreHelper(gantt){\r\n\tvar helper = new ScaleHelper(gantt);\r\n\r\n\thelper.processIgnores = function (config) {\r\n\t\tvar display_count = config.count;\r\n\t\tconfig.ignore_x = {};\r\n\t\tif (gantt.ignore_time || gantt.config.skip_off_time) {\r\n\t\t\tvar ignore = gantt.ignore_time || function () {\r\n\t\t\t\treturn false;\r\n\t\t\t};\r\n\t\t\tdisplay_count = 0;\r\n\r\n\t\t\tfor (var i = 0; i < config.trace_x.length; i++) {\r\n\r\n\t\t\t\tif (ignore.call(gantt, config.trace_x[i]) || this._ignore_time_config.call(gantt, config.trace_x[i], config)) {\r\n\t\t\t\t\tconfig.ignore_x[config.trace_x[i].valueOf()] = true;\r\n\t\t\t\t\tconfig.ignored_colls = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdisplay_count++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tconfig.display_count = display_count;\r\n\t};\r\n\r\n\treturn helper;\r\n}\r\n\r\nmodule.exports = ScaleIgnoreHelper;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/timeline/scales_ignore.js\n// module id = 14\n// module chunks = 0","function createMixin(_super){\r\n\treturn {\r\n\t\trefresh: function() {\r\n\t\t\tthis._linkToTaskStore();\r\n\t\t\t_super.prototype.refresh.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\t_linkToTaskStore: function () {\r\n\r\n\t\t\tif (this.$config.rowStore && this.$gantt.$data.tasksStore) {\r\n\t\t\t\tvar tasks = this.$gantt.$data.tasksStore;\r\n\t\t\t\tvar ownStore = this.$config.rowStore;\r\n\r\n\t\t\t\tif (!tasks[\"_attached_\" + ownStore.name]) {\r\n\t\t\t\t\ttasks[\"_attached_\" + ownStore.name] = true;\r\n\t\t\t\t\tvar updateDelay;\r\n\t\t\t\t\ttasks.attachEvent(\"onStoreUpdated\", function (id, item, mode) {\r\n\t\t\t\t\t\tif(window.requestAnimationFrame){\r\n\t\t\t\t\t\t\tcancelAnimationFrame(updateDelay);\r\n\t\t\t\t\t\t\tupdateDelay = requestAnimationFrame(function(){\r\n\t\t\t\t\t\t\t\townStore.refresh();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\townStore.refresh();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._linkToTaskStore = function () {\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = createMixin;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/resouce_store_mixin.js\n// module id = 15\n// module chunks = 0","var powerArray = require(\"./power_array\");\r\nvar utils = require(\"../../utils/utils\");\r\nvar eventable = require(\"../../utils/eventable\");\r\n\r\nvar DataStore = function(config){\r\n\tthis.pull = {};\r\n\tthis.$initItem = config.initItem;\r\n\tthis.visibleOrder = powerArray.$create();\r\n\tthis.fullOrder = powerArray.$create();\r\n\tthis._skip_refresh = false;\r\n\tthis._filterRule = null;\r\n\tthis._searchVisibleOrder = {};\r\n\teventable(this);\r\n\treturn this;\r\n};\r\nDataStore.prototype = {\r\n\r\n\t_parseInner: function(data){\r\n\t\tvar item = null,\r\n\t\t\tloaded = [];\r\n\t\tfor(var i = 0, len = data.length; i< len; i++){\r\n\t\t\titem = data[i];\r\n\t\t\tif(this.$initItem){\r\n\t\t\t\titem = this.$initItem(item);\r\n\t\t\t}\r\n\t\t\tif(this.callEvent(\"onItemLoading\", [item])){\r\n\t\t\t\tif (!this.pull.hasOwnProperty(item.id)) {\r\n\t\t\t\t\tthis.fullOrder.push(item.id);\r\n\t\t\t\t\tloaded.push(item);\r\n\t\t\t\t}\r\n\t\t\t\tthis.pull[item.id] = item;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn loaded;\r\n\t},\r\n\tparse: function(data){\r\n\t\tthis.callEvent(\"onBeforeParse\", [data]);\r\n\t\tvar loaded = this._parseInner(data);\r\n\t\tthis.refresh();\r\n\t\tthis.callEvent(\"onParse\", [loaded]);\r\n\t},\r\n\tgetItem: function(id){\r\n\t\treturn this.pull[id];\r\n\t},\r\n\r\n\t_updateOrder: function(code){\r\n\t\tcode.call(this.visibleOrder);\r\n\t\tcode.call(this.fullOrder);\r\n\t},\r\n\tupdateItem: function(id, item){\r\n\t\tif (!utils.defined(item)) item = this.getItem(id);\r\n\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tif (this.callEvent(\"onBeforeUpdate\", [item.id, item]) === false) return false;\r\n\t\t}\r\n\t\tthis.pull[id]=item;\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tthis.callEvent(\"onAfterUpdate\", [item.id, item]);\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [item.id, item, \"update\"]);\r\n\t\t}\r\n\t},\r\n\r\n\t_removeItemInner: function(id){\r\n\t\t//clear from collections\r\n\t\t//this.visibleOrder.$remove(id);\r\n\t\tthis._updateOrder(function(){ this.$remove(id);});\r\n\t\tdelete this.pull[id];\r\n\t},\r\n\r\n\tremoveItem: function(id){\r\n\t\t//utils.assert(this.exists(id), \"Not existing ID in remove command\"+id);\r\n\r\n\t\tvar obj = this.getItem(id);\t//save for later event\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tif (this.callEvent(\"onBeforeDelete\", [obj.id, obj]) === false) return false;\r\n\t\t}\r\n\r\n\t\tthis._removeItemInner(id);\r\n\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tthis.filter();\r\n\t\t\tthis.callEvent(\"onAfterDelete\", [obj.id, obj]);\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [obj.id, obj, \"delete\"]);\r\n\t\t}\r\n\t},\r\n\r\n\t_addItemInner: function(item, index){\r\n\t\t//in case of treetable order is sent as 3rd parameter\r\n\t\t//var order = index;\r\n\r\n\t\tif(this.exists(item.id)){\r\n\t\t\tthis.silent(function(){this.updateItem(item.id, item);});\r\n\t\t}else{\r\n\t\t\tvar order = this.visibleOrder;\r\n\r\n\t\t\t//by default item is added to the end of the list\r\n\t\t\tvar data_size = order.length;\r\n\r\n\t\t\tif (!utils.defined(index) || index < 0)\r\n\t\t\t\tindex = data_size;\r\n\t\t\t//check to prevent too big indexes\r\n\t\t\tif (index > data_size){\r\n\t\t\t\t//dhx.log(\"Warning\",\"DataStore:add\",\"Index of out of bounds\");\r\n\t\t\t\tindex = Math.min(order.length,index);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t//gantt.assert(!this.exists(id), \"Not unique ID\");\r\n\r\n\t\tthis.pull[item.id]=item;\r\n\t\tif (!this._skip_refresh){\r\n\t\t\tthis._updateOrder(function(){\r\n\t\t\t\tif(this.$find(item.id) === -1)\r\n\t\t\t\t\tthis.$insertAt(item.id,index);\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.filter();\r\n\t\t//order.$insertAt(item.id,index);\r\n\t},\r\n\r\n\r\n\tisVisible: function(id){\r\n\t\treturn this.visibleOrder.$find(id) > -1;\r\n\t},\r\n\tgetVisibleItems: function(){\r\n\t\treturn this.getIndexRange();\r\n\t},\r\n\r\n\taddItem: function(item, index){\r\n\t\tif (!utils.defined(item.id))\r\n\t\t\titem.id = utils.uid();\r\n\r\n\t\tif(this.$initItem){\r\n\t\t\titem = this.$initItem(item);\r\n\t\t}\r\n\r\n\t\tif (!this._skip_refresh){\r\n\t\t\tif (this.callEvent(\"onBeforeAdd\", [item.id, item]) === false) return false;\r\n\t\t}\r\n\r\n\r\n\t\tthis._addItemInner(item, index);\r\n\r\n\t\tif (!this._skip_refresh){\r\n\t\t\tthis.callEvent(\"onAfterAdd\",[item.id, item]);\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\",[item.id,item,\"add\"]);\r\n\t\t}\r\n\t\treturn item.id;\r\n\t},\r\n\r\n\t_changeIdInner: function(oldId, newId){\r\n\t\tif(this.pull[oldId])\r\n\t\t\tthis.pull[newId] = this.pull[oldId];\r\n\r\n\t\tvar visibleOrder = this._searchVisibleOrder[oldId];\r\n\t\tthis.pull[newId].id = newId;\r\n\t\tthis._updateOrder(function(){\r\n\t\t\tthis[this.$find(oldId)] = newId;\r\n\t\t});\r\n\t\tthis._searchVisibleOrder[newId] = visibleOrder;\r\n\t\tdelete this._searchVisibleOrder[oldId];\r\n\r\n\t\t//this.visibleOrder[this.visibleOrder.$find(oldId)]=newId;\r\n\t\tdelete this.pull[oldId];\r\n\t},\r\n\tchangeId: function(oldId, newId){\r\n\t\tthis._changeIdInner(oldId, newId);\r\n\r\n\t\tthis.callEvent(\"onIdChange\", [oldId, newId]);\r\n\r\n\t},\r\n\texists: function(id){\r\n\t\treturn !!(this.pull[id]);\r\n\t},\r\n\r\n\t_moveInner: function(sindex, tindex){\r\n\t\tvar id = this.getIdByIndex(sindex);\r\n\r\n\t\tthis._updateOrder(function(){\r\n\t\t\tthis.$removeAt(sindex);\r\n\t\t\tthis.$insertAt(id,Math.min(this.length, tindex));\r\n\t\t});\r\n\t\t//this.visibleOrder.$removeAt(sindex);\t//remove at old position\r\n\t\t//if (sindex<tindex) tindex--;\t//correct shift, caused by element removing\r\n\t\t//this.visibleOrder.$insertAt(id,Math.min(this.visibleOrder.length, tindex));\t//insert at new position\r\n\t},\r\n\r\n\tmove: function(sindex, tindex){\r\n\t\t//gantt.assert(sindex>=0 && tindex>=0, \"DataStore::move\",\"Incorrect indexes\");\r\n\r\n\t\tvar id = this.getIdByIndex(sindex);\r\n\t\tvar obj = this.getItem(id);\r\n\t\tthis._moveInner(sindex, tindex);\r\n\r\n\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [obj.id, obj, \"move\"]);\r\n\t\t}\r\n\t},\r\n\tclearAll: function(){\r\n\t\tthis.pull = {};\r\n\t\tthis.visibleOrder = powerArray.$create();\r\n\t\tthis.fullOrder = powerArray.$create();\r\n\t\tif (this._skip_refresh) return;\r\n\t\tthis.callEvent(\"onClearAll\",[]);\r\n\t\tthis.refresh();\r\n\t},\r\n\r\n\tsilent:function(code, master){\r\n\t\tthis._skip_refresh = true;\r\n\t\tcode.call(master||this);\r\n\t\tthis._skip_refresh = false;\r\n\t},\r\n\r\n\tarraysEqual: function (arr1, arr2) {\r\n\t\tif(arr1.length !== arr2.length)\r\n\t\t\treturn false;\r\n\t\tfor(var i = 0; i < arr1.length; i++) {\r\n\t\t\tif(arr1[i] !== arr2[i])\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\trefresh: function(id, quick){\r\n\t\tif (this._skip_refresh) return;\r\n\r\n\t\tif(id){\r\n\t\t\t// if item changes visible order (e.g. expand-collapse branch) - do a complete repaint\r\n\t\t\tif(!quick){\r\n\t\t\t\tvar oldOrder = this.visibleOrder;\r\n\t\t\t\tthis.filter();\r\n\t\t\t\tif(!this.arraysEqual(oldOrder, this.visibleOrder)){\r\n\t\t\t\t\tid = undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\tthis.filter();\r\n\t\t}\r\n\r\n\t\tif (id)\r\n\t\t\tthis.callEvent(\"onStoreUpdated\",[id, this.pull[id], \"paint\"]);\r\n\t\telse\r\n\t\t\tthis.callEvent(\"onStoreUpdated\",[null,null,null]);\r\n\t},\r\n\r\n\tcount: function(){\r\n\t\treturn this.fullOrder.length;\r\n\t},\r\n\tcountVisible: function(){\r\n\t\treturn this.visibleOrder.length;\r\n\t},\r\n\r\n\tsort: function(sort){},\r\n\r\n\tserialize: function(){},\r\n\r\n\teachItem: function(code){\r\n\t\tfor (var i=0; i<this.fullOrder.length; i++) {\r\n\t\t\tvar item = this.pull[this.fullOrder[i]];\r\n\t\t\tcode.call(this, item);\r\n\t\t}\r\n\t},\r\n\t\r\n\tfilter: function(rule){\r\n\t\tvar filteredOrder = powerArray.$create();\r\n\t\tthis.eachItem(function(item){\r\n\t\t\tif(this.callEvent(\"onFilterItem\", [item.id, item])){\r\n\t\t\t\tfilteredOrder.push(item.id);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.visibleOrder = filteredOrder;\r\n\t\tthis._searchVisibleOrder = {};\r\n\t\tfor(var i = 0; i < this.visibleOrder.length; i++){\r\n\t\t\tthis._searchVisibleOrder[this.visibleOrder[i]] = i;\r\n\t\t}\r\n\t},\r\n\r\n\tgetIndexRange: function(from, to){\r\n\t\tto=Math.min((to||Infinity),this.countVisible()-1);\r\n\r\n\t\tvar ret= [];\r\n\t\tfor (var i=(from||0); i <= to; i++)\r\n\t\t\tret.push(this.getItem(this.visibleOrder[i]));\r\n\t\treturn ret;\r\n\t},\r\n\tgetItems: function(){\r\n\t\tvar res = [];\r\n\t\tfor(var i in this.pull){\r\n\t\t\tres.push(this.pull[i]);\r\n\t\t}\r\n\t/*\tfor(var i = 0; i < this.fullOrder.length; i++){\r\n\r\n\t\t}*/\r\n\t\treturn res;\r\n\t},\r\n\r\n\tgetIdByIndex: function(index){\r\n\t\treturn this.visibleOrder[index];\r\n\t},\r\n\tgetIndexById: function(id){\r\n\t\tvar res = this._searchVisibleOrder[id];\r\n\t\tif(res === undefined){\r\n\t\t\tres = -1;\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\t_getNullIfUndefined: function(value){\r\n\t\tif(value === undefined){\r\n\t\t\treturn null;\r\n\t\t}else{\r\n\t\t\treturn value;\r\n\t\t}\r\n\t},\r\n\tgetFirst: function(){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[0]);\r\n\t},\r\n\tgetLast: function(){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[this.visibleOrder.length-1]);\r\n\t},\r\n\tgetNext: function(id){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[this.getIndexById(id) + 1]);\r\n\t},\r\n\tgetPrev: function(id){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[this.getIndexById(id) - 1]);\r\n\t},\r\n\tdestructor: function(){\r\n\t\tthis.detachAllEvents();\r\n\t\tthis.pull = null;\r\n\t\tthis.$initItem = null;\r\n\t\tthis.visibleOrder = null;\r\n\t\tthis.fullOrder = null;\r\n\t\tthis._skip_refresh = null;\r\n\t\tthis._filterRule = null;\r\n\t\tthis._searchVisibleOrder = null;\r\n\t}\r\n};\r\n\r\nmodule.exports = DataStore;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/datastore/datastore.js\n// module id = 16\n// module chunks = 0","var utils = require(\"../../utils/utils\");\r\n\r\nvar $powerArray  = {\r\n\t$create: function(array){\r\n\t\treturn utils.mixin(array || [], this);\r\n\t},\r\n\t//remove element at specified position\r\n\t$removeAt:function(pos,len){\r\n\t\tif (pos>=0) this.splice(pos,(len||1));\r\n\t},\r\n\t//find element in collection and remove it\r\n\t$remove:function(value){\r\n\t\tthis.$removeAt(this.$find(value));\r\n\t},\r\n\t//add element to collection at specific position\r\n\t$insertAt:function(data,pos){\r\n\t\tif (!pos && pos!==0) \t//add to the end by default\r\n\t\t\tthis.push(data);\r\n\t\telse {\r\n\t\t\tvar b = this.splice(pos,(this.length-pos));\r\n\t\t\tthis[pos] = data;\r\n\t\t\tthis.push.apply(this,b); //reconstruct array without loosing this pointer\r\n\t\t}\r\n\t},\r\n\t//return index of element, -1 if it doesn't exists\r\n\t$find:function(data){\r\n\t\tfor (var i=0; i<this.length; i++)\r\n\t\t\tif (data==this[i]) return i;\r\n\t\treturn -1;\r\n\t},\r\n\t//execute some method for each element of array\r\n\t$each:function(functor,master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tfunctor.call((master||this),this[i]);\r\n\t},\r\n\t//create new array from source, by using results of functor\r\n\t$map:function(functor,master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tthis[i]=functor.call((master||this),this[i]);\r\n\t\treturn this;\r\n\t},\r\n\t$filter:function(functor, master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tif (!functor.call((master||this),this[i])){\r\n\t\t\t\tthis.splice(i,1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\treturn this;\r\n\t}\r\n};\r\n\r\nmodule.exports = $powerArray;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/datastore/power_array.js\n// module id = 17\n// module chunks = 0","var powerArray = require(\"./power_array\");\r\nvar utils = require(\"../../utils/utils\");\r\nvar eventable = require(\"../../utils/eventable\");\r\nvar DataStore = require(\"./datastore\");\r\n\r\nvar TreeDataStore = function(config){\r\n\tthis._branches = {};\r\n\r\n\tthis.pull = {};\r\n\tthis.$initItem = config.initItem;\r\n\tthis.$parentProperty = config.parentProperty || \"parent\";\r\n\r\n\tif(typeof config.rootId !== \"function\"){\r\n\t\tthis.$getRootId = (function(val){\r\n\t\t\treturn function(){return val;};\r\n\t\t})(config.rootId || 0);\r\n\t}else{\r\n\t\tthis.$getRootId = config.rootId;\r\n\t}\r\n\r\n\t// TODO: replace with live reference to gantt config\r\n\tthis.$openInitially = config.openInitially;\r\n\r\n\tthis.visibleOrder = powerArray.$create();\r\n\tthis.fullOrder = powerArray.$create();\r\n\tthis._searchVisibleOrder = {};\r\n\tthis._skip_refresh = false;\r\n\r\n\teventable(this);\r\n\r\n\tthis.attachEvent(\"onFilterItem\", function(id, item){\r\n\t\tvar open = true;\r\n\t\tthis.eachParent(function(parent){\r\n\t\t\topen = open && parent.$open;\r\n\t\t}, item);\r\n\t\treturn !!open;\r\n\t});\r\n\r\n\treturn this;\r\n};\r\n\r\nTreeDataStore.prototype = utils.mixin({\r\n\r\n\t\t_buildTree: function(data){\r\n\t\t\tvar item = null;\r\n\t\t\tvar rootId = this.$getRootId();\r\n\t\t\tfor (var i = 0, len = data.length; i < len; i++){\r\n\t\t\t\titem = data[i];\r\n\t\t\t\tthis.setParent(item, this.getParent(item) || rootId);\r\n\t\t\t}\r\n\r\n\t\t\t// calculating $level for each item\r\n\t\t\tfor (var i = 0, len = data.length; i < len; i++){\r\n\t\t\t\titem = data[i];\r\n\t\t\t\tthis._add_branch(item);\r\n\t\t\t\titem.$level = this.calculateItemLevel(item);\r\n\r\n\t\t\t\tif (!utils.defined(item.$open)) {\r\n\t\t\t\t\titem.$open = utils.defined(item.open) ? item.open : this.$openInitially();\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tthis._updateOrder();\r\n\t\t},\r\n\r\n\t\tparse: function(data){\r\n\t\t\tthis.callEvent(\"onBeforeParse\", [data]);\r\n\t\t\tvar loaded = this._parseInner(data);\r\n\t\t\tthis._buildTree(loaded);\r\n\t\t\tthis.filter();\r\n\t\t\tthis.callEvent(\"onParse\", [loaded]);\r\n\t\t},\r\n\r\n\t\t_addItemInner: function(item, index){\r\n\r\n\t\t\tvar parent = this.getParent(item);\r\n\r\n\t\t\tif(!utils.defined(parent)){\r\n\t\t\t\tparent = this.$getRootId();\r\n\t\t\t\tthis.setParent(item, parent);\r\n\t\t\t}\r\n\r\n\t\t\tvar parentIndex = this.getIndexById(parent);\r\n\t\t\tvar targetIndex = parentIndex + Math.min(Math.max(index, 0), this.visibleOrder.length);\r\n\r\n\t\t\tif(targetIndex*1 !== targetIndex){\r\n\t\t\t\ttargetIndex = undefined;\r\n\t\t\t}\r\n\t\t\tDataStore.prototype._addItemInner.call(this, item, targetIndex);\r\n\t\t\tthis.setParent(item, parent);\r\n\r\n\t\t\tif(item.hasOwnProperty(\"$rendered_parent\")){\r\n\t\t\t\tthis._move_branch(item, item.$rendered_parent);\r\n\t\t\t}\r\n\t\t\tthis._add_branch(item, index);\r\n\t\t},\r\n\t\t_changeIdInner: function(oldId, newId){\r\n\t\t\tvar children = this.getChildren(oldId);\r\n\t\t\tvar visibleOrder = this._searchVisibleOrder[oldId];\r\n\r\n\t\t\tDataStore.prototype._changeIdInner.call(this, oldId, newId);\r\n\r\n\t\t\tvar parent = this.getParent(newId);\r\n\r\n\t\t\tthis._replace_branch_child(parent, oldId, newId);\r\n\t\t\tfor(var i = 0; i < children.length; i++){\r\n\t\t\t\tthis.setParent(this.getItem(children[i]), newId);\r\n\t\t\t}\r\n\r\n\t\t\tthis._searchVisibleOrder[newId] = visibleOrder;\r\n\t\t\tdelete this._branches[oldId];\r\n\t\t},\r\n\r\n\t\t_traverseBranches: function(code, parent){\r\n\t\t\tparent = parent || this.$getRootId();\r\n\t\t\tvar branch = this._branches[parent];\r\n\t\t\tif (branch) {\r\n\t\t\t\tfor (var i = 0; i < branch.length; i++) {\r\n\t\t\t\t\tvar itemId = branch[i];\r\n\t\t\t\t\tcode.call(this, itemId);\r\n\t\t\t\t\tif (this._branches[itemId])\r\n\t\t\t\t\t\tthis._traverseBranches(code, itemId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_updateOrder: function(code){\r\n\r\n\t\t\tthis.fullOrder = powerArray.$create();\r\n\t\t\tthis._traverseBranches(function(taskId){\r\n\t\t\t\tthis.fullOrder.push(taskId);\r\n\t\t\t});\r\n\r\n\t\t\tif(code)\r\n\t\t\t\tDataStore.prototype._updateOrder.call(this, code);\r\n\t\t},\r\n\r\n\t\t_removeItemInner: function(id){\r\n\r\n\t\t\tvar items = [];\r\n\t\t\tthis.eachItem(function(child){\r\n\t\t\t\titems.push(child);\r\n\t\t\t}, id);\r\n\r\n\t\t\titems.push(this.getItem(id));\r\n\r\n\t\t\tfor(var i = 0; i < items.length; i++){\r\n\r\n\t\t\t\tthis._move_branch(items[i], this.getParent(items[i]), null);\r\n\t\t\t\tDataStore.prototype._removeItemInner.call(this, items[i].id);\r\n\t\t\t\tthis._move_branch(items[i], this.getParent(items[i]), null);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tmove: function(sid, tindex, parent){\r\n\t\t\t//target id as 4th parameter\r\n\t\t\tvar id = arguments[3];\r\n\t\t\tif (id) {\r\n\t\t\t\tif (id === sid) return;\r\n\r\n\t\t\t\tparent = this.getParent(id);\r\n\t\t\t\ttindex = this.getBranchIndex(id);\r\n\t\t\t}\r\n\t\t\tif(sid == parent){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tparent = parent || this.$getRootId();\r\n\t\t\tvar source = this.getItem(sid);\r\n\t\t\tvar source_pid = this.getParent(source.id);\r\n\t\t\tvar sbranch = this.getChildren(this.getParent(source.id));\r\n\r\n\t\t\tvar tbranch = this.getChildren(parent);\r\n\t\t\tif (tindex == -1)\r\n\t\t\t\ttindex = tbranch.length + 1;\r\n\t\t\tif (source_pid == parent) {\r\n\t\t\t\tvar sindex = this.getBranchIndex(sid);\r\n\t\t\t\tif (sindex == tindex) return;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.callEvent(\"onBeforeItemMove\", [sid, parent, tindex]) === false)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tthis._replace_branch_child(source_pid, sid);\r\n\t\t\ttbranch = this.getChildren(parent);\r\n\r\n\t\t\tvar tid = tbranch[tindex];\r\n\t\t\tif (!tid) //adding as last element\r\n\t\t\t\ttbranch.push(sid);\r\n\t\t\telse\r\n\t\t\t\ttbranch = tbranch.slice(0, tindex).concat([ sid ]).concat(tbranch.slice(tindex));\r\n\r\n\t\t\tthis.setParent(source, parent);\r\n\t\t\tthis._branches[parent] = tbranch;\r\n\r\n\t\t\tvar diff = this.calculateItemLevel(source) - source.$level;\r\n\t\t\tsource.$level += diff;\r\n\t\t\tthis.eachItem(function(item){\r\n\t\t\t\titem.$level += diff;\r\n\t\t\t}, source.id, this);\r\n\r\n\r\n\t\t\tthis._moveInner(this.getIndexById(sid), this.getIndexById(parent) + tindex);\r\n\r\n\t\t\tthis.callEvent(\"onAfterItemMove\", [sid, parent, tindex]);\r\n\t\t\tthis.refresh();\r\n\t\t},\r\n\r\n\t\tgetBranchIndex: function(id){\r\n\t\t\tvar branch = this.getChildren(this.getParent(id));\r\n\t\t\tfor (var i = 0; i < branch.length; i++)\r\n\t\t\t\tif (branch[i] == id)\r\n\t\t\t\t\treturn i;\r\n\r\n\t\t\treturn -1;\r\n\t\t},\r\n\t\thasChild: function(id){\r\n\t\t\treturn (utils.defined(this._branches[id]) && this._branches[id].length);\r\n\t\t},\r\n\t\tgetChildren: function(id){\r\n\t\t\treturn utils.defined(this._branches[id]) ? this._branches[id] : powerArray.$create();\r\n\t\t},\r\n\r\n\t\tisChildOf: function(childId, parentId){\r\n\t\t\tif (!this.exists(childId))\r\n\t\t\t\treturn false;\r\n\t\t\tif (parentId === this.$getRootId())\r\n\t\t\t\treturn true;\r\n\r\n\t\t\tif (!this.hasChild(parentId))\r\n\t\t\t\treturn false;\r\n\r\n\t\t\tvar item = this.getItem(childId);\r\n\t\t\tvar pid = this.getParent(childId);\r\n\r\n\t\t\tvar parent = this.getItem(parentId);\r\n\t\t\tif(parent.$level >= item.$level){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\twhile (item && this.exists(pid)) {\r\n\t\t\t\titem = this.getItem(pid);\r\n\r\n\t\t\t\tif (item && item.id == parentId)\r\n\t\t\t\t\treturn true;\r\n\t\t\t\tpid = this.getParent(item);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\tgetSiblings: function(id){\r\n\t\t\tif(!this.exists(id)){\r\n\t\t\t\treturn powerArray.$create();\r\n\t\t\t}\r\n\t\t\tvar parent = this.getParent(id);\r\n\t\t\treturn this.getChildren(parent);\r\n\r\n\t\t},\r\n\t\tgetNextSibling: function(id){\r\n\t\t\tvar siblings = this.getSiblings(id);\r\n\t\t\tfor(var i= 0, len = siblings.length; i < len; i++){\r\n\t\t\t\tif(siblings[i] == id)\r\n\t\t\t\t\treturn siblings[i+1] || null;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tgetPrevSibling: function(id){\r\n\t\t\tvar siblings = this.getSiblings(id);\r\n\t\t\tfor(var i= 0, len = siblings.length; i < len; i++){\r\n\t\t\t\tif(siblings[i] == id)\r\n\t\t\t\t\treturn siblings[i-1] || null;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tgetParent: function(id){\r\n\t\t\tvar item = null;\r\n\t\t\tif(id.id !== undefined){\r\n\t\t\t\titem = id;\r\n\t\t\t}else{\r\n\t\t\t\titem = this.getItem(id);\r\n\t\t\t}\r\n\r\n\t\t\tvar parent;\r\n\t\t\tif(item){\r\n\t\t\t\tparent = item[this.$parentProperty];\r\n\t\t\t}else{\r\n\t\t\t\tparent = this.$getRootId();\r\n\t\t\t}\r\n\t\t\treturn parent;\r\n\r\n\t\t},\r\n\r\n\t\tclearAll: function(){\r\n\t\t\tthis._branches = {};\r\n\t\t\tDataStore.prototype.clearAll.call(this);\r\n\t\t},\r\n\r\n\t\tcalculateItemLevel: function(item){\r\n\t\t\tvar level = 0;\r\n\t\t\tthis.eachParent(function(){\r\n\t\t\t\tlevel++;\r\n\t\t\t}, item);\r\n\t\t\treturn level;\r\n\t\t},\r\n\r\n\t\t_setParentInner: function(item, new_pid, silent){\r\n\t\t\tif(!silent){\r\n\t\t\t\tif(item.hasOwnProperty(\"$rendered_parent\")){\r\n\t\t\t\t\tthis._move_branch(item, item.$rendered_parent, new_pid);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis._move_branch(item, item[this.$parentProperty], new_pid);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetParent: function(item, new_pid, silent){\r\n\t\t\tthis._setParentInner(item, new_pid, silent);\r\n\r\n\t\t\titem[this.$parentProperty] = new_pid;\r\n\t\t},\r\n\t\teachItem: function(code, parent){\r\n\t\t\tparent = parent || this.$getRootId();\r\n\r\n\r\n\t\t\tvar branch = this.getChildren(parent);\r\n\t\t\tif (branch)\r\n\t\t\t\tfor (var i=0; i<branch.length; i++){\r\n\t\t\t\t\tvar item = this.pull[branch[i]];\r\n\t\t\t\t\tcode.call(this, item);\r\n\t\t\t\t\tif (this.hasChild(item.id))\r\n\t\t\t\t\t\tthis.eachItem(code, item.id);\r\n\t\t\t\t}\r\n\t\t},\r\n\t\teachParent: function(code, startItem){\r\n\t\t\tvar item = startItem;\r\n\t\t\tvar parent = this.getParent(item);\r\n\t\t\twhile (this.exists(parent)) {\r\n\t\t\t\titem = this.getItem(parent);\r\n\t\t\t\tcode.call(this, item);\r\n\t\t\t\tparent = this.getParent(item);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_add_branch: function(item, index, parent){\r\n\t\t\tvar pid = parent === undefined ? this.getParent(item) : parent;\r\n\t\t\tif (!this.hasChild(pid))\r\n\t\t\t\tthis._branches[pid] = powerArray.$create();\r\n\t\t\tvar branch = this.getChildren(pid);\r\n\t\t\tvar added_already = false;\r\n\t\t\tfor(var i = 0, length = branch.length; i < length; i++){\r\n\t\t\t\tif(branch[i] == item.id){\r\n\t\t\t\t\tadded_already = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(!added_already){\r\n\t\t\t\tif(index*1 == index){\r\n\r\n\t\t\t\t\tbranch.splice(index, 0, item.id);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbranch.push(item.id);\r\n\t\t\t\t}\r\n\r\n\t\t\t\titem.$rendered_parent = pid;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_move_branch: function(item, old_parent, new_parent){\r\n\t\t\t//this.setParent(item, new_parent);\r\n\t\t\t//this._sync_parent(task);\r\n\t\t\tthis._replace_branch_child(old_parent, item.id);\r\n\t\t\tif(this.exists(new_parent) || new_parent == this.$getRootId()){\r\n\r\n\t\t\t\tthis._add_branch(item, undefined, new_parent);\r\n\t\t\t}else{\r\n\t\t\t\tdelete this._branches[item.id];\r\n\t\t\t}\r\n\t\t\titem.$level =  this.calculateItemLevel(item);\r\n\t\t\tthis.eachItem(function(child){\r\n\t\t\t\tchild.$level = this.calculateItemLevel(child);\r\n\t\t\t}, item.id);\r\n\t\t},\r\n\r\n\t\t_replace_branch_child: function(node, old_id, new_id){\r\n\t\t\tvar branch = this.getChildren(node);\r\n\t\t\tif (branch && node !== undefined){\r\n\t\t\t\tvar newbranch = powerArray.$create();\r\n\t\t\t\tfor (var i=0; i<branch.length; i++){\r\n\t\t\t\t\tif (branch[i] != old_id)\r\n\t\t\t\t\t\tnewbranch.push(branch[i]);\r\n\t\t\t\t\telse if (new_id)\r\n\t\t\t\t\t\tnewbranch.push(new_id);\r\n\t\t\t\t}\r\n\t\t\t\tthis._branches[node] = newbranch;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tsort: function(field, desc, parent){\r\n\t\t\tif (!this.exists(parent)) {\r\n\t\t\t\tparent = this.$getRootId();\r\n\t\t\t}\r\n\r\n\t\t\tif (!field) field = \"order\";\r\n\t\t\tvar criteria = (typeof(field) == \"string\") ? (function(a, b) {\r\n\t\t\t\tif(a[field] == b[field]){\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar result = a[field] > b[field];\r\n\t\t\t\treturn result ? 1 : -1;\r\n\t\t\t}) : field;\r\n\r\n\t\t\tif (desc) {\r\n\t\t\t\tvar original_criteria = criteria;\r\n\t\t\t\tcriteria = function (a, b) {\r\n\t\t\t\t\treturn original_criteria(b, a);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tvar els = this.getChildren(parent);\r\n\t\t\tif (els){\r\n\t\t\t\tvar temp = [];\r\n\t\t\t\tfor (var i = els.length - 1; i >= 0; i--)\r\n\t\t\t\t\ttemp[i] = this.getItem(els[i]);\r\n\r\n\t\t\t\ttemp.sort(criteria);\r\n\r\n\t\t\t\tfor (var i = 0; i < temp.length; i++) {\r\n\t\t\t\t\tels[i] = temp[i].id;\r\n\t\t\t\t\tthis.sort(field, desc, els[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tfilter: function(rule){\r\n\t\t\tfor(var i  in this.pull){\r\n\t\t\t\tif(this.pull[i].$rendered_parent !== this.getParent(this.pull[i])){\r\n\t\t\t\t\tthis._move_branch(this.pull[i], this.pull[i].$rendered_parent, this.getParent(this.pull[i]));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn DataStore.prototype.filter.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\topen: function(id){\r\n\t\t\tif(this.exists(id)){\r\n\t\t\t\tthis.getItem(id).$open = true;\r\n\t\t\t\tthis.callEvent(\"onItemOpen\", [id]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tclose: function(id){\r\n\t\t\tif(this.exists(id)){\r\n\t\t\t\tthis.getItem(id).$open = false;\r\n\t\t\t\tthis.callEvent(\"onItemClose\", [id]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tdestructor: function(){\r\n\t\t\tDataStore.prototype.destructor.call(this);\r\n\t\t\tthis._branches = null;\r\n\t\t}\r\n\t},\r\n\tDataStore.prototype\r\n);\r\n\r\nmodule.exports = TreeDataStore;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/datastore/treedatastore.js\n// module id = 18\n// module chunks = 0","var ScaleHelper = require(\"./ui/timeline/scales_ignore\");\r\n\r\n\r\nfunction dateRangeResolver(gantt){\r\n\t//reset project timing\r\n\t//_get_tasks_data(gantt);\r\n\treturn gantt.getSubtaskDates();\r\n}\r\n\r\nfunction defaultRangeResolver(){\r\n\treturn {\r\n\t\tstart_date: new Date(),\r\n\t\tend_date: new Date()\r\n\t};\r\n}\r\n\r\nfunction resolveConfigRange(unit, gantt){\r\n\tvar range = {\r\n\t\tstart_date:null,\r\n\t\tend_date:null\r\n\t};\r\n\r\n\tif (gantt.config.start_date && gantt.config.end_date) {\r\n\t\trange.start_date = gantt.date[unit + \"_start\"](new Date(gantt.config.start_date));\r\n\r\n\t\tvar end = new Date(gantt.config.end_date);\r\n\t\tvar start_interval = gantt.date[unit + \"_start\"](new Date(end));\r\n\t\tif (+end != +start_interval) {\r\n\t\t\tend = gantt.date.add(start_interval, 1, unit);\r\n\t\t} else {\r\n\t\t\tend = start_interval;\r\n\t\t}\r\n\r\n\t\trange.end_date = end;\r\n\t}\r\n\treturn range;\r\n}\r\n\r\nfunction _scale_range_unit(gantt) {\r\n\tvar unit = gantt.config.scale_unit;\r\n\tvar step = gantt.config.step;\r\n\tif (gantt.config.scale_offset_minimal) {\r\n\r\n\t\tvar helper = new ScaleHelper(gantt);\r\n\t\tvar scales = [helper.primaryScale()].concat(gantt.config.subscales);\r\n\r\n\t\thelper.sortScales(scales);\r\n\t\tunit = scales[scales.length - 1].unit;\r\n\t\tstep = scales[scales.length - 1].step || 1;\r\n\t}\r\n\treturn { unit:unit, step:step };\r\n}\r\n\r\nfunction _init_tasks_range(gantt) {\r\n\tvar cfg = _scale_range_unit(gantt);\r\n\tvar unit = cfg.unit,\r\n\t\tstep = cfg.step;\r\n\tvar range = resolveConfigRange(unit, gantt);\r\n\r\n\tif(!(range.start_date && range.end_date)){\r\n\t\trange = dateRangeResolver(gantt);\r\n\t\tif(!range.start_date || !range.end_date){\r\n\t\t\trange = defaultRangeResolver(gantt);\r\n\t\t}\r\n\r\n\t\trange.start_date = gantt.date[unit + \"_start\"](range.start_date);\r\n\t\trange.start_date = gantt.calculateEndDate({\r\n\t\t\tstart_date: gantt.date[unit + \"_start\"](range.start_date),\r\n\t\t\tduration: -1,\r\n\t\t\tunit: unit,\r\n\t\t\tstep:step\r\n\t\t});//one free column before first task\r\n\r\n\t\trange.end_date = gantt.date[unit + \"_start\"](range.end_date);\r\n\t\trange.end_date = gantt.calculateEndDate({start_date: range.end_date, duration: 2, unit: unit, step:step});//one free column after last task\r\n\t}\r\n\r\n\tgantt._min_date = range.start_date;\r\n\tgantt._max_date = range.end_date;\r\n}\r\n\r\nfunction _adjust_scales(gantt) {\r\n\tif (gantt.config.fit_tasks) {\r\n\t\tvar old_min = +gantt._min_date,\r\n\t\t\told_max = +gantt._max_date;\r\n\t\t//this._init_tasks_range();\r\n\t\tif (+gantt._min_date != old_min || +gantt._max_date != old_max) {\r\n\t\t\tgantt.render();\r\n\r\n\t\t\tgantt.callEvent(\"onScaleAdjusted\", []);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nmodule.exports = function updateTasksRange(gantt){\r\n\t_init_tasks_range(gantt);\r\n\t_adjust_scales(gantt);\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/gantt_data_range.js\n// module id = 19\n// module chunks = 0","function copyLinkIdsArray(gantt, linkIds, targetHash){\r\n\tfor(var i = 0; i < linkIds.length; i++) {\r\n\t\tif(gantt.isLinkExists(linkIds[i])){\r\n\t\t\ttargetHash[linkIds[i]] = gantt.getLink(linkIds[i]);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction copyLinkIds(gantt, task, targetHash){\r\n\tcopyLinkIdsArray(gantt, task.$source, targetHash);\r\n\tcopyLinkIdsArray(gantt, task.$target, targetHash);\r\n}\r\n\r\nfunction getSubtreeLinks(gantt, rootId){\r\n\tvar res = {};\r\n\r\n\tif(gantt.isTaskExists(rootId)){\r\n\t\tcopyLinkIds(gantt, gantt.getTask(rootId), res);\r\n\t}\r\n\r\n\tgantt.eachTask(function(child){\r\n\t\tcopyLinkIds(gantt, child, res);\r\n\t}, rootId);\r\n\r\n\treturn res;\r\n}\r\n\r\nfunction getSubtreeTasks(gantt, rootId){\r\n\tvar res = {};\r\n\r\n\tgantt.eachTask(function(child){\r\n\t\tres[child.id] = child;\r\n\t}, rootId);\r\n\r\n\treturn res;\r\n}\r\n\r\nmodule.exports = {\r\n\tgetSubtreeLinks: getSubtreeLinks,\r\n\tgetSubtreeTasks: getSubtreeTasks\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/utils/task_tree_helpers.js\n// module id = 20\n// module chunks = 0","var utils = require(\"../../utils/utils\");\r\nvar dateHelper = require(\"../../utils/date_helpers\");\r\n\r\n\r\nfunction IsWorkTimeArgument(date, unit, task, id, calendar){\r\n\tthis.date = date;\r\n\tthis.unit = unit;\r\n\tthis.task = task;\r\n\tthis.id = id;\r\n\tthis.calendar = calendar;\r\n\treturn this;\r\n}\r\n\r\nfunction ClosestWorkTimeArgument(date, dir, unit, task, id, calendar){\r\n\tthis.date = date;\r\n\tthis.dir = dir;\r\n\tthis.unit = unit;\r\n\tthis.task = task;\r\n\tthis.id = id;\r\n\tthis.calendar = calendar;\r\n\treturn this;\r\n}\r\n\r\nfunction CalculateEndDateArgument(start_date, duration, unit, step, task, id, calendar){\r\n\tthis.start_date = start_date;\r\n\tthis.duration = duration;\r\n\tthis.unit = unit;\r\n\tthis.step = step;\r\n\tthis.task = task;\r\n\tthis.id = id;\r\n\tthis.calendar = calendar;\r\n\treturn this;\r\n}\r\n\r\nfunction GetDurationArgument(start, end, task, calendar) {\r\n\tthis.start_date = start;\r\n\tthis.end_date = end;\r\n\tthis.task = task;\r\n\tthis.calendar = calendar;\r\n\tthis.unit = null;\r\n\tthis.step = null;\r\n\treturn this;\r\n}\r\n\r\nvar calendarArgumentsHelper = function(gantt){\r\n\treturn {\r\n\t\tgetWorkHoursArguments: function () {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (dateHelper.isDate(config)) {\r\n\t\t\t\tconfig = {\r\n\t\t\t\t\tdate: config\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tconfig = utils.mixin({}, config);\r\n\t\t\t}\r\n\t\t\treturn config;\r\n\t\t},\r\n\t\tsetWorkTimeArguments: function () {\r\n\t\t\treturn arguments[0];\r\n\t\t},\r\n\t\tunsetWorkTimeArguments: function () {\r\n\t\t\treturn arguments[0];\r\n\t\t},\r\n\t\tisWorkTimeArguments: function () {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif(config instanceof IsWorkTimeArgument){\r\n\t\t\t\treturn config;\r\n\t\t\t}\r\n\r\n\t\t\tvar processedConfig;\r\n\t\t\tif (!config.date) {\r\n\t\t\t\t//IsWorkTimeArgument(date, unit, task, id, calendar)\r\n\t\t\t\tprocessedConfig = new IsWorkTimeArgument(arguments[0], arguments[1], arguments[2], null, arguments[3]);\r\n\t\t\t} else {\r\n\t\t\t\tprocessedConfig = new IsWorkTimeArgument(config.date, config.unit, config.task, null, config.calendar);\r\n\t\t\t}\r\n\r\n\t\t\tprocessedConfig.unit = processedConfig.unit || gantt.config.duration_unit;\r\n\r\n\t\t\treturn processedConfig;\r\n\t\t},\r\n\t\tgetClosestWorkTimeArguments: function (arg) {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (config instanceof ClosestWorkTimeArgument)\r\n\t\t\t\treturn config;\r\n\r\n\t\t\tvar processedConfig;\r\n\t\t\tif (dateHelper.isDate(config)) {\r\n\t\t\t\tprocessedConfig = new ClosestWorkTimeArgument(config);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tprocessedConfig = new ClosestWorkTimeArgument(\r\n\t\t\t\t\tconfig.date,\r\n\t\t\t\t\tconfig.dir,\r\n\t\t\t\t\tconfig.unit,\r\n\t\t\t\t\tconfig.task,\r\n\t\t\t\t\tnull,//config.id,\r\n\t\t\t\t\tconfig.calendar\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tif(config.id){\r\n\t\t\t\tprocessedConfig.task = config;\r\n\t\t\t}\r\n\t\t\tprocessedConfig.dir = config.dir || 'any';\r\n\t\t\tprocessedConfig.unit = config.unit || gantt.config.duration_unit;\r\n\r\n\t\t\treturn processedConfig;\r\n\t\t},\r\n\r\n\t\t_getStartEndConfig: function (param) {\r\n\t\t\tvar argumentType = GetDurationArgument;\r\n\t\t\tvar config;\r\n\t\t\tif (param instanceof argumentType)\r\n\t\t\t\treturn param;\r\n\r\n\t\t\tif (dateHelper.isDate(param)) {\r\n\t\t\t\tconfig = new argumentType(arguments[0], arguments[1], arguments[2], arguments[3]);\r\n\t\t\t} else {\r\n\t\t\t\tconfig = new argumentType(param.start_date, param.end_date, param.task);\r\n\t\t\t\tif (param.id) {\r\n\t\t\t\t\tconfig.task = param;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconfig.unit = config.unit || gantt.config.duration_unit;\r\n\t\t\tconfig.step = config.step || gantt.config.duration_step;\r\n\t\t\tconfig.start_date = config.start_date || config.start || config.date;\r\n\r\n\t\t\treturn config;\r\n\t\t},\r\n\r\n\t\tgetDurationArguments: function (start, end, unit, step) {\r\n\t\t\treturn this._getStartEndConfig.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\thasDurationArguments: function (start, end, unit, step) {\r\n\t\t\treturn this._getStartEndConfig.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\tcalculateEndDateArguments: function (start, duration, unit, step) {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (config instanceof CalculateEndDateArgument)\r\n\t\t\t\treturn config;\r\n\r\n\t\t\tvar processedConfig;\r\n\t\t\t//CalculateEndDateArgument(start_date, duration, unit, step, task, id, calendar)\r\n\t\t\tif (dateHelper.isDate(config)) {\r\n\t\t\t\tprocessedConfig = new CalculateEndDateArgument(\r\n\t\t\t\t\targuments[0],\r\n\t\t\t\t\targuments[1],\r\n\t\t\t\t\targuments[2],\r\n\t\t\t\t\tundefined,\r\n\t\t\t\t\targuments[3],\r\n\t\t\t\t\tundefined,\r\n\t\t\t\t\targuments[4]\r\n\t\t\t\t);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tprocessedConfig = new CalculateEndDateArgument(\r\n\t\t\t\t\tconfig.start_date,\r\n\t\t\t\t\tconfig.duration,\r\n\t\t\t\t\tconfig.unit,\r\n\t\t\t\t\tconfig.step,\r\n\t\t\t\t\tconfig.task,\r\n\t\t\t\t\tnull,//config.id,\r\n\t\t\t\t\tconfig.calendar\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif(config.id){\r\n\t\t\t\tprocessedConfig.task = config;\r\n\t\t\t}\r\n\r\n\t\t\tprocessedConfig.unit = processedConfig.unit || gantt.config.duration_unit;\r\n\t\t\tprocessedConfig.step = processedConfig.step || gantt.config.duration_step;\r\n\r\n\t\t\treturn processedConfig;\r\n\t\t}\r\n\t};\r\n};\r\n\r\n\r\nmodule.exports = calendarArgumentsHelper;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/worktime/calendar_arguments_helper.js\n// module id = 21\n// module chunks = 0","window.Gantt = require(\"./core/gantt_factory\");\r\nwindow.gantt = window.Gantt.getGanttInstance();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/dhtmlxgantt.enterprise.js\n// module id = 23\n// module chunks = 0","var Gantt = { _seed: 0 };\r\nGantt.plugin = function(code){\r\n\tthis._ganttPlugin.push(code);\r\n\tcode(window.gantt);\r\n};\r\nGantt._ganttPlugin = [];\r\nGantt.getGanttInstance = function() {\r\n\tvar gantt = require(\"./gantt\")();\r\n\tfor (var i=0; i<Gantt._ganttPlugin.length; i++) {\r\n\t\tGantt._ganttPlugin[i](gantt);\r\n\t}\r\n\tgantt._internal_id = (Gantt._seed++);\r\n\r\n\tif (Gantt.$syncFactory)\r\n\t\tGantt.$syncFactory(gantt);\r\n\r\n\trequire(\"./deprecated_warnings\")(gantt);\r\n\r\n\treturn gantt;\r\n};\r\n\r\nmodule.exports = Gantt;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/gantt_factory.js\n// module id = 24\n// module chunks = 0","function DHXGantt(){\r\n\tthis.version = \"5.1.5\";\r\n\tthis.templates = {};\r\n\tthis.keys = {\r\n\t\tedit_save: 13,\r\n\t\tedit_cancel: 27\r\n\t};\r\n}\r\n\r\nmodule.exports = function() {\r\n\t// use a named constructor to make gantt instance discoverable in heap snapshots\r\n\tvar gantt = new DHXGantt();\r\n\r\n\trequire(\"./common/import\")(gantt);\r\n\r\n\tgantt.$services = gantt.$inject(require(\"./common/services\"));\r\n\tgantt.config = gantt.$inject(require(\"./common/config\"));\r\n\tgantt.ajax =  require(\"./common/ajax\")(gantt);\r\n\tgantt.date = require(\"./common/date\")(gantt);\r\n\tvar dnd = require(\"./common/dnd\")(gantt);\r\n\tgantt.$services.setService(\"dnd\", function(){return dnd;});\r\n\r\n\tgantt.$services.setService(\"config\", function () {\r\n\t\treturn gantt.config;\r\n\t});\r\n\tgantt.$services.setService(\"date\", function () {\r\n\t\treturn gantt.date;\r\n\t});\r\n\tgantt.$services.setService(\"locale\", function () {\r\n\t\treturn gantt.locale;\r\n\t});\r\n\tgantt.$services.setService(\"templates\", function () {\r\n\t\treturn gantt.templates;\r\n\t});\r\n\r\n\tvar templatesLoader = require(\"./common/templates\")(gantt);\r\n\tgantt.$services.setService(\"templateLoader\", function () {\r\n\t\treturn templatesLoader;\r\n\t});\r\n\r\n\tvar eventable = require(\"../utils/eventable\");\r\n\teventable(gantt);\r\n\r\n\tvar StateService = require(\"./common/state\");\r\n\tvar stateService = new StateService();\r\n\r\n\tstateService.registerProvider(\"global\", function () {\r\n\t\treturn {\r\n\t\t\tmin_date: gantt._min_date,\r\n\t\t\tmax_date: gantt._max_date,\r\n\t\t\tselected_task: gantt.$data.tasksStore.getSelectedId()\r\n\t\t};\r\n\t});\r\n\tgantt.getState = stateService.getState;\r\n\tgantt.$services.setService(\"state\", function () {\r\n\t\treturn stateService;\r\n\t});\r\n\r\n\tvar utils = require(\"../utils/utils\");\r\n\tutils.mixin(gantt, utils);\r\n\tgantt.env = require(\"../utils/env\");\r\n\r\n\tvar domEvents = require(\"../utils/dom_event_scope\")();\r\n\tgantt.event = domEvents.attach;\r\n\tgantt.eventRemove = domEvents.detach;\r\n\tgantt._eventRemoveAll = domEvents.detachAll;\r\n\tgantt._createDomEventScope = domEvents.extend;\r\n\r\n\tutils.mixin(gantt, require(\"./message\")(gantt));\r\n\tvar uiApi = require(\"./ui/index\").init(gantt);\r\n\tgantt.$ui = uiApi.factory;\r\n\tgantt.$ui.layers = uiApi.render;\r\n\tgantt.$mouseEvents = uiApi.mouseEvents;\r\n\tgantt.$services.setService(\"mouseEvents\", function () {\r\n\t\treturn gantt.$mouseEvents;\r\n\t});\r\n\tgantt.mixin(gantt, uiApi.layersApi);\r\n\r\n\trequire(\"./data_task_layers\")(gantt);\r\n\r\n\tgantt.$services.setService(\"layers\", function () {\r\n\t\treturn uiApi.layersService;\r\n\t});\r\n\r\n\tvar createLayoutFacade = require(\"./facades/layout\");\r\n\tgantt.mixin(gantt, createLayoutFacade());\r\n\r\n\trequire(\"./datastore/datastore_hooks\")(gantt);\r\n\r\n\trequire(\"./dataprocessor/hooks\")(gantt);\r\n\trequire(\"./plugins\")(gantt);\r\n\r\n\trequire(\"./dynamic_loading\")(gantt);\r\n\trequire(\"./grid_column_api\")(gantt);\r\n\trequire(\"./wai_aria\")(gantt);\r\n\trequire(\"./tasks\")(gantt);\r\n\trequire(\"./load\")(gantt);\r\n\trequire(\"./worktime/work_time\")(gantt);\r\n\trequire(\"./data\")(gantt);\r\n\trequire(\"./lightbox\")(gantt);\r\n\trequire(\"./lightbox_optional_time\")(gantt);\r\n\trequire(\"./data_task_types\")(gantt);\r\n\trequire(\"./cached_functions\")(gantt);\r\n\trequire(\"./skin\")(gantt);\r\n\trequire(\"../css/skins/skyblue\")(gantt);\r\n\trequire(\"../css/skins/meadow\")(gantt);\r\n\trequire(\"../css/skins/terrace\")(gantt);\r\n\trequire(\"../css/skins/broadway\")(gantt);\r\n\trequire(\"../css/skins/material\")(gantt);\r\n\trequire(\"../css/skins/contrast_black\")(gantt);\r\n\trequire(\"../css/skins/contrast_white\")(gantt);\r\n\trequire(\"./touch\")(gantt);\r\n\trequire(\"../locale/locale\")(gantt);\r\n\trequire(\"./gantt_core\")(gantt);\r\n\trequire(\"./destructor\")(gantt);\r\n\r\n\treturn gantt;\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/gantt.js\n// module id = 25\n// module chunks = 0","module.exports = function(gantt){\r\n\tgantt.$inject = function(module){\r\n\t\treturn module(this.$services);\r\n\t};\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/common/import.js\n// module id = 26\n// module chunks = 0","module.exports = function(){\r\n\tvar services = {};\r\n\tfunction register (name, getter){\r\n\t\tservices[name] = getter;\r\n\t}\r\n\r\n\tfunction getService(name){\r\n\t\tif(!services[name]){\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn services[name]();\r\n\t}\r\n\r\n\tvar servicesEnum = {\r\n\t\t\"config\": \"config\",\r\n\t\t\"templates\": \"templates\",\r\n\t\t\"locale\": \"locale\"\r\n\t};\r\n\r\n\treturn {\r\n\t\tservices: servicesEnum,\r\n\t\tsetService: register,\r\n\t\tgetService: getService,\r\n\t\tconfig: function(){\r\n\t\t\treturn this.getService(\"config\");\r\n\t\t},\r\n\t\ttemplates: function(){\r\n\t\t\treturn this.getService(\"templates\");\r\n\t\t},\r\n\t\tlocale: function(){\r\n\t\t\treturn this.getService(\"locale\");\r\n\t\t},\r\n\t\tdestructor: function(){\r\n\t\t\tfor(var i in services){\r\n\t\t\t\tif(services[i]){\r\n\t\t\t\t\tvar service = services[i];\r\n\t\t\t\t\tif(service && service.destructor){\r\n\t\t\t\t\t\tservice.destructor();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tservices = null;\r\n\t\t}\r\n\t};\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/common/services.js\n// module id = 27\n// module chunks = 0","module.exports = function() {\r\n\treturn {\r\n\t\tlayout: {\r\n\t\t\tcss: \"gantt_container\",\r\n\t\t\trows: [\r\n\t\t\t\t{\r\n\t\t\t\t\tcols: [\r\n\t\t\t\t\t\t{view: \"grid\", scrollX: \"scrollHor\", scrollY: \"scrollVer\"},\r\n\t\t\t\t\t\t{resizer: true, width: 1},\r\n\t\t\t\t\t\t{view: \"timeline\", scrollX: \"scrollHor\", scrollY: \"scrollVer\"},\r\n\t\t\t\t\t\t{view: \"scrollbar\", id: \"scrollVer\"}\r\n\t\t\t\t\t]\r\n\r\n\t\t\t\t},\r\n\t\t\t\t{view: \"scrollbar\", id: \"scrollHor\", height: 20}\r\n\t\t\t]\r\n\t\t},\r\n\t\tlinks: {\r\n\t\t\t\"finish_to_start\": \"0\",\r\n\t\t\t\"start_to_start\": \"1\",\r\n\t\t\t\"finish_to_finish\": \"2\",\r\n\t\t\t\"start_to_finish\": \"3\"\r\n\t\t},\r\n\t\ttypes: {\r\n\t\t\t'task': 'task',\r\n\t\t\t'project': 'project',\r\n\t\t\t'milestone': 'milestone'\r\n\t\t},\r\n\t\tduration_unit: \"day\",\r\n\t\twork_time: false,\r\n\t\tcorrect_work_time: false,\r\n\t\tskip_off_time: false,\r\n\r\n\t\tcascade_delete: true,\r\n\r\n\t\tautosize: false,\r\n\t\tautosize_min_width: 0,\r\n\t\tautoscroll: true,\r\n\t\tautoscroll_speed: 30,\r\n\r\n\t\tshow_links: true,\r\n\t\tshow_task_cells: true,\r\n\t\t// replace backgroung of the task area with a canvas img\r\n\t\tstatic_background: false,\r\n\t\tbranch_loading: false,\r\n\t\tbranch_loading_property: \"$has_child\",\r\n\t\tshow_loading: false,\r\n\t\tshow_chart: true,\r\n\t\tshow_grid: true,\r\n\t\tmin_duration: 60 * 60 * 1000,\r\n\t\txml_date: \"%d-%m-%Y %H:%i\",\r\n\t\tapi_date: \"%d-%m-%Y %H:%i\",\r\n\t\tstart_on_monday: true,\r\n\t\tserver_utc: false,\r\n\t\tshow_progress: true,\r\n\t\tfit_tasks: false,\r\n\t\tselect_task: true,\r\n\t\tscroll_on_click: true,\r\n\t\tpreserve_scroll: true,\r\n\t\treadonly: false,\r\n\r\n\t\t/*grid */\r\n\t\tdate_grid: \"%Y-%m-%d\",\r\n\r\n\t\tdrag_links: true,\r\n\t\tdrag_progress: true,\r\n\t\tdrag_resize: true,\r\n\t\tdrag_project: false,\r\n\t\tdrag_move: true,\r\n\t\tdrag_mode: {\r\n\t\t\t\"resize\": \"resize\",\r\n\t\t\t\"progress\": \"progress\",\r\n\t\t\t\"move\": \"move\",\r\n\t\t\t\"ignore\": \"ignore\"\r\n\t\t},\r\n\t\tround_dnd_dates: true,\r\n\t\tlink_wrapper_width: 20,\r\n\t\troot_id: 0,\r\n\r\n\t\tautofit: false, // grid column automatic fit grid_width config\r\n\t\tcolumns: [\r\n\t\t\t{name: \"text\", tree: true, width: '*', resize: true},\r\n\t\t\t{name: \"start_date\", align: \"center\", resize: true},\r\n\t\t\t{name: \"duration\", align: \"center\"},\r\n\t\t\t{name: \"add\", width: 44}\r\n\t\t],\r\n\r\n\t\t/*scale*/\r\n\t\tstep: 1,\r\n\t\tscale_unit: \"day\",\r\n\t\tscale_offset_minimal: true,\r\n\t\tsubscales: [],\r\n\r\n\t\tinherit_scale_class: false,\r\n\r\n\t\ttime_step: 60,\r\n\t\tduration_step: 1,\r\n\t\tdate_scale: \"%d %M\",\r\n\t\ttask_date: \"%d %F %Y\",\r\n\t\ttime_picker: \"%H:%i\",\r\n\t\ttask_attribute: \"task_id\",\r\n\t\tlink_attribute: \"link_id\",\r\n\t\tlayer_attribute: \"data-layer\",\r\n\t\tbuttons_left: [\r\n\t\t\t\"gantt_save_btn\",\r\n\t\t\t\"gantt_cancel_btn\"\r\n\t\t],\r\n\t\t_migrate_buttons: {\r\n\t\t\t\"dhx_save_btn\": \"gantt_save_btn\",\r\n\t\t\t\"dhx_cancel_btn\": \"gantt_cancel_btn\",\r\n\t\t\t\"dhx_delete_btn\": \"gantt_delete_btn\"\r\n\t\t},\r\n\t\tbuttons_right: [\r\n\t\t\t\"gantt_delete_btn\"\r\n\t\t],\r\n\t\tlightbox: {\r\n\t\t\tsections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"time\", type: \"duration\", map_to: \"auto\"}\r\n\t\t\t],\r\n\t\t\tproject_sections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"type\", type: \"typeselect\", map_to: \"type\"},\r\n\t\t\t\t{name: \"time\", type: \"duration\", readonly: true, map_to: \"auto\"}\r\n\t\t\t],\r\n\t\t\tmilestone_sections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"type\", type: \"typeselect\", map_to: \"type\"},\r\n\t\t\t\t{name: \"time\", type: \"duration\", single_date: true, map_to: \"auto\"}\r\n\t\t\t]\r\n\t\t},\r\n\t\tdrag_lightbox: true,\r\n\t\tsort: false,\r\n\t\tdetails_on_create: true,\r\n\t\tdetails_on_dblclick: true,\r\n\t\tinitial_scroll: true,\r\n\t\ttask_scroll_offset: 100,\r\n\r\n\t\torder_branch: false,\r\n\t\torder_branch_free: false,\r\n\r\n\t\ttask_height: \"full\",//number px of 'full' for row height\r\n\t\tmin_column_width: 70,\r\n\r\n\t\t// min width for grid column (when resizing)\r\n\t\tmin_grid_column_width: 70,\r\n\t\t// name of the attribute with column index for resize element\r\n\t\tgrid_resizer_column_attribute: \"column_index\",\r\n\t\t// name of the attribute with column index for resize element\r\n\t\tgrid_resizer_attribute: \"grid_resizer\",\r\n\r\n\t\t// grid width can be increased after the column has been resized\r\n\t\tkeep_grid_width: false,\r\n\r\n\t\t// grid width can be adjusted\r\n\t\tgrid_resize: false,\r\n\r\n\t\tshow_unscheduled: true,\r\n\r\n\t\t//\r\n\t\treadonly_property: \"readonly\",\r\n\t\teditable_property: \"editable\",\r\n\t\tcalendar_property: \"calendar_id\",\r\n\t\tresource_calendars: {},\r\n\r\n\t\ttype_renderers: {},\r\n\r\n\t\topen_tree_initially: false,\r\n\t\toptimize_render: true,\r\n\t\tprevent_default_scroll: false,\r\n\t\tshow_errors: true,\r\n\t\twai_aria_attributes: true,\r\n\t\tsmart_scales: true,\r\n\t\trtl:false\r\n\t};\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/common/config.js\n// module id = 28\n// module chunks = 0","var env = require(\"../../utils/env\");\r\n\r\nmodule.exports = function(gantt){\r\n\treturn {\r\n\r\n\t\t// if false - dhxr param will added to prevent caching on client side (default),\r\n\t\t// if true - do not add extra params\r\n\t\tcache: true,\r\n\r\n\t\t// default method for load/loadStruct, post/get allowed\r\n\t\t// get - since 4.1.1, this should fix 412 error for macos safari\r\n\t\tmethod: \"get\",\r\n\r\n\t\tparse: function(data) {\r\n\t\t\tif (typeof data !== \"string\") return data;\r\n\r\n\t\t\tvar obj;\r\n\t\t\tdata = data.replace(/^[\\s]+/,\"\");\r\n\t\t\tif (window.DOMParser && !env.isIE) { // ff,ie9\r\n\t\t\t\tobj = (new window.DOMParser()).parseFromString(data, \"text/xml\");\r\n\t\t\t} else if (window.ActiveXObject !== window.undefined) {\r\n\t\t\t\tobj = new window.ActiveXObject(\"Microsoft.XMLDOM\");\r\n\t\t\t\tobj.async = \"false\";\r\n\t\t\t\tobj.loadXML(data);\r\n\t\t\t}\r\n\t\t\treturn obj;\r\n\t\t},\r\n\t\txmltop: function(tagname, xhr, obj) {\r\n\t\t\tif (typeof xhr.status == \"undefined\" || xhr.status < 400) {\r\n\t\t\t\tvar xml = (!xhr.responseXML) ? this.parse(xhr.responseText || xhr) : (xhr.responseXML || xhr);\r\n\t\t\t\tif (xml && xml.documentElement !== null && !xml.getElementsByTagName(\"parsererror\").length) {\r\n\t\t\t\t\treturn xml.getElementsByTagName(tagname)[0];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (obj !== -1) gantt.callEvent(\"onLoadXMLError\",[\"Incorrect XML\", arguments[1], obj]);\r\n\t\t\treturn document.createElement(\"DIV\");\r\n\t\t},\r\n\t\txpath: function(xpathExp, docObj) {\r\n\t\t\tif (!docObj.nodeName) docObj = docObj.responseXML || docObj;\r\n\t\t\tif (env.isIE) {\r\n\t\t\t\treturn docObj.selectNodes(xpathExp)||[];\r\n\t\t\t} else {\r\n\t\t\t\tvar rows = [];\r\n\t\t\t\tvar first;\r\n\t\t\t\tvar col = (docObj.ownerDocument||docObj).evaluate(xpathExp, docObj, null, XPathResult.ANY_TYPE, null);\r\n\r\n\t\t\t\twhile (true){\r\n\t\t\t\t\tfirst = col.iterateNext();\r\n\t\t\t\t\tif(first){\r\n\t\t\t\t\t\trows.push(first);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn rows;\r\n\t\t\t}\r\n\t\t},\r\n\t\tquery: function(config) {\r\n\t\t\tthis._call(\r\n\t\t\t\t(config.method || \"GET\"),\r\n\t\t\t\tconfig.url,\r\n\t\t\t\tconfig.data || \"\",\r\n\t\t\t\t(config.async || true),\r\n\t\t\t\tconfig.callback,\r\n\t\t\t\tnull,\r\n\t\t\t\tconfig.headers\r\n\t\t\t);\r\n\t\t},\r\n\t\tget: function(url, onLoad) {\r\n\t\t\tthis._call(\"GET\", url, null, true, onLoad);\r\n\t\t},\r\n\t\tgetSync: function(url) {\r\n\t\t\treturn this._call(\"GET\", url, null, false);\r\n\t\t},\r\n\t\tput: function(url, postData, onLoad) {\r\n\t\t\tthis._call(\"PUT\", url, postData, true, onLoad);\r\n\t\t},\r\n\t\tdel: function(url, postData, onLoad) {\r\n\t\t\tthis._call(\"DELETE\", url, postData, true, onLoad);\r\n\t\t},\r\n\t\tpost: function(url, postData, onLoad) {\r\n\t\t\tif (arguments.length == 1) {\r\n\t\t\t\tpostData = \"\";\r\n\t\t\t} else if (arguments.length == 2 && (typeof(postData) == \"function\" || typeof(window[postData]) == \"function\")) {\r\n\t\t\t\tonLoad = postData;\r\n\t\t\t\tpostData = \"\";\r\n\t\t\t} else {\r\n\t\t\t\tpostData = String(postData);\r\n\t\t\t}\r\n\t\t\tthis._call(\"POST\", url, postData, true, onLoad);\r\n\t\t},\r\n\t\tpostSync: function(url, postData) {\r\n\t\t\tpostData = (postData === null ? \"\" : String(postData));\r\n\t\t\treturn this._call(\"POST\", url, postData, false);\r\n\t\t},\r\n\t\tgetLong: function(url, onLoad) {\r\n\t\t\tthis._call(\"GET\", url, null, true, onLoad, {url:url});\r\n\t\t},\r\n\t\tpostLong: function(url, postData, onLoad) {\r\n\t\t\tif (arguments.length == 2 && (typeof(postData) == \"function\" || typeof(window[postData]))) {\r\n\t\t\t\tonLoad = postData;\r\n\t\t\t\tpostData = \"\";\r\n\t\t\t}\r\n\t\t\tthis._call(\"POST\", url, postData, true, onLoad, {url:url, postData:postData});\r\n\t\t},\r\n\t\t_call: function(method, url, postData, async, onLoad, longParams, headers) {\r\n\r\n\t\t\tvar t = (window.XMLHttpRequest && !env.isIE ? new XMLHttpRequest() : new ActiveXObject(\"Microsoft.XMLHTTP\"));\r\n\t\t\tvar isQt = (navigator.userAgent.match(/AppleWebKit/) !== null && navigator.userAgent.match(/Qt/) !== null && navigator.userAgent.match(/Safari/) !== null);\r\n\r\n\t\t\tif (!!async) {\r\n\t\t\t\tt.onreadystatechange = function() {\r\n\t\t\t\t\tif ((t.readyState == 4) || (isQt && t.readyState == 3)) { // what for long response and status 404?\r\n\t\t\t\t\t\tif (t.status != 200 || t.responseText === \"\")\r\n\t\t\t\t\t\t\tif (!gantt.callEvent(\"onAjaxError\", [t])) return;\r\n\r\n\t\t\t\t\t\twindow.setTimeout(function(){\r\n\t\t\t\t\t\t\tif (typeof(onLoad) == \"function\") {\r\n\t\t\t\t\t\t\t\tonLoad.apply(window, [{xmlDoc:t, filePath:url}]); // dhtmlx-compat, response.xmlDoc.responseXML/responseText\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (longParams) {\r\n\t\t\t\t\t\t\t\tif (typeof(longParams.postData) != \"undefined\") {\r\n\t\t\t\t\t\t\t\t\tthis.postLong(longParams.url, longParams.postData, onLoad);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.getLong(longParams.url, onLoad);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonLoad = null;\r\n\t\t\t\t\t\t\tt = null;\r\n\t\t\t\t\t\t},1);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tif (method == \"GET\" && !this.cache) {\r\n\t\t\t\turl += (url.indexOf(\"?\")>=0?\"&\":\"?\")+\"dhxr\"+new Date().getTime()+\"=1\";\r\n\t\t\t}\r\n\r\n\t\t\tt.open(method, url, async);\r\n\r\n\t\t\tif (headers){\r\n\t\t\t\tfor (var key in headers)\r\n\t\t\t\t\tt.setRequestHeader(key, headers[key]);\r\n\t\t\t} else if (method.toUpperCase() == \"POST\" || method == \"PUT\" || method == \"DELETE\") {\r\n\t\t\t\tt.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n\t\t\t} else if (method == \"GET\") {\r\n\t\t\t\tpostData = null;\r\n\t\t\t}\r\n\r\n\t\t\tt.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\r\n\r\n\t\t\tt.send(postData);\r\n\r\n\t\t\tif (!async) return {xmlDoc:t, filePath:url}; // dhtmlx-compat, response.xmlDoc.responseXML/responseText\r\n\r\n\t\t},\r\n\t\turlSeparator: function(str){\r\n\t\t\tif (str.indexOf(\"?\") != -1)\r\n\t\t\t\treturn \"&\";\r\n\t\t\telse\r\n\t\t\t\treturn \"?\";\r\n\t\t}\r\n\t};\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/common/ajax.js\n// module id = 29\n// module chunks = 0","/*\r\n %d - the day as a number with a leading zero ( 01 to 31 );\r\n %j - the day as a number without a leading zero ( 1 to 31 );\r\n %D - the day as an abbreviation ( Sun to Sat );\r\n %l - the day as a full name ( Sunday to Saturday );\r\n %W - the ISO-8601 week number of the year. Weeks start on Monday; 1)\r\n %m - the month as a number without a leading zero ( 1 to 12 );\r\n %n - the month as a number with a leading zero ( 01 to 12);\r\n %M - the month as an abbreviation ( Jan to Dec );\r\n %F - the month as a full name ( January to December );\r\n %y - the year as a two-digit number ( 00 to 99 );\r\n %Y - the year as a four-digit number ( 19009999 );\r\n %h - the hour based on the 12-hour clock ( 00 to 11 );\r\n %H - the hour based on the 24-hour clock ( 00 to 23 );\r\n %i - the minute as a number with a leading zero ( 00 to 59 );\r\n %s - the second as a number without a leading zero ( 00 to 59 ); 2)\r\n %a - displays am (for times from midnight until noon) and pm (for times from noon until midnight);\r\n %A - displays AM (for times from midnight until noon) and PM (for times from noon until midnight).\r\n*/\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar dateHelper = {\r\n\t\tinit: function () {\r\n\t\t\tvar locale = gantt.locale;\r\n\r\n\t\t\tvar s = locale.date.month_short;\r\n\t\t\tvar t = locale.date.month_short_hash = {};\r\n\t\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\t\tt[s[i]] = i;\r\n\r\n\t\t\tvar s = locale.date.month_full;\r\n\t\t\tvar t = locale.date.month_full_hash = {};\r\n\t\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\t\tt[s[i]] = i;\r\n\t\t},\r\n\t\tdate_part: function (date) {\r\n\t\t\tvar old = new Date(date);\r\n\t\t\tdate.setHours(0);\r\n\t\t\tthis.hour_start(date);\r\n\t\t\tif (date.getHours() && //shift to yesterday on dst\r\n\t\t\t\t(date.getDate() < old.getDate() || date.getMonth() < old.getMonth() || date.getFullYear() < old.getFullYear()))\r\n\t\t\t\tdate.setTime(date.getTime() + 60 * 60 * 1000 * (24 - date.getHours()));\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\ttime_part: function (date) {\r\n\t\t\treturn (date.valueOf() / 1000 - date.getTimezoneOffset() * 60) % 86400;\r\n\t\t},\r\n\t\tweek_start: function (date) {\r\n\t\t\tvar shift = date.getDay();\r\n\t\t\tif (gantt.config.start_on_monday) {\r\n\t\t\t\tif (shift === 0) shift = 6;\r\n\t\t\t\telse shift--;\r\n\t\t\t}\r\n\t\t\treturn this.date_part(this.add(date, -1 * shift, \"day\"));\r\n\t\t},\r\n\t\tmonth_start: function (date) {\r\n\t\t\tdate.setDate(1);\r\n\t\t\treturn this.date_part(date);\r\n\t\t},\r\n\t\tquarter_start: function (date) {\r\n\t\t\tthis.month_start(date);\r\n\t\t\tvar m = date.getMonth(),\r\n\t\t\t\tres_month;\r\n\r\n\t\t\tif (m >= 9) {\r\n\t\t\t\tres_month = 9;\r\n\t\t\t} else if (m >= 6) {\r\n\t\t\t\tres_month = 6;\r\n\t\t\t} else if (m >= 3) {\r\n\t\t\t\tres_month = 3;\r\n\t\t\t} else {\r\n\t\t\t\tres_month = 0;\r\n\t\t\t}\r\n\r\n\t\t\tdate.setMonth(res_month);\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\tyear_start: function (date) {\r\n\t\t\tdate.setMonth(0);\r\n\t\t\treturn this.month_start(date);\r\n\t\t},\r\n\t\tday_start: function (date) {\r\n\t\t\treturn this.date_part(date);\r\n\t\t},\r\n\t\thour_start: function (date) {\r\n\t\t\tif (date.getMinutes())\r\n\t\t\t\tdate.setMinutes(0);\r\n\t\t\tthis.minute_start(date);\r\n\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\tminute_start: function (date) {\r\n\t\t\tif (date.getSeconds())\r\n\t\t\t\tdate.setSeconds(0);\r\n\t\t\tif (date.getMilliseconds())\r\n\t\t\t\tdate.setMilliseconds(0);\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\t_add_days: function (date, inc) {\r\n\t\t\tvar ndate = new Date(date.valueOf());\r\n\r\n\t\t\tndate.setDate(ndate.getDate() + inc);\r\n\t\t\tif (inc >= 0 && (!date.getHours() && ndate.getHours()) &&//shift to yesterday on dst\r\n\t\t\t\t(ndate.getDate() <= date.getDate() || ndate.getMonth() < date.getMonth() || ndate.getFullYear() < date.getFullYear()))\r\n\t\t\t\tndate.setTime(ndate.getTime() + 60 * 60 * 1000 * (24 - ndate.getHours()));\r\n\t\t\treturn ndate;\r\n\t\t},\r\n\r\n\t\tadd: function (date, inc, mode) {\r\n\t\t\t/*jsl:ignore*/\r\n\t\t\tvar ndate = new Date(date.valueOf());\r\n\t\t\tswitch (mode) {\r\n\t\t\t\tcase \"day\":\r\n\t\t\t\t\tndate = this._add_days(ndate, inc);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"week\":\r\n\t\t\t\t\tndate = this._add_days(ndate, inc * 7);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"month\":\r\n\t\t\t\t\tndate.setMonth(ndate.getMonth() + inc);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"year\":\r\n\t\t\t\t\tndate.setYear(ndate.getFullYear() + inc);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"hour\":\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t\tadding hours/minutes via setHour(getHour() + inc) gives weird result when\r\n\t\t\t\t\t\tadding one hour to the time before switch to a Daylight Saving time\r\n\r\n\t\t\t\t\t\texample: //Sun Mar 30 2014 01:00:00 GMT+0100 (W. Europe Standard Time)\r\n\t\t\t\t\t\tnew Date(2014, 02, 30, 1).setHours(2)\r\n\t\t\t\t\t\t>>Sun Mar 30 2014 01:00:00 GMT+0100 (W. Europe Standard Time)\r\n\r\n\t\t\t\t\t\tsetTime seems working as expected\r\n\t\t\t\t\t */\r\n\t\t\t\t\tndate.setTime(ndate.getTime() + inc * 60 * 60 * 1000);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"minute\":\r\n\r\n\t\t\t\t\tndate.setTime(ndate.getTime() + inc * 60 * 1000);\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn this[\"add_\" + mode](date, inc, mode);\r\n\t\t\t}\r\n\t\t\treturn ndate;\r\n\t\t\t/*jsl:end*/\r\n\t\t},\r\n\t\tadd_quarter: function (date, inc) {\r\n\t\t\treturn this.add(date, inc * 3, \"month\");\r\n\t\t},\r\n\r\n\t\tto_fixed: function (num) {\r\n\t\t\tif (num < 10) return \"0\" + num;\r\n\t\t\treturn num;\r\n\t\t},\r\n\t\tcopy: function (date) {\r\n\t\t\treturn new Date(date.valueOf());\r\n\t\t},\r\n\t\tdate_to_str: function (format, utc) {\r\n\t\t\tformat = format.replace(/%[a-zA-Z]/g, function (a) {\r\n\t\t\t\tswitch (a) {\r\n\t\t\t\t\tcase \"%d\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getDate())+\\\"\";\r\n\t\t\t\t\tcase \"%m\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed((date.getMonth()+1))+\\\"\";\r\n\t\t\t\t\tcase \"%j\":\r\n\t\t\t\t\t\treturn \"\\\"+date.getDate()+\\\"\";\r\n\t\t\t\t\tcase \"%n\":\r\n\t\t\t\t\t\treturn \"\\\"+(date.getMonth()+1)+\\\"\";\r\n\t\t\t\t\tcase \"%y\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getFullYear()%100)+\\\"\";\r\n\t\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\t\treturn \"\\\"+date.getFullYear()+\\\"\";\r\n\t\t\t\t\tcase \"%D\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.day_short[date.getDay()]+\\\"\";\r\n\t\t\t\t\tcase \"%l\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.day_full[date.getDay()]+\\\"\";\r\n\t\t\t\t\tcase \"%M\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.month_short[date.getMonth()]+\\\"\";\r\n\t\t\t\t\tcase \"%F\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.month_full[date.getMonth()]+\\\"\";\r\n\t\t\t\t\tcase \"%h\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed((date.getHours()+11)%12+1)+\\\"\";\r\n\t\t\t\t\tcase \"%g\":\r\n\t\t\t\t\t\treturn \"\\\"+((date.getHours()+11)%12+1)+\\\"\";\r\n\t\t\t\t\tcase \"%G\":\r\n\t\t\t\t\t\treturn \"\\\"+date.getHours()+\\\"\";\r\n\t\t\t\t\tcase \"%H\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getHours())+\\\"\";\r\n\t\t\t\t\tcase \"%i\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getMinutes())+\\\"\";\r\n\t\t\t\t\tcase \"%a\":\r\n\t\t\t\t\t\treturn \"\\\"+(date.getHours()>11?\\\"pm\\\":\\\"am\\\")+\\\"\";\r\n\t\t\t\t\tcase \"%A\":\r\n\t\t\t\t\t\treturn \"\\\"+(date.getHours()>11?\\\"PM\\\":\\\"AM\\\")+\\\"\";\r\n\t\t\t\t\tcase \"%s\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getSeconds())+\\\"\";\r\n\t\t\t\t\tcase \"%W\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(getISOWeek(date))+\\\"\";\r\n\t\t\t\t\tcase \"%w\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(getWeek(date))+\\\"\";\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn a;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (utc) format = format.replace(/date\\.get/g, \"date.getUTC\");\r\n\t\t\tvar dateToStr = new Function(\"date\", \"to_fixed\", \"locale\", \"getISOWeek\", \"getWeek\", \"return \\\"\" + format + \"\\\";\");\r\n\r\n\t\t\treturn function (date) {\r\n\t\t\t\treturn dateToStr(date, dateHelper.to_fixed, gantt.locale, dateHelper.getISOWeek, dateHelper.getWeek);\r\n\t\t\t};\r\n\t\t},\r\n\t\tstr_to_date: function (format, utc) {\r\n\t\t\tvar splt = \"var temp=date.match(/[a-zA-Z]+|[0-9]+/g);\";\r\n\t\t\tvar mask = format.match(/%[a-zA-Z]/g);\r\n\t\t\tfor (var i = 0; i < mask.length; i++) {\r\n\t\t\t\tswitch (mask[i]) {\r\n\t\t\t\t\tcase \"%j\":\r\n\t\t\t\t\tcase \"%d\":\r\n\t\t\t\t\t\tsplt += \"set[2]=temp[\" + i + \"]||1;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%n\":\r\n\t\t\t\t\tcase \"%m\":\r\n\t\t\t\t\t\tsplt += \"set[1]=(temp[\" + i + \"]||1)-1;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%y\":\r\n\t\t\t\t\t\tsplt += \"set[0]=temp[\" + i + \"]*1+(temp[\" + i + \"]>50?1900:2000);\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%g\":\r\n\t\t\t\t\tcase \"%G\":\r\n\t\t\t\t\tcase \"%h\":\r\n\t\t\t\t\tcase \"%H\":\r\n\t\t\t\t\t\tsplt += \"set[3]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%i\":\r\n\t\t\t\t\t\tsplt += \"set[4]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\t\tsplt += \"set[0]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%a\":\r\n\t\t\t\t\tcase \"%A\":\r\n\t\t\t\t\t\tsplt += \"set[3]=set[3]%12+((temp[\" + i + \"]||'').toLowerCase()=='am'?0:12);\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%s\":\r\n\t\t\t\t\t\tsplt += \"set[5]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%M\":\r\n\t\t\t\t\t\tsplt += \"set[1]=locale.date.month_short_hash[temp[\" + i + \"]]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%F\":\r\n\t\t\t\t\t\tsplt += \"set[1]=locale.date.month_full_hash[temp[\" + i + \"]]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar code = \"set[0],set[1],set[2],set[3],set[4],set[5]\";\r\n\t\t\tif (utc) code = \" Date.UTC(\" + code + \")\";\r\n\t\t\tvar strToDate = new Function(\"date\", \"locale\", \"var set=[0,0,1,0,0,0]; \" + splt + \" return new Date(\" + code + \");\");\r\n\r\n\t\t\treturn function (dateString) {\r\n\t\t\t\treturn strToDate(dateString, gantt.locale);\r\n\t\t\t};\r\n\t\t},\r\n\t\tgetISOWeek: function (ndate) {\r\n\t\t\treturn gantt.date._getWeekNumber(ndate, true);\r\n\t\t},\r\n\t\t_getWeekNumber: function(ndate, isoWeek){\r\n\t\t\tif (!ndate) return false;\r\n\t\t\tvar nday = ndate.getDay();\r\n\t\t\tif(isoWeek){\r\n\t\t\t\tif (nday === 0) {\r\n\t\t\t\t\tnday = 7;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar first_thursday = new Date(ndate.valueOf());\r\n\t\t\tfirst_thursday.setDate(ndate.getDate() + (4 - nday));\r\n\t\t\tvar year_number = first_thursday.getFullYear(); // year of the first Thursday\r\n\t\t\tvar ordinal_date = Math.round((first_thursday.getTime() - new Date(year_number, 0, 1).getTime()) / 86400000); //ordinal date of the first Thursday - 1 (so not really ordinal date)\r\n\t\t\tvar week_number = 1 + Math.floor(ordinal_date / 7);\r\n\t\t\treturn week_number;\r\n\t\t},\r\n\r\n\t\tgetWeek: function(ndate){\r\n\t\t\treturn gantt.date._getWeekNumber(ndate, gantt.config.start_on_monday);\r\n\t\t},\r\n\t\tgetUTCISOWeek: function (ndate) {\r\n\t\t\treturn gantt.date.getISOWeek(ndate);\r\n\t\t},\r\n\t\tconvert_to_utc: function (date) {\r\n\t\t\treturn new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds());\r\n\t\t},\r\n\t\tparseDate: function (date, format) {\r\n\t\t\t// raw date may be of type string, number (timestamp) or something else\r\n\t\t\t// do not check for instanceof Date explicitly, since we may swap native date with different date implementation at some point\r\n\t\t\tif (date && !date.getFullYear) {\r\n\t\t\t\tif (gantt.defined(format)) {\r\n\t\t\t\t\tif (typeof(format) == \"string\")\r\n\t\t\t\t\t\tformat = gantt.defined(gantt.templates[format]) ? gantt.templates[format] : gantt.date.str_to_date(format);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tformat = gantt.templates.xml_date;\r\n\t\t\t\t}\r\n\t\t\t\tif (date)\r\n\t\t\t\t\tdate = format(date);\r\n\t\t\t\telse\r\n\t\t\t\t\tdate = null;\r\n\t\t\t}\r\n\t\t\treturn date;\r\n\t\t}\r\n\t};\r\n\treturn dateHelper;\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/common/date.js\n// module id = 30\n// module chunks = 0","var eventable = require(\"../../utils/eventable\");\r\nvar utils = require(\"../../utils/utils\");\r\nvar timeout = require(\"../../utils/timeout\");\r\n\r\nmodule.exports = function(gantt){\r\n\r\n\tfunction copyDomEvent(e){\r\n\t\treturn {\r\n\t\t\ttarget: e.target || e.srcElement,\r\n\t\t\tpageX: e.pageX,\r\n\t\t\tpageY: e.pageY,\r\n\t\t\tclientX: e.clientX,\r\n\t\t\tclientY: e.clientY,\r\n\t\t\tmetaKey: e.metaKey,\r\n\t\t\tshiftKey: e.shiftKey,\r\n\t\t\tctrlKey: e.ctrlKey,\r\n\t\t\taltKey: e.altKey\r\n\t\t};\r\n\t}\r\n\r\n\tfunction DnD(obj, config) {\r\n\t\tthis._obj = obj;\r\n\t\tthis._settings = config || {};\r\n\t\teventable(this);\r\n\r\n\t\tvar inputMethods = this.getInputMethods();\r\n\r\n\t\tthis._drag_start_timer = null;\r\n\t\tgantt.attachEvent(\"onGanttScroll\", utils.bind(function (left, top) {\r\n\t\t\tthis.clearDragTimer();\r\n\t\t}, this));\r\n\r\n\t\tfor(var i = 0; i < inputMethods.length; i++){\r\n\t\t\t(utils.bind(function(input){\r\n\r\n\t\t\t\tgantt.event(obj, input.down, utils.bind(function (e) {\r\n\t\t\t\t\tif(!input.accessor(e)){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis._settings.original_target = copyDomEvent(e);\r\n\r\n\t\t\t\t\tif (gantt.config.touch) {\r\n\t\t\t\t\t\tthis.clearDragTimer();\r\n\r\n\t\t\t\t\t\tthis._drag_start_timer = setTimeout(utils.bind(function () {\r\n\t\t\t\t\t\t\tthis.dragStart(obj, e, input);\r\n\t\t\t\t\t\t}, this), gantt.config.touch_drag);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.dragStart(obj, e, input);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this));\r\n\r\n\t\t\t\tgantt.event(document.body, input.up, utils.bind(function (e) {\r\n\t\t\t\t\tif(!input.accessor(e)){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.clearDragTimer();\r\n\t\t\t\t}, this));\r\n\r\n\t\t\t}, this))(inputMethods[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tDnD.prototype = {\r\n\t\ttraceDragEvents: function (domElement, inputMethod) {\r\n\t\t\tvar mousemove = utils.bind(function (e) {\r\n\t\t\t\treturn this.dragMove(domElement, e, inputMethod.accessor);\r\n\t\t\t}, this);\r\n\t\t\tvar scroll = utils.bind(function (e) {\r\n\t\t\t\treturn this.dragScroll(domElement, e);\r\n\t\t\t}, this);\r\n\r\n\t\t\tvar limited_mousemove = utils.bind(function (e) {\r\n\t\t\t\tif (e && e.preventDefault) //Cancel default action on DND\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t(e || event).cancelBubble = true;\r\n\t\t\t\tif (utils.defined(this.config.updates_per_second)) {\r\n\t\t\t\t\tif (!timeout(this, this.config.updates_per_second))\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn mousemove(e);\r\n\t\t\t}, this);\r\n\r\n\t\t\tvar mouseup = utils.bind(function (e) {\r\n\t\t\t\tgantt.eventRemove(document.body, inputMethod.move, limited_mousemove);\r\n\t\t\t\tgantt.eventRemove(document.body, inputMethod.up, mouseup);\r\n\t\t\t\treturn this.dragEnd(domElement);\r\n\t\t\t}, this);\r\n\r\n\r\n\t\t\tgantt.event(document.body, inputMethod.move, limited_mousemove);\r\n\t\t\tgantt.event(document.body, inputMethod.up, mouseup);\r\n\t\t},\r\n\t\tcheckPositionChange: function (pos) {\r\n\t\t\tvar diff_x = pos.x - this.config.pos.x;\r\n\t\t\tvar diff_y = pos.y - this.config.pos.y;\r\n\t\t\tvar distance = Math.sqrt(Math.pow(Math.abs(diff_x), 2) + Math.pow(Math.abs(diff_y), 2));\r\n\r\n\t\t\tif (distance > this.config.sensitivity) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tinitDnDMarker: function () {\r\n\t\t\t// create dnd placeholder and put it in dom\r\n\t\t\tvar marker = this.config.marker = document.createElement(\"div\");\r\n\t\t\tmarker.className = \"gantt_drag_marker\";\r\n\t\t\tmarker.innerHTML = \"Dragging object\";\r\n\t\t\tdocument.body.appendChild(marker);\r\n\t\t},\r\n\t\tbackupEventTarget: function (domEvent, getEvent) {\r\n\t\t\tif (!gantt.config.touch) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// keep original event target in DOM in order to keep dnd on touchmove event\r\n\t\t\tvar e = getEvent(domEvent);\r\n\r\n\t\t\tvar el = e.target || e.srcElement;\r\n\t\t\tvar copy = el.cloneNode(true);\r\n\t\t\t//this.config.target.target = copy;\r\n\t\t\tthis.config.original_target = copyDomEvent(e);\r\n\t\t\tthis.config.original_target.target = copy;\r\n\t\t\tthis.config.backup_element = el;\r\n\t\t\tel.parentNode.appendChild(copy);\r\n\r\n\t\t\tel.style.display = \"none\";\r\n\t\t\tdocument.body.appendChild(el);\r\n\t\t},\r\n\t\tgetInputMethods: function () {\r\n\t\t\t// bind actions to browser events\r\n\t\t\tvar inputMethods = [];\r\n\r\n\t\t\tinputMethods.push({\r\n\t\t\t\t\"move\": \"mousemove\",\r\n\t\t\t\t\"down\": \"mousedown\",\r\n\t\t\t\t\"up\": \"mouseup\",\r\n\t\t\t\t\"accessor\": function (e) {\r\n\t\t\t\t\treturn e;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (gantt.config.touch) {\r\n\r\n\t\t\t\tvar touchEventsSupported = true;\r\n\t\t\t\ttry{\r\n\t\t\t\t\tdocument.createEvent(\"TouchEvent\");\r\n\t\t\t\t}catch (e){\r\n\t\t\t\t\ttouchEventsSupported = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(touchEventsSupported){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"touchmove\",\r\n\t\t\t\t\t\t\"down\": \"touchstart\",\r\n\t\t\t\t\t\t\"up\": \"touchend\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.touches && ev.touches.length > 1) return null;\r\n\t\t\t\t\t\t\tif (ev.touches[0])\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\ttarget: document.elementFromPoint(ev.touches[0].clientX, ev.touches[0].clientY),\r\n\t\t\t\t\t\t\t\t\tpageX: ev.touches[0].pageX,\r\n\t\t\t\t\t\t\t\t\tpageY: ev.touches[0].pageY,\r\n\t\t\t\t\t\t\t\t\tclientX: ev.touches[0].clientX,\r\n\t\t\t\t\t\t\t\t\tclientY: ev.touches[0].clientY\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}else if(window.navigator.pointerEnabled){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"pointermove\",\r\n\t\t\t\t\t\t\"down\": \"pointerdown\",\r\n\t\t\t\t\t\t\"up\": \"pointerup\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.pointerType == \"mouse\") return null;\r\n\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}else if (window.navigator.msPointerEnabled){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"MSPointerMove\",\r\n\t\t\t\t\t\t\"down\": \"MSPointerDown\",\r\n\t\t\t\t\t\t\"up\": \"MSPointerUp\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.pointerType == ev.MSPOINTER_TYPE_MOUSE) return null;\r\n\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn inputMethods;\r\n\t\t},\r\n\t\tclearDragTimer: function () {\r\n\t\t\tif (this._drag_start_timer) {\r\n\t\t\t\tclearTimeout(this._drag_start_timer);\r\n\t\t\t\tthis._drag_start_timer = null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tdragStart: function (obj, e, inputMethod) {\r\n\t\t\tthis.config = {\r\n\t\t\t\tobj: obj,\r\n\t\t\t\tmarker: null,\r\n\t\t\t\tstarted: false,\r\n\t\t\t\tpos: this.getPosition(e),\r\n\t\t\t\tsensitivity: 4\r\n\t\t\t};\r\n\t\t\tif (this._settings)\r\n\t\t\t\tutils.mixin(this.config, this._settings, true);\r\n\r\n\r\n\t\t\tthis.traceDragEvents(obj, inputMethod);\r\n\r\n\t\t\tgantt._prevent_touch_scroll = true;\r\n\t\t\tdocument.body.className += \" gantt_noselect\";\r\n\r\n\t\t\tif (gantt.config.touch) {\r\n\t\t\t\tthis.dragMove(obj, e, inputMethod.accessor);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tdragMove: function (obj, e, getEvent) {\r\n\t\t\tvar source = getEvent(e);\r\n\t\t\tif (!source) return;\r\n\r\n\t\t\tif (!this.config.marker && !this.config.started) {\r\n\t\t\t\tvar pos = this.getPosition(source);\r\n\r\n\t\t\t\tif (gantt.config.touch || this.checkPositionChange(pos)) {\r\n\t\t\t\t\t// real drag starts here,\r\n\t\t\t\t\t// when user moves mouse at first time after onmousedown\r\n\t\t\t\t\tthis.config.started = true;\r\n\t\t\t\t\tthis.config.ignore = false;\r\n\t\t\t\t\tif (this.callEvent(\"onBeforeDragStart\", [obj, this.config.original_target]) === false) {\r\n\t\t\t\t\t\tthis.config.ignore = true;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.backupEventTarget(e, getEvent);\r\n\t\t\t\t\tthis.initDnDMarker();\r\n\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t\tthis.callEvent(\"onAfterDragStart\", [obj, this.config.original_target]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.config.ignore = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (!this.config.ignore) {\r\n\t\t\t\tsource.pos = this.getPosition(source);\r\n\t\t\t\tthis.config.marker.style.left = source.pos.x + \"px\";\r\n\t\t\t\tthis.config.marker.style.top = source.pos.y + \"px\";\r\n\t\t\t\tthis.callEvent(\"onDragMove\", [obj, source]);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tdragEnd: function (obj) {\r\n\t\t\tvar target = this.config.backup_element;\r\n\t\t\tif (target && target.parentNode) {\r\n\t\t\t\ttarget.parentNode.removeChild(target);\r\n\t\t\t}\r\n\t\t\tgantt._prevent_touch_scroll = false;\r\n\t\t\tif (this.config.marker) {\r\n\t\t\t\tthis.config.marker.parentNode.removeChild(this.config.marker);\r\n\t\t\t\tthis.config.marker = null;\r\n\r\n\t\t\t\tthis.callEvent(\"onDragEnd\", []);\r\n\t\t\t}\r\n\t\t\tdocument.body.className = document.body.className.replace(\" gantt_noselect\", \"\");\r\n\t\t},\r\n\r\n\t\tgetPosition: function (e) {\r\n\t\t\tvar x = 0, y = 0;\r\n\t\t\te = e || window.event;\r\n\t\t\tif (e.pageX || e.pageY) {\r\n\t\t\t\tx = e.pageX;\r\n\t\t\t\ty = e.pageY;\r\n\t\t\t} else if (e.clientX || e.clientY) {\r\n\t\t\t\tx = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\r\n\t\t\t\ty = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;\r\n\t\t\t}\r\n\t\t\treturn {x: x, y: y};\r\n\t\t}\r\n\t};\r\n\r\n\treturn DnD;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/common/dnd.js\n// module id = 31\n// module chunks = 0","module.exports = function(gantt) {\r\n\r\n\tvar regTemplates = {};\r\n\r\n\tfunction initTemplate(name, initial, template_name) {\r\n\t\ttemplate_name = template_name || name;\r\n\t\tvar config = gantt.config,\r\n\t\t\ttemplates = gantt.templates;\r\n\r\n\t\tif (gantt.config[name] && regTemplates[template_name] != config[name]) {\r\n\t\t\tif (!(initial && templates[template_name])) {\r\n\t\t\t\ttemplates[template_name] = gantt.date.date_to_str(config[name]);\r\n\t\t\t\tregTemplates[template_name] = config[name];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction initTemplates() {\r\n\t\tvar labels = gantt.locale.labels;\r\n\t\tlabels.gantt_save_btn = labels.icon_save;\r\n\t\tlabels.gantt_cancel_btn = labels.icon_cancel;\r\n\t\tlabels.gantt_delete_btn = labels.icon_delete;\r\n\r\n\r\n\t\tvar date = gantt.date;\r\n\r\n\t\t//build configuration based templates\r\n\t\tvar d = date.date_to_str;\r\n\t\tvar c = gantt.config;\r\n\t\tinitTemplate(\"date_scale\", true, undefined, gantt.config, gantt.templates);\r\n\t\tinitTemplate(\"date_grid\", true, \"grid_date_format\", gantt.config, gantt.templates);\r\n\t\tinitTemplate(\"task_date\", true, undefined, gantt.config, gantt.templates);\r\n\r\n\t\tgantt.mixin(gantt.templates, {\r\n\t\t\txml_date: date.str_to_date(c.xml_date, c.server_utc),\r\n\t\t\txml_format: d(c.xml_date, c.server_utc),\r\n\t\t\tapi_date: date.str_to_date(c.api_date),\r\n\t\t\tprogress_text: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tgrid_header_class: function (column, config) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\ttask_text: function (start, end, task) {\r\n\t\t\t\treturn task.text;\r\n\t\t\t},\r\n\t\t\ttask_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tgrid_row_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\ttask_row_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\ttask_cell_class: function (item, date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tscale_cell_class: function (date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tscale_row_class: function (date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\tgrid_indent: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_indent'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_folder: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_folder_\" + (item.$open ? \"open\" : \"closed\") + \"'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_file: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_file'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_open: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_\" + (item.$open ? \"close\" : \"open\") + \"'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_blank: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_blank'></div>\";\r\n\t\t\t},\r\n\t\t\tdate_grid: function (date, item) {\r\n\t\t\t\tif (item && gantt.isUnscheduledTask(item) && gantt.config.show_unscheduled) {\r\n\t\t\t\t\treturn gantt.templates.task_unscheduled_time(item);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn gantt.templates.grid_date_format(date);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\ttask_time: function (start, end, ev) {\r\n\t\t\t\tif (gantt.isUnscheduledTask(ev) && gantt.config.show_unscheduled) {\r\n\t\t\t\t\treturn gantt.templates.task_unscheduled_time(ev);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn gantt.templates.task_date(start) + \" - \" + gantt.templates.task_date(end);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\ttask_unscheduled_time: function (task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\ttime_picker: d(c.time_picker),\r\n\t\t\tlink_class: function (link) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tlink_description: function (link) {\r\n\t\t\t\tvar from = gantt.getTask(link.source),\r\n\t\t\t\t\tto = gantt.getTask(link.target);\r\n\r\n\t\t\t\treturn \"<b>\" + from.text + \"</b> &ndash;  <b>\" + to.text + \"</b>\";\r\n\t\t\t},\r\n\r\n\t\t\tdrag_link: function (from, from_start, to, to_start) {\r\n\t\t\t\tfrom = gantt.getTask(from);\r\n\t\t\t\tvar labels = gantt.locale.labels;\r\n\r\n\t\t\t\tvar text = \"<b>\" + from.text + \"</b> \" + (from_start ? labels.link_start : labels.link_end) + \"<br/>\";\r\n\t\t\t\tif (to) {\r\n\t\t\t\t\tto = gantt.getTask(to);\r\n\t\t\t\t\ttext += \"<b> \" + to.text + \"</b> \" + (to_start ? labels.link_start : labels.link_end) + \"<br/>\";\r\n\t\t\t\t}\r\n\t\t\t\treturn text;\r\n\t\t\t},\r\n\t\t\tdrag_link_class: function (from, from_start, to, to_start) {\r\n\t\t\t\tvar add = \"\";\r\n\r\n\t\t\t\tif (from && to) {\r\n\t\t\t\t\tvar allowed = gantt.isLinkAllowed(from, to, from_start, to_start);\r\n\t\t\t\t\tadd = \" \" + (allowed ? \"gantt_link_allow\" : \"gantt_link_deny\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn \"gantt_link_tooltip\" + add;\r\n\t\t\t},\r\n\r\n\t\t\t/* used for aria-labels of bar elements and for tooltip.js */\r\n\t\t\ttooltip_date_format: date.date_to_str(\"%Y-%m-%d\"),\r\n\t\t\ttooltip_text: function (start, end, event) {\r\n\t\t\t\treturn \"<b>Task:</b> \" + event.text + \"<br/><b>Start date:</b> \" + gantt.templates.tooltip_date_format(start) + \"<br/><b>End date:</b> \" + gantt.templates.tooltip_date_format(end);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\treturn {\r\n\t\tinitTemplates: initTemplates,\r\n\t\tinitTemplate: initTemplate\r\n\t};\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/common/templates.js\n// module id = 32\n// module chunks = 0","var utils = require(\"../../utils/utils\");\r\n\r\nvar StateService = (function(){\r\n\tvar stateProviders = {};\r\n\r\n\tfunction getState(name){\r\n\t\tif(name){\r\n\t\t\treturn stateProviders[name].method();\r\n\t\t}else{\r\n\t\t\tvar res = {};\r\n\t\t\tfor(var i in stateProviders){\r\n\t\t\t\tif(!stateProviders[i].internal)\r\n\t\t\t\t\tutils.mixin(res, stateProviders[i].method(), true);\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction registerProvider(name, provider, internal){\r\n\t\tstateProviders[name] = { method: provider, internal: internal};\r\n\t}\r\n\r\n\tfunction unregisterProvider(name){\r\n\t\tdelete stateProviders[name];\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetState: getState,\r\n\t\tregisterProvider: registerProvider,\r\n\t\tunregisterProvider: unregisterProvider\r\n\t};\r\n});\r\n\r\nmodule.exports = StateService;\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/common/state.js\n// module id = 33\n// module chunks = 0","var utils = require(\"../utils/utils\");\r\nvar domHelpers = require(\"../utils/dom_helpers\");\r\n\r\nmodule.exports = function(gantt) {\r\n\r\n\tvar boxAttribute = \"data-dhxbox\";\r\n\r\n\tvar _dhx_msg_cfg = null;\r\n\r\n\tfunction callback(config, result) {\r\n\t\tvar usercall = config.callback;\r\n\t\tmodalBox.hide(config.box);\r\n\r\n\t\t_dhx_msg_cfg = config.box = null;\r\n\t\tif (usercall)\r\n\t\t\tusercall(result);\r\n\t}\r\n\r\n\tfunction modal_key(e) {\r\n\t\tif (_dhx_msg_cfg) {\r\n\t\t\te = e || event;\r\n\t\t\tvar code = e.which || event.keyCode;\r\n\t\t\tvar preventDefault = false;\r\n\r\n\t\t\tif (messageBox.keyboard) {\r\n\t\t\t\tif (code == 13 || code == 32) {\r\n\t\t\t\t\t// default behavior is to confirm/submit popup on space/enter\r\n\t\t\t\t\t// if browser focus is set on button element - do button click instead of default behavior\r\n\t\t\t\t\tvar target = e.target || e.srcElement;\r\n\t\t\t\t\tif (domHelpers.getClassName(target).indexOf(\"gantt_popup_button\") > -1 && target.click) {\r\n\t\t\t\t\t\ttarget.click();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcallback(_dhx_msg_cfg, true);\r\n\t\t\t\t\t\tpreventDefault = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (code == 27) {\r\n\t\t\t\t\tcallback(_dhx_msg_cfg, false);\r\n\t\t\t\t\tpreventDefault = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (preventDefault) {\r\n\t\t\t\tif (e.preventDefault)\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\treturn !(e.cancelBubble = true);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.event(document, \"keydown\", modal_key, true);\r\n\r\n\tfunction modality(mode) {\r\n\t\tif (!modality.cover) {\r\n\t\t\tmodality.cover = document.createElement(\"div\");\r\n\t\t\t//necessary for IE only\r\n\t\t\tmodality.cover.onkeydown = modal_key;\r\n\t\t\tmodality.cover.className = \"dhx_modal_cover\";\r\n\t\t\tdocument.body.appendChild(modality.cover);\r\n\t\t}\r\n\t\tvar height = document.body.scrollHeight;\r\n\t\tmodality.cover.style.display = mode ? \"inline-block\" : \"none\";\r\n\t}\r\n\r\n\tfunction button(text, className, result) {\r\n\t\tvar buttonAriaAttrs = gantt._waiAria.messageButtonAttrString(text);\r\n\t\tvar name = className.toLowerCase().replace(/ /g, \"_\");\r\n\t\tvar button_css = \"gantt_\" + name + \"_button\" + \" dhtmlx_\" + name + \"_button\"; // dhtmlx_ok_button, dhtmlx_click_me_button\r\n\t\treturn \"<div \" + buttonAriaAttrs + \" class='gantt_popup_button dhtmlx_popup_button \" + button_css + \"' data-result='\" + result + \"' result='\" + result + \"' ><div>\" + text + \"</div></div>\";\r\n\t}\r\n\r\n\tfunction info(text) {\r\n\t\tif (!messageBox.area) {\r\n\t\t\tmessageBox.area = document.createElement(\"div\");\r\n\t\t\tmessageBox.area.className = \"gantt_message_area dhtmlx_message_area\";\r\n\t\t\tmessageBox.area.style[messageBox.position] = \"5px\";\r\n\t\t\tdocument.body.appendChild(messageBox.area);\r\n\t\t}\r\n\r\n\t\tmessageBox.hide(text.id);\r\n\t\tvar message = document.createElement(\"div\");\r\n\t\tmessage.innerHTML = \"<div>\" + text.text + \"</div>\";\r\n\t\tmessage.className = \"gantt-info dhtmlx-info gantt-\" + text.type + \" dhtmlx-\" + text.type;\r\n\t\tmessage.onclick = function () {\r\n\t\t\tmessageBox.hide(text.id);\r\n\t\t\ttext = null;\r\n\t\t};\r\n\r\n\t\tgantt._waiAria.messageInfoAttr(message);\r\n\r\n\t\tif (messageBox.position == \"bottom\" && messageBox.area.firstChild)\r\n\t\t\tmessageBox.area.insertBefore(message, messageBox.area.firstChild);\r\n\t\telse\r\n\t\t\tmessageBox.area.appendChild(message);\r\n\r\n\t\tif (text.expire > 0)\r\n\t\t\tmessageBox.timers[text.id] = window.setTimeout(function () {\r\n\t\t\t\tmessageBox.hide(text.id);\r\n\t\t\t}, text.expire);\r\n\r\n\t\tmessageBox.pull[text.id] = message;\r\n\t\tmessage = null;\r\n\r\n\t\treturn text.id;\r\n\t}\r\n\r\n\tfunction getFirstDefined() {\r\n\t\tvar values = [].slice.apply(arguments, [0]);\r\n\r\n\t\tfor (var i = 0; i < values.length; i++) {\r\n\t\t\tif (values[i]) {\r\n\t\t\t\treturn values[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction _boxStructure(config, ok, cancel) {\r\n\t\tvar box = document.createElement(\"div\");\r\n\r\n\t\tvar locale = gantt.locale;\r\n\r\n\t\tvar contentId = utils.uid();\r\n\t\tgantt._waiAria.messageModalAttr(box, contentId);\r\n\r\n\r\n\t\tbox.className = \" gantt_modal_box dhtmlx_modal_box gantt-\" + config.type + \" dhtmlx-\" + config.type;\r\n\t\tbox.setAttribute(boxAttribute, 1);\r\n\r\n\t\tvar inner = '';\r\n\r\n\t\tif (config.width)\r\n\t\t\tbox.style.width = config.width;\r\n\t\tif (config.height)\r\n\t\t\tbox.style.height = config.height;\r\n\t\tif (config.title)\r\n\t\t\tinner += '<div class=\"gantt_popup_title dhtmlx_popup_title\">' + config.title + '</div>';\r\n\t\tinner += '<div class=\"gantt_popup_text dhtmlx_popup_text\" id=\"' + contentId + '\"><span>' + (config.content ? '' : config.text) + '</span></div><div  class=\"gantt_popup_controls dhtmlx_popup_controls\">';\r\n\t\tif (ok)\r\n\t\t\tinner += button(getFirstDefined(config.ok, gantt.locale.labels.message_ok, \"OK\"), \"ok\", true);\r\n\t\tif (cancel)\r\n\t\t\tinner += button(getFirstDefined(config.cancel, gantt.locale.labels.message_cancel, \"Cancel\"), \"cancel\", false);\r\n\r\n\t\tif (config.buttons) {\r\n\t\t\tfor (var i = 0; i < config.buttons.length; i++) {\r\n\t\t\t\tvar btn = config.buttons[i];\r\n\t\t\t\tif (typeof btn == \"object\") {\r\n\t\t\t\t\t// Support { label:\"Save\", css:\"main_button\", value:\"save\" }\r\n\t\t\t\t\tvar label = btn.label;\r\n\t\t\t\t\tvar css = btn.css || (\"gantt_\" + btn.label.toLowerCase() + \"_button dhtmlx_\" + btn.label.toLowerCase() + \"_button\");\r\n\t\t\t\t\tvar value = btn.value || i;\r\n\t\t\t\t\tinner += button(label, css, value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tinner += button(btn, btn, i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tinner += '</div>';\r\n\t\tbox.innerHTML = inner;\r\n\r\n\t\tif (config.content) {\r\n\t\t\tvar node = config.content;\r\n\t\t\tif (typeof node == \"string\")\r\n\t\t\t\tnode = document.getElementById(node);\r\n\t\t\tif (node.style.display == 'none')\r\n\t\t\t\tnode.style.display = \"\";\r\n\t\t\tbox.childNodes[config.title ? 1 : 0].appendChild(node);\r\n\t\t}\r\n\r\n\t\tbox.onclick = function (e) {\r\n\t\t\te = e || event;\r\n\t\t\tvar source = e.target || e.srcElement;\r\n\t\t\tif (!source.className) source = source.parentNode;\r\n\t\t\tif (source.className.split(\" \")[0] == \"gantt_popup_button\") {\r\n\t\t\t\tvar result = source.getAttribute(\"data-result\");\r\n\t\t\t\tresult = (result == \"true\") || (result == \"false\" ? false : result);\r\n\t\t\t\tcallback(config, result);\r\n\t\t\t}\r\n\t\t};\r\n\t\tconfig.box = box;\r\n\t\tif (ok || cancel)\r\n\t\t\t_dhx_msg_cfg = config;\r\n\r\n\t\treturn box;\r\n\t}\r\n\r\n\tfunction _createBox(config, ok, cancel) {\r\n\t\tvar box = config.tagName ? config : _boxStructure(config, ok, cancel);\r\n\r\n\t\tif (!config.hidden)\r\n\t\t\tmodality(true);\r\n\t\tdocument.body.appendChild(box);\r\n\t\tvar x = Math.abs(Math.floor(((window.innerWidth || document.documentElement.offsetWidth) - box.offsetWidth) / 2));\r\n\t\tvar y = Math.abs(Math.floor(((window.innerHeight || document.documentElement.offsetHeight) - box.offsetHeight) / 2));\r\n\t\tif (config.position == \"top\")\r\n\t\t\tbox.style.top = \"-3px\";\r\n\t\telse\r\n\t\t\tbox.style.top = y + 'px';\r\n\t\tbox.style.left = x + 'px';\r\n\t\t//necessary for IE only\r\n\t\tbox.onkeydown = modal_key;\r\n\r\n\t\tmodalBox.focus(box);\r\n\r\n\t\tif (config.hidden)\r\n\t\t\tmodalBox.hide(box);\r\n\r\n\t\tgantt.callEvent(\"onMessagePopup\", [box]);\r\n\t\treturn box;\r\n\t}\r\n\r\n\tfunction alertPopup(config) {\r\n\t\treturn _createBox(config, true, false);\r\n\t}\r\n\r\n\tfunction confirmPopup(config) {\r\n\t\treturn _createBox(config, true, true);\r\n\t}\r\n\r\n\tfunction boxPopup(config) {\r\n\t\treturn _createBox(config);\r\n\t}\r\n\r\n\tfunction box_params(text, type, callback) {\r\n\t\tif (typeof text != \"object\") {\r\n\t\t\tif (typeof type == \"function\") {\r\n\t\t\t\tcallback = type;\r\n\t\t\t\ttype = \"\";\r\n\t\t\t}\r\n\t\t\ttext = {text: text, type: type, callback: callback};\r\n\t\t}\r\n\t\treturn text;\r\n\t}\r\n\r\n\tfunction params(text, type, expire, id) {\r\n\t\tif (typeof text != \"object\")\r\n\t\t\ttext = {text: text, type: type, expire: expire, id: id};\r\n\t\ttext.id = text.id || utils.uid();\r\n\t\ttext.expire = text.expire || messageBox.expire;\r\n\t\treturn text;\r\n\t}\r\n\r\n\tvar alertBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"confirm\";\r\n\t\treturn alertPopup(text);\r\n\t};\r\n\tvar confirmBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"alert\";\r\n\t\treturn confirmPopup(text);\r\n\t};\r\n\tvar modalBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"alert\";\r\n\t\treturn boxPopup(text);\r\n\t};\r\n\tmodalBox.hide = function (node) {\r\n\t\twhile (node && node.getAttribute && !node.getAttribute(boxAttribute))\r\n\t\t\tnode = node.parentNode;\r\n\t\tif (node) {\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\t\tmodality(false);\r\n\r\n\t\t\tgantt.callEvent(\"onAfterMessagePopup\", [node]);\r\n\t\t}\r\n\t};\r\n\r\n\tvar domHelpers = require(\"../utils/dom_helpers\");\r\n\r\n\tmodalBox.focus = function (node) {\r\n\t\tsetTimeout(function () {\r\n\t\t\tvar focusable = domHelpers.getFocusableNodes(node);\r\n\t\t\tif (focusable.length) {\r\n\t\t\t\tif (focusable[0].focus) focusable[0].focus();\r\n\t\t\t}\r\n\t\t}, 1);\r\n\t};\r\n\r\n\tvar messageBox = function (text, type, expire, id) {\r\n\t\ttext = params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"info\";\r\n\r\n\t\tvar subtype = text.type.split(\"-\")[0];\r\n\t\tswitch (subtype) {\r\n\t\t\tcase \"alert\":\r\n\t\t\t\treturn alertPopup(text);\r\n\t\t\tcase \"confirm\":\r\n\t\t\t\treturn confirmPopup(text);\r\n\t\t\tcase \"modalbox\":\r\n\t\t\t\treturn boxPopup(text);\r\n\t\t\tdefault:\r\n\t\t\t\treturn info(text);\r\n\t\t}\r\n\t};\r\n\r\n\tmessageBox.seed = (new Date()).valueOf();\r\n\tmessageBox.uid = utils.uid;\r\n\tmessageBox.expire = 4000;\r\n\tmessageBox.keyboard = true;\r\n\tmessageBox.position = \"top\";\r\n\tmessageBox.pull = {};\r\n\tmessageBox.timers = {};\r\n\r\n\tmessageBox.hideAll = function () {\r\n\t\tfor (var key in messageBox.pull)\r\n\t\t\tmessageBox.hide(key);\r\n\t};\r\n\tmessageBox.hide = function (id) {\r\n\t\tvar obj = messageBox.pull[id];\r\n\t\tif (obj && obj.parentNode) {\r\n\t\t\twindow.setTimeout(function () {\r\n\t\t\t\tobj.parentNode.removeChild(obj);\r\n\t\t\t\tobj = null;\r\n\t\t\t}, 2000);\r\n\t\t\tobj.className += \" hidden\";\r\n\r\n\t\t\tif (messageBox.timers[id])\r\n\t\t\t\twindow.clearTimeout(messageBox.timers[id]);\r\n\t\t\tdelete messageBox.pull[id];\r\n\t\t}\r\n\t};\r\n\r\n\tvar popups = [];\r\n\tgantt.attachEvent(\"onMessagePopup\", function(box){\r\n\t\tpopups.push(box);\r\n\t});\r\n\tgantt.attachEvent(\"onAfterMessagePopup\", function(box){\r\n\t\tfor(var i = 0; i < popups.length; i++){\r\n\t\t\tif(popups[i] === box){\r\n\t\t\t\tpopups.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\tif(modality.cover && modality.cover.parentNode){\r\n\t\t\tmodality.cover.parentNode.removeChild(modality.cover);\r\n\t\t}\r\n\r\n\t\tfor(var i = 0; i < popups.length; i++){\r\n\t\t\tif(popups[i].parentNode){\r\n\t\t\t\tpopups[i].parentNode.removeChild(popups[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tpopups = null;\r\n\r\n\t\tif(messageBox.area && messageBox.area.parentNode){\r\n\t\t\tmessageBox.area.parentNode.removeChild(messageBox.area);\r\n\t\t}\r\n\t\tmessageBox = null;\r\n\t});\r\n\r\n\treturn {\r\n\t\talert: alertBox,\r\n\t\tconfirm: confirmBox,\r\n\t\tmessage: messageBox,\r\n\t\tmodalbox: modalBox\r\n\t};\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/message.js\n// module id = 34\n// module chunks = 0","var uiFactory = require(\"./ui_factory\"),\r\n\tmouseEvents = require(\"./mouse\"),\r\n\tcreateLayers = require(\"./gantt_layers\"),\r\n\tCell = require(\"./layout/cell\"),\r\n\tLayout = require(\"./layout/layout\"),\r\n\tViewLayout = require(\"./layout/view_layout\"),\r\n\tViewCell = require(\"./layout/view_cell\"),\r\n\tResizer = require(\"./layout/resizer_cell\"),\r\n\tScrollbar = require(\"./layout/scrollbar_cell\"),\r\n\tTimeline = require(\"./timeline/timeline\"),\r\n\tGrid = require(\"./grid/grid\"),\r\n\tResourceGrid = require(\"./grid/resource_grid\"),\r\n\tResourceTimeline = require(\"./timeline/resource_timeline\");\r\n\r\nvar renderTaskBar = require(\"./render/task_bar_render\"),\r\n\trenderTaskBg = require(\"./render/task_bg_render\"),\r\n\trenderLink = require(\"./render/link_render\"),\r\n\tgridRenderer = require(\"./render/task_grid_line_render\");\r\n\r\nvar mainGridInitializer = require(\"./grid/main_grid_initializer\");\r\nvar mainTimelineInitializer = require(\"./timeline/main_timeline_initializer\");\r\nvar mainLayoutInitializer = require(\"./main_layout_initializer\");\r\n\r\nfunction initUI(gantt){\r\n\tfunction inheritGridConfig(id){\r\n\t\treturn {\r\n\t\t\t//width: gantt.config.grid_width\r\n\t\t};\r\n\t}\r\n\r\n\tfunction attachInitializer(view, initializer){\r\n\t\tvar ext = initializer(gantt);\r\n\t\tif(ext.onCreated)\r\n\t\t\text.onCreated(view);\r\n\t\tview.attachEvent(\"onReady\", function(){\r\n\t\t\tif(ext.onInitialized)\r\n\t\t\t\text.onInitialized(view);\r\n\t\t});\r\n\t\tview.attachEvent(\"onDestroy\", function(){\r\n\t\t\tif(ext.onDestroyed)\r\n\t\t\t\text.onDestroyed(view);\r\n\t\t});\r\n\t}\r\n\r\n\tvar factory = uiFactory.createFactory(gantt);\r\n\tfactory.registerView(\"cell\", Cell);\r\n\tfactory.registerView(\"resizer\", Resizer);\r\n\tfactory.registerView(\"scrollbar\", Scrollbar);\r\n\tfactory.registerView(\"layout\", Layout, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"main\"){\r\n\t\t\tattachInitializer(view, mainLayoutInitializer);\r\n\t\t}\r\n\t});\r\n\tfactory.registerView(\"viewcell\", ViewCell);\r\n\tfactory.registerView(\"multiview\", ViewLayout);\r\n\tfactory.registerView(\"timeline\", Timeline, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"timeline\" || view.$config.bind == \"task\"){\r\n\t\t\tattachInitializer(view, mainTimelineInitializer);\r\n\t\t}\r\n\t});\r\n\tfactory.registerView(\"grid\", Grid, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"grid\" || view.$config.bind == \"task\"){\r\n\t\t\tattachInitializer(view, mainGridInitializer);\r\n\t\t}\r\n\t});\r\n\r\n\tfactory.registerView(\"resourceGrid\", ResourceGrid);\r\n\tfactory.registerView(\"resourceTimeline\", ResourceTimeline);\r\n\r\n\tvar layersEngine = createLayers(gantt);\r\n\r\n\treturn {\r\n\t\tfactory:factory,\r\n\t\tmouseEvents: mouseEvents.init(gantt),\r\n\t\tlayersApi: layersEngine.init(),\r\n\t\trender:{\r\n\t\t\tgridLine: gridRenderer(gantt),\r\n\t\t\ttaskBg: renderTaskBg(gantt),\r\n\t\t\ttaskBar: renderTaskBar(gantt),\r\n\t\t\tlink: renderLink(gantt)\r\n\t\t},\r\n\t\tlayersService: {\r\n\t\t\tgetDataRender: function(name){\r\n\t\t\t\treturn layersEngine.getDataRender(name, gantt);\r\n\t\t\t},\r\n\t\t\tcreateDataRender: function(config){\r\n\t\t\t\treturn layersEngine.createDataRender(config, gantt);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = {\r\n\tinit: initUI\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/index.js\n// module id = 35\n// module chunks = 0","var utils = require(\"../../utils/utils\"),\r\n\tconfigurable = require(\"./configurable\");\r\n\r\nvar uiFactory = function createFactory(gantt){\r\n\tvar views = {};\r\n\r\n\tfunction ui(cell, parentView) {\r\n\t\tvar content;\r\n\t\tvar view = \"cell\";\r\n\t\tif (cell.view){\r\n\t\t\tview = \"viewcell\";\r\n\t\t}else if (cell.resizer) {\r\n\t\t\tview = \"resizer\";\r\n\t\t}\r\n\t\telse if (cell.rows || cell.cols) {\r\n\t\t\tview = \"layout\";\r\n\t\t}\r\n\t\telse if (cell.views) {\r\n\t\t\tview = \"multiview\";\r\n\t\t}\r\n\r\n\t\tcontent = createView.call(this, view, null, cell, parentView);\r\n\t\treturn content;\r\n\t}\r\n\t\r\n\tvar createdViews = {};\r\n\r\n\tfunction createView(name, parent, config, parentView) {\r\n\t\tvar creator = views[name];\r\n\r\n\t\tif(!creator || !creator.create)\r\n\t\t\treturn false;\r\n\r\n\t\tif(name == \"resizer\" && !config.mode){\r\n\t\t\tif(parentView.$config.cols){\r\n\t\t\t\tconfig.mode = \"x\";\r\n\t\t\t}else{\r\n\t\t\t\tconfig.mode = \"y\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(name == \"viewcell\" && config.view == \"scrollbar\" && !config.scroll){\r\n\t\t\tif(parentView.$config.cols){\r\n\t\t\t\tconfig.scroll = \"y\";\r\n\t\t\t}else{\r\n\t\t\t\tconfig.scroll = \"x\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar config = utils.copy(config);\r\n\r\n\t\tif(!config.id && !createdViews[config.view]){\r\n\t\t\tconfig.id = config.view;\r\n\t\t}\r\n\r\n\t\tif(config.id && !config.css){\r\n\t\t\tconfig.css = config.id+\"_cell\";\r\n\t\t}\r\n\r\n\t\tvar view = new creator.create(parent, config, this, gantt);\r\n\r\n\t\tif(creator.configure){\r\n\t\t\tcreator.configure(view);\r\n\t\t}\r\n\r\n\t\tconfigurable(view, parentView);\r\n\t\tif(!view.$id){\r\n\t\t\tview.$id = config.id || gantt.uid();\r\n\t\t}\r\n\r\n\t\tif(!view.$parent && typeof parent == \"object\"){\r\n\t\t\tview.$parent = parent;\r\n\t\t}\r\n\t\tif(!view.$config){\r\n\t\t\tview.$config = config;\r\n\t\t}\r\n\r\n\t\tif(createdViews[view.$id]){\r\n\t\t\tview.$id = gantt.uid();\r\n\t\t}\r\n\r\n\t\tcreatedViews[view.$id] = view;\r\n\r\n\t\treturn view;\r\n\t}\r\n\r\n\tfunction reset(){\r\n\t\tcreatedViews = {};\r\n\t}\r\n\r\n\tfunction register(name, viewConstructor, configure){\r\n\t\tviews[name] = {create: viewConstructor, configure: configure};\r\n\t}\r\n\r\n\tfunction getView(id){\r\n\t\treturn createdViews[id];\r\n\t}\r\n\r\n\tvar factory = {\r\n\t\tinitUI:ui,\r\n\t\treset: reset,\r\n\t\tregisterView: register,\r\n\t\tcreateView: createView,\r\n\t\tgetView: getView\r\n\t};\r\n\r\n\treturn factory;\r\n};\r\n\r\nmodule.exports = {\r\n\tcreateFactory: uiFactory\r\n};\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/ui_factory.js\n// module id = 36\n// module chunks = 0","var utils = require(\"../../utils/utils\");\r\n\r\nfunction ViewSettings(config){\r\n\tutils.mixin(this, config, true);\r\n}\r\n\r\n\r\nfunction extendSettings (store, parentSettings){\r\n\tvar own = this.$config[store];\r\n\r\n\tif(own){\r\n\t\tif(own instanceof ViewSettings){\r\n\t\t\treturn own;\r\n\t\t}else{\r\n\t\t\tViewSettings.prototype = parentSettings;\r\n\t\t\tthis.$config[store] = new ViewSettings(own);\r\n\t\t\treturn this.$config[store];\r\n\t\t}\r\n\t}else{\r\n\t\treturn parentSettings;\r\n\t}\r\n}\r\n\r\nvar configurable = function(parentView){\r\n\tvar parentConfig,\r\n\t\tparentTemplates;\r\n\r\n\treturn {\r\n\t\t$getConfig: function(){\r\n\t\t\tif(!parentConfig){\r\n\t\t\t\tparentConfig = parentView ? parentView.$getConfig() : this.$gantt.config;\r\n\t\t\t}\r\n\r\n\t\t\treturn extendSettings.call(this, \"config\", parentConfig);\r\n\t\t},\r\n\t\t$getTemplates: function(){\r\n\t\t\tif(!parentTemplates){\r\n\t\t\t\tparentTemplates = parentView ? parentView.$getTemplates() : this.$gantt.templates;\r\n\t\t\t}\r\n\r\n\t\t\treturn extendSettings.call(this, \"templates\", parentTemplates);\r\n\t\t}\r\n\t};\r\n};\r\n\r\nmodule.exports = function(obj, parent){\r\n\tutils.mixin(obj, configurable(parent));\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/configurable.js\n// module id = 37\n// module chunks = 0","var domHelpers = require(\"../../utils/dom_helpers\");\r\n\r\nvar createMouseHandler = (function(domHelpers) {\r\n\treturn function (gantt) {\r\n\t\tvar eventHandlers = {\r\n\t\t\t\"click\": {},\r\n\t\t\t\"doubleclick\": {},\r\n\t\t\t\"contextMenu\": {}\r\n\t\t};\r\n\r\n\t\tfunction addEventTarget(event, className, handler, root) {\r\n\t\t\tif(!eventHandlers[event][className]){\r\n\t\t\t\teventHandlers[event][className] = [];\r\n\t\t\t}\r\n\r\n\t\t\teventHandlers[event][className].push({\r\n\t\t\t\thandler: handler,\r\n\t\t\t\troot: root\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction callHandler(eventName, className, root, args) {\r\n\t\t\tvar handlers = eventHandlers[eventName][className];\r\n\t\t\tif(handlers){\r\n\t\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\t\tif(!(root || handlers[i].root) || handlers[i].root === root){\r\n\t\t\t\t\t\thandlers[i].handler.apply(this, args);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onClick(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar trg = e.target || e.srcElement;\r\n\t\t\tvar id = gantt.locate(e);\r\n\r\n\t\t\tvar handlers = findEventHandlers(e, eventHandlers.click);\r\n\t\t\tvar res = true;\r\n\t\t\tif (id !== null) {\r\n\t\t\t\tres = !gantt.checkEvent(\"onTaskClick\") || gantt.callEvent(\"onTaskClick\", [id, e]);\r\n\t\t\t} else {\r\n\t\t\t\tgantt.callEvent(\"onEmptyClick\", [e]);\r\n\t\t\t}\r\n\r\n\t\t\tif (res) {\r\n\t\t\t\tvar default_action = callEventHandlers(handlers, e, id);\r\n\t\t\t\tif (!default_action)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (id && gantt.getTask(id) && gantt.config.select_task && !gantt.config.multiselect) {\r\n\t\t\t\t\tgantt.selectTask(id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onContextMenu(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar src = e.target || e.srcElement,\r\n\t\t\t\ttaskId = gantt.locate(src),\r\n\t\t\t\tlinkId = gantt.locate(src, gantt.config.link_attribute);\r\n\r\n\t\t\tvar res = !gantt.checkEvent(\"onContextMenu\") || gantt.callEvent(\"onContextMenu\", [taskId, linkId, e]);\r\n\t\t\tif (!res) {\r\n\t\t\t\tif (e.preventDefault)\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\telse\r\n\t\t\t\t\te.returnValue = false;\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t}\r\n\r\n\t\tfunction findEventHandlers(e, hash){\r\n\t\t\tvar trg = e.target || e.srcElement;\r\n\t\t\tvar handlers = [];\r\n\t\t\twhile (trg) {\r\n\t\t\t\tvar css = domHelpers.getClassName(trg);\r\n\t\t\t\tif (css) {\r\n\t\t\t\t\tcss = css.split(\" \");\r\n\t\t\t\t\tfor (var i = 0; i < css.length; i++) {\r\n\t\t\t\t\t\tif (!css[i]) continue;\r\n\t\t\t\t\t\tif (hash[css[i]]) {\r\n\t\t\t\t\t\t\tvar delegateHandlers = hash[css[i]];\r\n\r\n\t\t\t\t\t\t\tfor(var h = 0; h < delegateHandlers.length; h++){\r\n\t\t\t\t\t\t\t\tif(delegateHandlers[h].root){\r\n\t\t\t\t\t\t\t\t\tif(!domHelpers.isChildOf(trg, delegateHandlers[h].root)){\r\n\t\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\thandlers.push(delegateHandlers[h].handler);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttrg = trg.parentNode;\r\n\t\t\t}\r\n\t\t\treturn handlers;\r\n\t\t}\r\n\r\n\t\tfunction callEventHandlers(handlers, e, id){\r\n\t\t\tvar res = true;\r\n\r\n\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\tvar handlerResult =  handlers[i].call(gantt, e, id, e.target || e.srcElement);\r\n\t\t\t\tres = res && !(typeof handlerResult != \"undefined\" && handlerResult !== true);\r\n\t\t\t}\r\n\r\n\t\t\treturn res;\r\n\t\t}\r\n\r\n\r\n\t\tfunction onDoubleClick(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar trg = e.target || e.srcElement;\r\n\t\t\tvar id = gantt.locate(e);\r\n\r\n\t\t\tvar handlers = findEventHandlers(e, eventHandlers.doubleclick);\r\n\t\t\tvar res = !gantt.checkEvent(\"onTaskDblClick\") || gantt.callEvent(\"onTaskDblClick\", [id, e]);\r\n\t\t\tif (res) {\r\n\t\t\t\tvar default_action = callEventHandlers(handlers, e, id);\r\n\t\t\t\tif (!default_action)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (id !== null && gantt.getTask(id)) {\r\n\t\t\t\t\tif (res && gantt.config.details_on_dblclick) {\r\n\t\t\t\t\t\tgantt.showLightbox(id);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onMouseMove(e) {\r\n\t\t\tif (gantt.checkEvent(\"onMouseMove\")) {\r\n\t\t\t\tvar id = gantt.locate(e);\r\n\t\t\t\tgantt._last_move_event = e;\r\n\t\t\t\tgantt.callEvent(\"onMouseMove\", [id, e]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction detach(eventName, className, handler, root) {\r\n\t\t\tif (eventHandlers[eventName]) {\r\n\t\t\t\tfor(var i = 0; i < eventHandlers[eventName].length; i++){\r\n\t\t\t\t\tif(eventHandlers[eventName][i].root == root){\r\n\t\t\t\t\t\teventHandlers[eventName].splice(i, 1);\r\n\t\t\t\t\t\ti--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar domEvents = gantt._createDomEventScope();\r\n\r\n\t\tfunction reset(node){\r\n\r\n\t\t\tdomEvents.detachAll();\r\n\r\n\t\t\tif(node){\r\n\t\t\t\tdomEvents.attach(node, \"click\", onClick);\r\n\t\t\t\tdomEvents.attach(node, \"dblclick\", onDoubleClick);\r\n\t\t\t\tdomEvents.attach(node, \"mousemove\", onMouseMove);\r\n\t\t\t\tdomEvents.attach(node, \"contextmenu\", onContextMenu);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n\t\treturn {\r\n\t\t\treset: reset,\r\n\t\t\tglobal: function(event, classname, handler){\r\n\t\t\t\taddEventTarget(event, classname, handler, null);\r\n\t\t\t},\r\n\t\t\tdelegate: addEventTarget,\r\n\t\t\tdetach: detach,\r\n\t\t\tcallHandler: callHandler,\r\n\t\t\tonDoubleClick: onDoubleClick,\r\n\t\t\tonMouseMove: onMouseMove,\r\n\t\t\tonContextMenu: onContextMenu,\r\n\t\t\tonClick: onClick,\r\n\t\t\tdestructor: function(){\r\n\t\t\t\treset();\r\n\t\t\t\teventHandlers = null;\r\n\t\t\t\tdomEvents = null;\r\n\t\t\t}\r\n\r\n\t\t};\r\n\t};\r\n\r\n})(domHelpers);\r\n\r\n\r\nmodule.exports = {\r\n\tinit:createMouseHandler\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/mouse.js\n// module id = 38\n// module chunks = 0","var createLayerFactory = require(\"./render/layer_engine\");\r\n\r\nvar createLayerEngine = function(gantt){\r\n\tvar factory = createLayerFactory(gantt);\r\n\treturn {\r\n\t\tgetDataRender: function(name){\r\n\t\t\treturn gantt.$services.getService(\"layer:\" + name) || null;\r\n\t\t},\r\n\t\tcreateDataRender: function(config){\r\n\t\t\tvar name = config.name,\r\n\t\t\t\tdefaultContainer = config.defaultContainer,\r\n\t\t\t\tpreviusSiblingContainer = config.defaultContainerSibling;\r\n\r\n\t\t\tvar layers = factory.createGroup(\r\n\t\t\t\tdefaultContainer,\r\n\t\t\t\tpreviusSiblingContainer,\r\n\t\t\t\tfunction(itemId, item){\r\n\t\t\t\t\tif(layers.filters){\r\n\t\t\t\t\t\tfor(var i = 0; i < layers.filters.length; i++){\r\n\t\t\t\t\t\t\tif(layers.filters[i](itemId, item) === false){\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tgantt.$services.setService(\"layer:\" + name, function(){\r\n\t\t\t\treturn layers;\r\n\t\t\t});\r\n\r\n\t\t\tgantt.attachEvent(\"onGanttReady\", function () {\r\n\t\t\t\tlayers.addLayer();// init layers on start\r\n\t\t\t});\r\n\r\n\t\t\treturn layers;\r\n\t\t},\r\n\t\tinit: function(){\r\n\t\t\tvar taskLayers = this.createDataRender({\r\n\t\t\t\tname: \"task\",\r\n\t\t\t\tdefaultContainer: function(){\r\n\t\t\t\t\tif(gantt.$task_data){\r\n\t\t\t\t\t\treturn gantt.$task_data;\r\n\t\t\t\t\t}else if(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t\t\t\treturn gantt.$ui.getView(\"timeline\").$task_data;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tdefaultContainerSibling: function(){\r\n\t\t\t\t\tif(gantt.$task_links){\r\n\t\t\t\t\t\treturn gantt.$task_links;\r\n\t\t\t\t\t}else if(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t\t\t\treturn gantt.$ui.getView(\"timeline\").$task_links;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfilter: function(item){\r\n\r\n\t\t\t\t}\r\n\t\t\t}, gantt);\r\n\r\n\t\t\tvar linkLayers = this.createDataRender({\r\n\t\t\t\tname: \"link\",\r\n\t\t\t\tdefaultContainer: function(){\r\n\t\t\t\t\tif(gantt.$task_data){\r\n\t\t\t\t\t\treturn gantt.$task_data;\r\n\t\t\t\t\t}else if(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t\t\t\treturn gantt.$ui.getView(\"timeline\").$task_data;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, gantt);\r\n\r\n\t\t\treturn {\r\n\t\t\t\taddTaskLayer: function(config){\r\n\t\t\t\t\treturn taskLayers.addLayer(config);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t/*getTaskLayer: function(id){\r\n\t\t\t\t\treturn taskLayers.getLayer(id);\r\n\t\t\t\t},*/\r\n\r\n\t\t\t\t_getTaskLayers: function(){\r\n\t\t\t\t\treturn taskLayers.getLayers();\r\n\t\t\t\t},\r\n\t\t\t\tremoveTaskLayer: function(id){\r\n\t\t\t\t\ttaskLayers.removeLayer(id);\r\n\t\t\t\t},\r\n\t\t\t\t/*eachTaskLayer: function(code){\r\n\t\t\t\t\ttaskLayers.eachLayer(code);\r\n\t\t\t\t},*/\r\n\t\t\t\t_clearTaskLayers: function(){\r\n\t\t\t\t\ttaskLayers.clear();\r\n\t\t\t\t},\r\n\t\t\t\taddLinkLayer: function(config){\r\n\t\t\t\t\treturn linkLayers.addLayer(config);\r\n\t\t\t\t},\r\n\t\t\t\t/*getLinkLayer: function(id){\r\n\t\t\t\t\treturn linkLayers.getLayer(id);\r\n\t\t\t\t},*/\r\n\t\t\t\t_getLinkLayers: function(){\r\n\t\t\t\t\treturn linkLayers.getLayers();\r\n\t\t\t\t},\r\n\t\t\t\tremoveLinkLayer: function(id){\r\n\t\t\t\t\tlinkLayers.removeLayer(id);\r\n\t\t\t\t},\r\n\t\t\t\t/*eachLinkLayer: function(code){\r\n\t\t\t\t\tlinkLayers.eachLayer(code);\r\n\t\t\t\t},*/\r\n\t\t\t\t_clearLinkLayers: function(){\r\n\t\t\t\t\tlinkLayers.clear();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n};\r\n\r\nmodule.exports = createLayerEngine;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/gantt_layers.js\n// module id = 39\n// module chunks = 0","var renderFactoryProvider = require(\"./render_factory\");\r\nvar utils = require(\"../../../utils/utils\"),\r\n\tdomHelpers = require(\"../../../utils/dom_helpers\");\r\n\r\nvar layerFactory = function(gantt){\r\n\r\n\tvar renderFactory = renderFactoryProvider(gantt);\r\n\treturn {\r\n\tcreateGroup: function (get_container, rel_root, defaultFilters) {\r\n\r\n\t\tvar renderGroup = {\r\n\t\t\ttempCollection: [],\r\n\t\t\trenderers: {},\r\n\t\t\tcontainer: get_container,\r\n\t\t\tfilters: [],\r\n\t\t\tgetLayers: function () {\r\n\t\t\t\tthis._add();// add pending layers\r\n\r\n\t\t\t\tvar res = [];\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tres.push(this.renderers[i]);\r\n\t\t\t\t}\r\n\t\t\t\treturn res;\r\n\t\t\t},\r\n\t\t\tgetLayer: function (id) {\r\n\t\t\t\treturn this.renderers[id];\r\n\t\t\t},\r\n\t\t\t_add: function (layer) {\r\n\t\t\t\tif (layer) {\r\n\t\t\t\t\tlayer.id = layer.id || utils.uid();\r\n\t\t\t\t\tthis.tempCollection.push(layer);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar container = this.container();\r\n\r\n\t\t\t\tvar pending = this.tempCollection;\r\n\t\t\t\tfor (var i = 0; i < pending.length; i++) {\r\n\t\t\t\t\tlayer = pending[i];\r\n\r\n\t\t\t\t\tif (!this.container() && !(layer && layer.container && domHelpers.isChildOf(layer.container, document.body))) continue;\r\n\r\n\t\t\t\t\tvar node = layer.container,\r\n\t\t\t\t\t\tid = layer.id,\r\n\t\t\t\t\t\ttopmost = layer.topmost;\r\n\t\t\t\t\tif (!node.parentNode) {\r\n\t\t\t\t\t\t//insert on top or below the tasks\r\n\t\t\t\t\t\tif (topmost) {\r\n\t\t\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar rel = rel_root ? rel_root() : container.firstChild;\r\n\t\t\t\t\t\t\tif (rel)\r\n\t\t\t\t\t\t\t\tcontainer.insertBefore(node, rel);\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.renderers[id] = renderFactory.getRenderer(\r\n\t\t\t\t\t\tid,\r\n\t\t\t\t\t\tlayer,\r\n\t\t\t\t\t\tnode\r\n\t\t\t\t\t);\r\n\t\t\t\t\tthis.tempCollection.splice(i, 1);\r\n\t\t\t\t\ti--;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\taddLayer: function (config) {\r\n\t\t\t\t//config = prepareConfig(config);\r\n\t\t\t\tif(config){\r\n\t\t\t\t\tif(typeof config == \"function\"){\r\n\t\t\t\t\t\tconfig = {renderer: config};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(config.filter === undefined){\r\n\t\t\t\t\t\tconfig.filter = mergeFilters(defaultFilters || []);\r\n\t\t\t\t\t}else if(config.filter instanceof Array){\r\n\t\t\t\t\t\tconfig.filter.push(defaultFilters);\r\n\t\t\t\t\t\tconfig.filter = mergeFilters(config.filter);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(!config.container){\r\n\t\t\t\t\t\tconfig.container = document.createElement(\"div\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis._add(config);\r\n\t\t\t\treturn (config ? config.id : undefined);\r\n\t\t\t},\r\n\t\t\teachLayer: function(code){\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tcode(this.renderers[i]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tremoveLayer: function (id) {\r\n\t\t\t\tif(!this.renderers[id])\r\n\t\t\t\t\treturn;\r\n\t\t\t\tthis.renderers[id].destructor();\r\n\t\t\t\tdelete this.renderers[id];\r\n\t\t\t},\r\n\t\t\tclear: function () {\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tthis.renderers[i].destructor();\r\n\t\t\t\t}\r\n\t\t\t\tthis.renderers = {};\r\n\t\t\t}//,\r\n\t\t\t//prepareConfig: prepareConfig\r\n\t\t};\r\n\r\n\t\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\t\trenderGroup.clear();\r\n\t\t\trenderGroup = null;\r\n\t\t});\r\n\r\n\t\treturn renderGroup;\r\n\t}\r\n};};\r\n\r\n\r\nfunction mergeFilters(filter_methods){\r\n\tif(!(filter_methods instanceof Array)){\r\n\t\tfilter_methods = Array.prototype.slice.call(arguments, 0);\r\n\t}\r\n\r\n\treturn function(obj){\r\n\t\tvar res = true;\r\n\t\tfor(var i = 0, len = filter_methods.length; i < len; i++){\r\n\t\t\tvar filter_method = filter_methods[i];\r\n\t\t\tif(filter_method){\r\n\t\t\t\tres = res && (filter_method(obj.id, obj) !== false);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t};\r\n}\r\n\r\n\r\nmodule.exports = layerFactory;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/render/layer_engine.js\n// module id = 40\n// module chunks = 0","var rendererFactory = function(gantt){\r\n\tvar services = gantt.$services;\r\n\r\n\t//hash of dom elements is needed to redraw single bar/link\r\n\tvar task_area_pulls = {},\r\n\t\ttask_area_renderers = {};\r\n\r\n\tfunction getRenderer(id, layer, node) {\r\n\r\n\t\tif (task_area_renderers[id])\r\n\t\t\treturn task_area_renderers[id];\r\n\r\n\t\tif (!layer.renderer)\r\n\t\t\tgantt.assert(false, \"Invalid renderer call\");\r\n\r\n\t\tvar renderOne = function(item){\r\n\t\t\treturn layer.renderer.call(this, item, layer.host);\r\n\t\t} ;\r\n\r\n\t\tvar filter = layer.filter;\r\n\r\n\t\tif (node)\r\n\t\t\tnode.setAttribute(services.config().layer_attribute, true);\r\n\r\n\t\ttask_area_renderers[id] = {\r\n\t\t\trender_item: function (item, container) {\r\n\t\t\t\tcontainer = container || node;\r\n\r\n\t\t\t\tif (filter) {\r\n\t\t\t\t\tif (!filter(item)) {\r\n\t\t\t\t\t\tthis.remove_item(item.id);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar dom = renderOne.call(gantt, item);\r\n\t\t\t\tthis.append(item, dom, container);\r\n\r\n\t\t\t},\r\n\r\n\t\t\tclear: function (container) {\r\n\t\t\t\tthis.rendered = task_area_pulls[id] = {};\r\n\t\t\t\tthis.clear_container(container);\r\n\t\t\t},\r\n\t\t\tclear_container: function (container) {\r\n\t\t\t\tcontainer = container || node;\r\n\t\t\t\tif (container)\r\n\t\t\t\t\tcontainer.innerHTML = \"\";\r\n\t\t\t},\r\n\t\t\trender_items: function (items, container) {\r\n\t\t\t\tcontainer = container || node;\r\n\r\n\t\t\t\tvar buffer = document.createDocumentFragment();\r\n\t\t\t\tthis.clear(container);\r\n\t\t\t\tfor (var i = 0, vis = items.length; i < vis; i++) {\r\n\t\t\t\t\tthis.render_item(items[i], buffer);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcontainer.appendChild(buffer);\r\n\t\t\t},\r\n\t\t\tappend: function (item, node, container) {\r\n\t\t\t\tif (!node) {\r\n\t\t\t\t\tif (this.rendered[item.id]) {\r\n\t\t\t\t\t\tthis.remove_item(item.id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.rendered[item.id] && this.rendered[item.id].parentNode) {\r\n\t\t\t\t\tthis.replace_item(item.id, node);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t}\r\n\t\t\t\tthis.rendered[item.id] = node;\r\n\r\n\t\t\t},\r\n\t\t\treplace_item: function (item_id, newNode) {\r\n\t\t\t\tvar item = this.rendered[item_id];\r\n\t\t\t\tif (item && item.parentNode) {\r\n\t\t\t\t\titem.parentNode.replaceChild(newNode, item);\r\n\t\t\t\t}\r\n\t\t\t\tthis.rendered[item_id] = newNode;\r\n\t\t\t},\r\n\t\t\tremove_item: function (item_id) {\r\n\t\t\t\tthis.hide(item_id);\r\n\t\t\t\tdelete this.rendered[item_id];\r\n\t\t\t},\r\n\t\t\thide: function (item_id) {\r\n\t\t\t\tvar item = this.rendered[item_id];\r\n\t\t\t\tif (item && item.parentNode) {\r\n\t\t\t\t\titem.parentNode.removeChild(item);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trestore: function (item) {\r\n\t\t\t\tvar dom = this.rendered[item.id];\r\n\t\t\t\tif (dom) {\r\n\t\t\t\t\tif (!dom.parentNode) {\r\n\t\t\t\t\t\tthis.append(item, dom, node);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.render_item(item, node);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tchange_id: function (oldid, newid) {\r\n\t\t\t\tthis.rendered[newid] = this.rendered[oldid];\r\n\t\t\t\tdelete this.rendered[oldid];\r\n\t\t\t},\r\n\t\t\trendered: task_area_pulls[id],\r\n\t\t\tnode: node,\r\n\t\t\tdestructor: function () {\r\n\t\t\t\tthis.clear();\r\n\t\t\t\tdelete task_area_renderers[id];\r\n\t\t\t\tdelete task_area_pulls[id];\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn task_area_renderers[id];\r\n\t}\r\n\r\n\r\n\tfunction clearRenderers() {\r\n\t\tfor (var i in task_area_renderers) {\r\n\t\t\tgetRenderer(i).destructor();\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetRenderer: getRenderer,\r\n\t\tclearRenderers: clearRenderers\r\n\t};\r\n\r\n};\r\n\r\nmodule.exports = rendererFactory;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/render/render_factory.js\n// module id = 41\n// module chunks = 0","var __extends = require(\"../../../utils/extends\"),\r\n\tLayout = require(\"./layout\"),\r\n\tCell = require(\"./cell\");\r\n\r\nvar ViewLayout = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ViewLayout, _super);\r\n\tfunction ViewLayout(parent, config, factory) {\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\t\tfor (var i = 0; i < _this.$cells.length; i++) {\r\n\t\t\t_this.$cells[i].$config.hidden = (i !== 0);\r\n\t\t}\r\n\t\t_this.$cell = _this.$cells[0];\r\n\t\t_this.$name = \"viewLayout\";\r\n\r\n\t\treturn _this;\r\n\t}\r\n\tViewLayout.prototype.cell = function (id) {\r\n\t\tvar cell = _super.prototype.cell.call(this, id);\r\n\t\tif (!cell.$view) {\r\n\t\t\tthis.$fill(null, this);\r\n\t\t}\r\n\t\treturn cell;\r\n\t};\r\n\tViewLayout.prototype.moveView = function (view) {\r\n\t\tvar body = this.$view;\r\n\t\tif (this.$cell) {\r\n\t\t\tthis.$cell.$config.hidden = true;\r\n\t\t\tbody.removeChild(this.$cell.$view);\r\n\t\t}\r\n\t\tthis.$cell = view;\r\n\t\tbody.appendChild(view.$view);\r\n\t};\r\n\tViewLayout.prototype.setSize = function (x, y) {\r\n\t\tCell.prototype.setSize.call(this, x, y);\r\n\t};\r\n\r\n\tViewLayout.prototype.setContentSize = function(){\r\n\t\tvar size = this.$lastSize;\r\n\t\tthis.$cell.setSize(size.contentX, size.contentY);\r\n\t};\r\n\r\n\tViewLayout.prototype.getSize = function () {\r\n\t\tvar sizes = _super.prototype.getSize.call(this);\r\n\t\tif (this.$cell) {\r\n\t\t\tvar cellSize = this.$cell.getSize();\r\n\t\t\tif (this.$config.byMaxSize) {\r\n\t\t\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\t\t\tvar otherCell = this.$cells[i].getSize();\r\n\t\t\t\t\tfor (var cell in cellSize) {\r\n\t\t\t\t\t\tcellSize[cell] = Math.max(cellSize[cell], otherCell[cell]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (var size in sizes) {\r\n\t\t\t\tsizes[size] = sizes[size] || cellSize[size];\r\n\t\t\t}\r\n\t\t\tsizes.gravity = Math.max(sizes.gravity, cellSize.gravity);\r\n\t\t}\r\n\t\treturn sizes;\r\n\t};\r\n\treturn ViewLayout;\r\n}(Layout));\r\n\r\nmodule.exports = ViewLayout;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/layout/view_layout.js\n// module id = 42\n// module chunks = 0","var __extends = require(\"../../../utils/extends\"),\r\n\tutils = require(\"../../../utils/utils\"),\r\n\tCell = require(\"./cell\");\r\n\r\nvar ViewCell = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ViewCell, _super);\r\n\tfunction ViewCell(parent, config, factory) {\r\n\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\r\n\t\tif(config.view){\r\n\t\t\tif(config.id){\r\n\t\t\t\t// pass id to the nested view\r\n\t\t\t\tthis.$id = utils.uid();\r\n\t\t\t}\r\n\t\t\tvar childConfig = utils.copy(config);\r\n\t\t\tdelete childConfig.config;\r\n\t\t\tdelete childConfig.templates;\r\n\r\n\t\t\tthis.$content = this.$factory.createView(config.view, this, childConfig, this);\r\n\t\t\tif(!this.$content)\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t_this.$name = \"viewCell\";\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tViewCell.prototype.destructor = function(){\r\n\t\tthis.clear();\r\n\t\t_super.prototype.destructor.call(this);\r\n\t};\r\n\r\n\tViewCell.prototype.clear = function(){\r\n\r\n\t\tthis.$initialized = false;\r\n\r\n\t\t// call destructor\r\n\t\tif (this.$content){\r\n\t\t\tvar method = this.$content.unload || this.$content.destructor;\r\n\t\t\tif (method){\r\n\t\t\t\tmethod.call(this.$content);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_super.prototype.clear.call(this);\r\n\r\n\t};\r\n\r\n\tViewCell.prototype.scrollTo = function(left, top){\r\n\r\n\t\tif(this.$content && this.$content.scrollTo){\r\n\t\t\tthis.$content.scrollTo(left, top);\r\n\t\t}else{\r\n\t\t\t_super.prototype.scrollTo.call(this, left, top);\r\n\t\t}\r\n\t};\r\n\r\n\tViewCell.prototype._setContentSize = function(x, y){\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tvar outerX = x + borders.horizontal;\r\n\t\tvar outerY = y + borders.vertical;\r\n\t\tthis.$config.width = outerX;\r\n\t\tthis.$config.height = outerY;\r\n\t};\r\n\r\n\tViewCell.prototype.setSize = function(x, y){\r\n\t\t_super.prototype.setSize.call(this, x, y);\r\n\r\n\t\tif(!this.$preResize && this.$content) {\r\n\t\t\tif (!this.$initialized) {\r\n\t\t\t\tthis.$initialized = true;\r\n\t\t\t\tvar header = this.$view.childNodes[0];\r\n\t\t\t\tvar content = this.$view.childNodes[1];\r\n\t\t\t\tif(!content) content = header;\r\n\r\n\t\t\t\t/*if(this.$content.$config){\r\n\t\t\t\t\tthis.$content.$config.width = this.$lastSize.contentX;\r\n\t\t\t\t\tthis.$content.$config.height = this.$lastSize.contentY;\r\n\t\t\t\t}*/\r\n\t\t\t\tthis.$content.init(content);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tViewCell.prototype.setContentSize = function(){\r\n\t\tif(!this.$preResize && this.$content) {\r\n\t\t\tif (this.$initialized) {\r\n\t\t\t\tthis.$content.setSize(this.$lastSize.contentX, this.$lastSize.contentY);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tViewCell.prototype.getContentSize = function(){\r\n\t\tvar size = _super.prototype.getContentSize.call(this);\r\n\r\n\t\tif(this.$content && this.$initialized){\r\n\t\t\tvar childSize = this.$content.getSize();\r\n\t\t\tsize.width = childSize.contentX === undefined ? childSize.width : childSize.contentX;\r\n\t\t\tsize.height = childSize.contentY === undefined ? childSize.height : childSize.contentY;\r\n\t\t}\r\n\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tsize.width += borders.horizontal;\r\n\t\tsize.height += borders.vertical;\r\n\r\n\t\treturn size;\r\n\t};\r\n\r\n\treturn ViewCell;\r\n}(Cell));\r\n\r\nmodule.exports = ViewCell;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/layout/view_cell.js\n// module id = 43\n// module chunks = 0","var __extends = require(\"../../../utils/extends\"),\r\n\tdomHelpers = require(\"../../../utils/dom_helpers\"),\r\n\tutils = require(\"../../../utils/utils\"),\r\n\tCell = require(\"./cell\");\r\n\r\nvar ResizerCell = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ResizerCell, _super);\r\n\tfunction ResizerCell(parent, config, factory) {\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\r\n\t\tvar startBackSize, startFrontSize;\r\n\r\n\t\t_this._moveHandler = function (e) {\r\n\t\t\t_this._moveResizer(_this._resizer, e.pageX, e.pageY);\r\n\t\t};\r\n\t\t_this._upHandler = function () {\r\n\t\t\tvar newSizes = _this._getNewSizes();\r\n\t\t\tif(_this.callEvent(\"onResizeEnd\", [startBackSize, startFrontSize, newSizes ? newSizes.back : 0, newSizes ? newSizes.front : 0]) !== false){\r\n\t\t\t\t_this._setSizes();\r\n\t\t\t}\r\n\r\n\t\t\t_this._setBackground(false);\r\n\t\t\t_this._clearResizer();\r\n\t\t\t_this._clearListeneres();\r\n\t\t};\r\n\r\n\t\t_this._clearListeneres = function(){\r\n\t\t\tthis.$domEvents.detach(document, \"mouseup\", _this._upHandler);\r\n\t\t\tthis.$domEvents.detach(document, \"mousemove\", _this._moveHandler);\r\n\t\t\tthis.$domEvents.detach(document, \"mousemove\", _this._startOnMove);\r\n\t\t\tthis.$domEvents.detach(document, \"mouseup\", _this._cancelDND);\r\n\t\t};\r\n\r\n\t\t_this._callStartDNDEvent = function(){\r\n\t\t\tif (this._xMode) {\r\n\t\t\t\tstartBackSize = this._behind.$config.width || this._behind.$view.offsetWidth;\r\n\t\t\t\tstartFrontSize = this._front.$config.width || this._front.$view.offsetWidth;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tstartBackSize = this._behind.$config.height || this._behind.$view.offsetHeight;\r\n\t\t\t\tstartFrontSize = this._front.$config.height || this._front.$view.offsetHeight;\r\n\t\t\t}\r\n\r\n\t\t\tif(_this.callEvent(\"onResizeStart\", [startBackSize, startFrontSize]) === false){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t_this._startDND = function(e){\r\n\t\t\tvar res = this._callStartDNDEvent();\r\n\t\t\tif(res === false){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar stop = false;\r\n\t\t\tthis._eachGroupItem(function(resizer){\r\n\t\t\t\tresizer._getSiblings();\r\n\t\t\t\tif(resizer._callStartDNDEvent() === false){\r\n\t\t\t\t\tstop = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(stop){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t_this._moveHandler(e);\r\n\r\n\t\t\t_this.$domEvents.attach(document, \"mousemove\", _this._moveHandler);\r\n\t\t\t_this.$domEvents.attach(document, \"mouseup\", _this._upHandler);\r\n\t\t};\r\n\r\n\t\t_this._cancelDND = function(){\r\n\t\t\t_this._setBackground(false);\r\n\t\t\t_this._clearResizer();\r\n\t\t\t_this._clearListeneres();\r\n\t\t};\r\n\r\n\t\t_this._startOnMove = function(e){\r\n\t\t\tif(_this._isPosChanged(e)){\r\n\t\t\t\t_this._clearListeneres();\r\n\t\t\t\t_this._startDND(e);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t_this._downHandler = function (e) {\r\n\t\t\t_this._getSiblings();\r\n\r\n\t\t\tif (_this._behind.$config.collapsed || _this._front.$config.collapsed) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t_this._setBackground(true);\r\n\t\t\t_this._resizer = _this._setResizer();\r\n\r\n\t\t\t_this._positions = {\r\n\t\t\t\tx: e.pageX,\r\n\t\t\t\ty: e.pageY,\r\n\t\t\t\ttimestamp: Date.now()\r\n\t\t\t};\r\n\r\n\t\t\t_this.$domEvents.attach(document, \"mousemove\", _this._startOnMove);\r\n\t\t\t_this.$domEvents.attach(document, \"mouseup\", _this._cancelDND);\r\n\t\t};\r\n\t\t_this.$name = \"resizer\";\r\n\t\treturn _this;\r\n\t}\r\n\tResizerCell.prototype.init = function () {\r\n\t\tvar _this = this;\r\n\t\t_super.prototype.init.call(this);\r\n\t\tthis._xMode = this.$config.mode === \"x\";\r\n\t\tif (this._xMode && !this.$config.width) {\r\n\t\t\tthis.$config.width = this.$config.minWidth = 1;\r\n\t\t}\r\n\t\telse if (!this._xMode && !this.$config.height) {\r\n\t\t\tthis.$config.height = this.$config.minHeight = 1;\r\n\t\t}\r\n\r\n\t\tthis.$config.margin = -1;\r\n\r\n\t\tthis.$domEvents.attach(this.$view, \"mousedown\", _this._downHandler);\r\n\r\n\t};\r\n\tResizerCell.prototype.$toHTML = function () {\r\n\t\tvar mode = this.$config.mode;\r\n\t\tvar css = this.$config.css || \"\";\r\n\t\treturn \"<div class='gantt_layout_cell gantt_resizer gantt_resizer_\"+mode+\"'><div class='gantt_layout_content gantt_resizer_\" + mode + (css ? (\" \" + css) : \"\") + \"'></div></div>\";\r\n\t};\r\n\r\n\tResizerCell.prototype._clearResizer = function(){\r\n\t\tif(this._resizer){\r\n\t\t\tif(this._resizer.parentNode){\r\n\t\t\t\tthis._resizer.parentNode.removeChild(this._resizer);\r\n\t\t\t}\r\n\t\t\tthis._resizer = null;\r\n\t\t}\r\n\t};\r\n\r\n\tResizerCell.prototype._isPosChanged = function(e){\r\n\t\tif(!this._positions){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif(Math.abs(this._positions.x - e.pageX) > 3 || Math.abs(this._positions.y - e.pageY) > 3){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tif(Date.now() - this._positions.timestamp > 300){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t};\r\n\r\n\tResizerCell.prototype._getSiblings = function () {\r\n\t\tvar cells = this.$parent.getCells();\r\n\r\n\t\tif(this.$config.prev){\r\n\t\t\tthis._behind = this.$factory.getView(this.$config.prev);\r\n\t\t\tif(!(this._behind instanceof Cell)){\r\n\t\t\t\tthis._behind = this._behind.$parent;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(this.$config.next){\r\n\t\t\tthis._front = this.$factory.getView(this.$config.next);\r\n\t\t\tif(!(this._front instanceof Cell)){\r\n\t\t\t\tthis._front = this._behind.$parent;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\tif (this === cells[i]) {\r\n\t\t\t\tif(!this._behind)\r\n\t\t\t\t\tthis._behind = cells[i - 1];\r\n\t\t\t\tif(!this._front)\r\n\t\t\t\t\tthis._front = cells[i + 1];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tResizerCell.prototype._setBackground = function (state) {\r\n\t\tvar classes = \"gantt_resizing\";\r\n\t\tif (!state) {\r\n\t\t\tdomHelpers.removeClassName(this._behind.$view, classes);\r\n\t\t\tdomHelpers.removeClassName(this._front.$view, classes);\r\n\t\t\tdomHelpers.removeClassName(document.body, 'gantt_noselect');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tdomHelpers.addClassName(this._behind.$view, classes, true);\r\n\t\tdomHelpers.addClassName(this._front.$view, classes, true);\r\n\t\tdomHelpers.addClassName(document.body, 'gantt_noselect', true);\r\n\t};\r\n\tResizerCell.prototype._setResizer = function () {\r\n\t\tvar resizer = document.createElement(\"div\");\r\n\t\tresizer.className = \"gantt_resizer_stick\";\r\n\t\tthis.$view.appendChild(resizer);\r\n\t\tthis.$view.style.overflow = \"visible\";\r\n\t\tresizer.style.height = this.$view.style.height;\r\n\t\treturn resizer;\r\n\t};\r\n\r\n\tResizerCell.prototype._getDirection = function(x, y){\r\n\t\tvar shift;\r\n\t\tif (this._xMode) {\r\n\t\t\tshift = x - this._positions.x;\r\n\t\t}else{\r\n\t\t\tshift = y - this._positions.y;\r\n\t\t}\r\n\t\treturn shift ? shift < 0 ? -1 : 1 : 0;\r\n\t};\r\n\r\n\tResizerCell.prototype._getResizePosition = function(x, y){\r\n\t\tvar size;\r\n\t\tvar behindSide;\r\n\t\tvar behindMin;\r\n\t\tvar frontSide;\r\n\t\tvar frontMin;\r\n\t\tif (this._xMode) {\r\n\t\t\tsize = x - this._positions.x;\r\n\t\t\tbehindSide = this._behind.$config.width || this._behind.$view.offsetWidth;\r\n\t\t\tfrontSide = this._front.$config.width || this._front.$view.offsetWidth;\r\n\t\t\tbehindMin = this._behind.$config.minWidth;\r\n\t\t\tfrontMin = this._front.$config.minWidth;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsize = y - this._positions.y;\r\n\t\t\tbehindSide = this._behind.$config.height || this._behind.$view.offsetHeight;\r\n\t\t\tfrontSide = this._front.$config.height || this._front.$view.offsetHeight;\r\n\t\t\tbehindMin = this._front.$config.minHeight;\r\n\t\t\tfrontMin = this._front.$config.minHeight;\r\n\t\t}\r\n\t\tvar direction = this._getDirection(x, y);\r\n\t\tvar newBehindSide,\r\n\t\t\tnewFrontSide;\r\n\r\n\t\tif (direction === -1) {\r\n\t\t\tnewFrontSide = frontSide - size;\r\n\t\t\tnewBehindSide = behindSide - Math.abs(size);\r\n\r\n\t\t\tif (frontSide - size > this._front.$config.maxWidth) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (Math.abs(size) >= behindSide) {\r\n\t\t\t\tsize = -Math.abs(behindSide - 2);\r\n\t\t\t}\r\n\t\t\t// if min width\r\n\t\t\tif (behindSide - Math.abs(size) <= behindMin) {\r\n\t\t\t\t//this._resizer.style.background = \"red\";\r\n\t\t\t\tsize = -Math.abs(behindSide - behindMin);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tnewFrontSide = frontSide - Math.abs(size);\r\n\t\t\tnewBehindSide = behindSide + size;\r\n\r\n\t\t\tif (behindSide + size > this._behind.$config.maxWidth) {\r\n\t\t\t\tsize = this._behind.$config.maxWidth - behindSide;\r\n\t\t\t\t// return;\r\n\t\t\t}\r\n\t\t\tif (Math.abs(size) >= frontSide) {\r\n\t\t\t\tsize = frontSide - 2;\r\n\t\t\t}\r\n\t\t\t// if min width\r\n\t\t\tif (frontSide - Math.abs(size) <= frontMin) {\r\n\t\t\t\tsize = Math.abs(frontSide - frontMin);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (direction === -1) {\r\n\t\t\tnewFrontSide = frontSide - size;\r\n\t\t\tnewBehindSide = behindSide - Math.abs(size);\r\n\t\t} else {\r\n\t\t\tnewFrontSide = frontSide - Math.abs(size);\r\n\t\t\tnewBehindSide = behindSide + size;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tsize: size,\r\n\t\t\tnewFrontSide: newFrontSide,\r\n\t\t\tnewBehindSide: newBehindSide\r\n\t\t};\r\n\t};\r\n\r\n\tResizerCell.prototype._getGroupName = function(){\r\n\t\tthis._getSiblings();\r\n\t\treturn this._front.$config.group || this._behind.$config.group;\r\n\t};\r\n\r\n\tResizerCell.prototype._eachGroupItem = function(callback, master){\r\n\t\tvar layout = this.$factory.getView(\"main\");\r\n\r\n\t\tvar group = this._getGroupName();\r\n\r\n\t\tvar resizers = layout.getCellsByType(\"resizer\");\r\n\t\tfor(var i = 0; i < resizers.length; i++) {\r\n\t\t\tif (resizers[i]._getGroupName() == group && resizers[i] != this) {\r\n\t\t\t\tcallback.call(master || this, resizers[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tResizerCell.prototype._getGroupResizePosition = function(x, y){\r\n\t\tvar sizes = this._getResizePosition(x, y);\r\n\r\n\t\tif(!this._getGroupName()){\r\n\t\t\treturn sizes;\r\n\t\t}\r\n\r\n\t\tvar positions = [sizes];\r\n\r\n\t\tthis._eachGroupItem(function(resizer){\r\n\t\t\tresizer._getSiblings();\r\n\t\t\tvar pos = utils.copy(this._positions);\r\n\t\t\tif(this._xMode){\r\n\t\t\t\tpos.x += (resizer._behind.$config.width - this._behind.$config.width);\r\n\t\t\t}else{\r\n\t\t\t\tpos.y += (resizer._behind.$config.height - this._behind.$config.height);\r\n\t\t\t}\r\n\t\t\tresizer._positions = pos;\r\n\t\t\tpositions.push(resizer._getResizePosition(x, y));\r\n\t\t});\r\n\r\n\t\tvar minMax;\r\n\t\tfor(var i =0; i < positions.length; i++){\r\n\t\t\tif(!positions[i]) return;\r\n\t\t\tif(minMax === undefined){\r\n\t\t\t\tminMax = positions[i];\r\n\t\t\t}else if(positions[i].newBehindSide > minMax.newBehindSide){\r\n\t\t\t\tminMax = positions[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t/*\tif(minMax != sizes){\r\n\t\t\tminMax.size = minMax.size;\r\n\t\t}*/\r\n\r\n\t\treturn minMax;\r\n\t};\r\n\r\n\tResizerCell.prototype._moveResizer = function (av, x, y) {\r\n\t\tif (x === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar sizes = this._getGroupResizePosition(x, y);\r\n\t\tif(!sizes)\r\n\t\t\treturn;\r\n\r\n\t\tif (Math.abs(sizes.size) === 1) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this._xMode) {\r\n\t\t\tav.style.left = sizes.size + 'px';\r\n\t\t\tthis._positions.nextX = sizes.size || 0;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tav.style.top = sizes.size + 'px';\r\n\t\t\tthis._positions.nextY = sizes.size || 0;\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onResize\", [sizes.newBehindSide, sizes.newFrontSide]);\r\n\t};\r\n\tResizerCell.prototype._setGravity = function (cell) {\r\n\t\tvar size = this._xMode ? \"offsetWidth\" : \"offsetHeight\";\r\n\t\tvar position = this._xMode ? this._positions.nextX : this._positions.nextY;\r\n\t\tvar frontSize = this._front.$view[size];\r\n\t\tvar behindSize = this._behind.$view[size];\r\n\t\tvar frontG = this._front.getSize().gravity;\r\n\t\tvar behindG = this._behind.getSize().gravity;\r\n\t\tvar newFrontG = (frontSize - position) / frontSize * frontG;\r\n\t\tvar newBehindG = (behindSize + position) / behindSize * behindG;\r\n\t\tif (cell !== \"front\") {\r\n\t\t\tthis._front.$config.gravity = newFrontG;\r\n\t\t}\r\n\t\tif (cell !== \"behind\") {\r\n\t\t\tthis._behind.$config.gravity = newBehindG;\r\n\t\t}\r\n\t};\r\n\r\n/*\tResizerCell.prototype.setSize = function(){\r\n\t\t_super.apply(this, arguments)\r\n\t};*/\r\n\r\n\tResizerCell.prototype._getNewSizes = function(){\r\n\t\tvar behindSize = this._xMode ? this._behind.$config.width : this._behind.$config.height;\r\n\t\tvar frontSize = this._xMode ? this._front.$config.width : this._front.$config.height;\r\n\t\tvar position = this._xMode ? this._positions.nextX : this._positions.nextY;\r\n\r\n\t\tif(!frontSize && !behindSize){\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tfront: frontSize ? ((frontSize - position) || 1) : 0,\r\n\t\t\tback: behindSize ? ((behindSize + position) || 1) : 0\r\n\t\t};\r\n\t};\r\n\r\n\tResizerCell.prototype._assignNewSizes = function(newSizes){\r\n\t\tthis._getSiblings();\r\n\t\tvar side = this._xMode ? 'width' : 'height';\r\n\r\n\t\t// if only gravity cells\r\n\t\tif (!newSizes) {\r\n\t\t\tthis._setGravity();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (!newSizes.front) {\r\n\t\t\t\tthis._setGravity(\"behind\");\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._front.$config[side] = newSizes.front;\r\n\t\t\t}\r\n\t\t\tif (!newSizes.back) {\r\n\t\t\t\tthis._setGravity(\"front\");\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._behind.$config[side] = newSizes.back;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tResizerCell.prototype._setSizes = function () {\r\n\t\tif (this._resizer) {\r\n\t\t\tthis.$view.removeChild(this._resizer);\r\n\t\t}\r\n\t\tvar newSizes = this._getNewSizes();\r\n\r\n\t\tif (this._positions.nextX || this._positions.nextY) {\r\n\t\t\tthis._assignNewSizes(newSizes);\r\n\r\n\t\t\tvar side = this._xMode ? 'width' : 'height';\r\n\t\t\tif(this._front.$config.group){\r\n\t\t\t\tthis.$gantt.$layout._syncCellSizes(this._front.$config.group, this._front.$config[side]);\r\n\t\t\t}else if(this._behind.$config.group){\r\n\t\t\t\tthis.$gantt.$layout._syncCellSizes(this._behind.$config.group, this._behind.$config[side]);\r\n\t\t\t}\r\n\r\n\t\t\tif(this._getGroupName()){\r\n\t\t\t\tthis.$factory.getView(\"main\").resize();\r\n\t\t\t}else{\r\n\t\t\t\tthis.$parent.resize();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t};\r\n\treturn ResizerCell;\r\n}(Cell));\r\n\r\nmodule.exports = ResizerCell;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/layout/resizer_cell.js\n// module id = 44\n// module chunks = 0","var __extends = require(\"../../../utils/extends\"),\r\n\tdomHelpers = require(\"../../../utils/dom_helpers\"),\r\n\tutils = require(\"../../../utils/utils\"),\r\n\tenv = require(\"../../../utils/env\"),\r\n\teventable = require(\"../../../utils/eventable\"),\r\n\tCell = require(\"./cell\");\r\n\r\nvar ScrollbarCell = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ScrollbarCell, _super);\r\n\tfunction ScrollbarCell(parent, config, factory, gantt) {\r\n\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\t\tthis.$config = utils.mixin(config, {scroll: \"x\"});\r\n\t\t_this._scrollHorizontalHandler = utils.bind(_this._scrollHorizontalHandler, _this);\r\n\t\t_this._scrollVerticalHandler = utils.bind(_this._scrollVerticalHandler, _this);\r\n\t\t_this._outerScrollVerticalHandler = utils.bind(_this._outerScrollVerticalHandler, _this);\r\n\t\t_this._outerScrollHorizontalHandler = utils.bind(_this._outerScrollHorizontalHandler, _this);\r\n\t\t_this._mouseWheelHandler = utils.bind(_this._mouseWheelHandler, _this);\r\n\r\n\t\tthis.$config.hidden = true;\r\n\t\tvar size = gantt.config.scroll_size;\r\n\r\n\t\tif(gantt.env.isIE){\r\n\t\t\t// full element height/width must be bigger than just a browser scrollbar,\r\n\t\t\t// otherwise the scrollbar element won't be scrolled on click\r\n\t\t\tsize += 1;\r\n\t\t}\r\n\r\n\t\tif(this._isHorizontal()){\r\n\t\t\t_this.$config.height = size;\r\n\t\t\t_this.$parent.$config.height = size;\r\n\t\t}else{\r\n\t\t\t_this.$config.width = size;\r\n\t\t\t_this.$parent.$config.width = size;\r\n\t\t}\r\n\r\n\t\tthis.$config.scrollPosition = 0;\r\n\r\n\t\t_this.$name = \"scroller\";\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tScrollbarCell.prototype.init = function(container){\r\n\t\tcontainer.innerHTML = this.$toHTML();\r\n\t\tthis.$view = container.firstChild;\r\n\r\n\t\tif(!this.$view){\r\n\t\t\tthis.init();\r\n\t\t}\r\n\t\tif(this._isVertical()){\r\n\t\t\tthis._initVertical();\r\n\t\t}else{\r\n\t\t\tthis._initHorizontal();\r\n\t\t}\r\n\t\tthis._initMouseWheel();\r\n\t\tthis._initLinkedViews();\r\n\t};\r\n\r\n\tScrollbarCell.prototype.$toHTML = function () {\r\n\t\tvar className = this._isHorizontal() ? \"gantt_hor_scroll\" : \"gantt_ver_scroll\";\r\n\t\treturn \"<div class='gantt_layout_cell \"+className+\"'><div style='\"+(this._isHorizontal() ? \"width:2000px\" : \"height:2000px\")+\"'></div></div>\";\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getRootParent = function(){\r\n\t\tvar parent = this.$parent;\r\n\t\twhile(parent && parent.$parent){\r\n\t\t\tparent = parent.$parent;\r\n\t\t}\r\n\t\tif(parent){\r\n\t\t\treturn parent;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tfunction eachCell(root, res){\r\n\t\tres.push(root);\r\n\t\tif(root.$cells){\r\n\t\t\tfor(var i = 0; i < root.$cells.length; i++){\r\n\t\t\t\teachCell(root.$cells[i], res);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tScrollbarCell.prototype._eachView = function(){\r\n\t\tvar res = [];\r\n\t\teachCell(this._getRootParent(), res);\r\n\t\treturn res;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getLinkedViews = function(){\r\n\t\tvar views = this._eachView();\r\n\t\tvar res = [];\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].$config && ((this._isVertical() && views[i].$config.scrollY == this.$id) || (this._isHorizontal() && views[i].$config.scrollX == this.$id)) ){\r\n\t\t\t\tres.push(views[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\r\n\tScrollbarCell.prototype._initHorizontal = function(){\r\n\t\tthis.$scroll_hor = this.$view;\r\n\t\tthis.$domEvents.attach(this.$view, \"scroll\", this._scrollHorizontalHandler);\r\n\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initLinkedViews = function(){\r\n\t\tvar views = this._getLinkedViews();\r\n\t\tvar css = this._isVertical() ?\"gantt_layout_outer_scroll gantt_layout_outer_scroll_vertical\" : \"gantt_layout_outer_scroll gantt_layout_outer_scroll_horizontal\";\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\t//views[i].$config.css = [views[i].$config.css || \"\", css].join(\" \");\r\n\t\t\tdomHelpers.addClassName(views[i].$view || views[i].getNode(), css);\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initVertical = function(){\r\n\t\tthis.$scroll_ver = this.$view;\r\n\t\tthis.$domEvents.attach(this.$view, \"scroll\", this._scrollVerticalHandler);\r\n\t};\r\n\r\n\tScrollbarCell.prototype._updateLinkedViews = function(){\r\n\t\tvar root = this._getRootParent();\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initMouseWheel = function(){\r\n\t\tvar ff = env.isFF;\r\n\t\tif (ff)\r\n\t\t\tthis.$domEvents.attach(this._getRootParent().$view, \"wheel\", this._mouseWheelHandler);\r\n\t\telse\r\n\t\t\tthis.$domEvents.attach(this._getRootParent().$view, \"mousewheel\", this._mouseWheelHandler);\r\n\t};\r\n\r\n\r\n\r\n\r\n\tScrollbarCell.prototype.scrollHorizontally = function(left){\r\n\t\tif(this._scrolling) return;\r\n\t\tthis._scrolling = true;\r\n\r\n\t\tthis.$scroll_hor.scrollLeft = left;\r\n\t\tthis.$config.codeScrollLeft = left;\r\n\t\tleft = this.$scroll_hor.scrollLeft;\r\n\r\n\t\tvar views = this._getLinkedViews();\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].scrollTo){\r\n\t\t\t\tviews[i].scrollTo(left, undefined);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar oldSize = this.$config.scrollPosition;\r\n\t\tthis.$config.scrollPosition = left;\r\n\t\tthis.callEvent(\"onScroll\", [oldSize, left, this.$config.scroll]);\r\n\t\tthis._scrolling = false;\r\n\t};\r\n\tScrollbarCell.prototype.scrollVertically = function(top){\r\n\t\tif(this._scrolling) return;\r\n\t\tthis._scrolling = true;\r\n\r\n\t\tthis.$scroll_ver.scrollTop = top;\r\n\t\ttop = this.$scroll_ver.scrollTop;\r\n\r\n\t\tvar views = this._getLinkedViews();\r\n\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].scrollTo){\r\n\t\t\t\tviews[i].scrollTo(undefined, top);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar oldSize = this.$config.scrollPosition;\r\n\t\tthis.$config.scrollPosition = top;\r\n\t\tthis.callEvent(\"onScroll\", [oldSize, top, this.$config.scroll]);\r\n\t\tthis._scrolling = false;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._isVertical = function(){\r\n\t\treturn this.$config.scroll == \"y\";\r\n\t};\r\n\tScrollbarCell.prototype._isHorizontal = function(){\r\n\t\treturn this.$config.scroll == \"x\";\r\n\t};\r\n\tScrollbarCell.prototype._scrollHorizontalHandler = function (e) {\r\n\t\tif(this._isVertical() || this._scrolling){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//in safari we can catch previous onscroll after setting new value from mouse-wheel event\r\n\t\t//set delay to prevent value drifiting\r\n\t\tif ((new Date()) - ( this._wheel_time || 0 ) < 100) return true;\r\n\t\tif (this.$gantt._touch_scroll_active) return;\r\n\t\tvar left = this.$scroll_hor.scrollLeft;\r\n\r\n\t\tthis.scrollHorizontally(left);\r\n\r\n\t\tthis._oldLeft = this.$scroll_hor.scrollLeft;\r\n\t};\r\n\tScrollbarCell.prototype._outerScrollHorizontalHandler = function(e){\r\n\t\tif(this._isVertical()){\r\n\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype.show = function(){\r\n\t\tthis.$parent.show();\r\n\t};\r\n\tScrollbarCell.prototype.hide = function(){\r\n\t\tthis.$parent.hide();\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getScrollSize = function(){\r\n\t\tvar scrollSize = 0;\r\n\t\tvar outerSize = 0;\r\n\t\tvar isHorizontal = this._isHorizontal();\r\n\r\n\t\tvar linked = this._getLinkedViews();\r\n\t\tvar view;\r\n\t\tvar scrollProperty = isHorizontal ? \"scrollWidth\" : \"scrollHeight\",\r\n\t\t\tinnerSizeProperty = isHorizontal ? \"contentX\" : \"contentY\";\r\n\t\tvar outerProperty = isHorizontal ? \"x\" : \"y\";\r\n\t\tvar offset = this._getScrollOffset();\r\n\r\n\t\tfor(var i = 0; i < linked.length; i++){\r\n\t\t\tview = linked[i];\r\n\t\t\tif(!(view && view.$content && view.$content.getSize && !view.$config.hidden)) continue;\r\n\r\n\t\t\tvar sizes = view.$content.getSize();\r\n\t\t\tvar cellScrollSize;\r\n\t\t\tif(sizes.hasOwnProperty(scrollProperty)){\r\n\t\t\t\tcellScrollSize = sizes[scrollProperty];\r\n\t\t\t}else{\r\n\t\t\t\tcellScrollSize = sizes[innerSizeProperty];\r\n\t\t\t}\r\n\r\n\t\t\tif(offset){\r\n\t\t\t\t// precalculated vertical/horizontal offsets of scrollbar to emulate 4.x look\r\n\t\t\t\tif(sizes[innerSizeProperty] > sizes[outerProperty] && sizes[innerSizeProperty] > scrollSize && (cellScrollSize > (sizes[outerProperty] - offset + 2))){\r\n\t\t\t\t\tscrollSize = cellScrollSize + (isHorizontal ? 0 : 2);\r\n\t\t\t\t\touterSize = sizes[outerProperty];\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tvar nonScrollableSize = Math.max(sizes[innerSizeProperty] - cellScrollSize, 0);\r\n\t\t\t\tvar scrollableViewPortSize = Math.max(sizes[outerProperty] - nonScrollableSize, 0);\r\n\t\t\t\tcellScrollSize = cellScrollSize + nonScrollableSize;\r\n\r\n\t\t\t\tif(cellScrollSize > scrollableViewPortSize && (cellScrollSize > scrollSize) ){\r\n\t\t\t\t\t//|| (cellScrollSize === scrollSize && sizes[outerProperty] < outerSize) // same scroll width but smaller scrollable view port\r\n\r\n\t\t\t\t\tscrollSize = cellScrollSize;\r\n\t\t\t\t\touterSize = sizes[outerProperty];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\touterScroll: outerSize,\r\n\t\t\tinnerScroll: scrollSize\r\n\t\t};\r\n\t};\r\n\r\n\tScrollbarCell.prototype.scroll = function(position){\r\n\t\tif(this._isHorizontal()){\r\n\t\t\tthis.scrollHorizontally(position);\r\n\t\t}else{\r\n\t\t\tthis.scrollVertically(position);\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype.getScrollState = function(){\r\n\t\treturn {\r\n\t\t\tvisible: this.isVisible(),\r\n\t\t\tdirection: this.$config.scroll,\r\n\t\t\tsize: this.$config.outerSize,\r\n\t\t\tscrollSize: this.$config.scrollSize || 0,\r\n\t\t\tposition: this.$config.scrollPosition || 0\r\n\t\t};\r\n\t};\r\n\r\n\tScrollbarCell.prototype.setSize = function(width, height){\r\n\t\t_super.prototype.setSize.apply(this, arguments);\r\n\r\n\t\tvar scrollSizes = this._getScrollSize();\r\n\r\n\t\tvar ownSize = (this._isVertical() ? height : width) - this._getScrollOffset() + (this._isHorizontal() ? 1 : 0);\r\n\r\n\t\tif(scrollSizes.innerScroll && ownSize > scrollSizes.outerScroll){\r\n\t\t\tscrollSizes.innerScroll += (ownSize - scrollSizes.outerScroll);\r\n\t\t}\r\n\t\tthis.$config.scrollSize = scrollSizes.innerScroll;\r\n\r\n\t\tthis.$config.width = width;\r\n\t\tthis.$config.height = height;\r\n\t\tthis._setScrollSize(scrollSizes.innerScroll);\r\n\t};\r\n\r\n\tScrollbarCell.prototype.isVisible = function(){\r\n\t\treturn !!(this.$parent && this.$parent.$view.parentNode);\r\n\t};\r\n\r\n\tScrollbarCell.prototype.shouldShow = function(){\r\n\t\tvar scrollSizes = this._getScrollSize();\r\n\t\tif(!scrollSizes.innerScroll && (this.$parent && this.$parent.$view.parentNode)){\r\n\t\t\treturn false;\r\n\t\t}else if(scrollSizes.innerScroll && !(this.$parent && this.$parent.$view.parentNode)){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype.shouldHide = function(){\r\n\t\tvar scrollSizes = this._getScrollSize();\r\n\t\tif(!scrollSizes.innerScroll && (this.$parent && this.$parent.$view.parentNode)){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tScrollbarCell.prototype.toggleVisibility = function(){\r\n\t\tif(this.shouldHide()){\r\n\t\t\tthis.hide();\r\n\t\t}else if(this.shouldShow()){\r\n\t\t\tthis.show();\r\n\t\t}\r\n\t};\r\n\t\r\n\tScrollbarCell.prototype._getScaleOffset = function(view){\r\n\t\tvar offset = 0;\r\n\t\tif(view && (view.$config.view == \"timeline\" || view.$config.view == \"grid\")){\r\n\t\t\toffset = view.$content.$getConfig().scale_height;\r\n\t\t}\r\n\t\treturn offset;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getScrollOffset = function(){\r\n\t\tvar offset = 0;\r\n\t\tif(this._isVertical()){\r\n\t\t\tvar parentLayout = this.$parent.$parent;\r\n\t\t\toffset = Math.max(\r\n\t\t\t\tthis._getScaleOffset(parentLayout.getPrevSibling(this.$parent.$id)),\r\n\t\t\t\tthis._getScaleOffset(parentLayout.getNextSibling(this.$parent.$id))\r\n\t\t\t\t);\r\n\t\t}else{\r\n\t\t\tvar linked = this._getLinkedViews();\r\n\r\n\t\t\tfor (var i = 0; i < linked.length; i++) {\r\n\t\t\t\tvar view = linked[i],\r\n\t\t\t\t\tvparent = view.$parent;\r\n\t\t\t\tvar cells = vparent.$cells;\r\n\r\n\t\t\t\tvar last = cells[cells.length - 1];\r\n\r\n\t\t\t\tif (last && last.$config.view == \"scrollbar\" && last.$config.hidden === false) {\r\n\t\t\t\t\toffset = last.$config.width;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn offset || 0;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._setScrollSize = function(size){\r\n\t\tvar property = this._isHorizontal() ? \"width\" : \"height\";\r\n\t\tvar scrollbar = this._isHorizontal() ? this.$scroll_hor : this.$scroll_ver;\r\n\r\n\t\tvar offset = this._getScrollOffset();\r\n\r\n\t\tvar node = scrollbar.firstChild;\r\n\r\n\t\tif(offset){\r\n\t\t\tif(this._isVertical()){\r\n\r\n\t\t\t\tthis.$config.outerSize = (this.$config.height - offset + 3);\r\n\t\t\t\tscrollbar.style.height = this.$config.outerSize + \"px\";\r\n\t\t\t\tscrollbar.style.top = (offset-1) + \"px\";\r\n\t\t\t\tdomHelpers.addClassName(scrollbar, this.$parent._borders.top);\r\n\t\t\t\tdomHelpers.addClassName(scrollbar.parentNode, \"gantt_task_vscroll\");\r\n\t\t\t}else{\r\n\t\t\t\tthis.$config.outerSize = (this.$config.width - offset + 1);\r\n\t\t\t\tscrollbar.style.width = this.$config.outerSize + \"px\";\r\n\t\t\t\t//domHelpers.addClassName(scrollbar, this.$parent._borders.right);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tscrollbar.style.top = \"auto\";\r\n\t\t\tdomHelpers.removeClassName(scrollbar, this.$parent._borders.top);\r\n\t\t\tdomHelpers.removeClassName(scrollbar.parentNode, \"gantt_task_vscroll\");\r\n\t\t\tthis.$config.outerSize = this.$config.height;\r\n\t\t}\r\n\r\n\t\tnode.style[property] = size + \"px\";\r\n\t};\r\n\r\n\tScrollbarCell.prototype._scrollVerticalHandler = function (e) {\r\n\t\tif(this._scrollHorizontalHandler() || this._scrolling){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this.$gantt._touch_scroll_active) return;\r\n\t\tvar top = this.$scroll_ver.scrollTop;\r\n\t\tvar prev = this._oldTop;\r\n\t\tif(top == prev) return;\r\n\r\n\t\tthis.scrollVertically(top);\r\n\r\n\t\tthis._oldTop = this.$scroll_ver.scrollTop;\r\n\r\n\t};\r\n\tScrollbarCell.prototype._outerScrollVerticalHandler = function(e){\r\n\t\tif(this._scrollHorizontalHandler()){\r\n\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype._checkWheelTarget = function(targetNode){\r\n\t\tvar connectedViews = this._getLinkedViews().concat(this);\r\n\r\n\t\tfor(var i = 0; i < connectedViews.length; i++){\r\n\t\t\tvar node = connectedViews[i].$view;\r\n\t\t\tif(domHelpers.isChildOf(targetNode, node)){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._mouseWheelHandler = function(e){\r\n\t\tvar target = e.target || e.srcElement;\r\n\r\n\t\tif(!this._checkWheelTarget(target))\r\n\t\t\treturn;\r\n\r\n\t\tthis._wheel_time = new Date();\r\n\r\n\t\tvar res = {};\r\n\t\tvar ff = env.isFF;\r\n\t\tvar wx = ff ? (e.deltaX*-20) : e.wheelDeltaX*2;\r\n\t\tvar wy = ff ? (e.deltaY*-40) : e.wheelDelta;\r\n\r\n\t\tif(e.shiftKey && !(e.deltaX || e.wheelDeltaX)){\r\n\t\t\t// shift+mousewheel for horizontal scroll\r\n\t\t\twx = wy*2;\r\n\t\t\twy = 0;\r\n\t\t}\r\n\r\n\t\tif (wx && Math.abs(wx) > Math.abs(wy)){\r\n\t\t\tif(this._isVertical()){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(res.x) return true;//no horisontal scroll, must not block scrolling\r\n\t\t\tif(!this.$scroll_hor || !this.$scroll_hor.offsetWidth) return true;\r\n\r\n\t\t\tvar dir  = wx/-40;\r\n\t\t\tvar oldLeft = this._oldLeft;\r\n\t\t\tvar left = oldLeft+dir*30;\r\n\t\t\tthis.scrollHorizontally(left);\r\n\t\t\tthis.$scroll_hor.scrollLeft = left;\r\n\t\t\t// not block scroll if position hasn't changed\r\n\t\t\tif(oldLeft == this.$scroll_hor.scrollLeft){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tthis._oldLeft = this.$scroll_hor.scrollLeft;\r\n\t\t} else {\r\n\t\t\tif(this._isHorizontal()){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(res.y) return true;//no vertical scroll, must not block scrolling\r\n\t\t\tif(!this.$scroll_ver || !this.$scroll_ver.offsetHeight) return true;\r\n\r\n\t\t\tvar dir  = wy/-40;\r\n\t\t\tif (typeof wy == \"undefined\")\r\n\t\t\t\tdir = e.detail;\r\n\r\n\t\t\tvar oldTop = this._oldTop;\r\n\t\t\tvar top = this.$scroll_ver.scrollTop+dir*30;\r\n\r\n\t\t\t//if(!this.$gantt.config.prevent_default_scroll &&\r\n\t\t\t//\t(this.$gantt._cached_scroll_pos && ((this.$gantt._cached_scroll_pos.y == top) || (this.$gantt._cached_scroll_pos.y <= 0 && top <= 0)))) return true;\r\n\r\n\r\n\t\t\tthis.scrollVertically(top);\r\n\t\t\tthis.$scroll_ver.scrollTop = top;\r\n\r\n\t\t\t// not block scroll if position hasn't changed\r\n\t\t\tif(oldTop == this.$scroll_ver.scrollTop){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tthis._oldTop = this.$scroll_ver.scrollTop;\r\n\t\t}\r\n\r\n\t\tif (e.preventDefault)\r\n\t\t\te.preventDefault();\r\n\t\te.cancelBubble=true;\r\n\t\treturn false;\r\n\t};\r\n\r\n\treturn ScrollbarCell;\r\n})(Cell);\r\n\r\nmodule.exports = ScrollbarCell;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/layout/scrollbar_cell.js\n// module id = 45\n// module chunks = 0","var utils = require(\"../../../utils/utils\");\r\n\r\nfunction ScaleHelper(gantt){\r\n\tvar dateHelper = gantt.date;\r\n\tvar services = gantt.$services;\r\n\r\n\treturn {\r\n\t\tgetSum: function (sizes, from, to) {\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = sizes.length - 1;\r\n\t\t\tif (from === undefined)\r\n\t\t\t\tfrom = 0;\r\n\r\n\t\t\tvar summ = 0;\r\n\t\t\tfor (var i = from; i <= to; i++)\r\n\t\t\t\tsumm += sizes[i];\r\n\r\n\t\t\treturn summ;\r\n\t\t},\r\n\t\tsetSumWidth: function (sum_width, scale, from, to) {\r\n\t\t\tvar parts = scale.width;\r\n\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = parts.length - 1;\r\n\t\t\tif (from === undefined)\r\n\t\t\t\tfrom = 0;\r\n\t\t\tvar length = to - from + 1;\r\n\r\n\t\t\tif (from > parts.length - 1 || length <= 0 || to > parts.length - 1)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar oldWidth = this.getSum(parts, from, to);\r\n\r\n\t\t\tvar diff = sum_width - oldWidth;\r\n\r\n\t\t\tthis.adjustSize(diff, parts, from, to);\r\n\t\t\tthis.adjustSize(-diff, parts, to + 1);\r\n\r\n\t\t\tscale.full_width = this.getSum(parts);\r\n\t\t},\r\n\t\tsplitSize: function (width, count) {\r\n\t\t\tvar arr = [];\r\n\t\t\tfor (var i = 0; i < count; i++) arr[i] = 0;\r\n\r\n\t\t\tthis.adjustSize(width, arr);\r\n\t\t\treturn arr;\r\n\r\n\t\t},\r\n\t\tadjustSize: function (width, parts, from, to) {\r\n\t\t\tif (!from)\r\n\t\t\t\tfrom = 0;\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = parts.length - 1;\r\n\r\n\t\t\tvar length = to - from + 1;\r\n\r\n\t\t\tvar full = this.getSum(parts, from, to);\r\n\r\n\t\t\tvar shared = 0;\r\n\r\n\t\t\tfor (var i = from; i <= to; i++) {\r\n\t\t\t\tvar share = Math.floor(width * (full ? (parts[i] / full) : (1 / length)));\r\n\r\n\t\t\t\tfull -= parts[i];\r\n\t\t\t\twidth -= share;\r\n\t\t\t\tlength--;\r\n\r\n\t\t\t\tparts[i] += share;\r\n\t\t\t\tshared += share;\r\n\t\t\t}\r\n\t\t\tparts[parts.length - 1] += width;\r\n\t\t\t//parts[parts.length - 1] += width - shared;\r\n\t\t},\r\n\t\tsortScales: function (scales) {\r\n\t\t\tfunction cellSize(unit, step) {\r\n\t\t\t\tvar d = new Date(1970, 0, 1);\r\n\t\t\t\treturn dateHelper.add(d, step, unit) - d;\r\n\t\t\t}\r\n\r\n\t\t\tscales.sort(function (a, b) {\r\n\t\t\t\tif (cellSize(a.unit, a.step) < cellSize(b.unit, b.step)) {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t} else if (cellSize(a.unit, a.step) > cellSize(b.unit, b.step)) {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tfor (var i = 0; i < scales.length; i++) {\r\n\t\t\t\tscales[i].index = i;\r\n\t\t\t}\r\n\t\t},\r\n\t\tprimaryScale: function () {\r\n\r\n\t\t\tvar config = services.getService(\"templateLoader\");\r\n\t\t\tconfig.initTemplate(\"date_scale\", undefined, undefined, services.config(), services.templates());\r\n\r\n\t\t\treturn {\r\n\t\t\t\tunit: services.config().scale_unit,\r\n\t\t\t\tstep: services.config().step,\r\n\t\t\t\ttemplate: services.templates().date_scale,\r\n\t\t\t\tdate: services.config().date_scale,\r\n\t\t\t\tcss: services.templates().scale_cell_class\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tprepareConfigs: function (scales, min_coll_width, container_width, scale_height, minDate, maxDate, rtl) {\r\n\t\t\tvar heights = this.splitSize(scale_height, scales.length);\r\n\t\t\tvar full_width = container_width;\r\n\r\n\t\t\tvar configs = [];\r\n\t\t\tfor (var i = scales.length - 1; i >= 0; i--) {\r\n\t\t\t\tvar main_scale = (i == scales.length - 1);\r\n\t\t\t\tvar cfg = this.initScaleConfig(scales[i], minDate, maxDate);\r\n\t\t\t\tif (main_scale) {\r\n\t\t\t\t\tthis.processIgnores(cfg);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.initColSizes(cfg, min_coll_width, full_width, heights[i]);\r\n\t\t\t\tthis.limitVisibleRange(cfg);\r\n\r\n\t\t\t\tif (main_scale) {\r\n\t\t\t\t\tfull_width = cfg.full_width;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconfigs.unshift(cfg);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfor (var i = 0; i < configs.length - 1; i++) {\r\n\t\t\t\tthis.alineScaleColumns(configs[configs.length - 1], configs[i]);\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < configs.length; i++) {\r\n\r\n\t\t\t\tif(rtl){\r\n\t\t\t\t\tthis.reverseScale(configs[i]);\r\n\t\t\t\t}\r\n\t\t\t\tthis.setPosSettings(configs[i]);\r\n\t\t\t}\r\n\t\t\treturn configs;\r\n\r\n\t\t},\r\n\r\n\t\treverseScale: function(scale){\r\n\t\t\tscale.width = scale.width.reverse();\r\n\t\t\tscale.trace_x = scale.trace_x.reverse();\r\n\r\n\t\t\tvar indexes = scale.trace_indexes;\r\n\t\t\tscale.trace_indexes = {};\r\n\t\t\tscale.trace_index_transition = {};\r\n\t\t\tscale.rtl = true;\r\n\t\t\tfor(var i = 0; i < scale.trace_x.length; i++){\r\n\t\t\t\tscale.trace_indexes[scale.trace_x[i].valueOf()] = i;\r\n\t\t\t\tscale.trace_index_transition[indexes[scale.trace_x[i].valueOf()]] = i;\r\n\t\t\t}\r\n\t\t\treturn scale;\r\n\t\t},\r\n\r\n\t\tsetPosSettings: function (config) {\r\n\t\t\tfor (var i = 0, len = config.trace_x.length; i < len; i++) {\r\n\t\t\t\tconfig.left.push((config.width[i - 1] || 0) + (config.left[i - 1] || 0));\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_ignore_time_config: function (date, scale) {\r\n\r\n\t\t\tif (services.config().skip_off_time) {\r\n\t\t\t\tvar skip = true;\r\n\t\t\t\tvar probe = date;\r\n\r\n\t\t\t\t// check dates in case custom scale unit, e.g. {unit: \"month\", step: 3}\r\n\t\t\t\tfor (var i = 0; i < scale.step; i++) {\r\n\t\t\t\t\tif (i) {\r\n\t\t\t\t\t\tprobe = dateHelper.add(date, i, scale.unit);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tskip = skip && !this.isWorkTime(probe, scale.unit);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn skip;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t//defined in an extension\r\n\t\tprocessIgnores: function (config) {\r\n\t\t\tconfig.ignore_x = {};\r\n\t\t\tconfig.display_count = config.count;\r\n\t\t},\r\n\t\tinitColSizes: function (config, min_col_width, full_width, line_height) {\r\n\t\t\tvar cont_width = full_width;\r\n\r\n\t\t\tconfig.height = line_height;\r\n\r\n\t\t\tvar column_count = config.display_count === undefined ? config.count : config.display_count;\r\n\r\n\t\t\tif (!column_count)\r\n\t\t\t\tcolumn_count = 1;\r\n\r\n\t\t\tconfig.col_width = Math.floor(cont_width / column_count);\r\n\r\n\t\t\tif (min_col_width) {\r\n\t\t\t\tif (config.col_width < min_col_width) {\r\n\t\t\t\t\tconfig.col_width = min_col_width;\r\n\t\t\t\t\tcont_width = config.col_width * column_count;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconfig.width = [];\r\n\t\t\tvar ignores = config.ignore_x || {};\r\n\t\t\tfor (var i = 0; i < config.trace_x.length; i++) {\r\n\t\t\t\tif (ignores[config.trace_x[i].valueOf()] || (config.display_count == config.count)) {\r\n\t\t\t\t\tconfig.width[i] = 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// width of month columns should be proportional month duration\r\n\t\t\t\t\tvar width = 1;\r\n\t\t\t\t\tif (config.unit == \"month\") {\r\n\t\t\t\t\t\tvar days = Math.round((dateHelper.add(config.trace_x[i], config.step, config.unit) - config.trace_x[i]) / (1000 * 60 * 60 * 24));\r\n\t\t\t\t\t\twidth = days;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconfig.width[i] = width;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.adjustSize(cont_width - this.getSum(config.width)/* 1 width per column from the code above */, config.width);\r\n\t\t\tconfig.full_width = this.getSum(config.width);\r\n\t\t},\r\n\t\tinitScaleConfig: function (config, min_date, max_date) {\r\n\t\t\tvar cfg = utils.mixin({\r\n\t\t\t\tcount: 0,\r\n\t\t\t\tcol_width: 0,\r\n\t\t\t\tfull_width: 0,\r\n\t\t\t\theight: 0,\r\n\t\t\t\twidth: [],\r\n\t\t\t\tleft: [],\r\n\t\t\t\ttrace_x: [],\r\n\t\t\t\ttrace_indexes: {},\r\n\t\t\t\tmin_date: new Date(min_date),\r\n\t\t\t\tmax_date: new Date(max_date)\r\n\t\t\t}, config);\r\n\r\n\t\t\tthis.eachColumn(config.unit, config.step, min_date, max_date, function (date) {\r\n\t\t\t\tcfg.count++;\r\n\t\t\t\tcfg.trace_x.push(new Date(date));\r\n\t\t\t\tcfg.trace_indexes[date.valueOf()] = cfg.trace_x.length - 1;\r\n\t\t\t});\r\n\r\n\t\t\tcfg.trace_x_ascending = cfg.trace_x.slice();\r\n\t\t\treturn cfg;\r\n\t\t},\r\n\t\titerateScales: function (lower_scale, upper_scale, from, to, callback) {\r\n\t\t\tvar upper_dates = upper_scale.trace_x;\r\n\t\t\tvar lower_dates = lower_scale.trace_x;\r\n\r\n\t\t\tvar prev = from || 0;\r\n\t\t\tvar end = to || (lower_dates.length - 1);\r\n\t\t\tvar prevUpper = 0;\r\n\r\n\r\n\t\t\tfor (var up = 1; up < upper_dates.length; up++) {\r\n\t\t\t\tvar target_index = (lower_scale.trace_indexes[+upper_dates[up]]);\r\n\t\t\t\tif (target_index !== undefined && target_index <= end) {\r\n\t\t\t\t\tif (callback) {\r\n\t\t\t\t\t\tcallback.apply(this, [prevUpper, up, prev, target_index]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tprev = target_index;\r\n\t\t\t\t\tprevUpper = up;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\talineScaleColumns: function (lower_scale, upper_scale, from, to) {\r\n\t\t\tthis.iterateScales(lower_scale, upper_scale, from, to, function (upper_start, upper_end, lower_start, lower_end) {\r\n\t\t\t\tvar targetWidth = this.getSum(lower_scale.width, lower_start, lower_end - 1);\r\n\t\t\t\tvar actualWidth = this.getSum(upper_scale.width, upper_start, upper_end - 1);\r\n\t\t\t\tif (actualWidth != targetWidth) {\r\n\t\t\t\t\tthis.setSumWidth(targetWidth, upper_scale, upper_start, upper_end - 1);\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\teachColumn: function (unit, step, min_date, max_date, callback) {\r\n\t\t\tvar start = new Date(min_date),\r\n\t\t\t\tend = new Date(max_date);\r\n\t\t\tif (dateHelper[unit + \"_start\"]) {\r\n\t\t\t\tstart = dateHelper[unit + \"_start\"](start);\r\n\t\t\t}\r\n\r\n\t\t\tvar curr = new Date(start);\r\n\t\t\tif (+curr >= +end) {\r\n\t\t\t\tend = dateHelper.add(curr, step, unit);\r\n\t\t\t}\r\n\t\t\twhile (+curr < +end) {\r\n\t\t\t\tcallback.call(this, new Date(curr));\r\n\t\t\t\tvar tzOffset = curr.getTimezoneOffset();\r\n\t\t\t\tcurr = dateHelper.add(curr, step, unit);\r\n\t\t\t\tcurr = gantt._correct_dst_change(curr, tzOffset, step, unit);\r\n\t\t\t\tif (dateHelper[unit + '_start'])\r\n\t\t\t\t\tcurr = dateHelper[unit + \"_start\"](curr);\r\n\t\t\t}\r\n\t\t},\r\n\t\tlimitVisibleRange: function (cfg) {\r\n\t\t\tvar dates = cfg.trace_x;\r\n\r\n\t\t\tvar left = 0, right = cfg.width.length - 1;\r\n\t\t\tvar diff = 0;\r\n\t\t\tif (+dates[0] < +cfg.min_date && left != right) {\r\n\t\t\t\tvar width = Math.floor(cfg.width[0] * ((dates[1] - cfg.min_date) / (dates[1] - dates[0])));\r\n\t\t\t\tdiff += cfg.width[0] - width;\r\n\t\t\t\tcfg.width[0] = width;\r\n\r\n\t\t\t\tdates[0] = new Date(cfg.min_date);\r\n\t\t\t}\r\n\r\n\t\t\tvar last = dates.length - 1;\r\n\t\t\tvar lastDate = dates[last];\r\n\t\t\tvar outDate = dateHelper.add(lastDate, cfg.step, cfg.unit);\r\n\t\t\tif (+outDate > +cfg.max_date && last > 0) {\r\n\t\t\t\tvar width = cfg.width[last] - Math.floor(cfg.width[last] * ((outDate - cfg.max_date) / (outDate - lastDate)));\r\n\t\t\t\tdiff += cfg.width[last] - width;\r\n\t\t\t\tcfg.width[last] = width;\r\n\t\t\t}\r\n\r\n\t\t\tif (diff) {\r\n\t\t\t\tvar full = this.getSum(cfg.width);\r\n\t\t\t\tvar shared = 0;\r\n\t\t\t\tfor (var i = 0; i < cfg.width.length; i++) {\r\n\t\t\t\t\tvar share = Math.floor(diff * (cfg.width[i] / full));\r\n\t\t\t\t\tcfg.width[i] += share;\r\n\t\t\t\t\tshared += share;\r\n\t\t\t\t}\r\n\t\t\t\tthis.adjustSize(diff - shared, cfg.width);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = ScaleHelper;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/timeline/scales.js\n// module id = 46\n// module chunks = 0","var utils = require(\"../../../utils/utils\"),\r\n\tenv = require(\"../../../utils/env\");\r\n\r\nvar createStaticBgHelper = function(utils, env){\r\n\r\n\tvar canvasBgCache = {};\r\n\tvar staticBgStyleId = \"gantt-static-bg-styles-\" + utils.uid();\r\n\r\n\tfunction renderBgCanvas(targetNode, config, scale, totalHeight) {\r\n\t\tif (!config.static_background) return;\r\n\r\n\t\tvar canvas = document.createElement(\"canvas\");\r\n\t\tif (!canvas.getContext) return; // if canvas is not supported (for IE8)\r\n\r\n\t\t// clear previous bg data\r\n\t\ttargetNode.innerHTML = \"\";\r\n\r\n\t\tvar styleParams = getCellStyles(targetNode);\r\n\t\tvar png = createBackgroundTiles(styleParams, config, scale);\r\n\t\tvar bgDivs = createBgDivs(png, config, scale, totalHeight);\r\n\r\n\t\tvar fragment = document.createDocumentFragment();\r\n\r\n\t\tbgDivs.forEach(function (div) {\r\n\t\t\tfragment.appendChild(div);\r\n\t\t});\r\n\r\n\t\ttargetNode.appendChild(fragment);\r\n\t}\r\n\r\n\tfunction getColumnWidths(scale) {\r\n\t\tvar widths = scale.width;\r\n\t\tvar differentWidths = {};\r\n\t\tfor (var i = 0; i < widths.length; i++) {\r\n\t\t\tif (widths[i] * 1)\r\n\t\t\t\tdifferentWidths[widths[i]] = true;\r\n\t\t}\r\n\t\treturn differentWidths;\r\n\t}\r\n\r\n\tfunction parseRgb(rgbCss) {\r\n\t\tvar result = /^rgba?\\(([\\d]{1,3}), *([\\d]{1,3}), *([\\d]{1,3}) *(,( *[\\d\\.]+ *))?\\)$/i.exec(rgbCss);\r\n\t\treturn result ? {\r\n\t\t\tr: result[1] * 1,\r\n\t\t\tg: result[2] * 1,\r\n\t\t\tb: result[3] * 1,\r\n\t\t\ta: (result[5] * 255) || 255\r\n\t\t} : null;\r\n\t}\r\n\r\n\tfunction getUrlFromCache(key) {\r\n\t\treturn canvasBgCache[key] || null;\r\n\t}\r\n\r\n\tfunction getHashKey(width, height, cellStyles) {\r\n\t\treturn (width + '' + height + cellStyles.bottomBorderColor + cellStyles.rightBorderColor).replace(/[^\\w\\d]/g, '');\r\n\t}\r\n\r\n\tfunction getStyleElement() {\r\n\t\tvar style = document.getElementById(staticBgStyleId);\r\n\r\n\t\tif (!style) {\r\n\t\t\tstyle = document.createElement(\"style\");\r\n\t\t\tstyle.id = staticBgStyleId;\r\n\t\t\tdocument.body.appendChild(style);\r\n\t\t}\r\n\t\treturn style;\r\n\t}\r\n\r\n\tfunction cacheUrl(key, url) {\r\n\t\tcanvasBgCache[key] = url;\r\n\t}\r\n\r\n\tfunction generateBgUrl(width, height, cellStyles) {\r\n\t\t// use relatively big bg image about 500*500px in order to reduce misalignments due browser zoom\r\n\t\tvar cols = Math.floor(500 / width) || 1;\r\n\t\tvar rows = Math.floor(500 / height) || 1;\r\n\r\n\t\tvar canvas = document.createElement(\"canvas\");\r\n\t\tcanvas.height = height * rows;\r\n\t\tcanvas.width = width * cols;\r\n\r\n\t\tvar context = canvas.getContext(\"2d\");\r\n\r\n\t\tdrawGrid(height, width, rows, cols, context, cellStyles);\r\n\r\n\t\treturn canvas.toDataURL();\r\n\r\n\t\tfunction drawGrid(rowHeight, colWidth, rows, cols, context, styles) {\r\n\t\t\t// paint pixels manually instead of using lineTo in order to prevent canvas aliasing\r\n\t\t\tvar image = context.createImageData(colWidth * cols, rowHeight * rows);\r\n\t\t\timage.imageSmoothingEnabled = false;\r\n\r\n\t\t\tvar verticalLineWidth = styles.rightBorderWidth * 1;\r\n\t\t\tvar verticalLineColor = parseRgb(styles.rightBorderColor);\r\n\r\n\t\t\tvar x = 0,\r\n\t\t\t\ty = 0,\r\n\t\t\t\tw = 0;\r\n\r\n\t\t\tfor (var col = 1; col <= cols; col++) {\r\n\t\t\t\tx = col * colWidth - 1;\r\n\t\t\t\tfor (w = 0; w < verticalLineWidth; w++) {\r\n\t\t\t\t\tfor (y = 0; y < rowHeight * rows; y++) {\r\n\t\t\t\t\t\tdrawDot(x - w, y, verticalLineColor, image);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar horizontalLineWidth = styles.bottomBorderWidth * 1;\r\n\t\t\tvar horizontalLineColor = parseRgb(styles.bottomBorderColor);\r\n\r\n\t\t\ty = 0;\r\n\t\t\tfor (var row = 1; row <= rows; row++) {\r\n\t\t\t\ty = row * rowHeight - 1;\r\n\t\t\t\tfor (w = 0; w < horizontalLineWidth; w++) {\r\n\t\t\t\t\tfor (x = 0; x < colWidth * cols; x++) {\r\n\t\t\t\t\t\tdrawDot(x, y - w, horizontalLineColor, image);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcontext.putImageData(image, 0, 0);\r\n\t\t}\r\n\r\n\t\tfunction drawDot(x, y, color, matrix) {\r\n\t\t\tvar rowLength = width * cols;\r\n\r\n\t\t\tvar index = (y * rowLength + x) * 4;\r\n\r\n\t\t\tmatrix.data[index] = color.r;\r\n\t\t\tmatrix.data[index + 1] = color.g;\r\n\t\t\tmatrix.data[index + 2] = color.b;\r\n\t\t\tmatrix.data[index + 3] = color.a;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getCssClass(key) {\r\n\t\treturn \"gantt-static-bg-\" + key;\r\n\t}\r\n\r\n\tfunction createBackgroundTiles(cellStyles, config, scale) {\r\n\t\tvar data = {};\r\n\t\tvar widths = getColumnWidths(scale),\r\n\t\t\theight = config.row_height;\r\n\r\n\t\tvar styleHTML = \"\";\r\n\t\tfor (var i in widths) {\r\n\r\n\t\t\tvar width = i * 1;\r\n\t\t\tvar key = getHashKey(width, height, cellStyles);\r\n\t\t\tvar cachedUrl = getUrlFromCache(key);\r\n\r\n\t\t\tif (!cachedUrl) {\r\n\t\t\t\tvar bgImage = generateBgUrl(width, height, cellStyles);\r\n\t\t\t\tcacheUrl(key, bgImage);\r\n\t\t\t\tstyleHTML += \".\" + getCssClass(key) + \"{ background-image: url('\" + bgImage + \"');}\";\r\n\t\t\t}\r\n\r\n\t\t\tdata[i] = getCssClass(key);\r\n\t\t}\r\n\r\n\t\tif (styleHTML) {\r\n\t\t\tvar style = getStyleElement();\r\n\t\t\tstyle.innerHTML += styleHTML;\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\tfunction createBgDivs(bgTiles, config, scale, dataHeight) {\r\n\t\tvar divs = [];\r\n\t\tvar tile,\r\n\t\t\tprevWidth = 0,\r\n\t\t\tprevCell;\r\n\r\n\t\tvar widths = scale.width.filter(function (i) {\r\n\t\t\treturn !!i;\r\n\t\t});\r\n\r\n\t\tvar leftPos = 0;\r\n\r\n\t\t//TODO: fixme\r\n\t\t// bg image misalignments on horizontal scroll on very large time scales, especially in IE/Edge browsers\r\n\t\t// limiting max tile width seems to solve the issue, but can increase rendering time\r\n\t\tvar maxTileSize = 100000;\r\n\t\tif (env.isIE) {\r\n\t\t\t// special case for IE11 on win7x and probably 8x\r\n\t\t\tvar appVersion = navigator.appVersion || \"\";\r\n\t\t\tif (appVersion.indexOf(\"Windows NT 6.2\") != -1 ||\r\n\t\t\t\tappVersion.indexOf(\"Windows NT 6.1\") != -1 ||\r\n\t\t\t\tappVersion.indexOf(\"Windows NT 6.0\") != -1) {\r\n\r\n\t\t\t\tmaxTileSize = 20000;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < widths.length; i++) {\r\n\t\t\t//var currentWidth = cells[i].clientWidth;\r\n\t\t\tvar cell = widths[i];\r\n\r\n\t\t\tif ((cell != prevCell && prevCell !== undefined) || (i == widths.length - 1) || (prevWidth > maxTileSize)) {\r\n\r\n\t\t\t\tvar totalHeight = dataHeight,\r\n\t\t\t\t\tcurrentTop = 0,\r\n\t\t\t\t\trowHeight = Math.floor(maxTileSize / config.row_height) * config.row_height;\r\n\r\n\t\t\t\tvar tileWidth = prevWidth;\r\n\r\n\t\t\t\twhile (totalHeight > 0) {\r\n\t\t\t\t\tvar currentHeight = Math.min(totalHeight, rowHeight);\r\n\t\t\t\t\ttotalHeight -= rowHeight;\r\n\r\n\t\t\t\t\ttile = document.createElement(\"div\");\r\n\r\n\t\t\t\t\ttile.style.height = currentHeight + \"px\";\r\n\t\t\t\t\ttile.style.position = \"absolute\";\r\n\t\t\t\t\ttile.style.top = currentTop + \"px\";\r\n\t\t\t\t\ttile.style.left = leftPos + \"px\";\r\n\r\n\t\t\t\t\ttile.style.whiteSpace = \"no-wrap\";\r\n\t\t\t\t\ttile.className = bgTiles[prevCell || cell];\r\n\r\n\t\t\t\t\t// if last - short by 1 px (bug fix)\r\n\t\t\t\t\tif (i == widths.length - 1) {\r\n\t\t\t\t\t\ttileWidth = cell + tileWidth - 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttile.style.width = tileWidth + \"px\";\r\n\r\n\t\t\t\t\tdivs.push(tile);\r\n\t\t\t\t\tcurrentTop += currentHeight;\r\n\t\t\t\t}\r\n\t\t\t\tprevWidth = 0;\r\n\t\t\t\tleftPos += tileWidth;\r\n\r\n\t\t\t\t//cell = 0;\r\n\t\t\t}\r\n\t\t\tif (cell) {\r\n\t\t\t\tprevWidth += cell;\r\n\t\t\t\tprevCell = cell;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn divs;\r\n\t}\r\n\r\n\tfunction getCellStyles(targetNode) {\r\n\t\t// creating temp DOM structure for resolving style parameters. Will be removed after calculating.\r\n\t\tvar cell = document.createElement(\"div\");\r\n\t\tcell.className = \"gantt_task_cell\";\r\n\t\tvar row = document.createElement(\"div\");\r\n\t\trow.className = \"gantt_task_row\";\r\n\t\trow.appendChild(cell);\r\n\t\ttargetNode.appendChild(row);\r\n\r\n\t\tvar rowStyles = getComputedStyle(row),\r\n\t\t\tcellStyles = getComputedStyle(cell);\r\n\r\n\t\tvar params = {\r\n\t\t\tbottomBorderWidth: rowStyles.getPropertyValue(\"border-bottom-width\").replace(\"px\", \"\"),\r\n\t\t\trightBorderWidth: cellStyles.getPropertyValue(\"border-right-width\").replace(\"px\", \"\"),\r\n\t\t\tbottomBorderColor: rowStyles.getPropertyValue(\"border-bottom-color\"),\r\n\t\t\trightBorderColor: cellStyles.getPropertyValue(\"border-right-color\")\r\n\t\t};\r\n\r\n\t\ttargetNode.removeChild(row);\r\n\r\n\t\treturn params;\r\n\t}\r\n\r\n\treturn {\r\n\t\trender: renderBgCanvas\r\n\t};\r\n};\r\n\r\nmodule.exports = {\r\n\tcreate: function(){\r\n\t\treturn createStaticBgHelper(utils, env);\r\n\t}\r\n};\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/timeline/tasks_canvas_render.js\n// module id = 47\n// module chunks = 0","var domHelpers = require(\"../../../utils/dom_helpers\");\r\n\r\nfunction createResizer(gantt, grid){\r\n// renders resize elements in the grid header\r\n\tvar _render_grid_header_resize = function () {\r\n\t\tvar columns = grid.getGridColumns(),\r\n\t\t\tconfig = grid.$getConfig(),\r\n\t\t\twidth = 0,\r\n\t\t\ttotalWidth = grid.$config.width,\r\n\t\t\tlineHeigth = config.scale_height;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar last = i == columns.length - 1;\r\n\t\t\tvar col = columns[i];\r\n\r\n\t\t\tvar pos;\r\n\t\t\twidth += col.width;\r\n\t\t\tif(config.rtl){\r\n\t\t\t\tpos = totalWidth - width;\r\n\t\t\t}else{\r\n\t\t\t\tpos = width;\r\n\t\t\t}\r\n\r\n\t\t\tif (col.resize) {\r\n\t\t\t\tvar resize_el = document.createElement(\"div\");\r\n\t\t\t\tresize_el.className = \"gantt_grid_column_resize_wrap\";\r\n\t\t\t\tresize_el.style.top = \"0px\";\r\n\t\t\t\tresize_el.style.height = lineHeigth + \"px\";\r\n\t\t\t\tresize_el.innerHTML = \"<div class='gantt_grid_column_resize'></div>\";\r\n\t\t\t\tresize_el.setAttribute(config.grid_resizer_column_attribute, i);\r\n\r\n\t\t\t\tgantt._waiAria.gridSeparatorAttr(resize_el);\r\n\r\n\t\t\t\tgrid.$grid_scale.appendChild(resize_el);\r\n\r\n\t\t\t\tresize_el.style.left = Math.max(0, pos) + \"px\";\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tvar _grid_resize = {\r\n\t\tcolumn_before_start: gantt.bind(function (dnd, obj, e) {\r\n\t\t\tvar config = grid.$getConfig();\r\n\r\n\t\t\tvar el = domHelpers.locateAttribute(e, config.grid_resizer_column_attribute);\r\n\t\t\tif (!el) return false;\r\n\r\n\t\t\tvar column_index = this.locate(e, config.grid_resizer_column_attribute),\r\n\t\t\t\tcolumn = grid.getGridColumns()[column_index];\r\n\r\n\t\t\tif (grid.callEvent(\"onColumnResizeStart\", [column_index, column]) === false)\r\n\t\t\t\treturn false;\r\n\t\t}, gantt),\r\n\r\n\t\tcolumn_after_start: gantt.bind(function (dnd, obj, e) {\r\n\t\t\tvar config = grid.$getConfig();\r\n\r\n\t\t\tvar column_index = this.locate(e, config.grid_resizer_column_attribute);\r\n\t\t\tdnd.config.marker.innerHTML = \"\";\r\n\t\t\tdnd.config.marker.className += \" gantt_grid_resize_area\";\r\n\t\t\tdnd.config.marker.style.height = grid.$grid.offsetHeight + \"px\";\r\n\t\t\tdnd.config.marker.style.top = \"0px\";\r\n\t\t\tdnd.config.drag_index = column_index;\r\n\r\n\t\t}, gantt),\r\n\r\n\t\tcolumn_drag_move: gantt.bind(function (dnd, obj, e) {\r\n\t\t\tvar config = grid.$getConfig();\r\n\r\n\t\t\tvar dd = dnd.config,\r\n\t\t\t\tcolumns = grid.getGridColumns();\r\n\t\t\tvar index = parseInt(dd.drag_index, 10);\r\n\t\t\tvar target_column = columns[index];\r\n\t\t\tvar\tpos = domHelpers.getNodePosition(grid.$grid_scale),\r\n\t\t\t\tpointerPosition = parseInt(dd.marker.style.left, 10),\r\n\t\t\t\tminPointerPosition = target_column.min_width ? target_column.min_width : config.min_grid_column_width,\r\n\t\t\t\tmaxPointerPosition = grid.$grid_data.offsetWidth,// - config.min_grid_column_width * (columns.length - dd.drag_index - 2),// 1 for current column + 1 for last column\r\n\t\t\t\tmarkerStartPosition = 0,\r\n\t\t\t\tmarker_width = 0;\r\n\r\n\t\t\t\r\n\t\t/*\tif(config.rtl){\r\n\t\t\t\tindex = columns.length - 1 - index;\r\n\t\t\t\tcolumns = columns.reverse();\r\n\t\t\t}*/\r\n\r\n\t\t\tif(!config.rtl){\r\n\t\t\t\tpointerPosition -= pos.x - 1;\r\n\t\t\t}else{\r\n\t\t\t\tpointerPosition = (pos.x + pos.width - 1) - pointerPosition;\r\n\t\t\t}\r\n\r\n\t\t\t//pointerPosition -= pos.x - 1;\r\n\t\t\tfor (var i = 0; i < index; i++) {\r\n\t\t\t\tminPointerPosition += columns[i].width;\r\n\t\t\t\tmarkerStartPosition += columns[i].width;\r\n\t\t\t}\r\n\r\n\t\t\tif (pointerPosition < minPointerPosition) {\r\n\t\t\t\tpointerPosition = minPointerPosition;\r\n\t\t\t}\r\n\r\n\t\t\tif (config.keep_grid_width) {\r\n\t\t\t\tvar limit_max = 0;\r\n\t\t\t\tfor (var i=index+1; i<columns.length; i++) {\r\n\t\t\t\t\tif (columns[i].min_width)\r\n\t\t\t\t\t\tmaxPointerPosition -= columns[i].min_width;\r\n\t\t\t\t\telse if (config.min_grid_column_width)\r\n\t\t\t\t\t\tmaxPointerPosition -= config.min_grid_column_width;\r\n\r\n\t\t\t\t\tif (columns[i].max_width && limit_max !== false)\r\n\t\t\t\t\t\tlimit_max += columns[i].max_width;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tlimit_max = false;\t\t\t\t\t\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// we have to restrict min value if only ALL right-side columns have 'max_width' field\r\n\t\t\t\tif (limit_max) {\r\n\t\t\t\t\tminPointerPosition = grid.$grid_data.offsetWidth - limit_max;\r\n\t\t\t\t}\r\n\t\t\t\tif (pointerPosition < minPointerPosition) {\r\n\t\t\t\t\tpointerPosition = minPointerPosition;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (pointerPosition > maxPointerPosition)\r\n\t\t\t\t\tpointerPosition = maxPointerPosition;\r\n\t\t\t}\r\n\r\n\t\t\tdd.left = pointerPosition - 1;// -1 for border\r\n\r\n\t\t\tmarker_width = Math.abs(pointerPosition - markerStartPosition);\r\n\r\n\t\t\t// column.max_width - maximum width of the column, user defined\r\n\t\t\tif (target_column.max_width && marker_width > target_column.max_width)\r\n\t\t\t\tmarker_width = target_column.max_width;\r\n\r\n\t\t\tif(config.rtl){\r\n\t\t\t\tmarkerStartPosition = (pos.width - markerStartPosition) + 2 - marker_width;\r\n\t\t\t}\r\n\t\t\tdd.marker.style.top = pos.y + \"px\";\r\n\t\t\tdd.marker.style.left = pos.x - 1 + markerStartPosition + \"px\";\r\n\t\t\tdd.marker.style.width = marker_width + \"px\";\r\n\r\n\t\t\tgrid.callEvent(\"onColumnResize\", [index, columns[index], marker_width - 1]);\r\n\t\t\treturn true;\r\n\t\t}, gantt),\r\n\r\n\t\tcolumn_drag_end: gantt.bind(function (dnd, obj, e) {\r\n\t\t\tvar config = grid.$getConfig();\r\n\t\t\tvar columns = grid.getGridColumns(),\r\n\t\t\t\tcolumns_width = 0,\r\n\t\t\t\tindex = parseInt(dnd.config.drag_index, 10),\r\n\t\t\t\ttarget_column = columns[index];\r\n\r\n\t\t\t// var colIndex = index;\r\n\t\t\t/*if(config.rtl){\r\n\t\t\t\tcolIndex = columns.length - 1 - target_index;\r\n\t\t\t\tcolumns = columns.reverse();\r\n\t\t\t}*/\r\n\r\n\t\t\tfor (var i = 0; i < index; i++) {\r\n\t\t\t\tcolumns_width += columns[i].width;\r\n\t\t\t}\r\n\r\n\t\t\tvar final_width = (target_column.min_width && (dnd.config.left - columns_width) < target_column.min_width) ?\r\n\t\t\t\ttarget_column.min_width : (dnd.config.left - columns_width);\r\n\r\n\t\t\tif (target_column.max_width && target_column.max_width < final_width) // TODO: probably can be omitted\r\n\t\t\t\tfinal_width = target_column.max_width;\r\n\r\n\t\t\tif (grid.callEvent(\"onColumnResizeEnd\", [index, target_column, final_width]) === false)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif (target_column.width == final_width)\r\n\t\t\t\treturn;\r\n\r\n\t\t\ttarget_column.width = final_width;\r\n\r\n\t\t\tif (config.keep_grid_width) {\r\n\t\t\t\tcolumns_width = config.grid_width;\r\n\t\t\t} else {\r\n\t\t\t\t// in other case we set a new grid width and call gantt render\r\n\t\t\t\tfor (var i = index, l = columns.length; i < l; i++) {\r\n\t\t\t\t\tcolumns_width += columns[i].width;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tgrid.callEvent(\"onColumnResizeComplete\", [columns, grid._setColumnsWidth(columns_width, index)]);\r\n\r\n\t\t\tif(!grid.$config.scrollable){\r\n\t\t\t\tgantt.$layout._syncCellSizes(grid.$config.group, config.grid_width);\r\n\t\t\t}\r\n\t\t\t//grid.callEvent(\"onColumnResizeComplete\", [columns, columns_width]);\r\n\r\n\t\t\tthis.render();\r\n\t\t}, gantt)\r\n\t};\r\n\r\n// calls the initialization of the D'n'D events for resize elements\r\n\tvar _init_resize = function () {\r\n\t\tvar DnD = gantt.$services.getService(\"dnd\");\r\n\r\n\t\tvar config = grid.$getConfig();\r\n\r\n\t\tvar dnd = new DnD(grid.$grid_scale, {updates_per_second: 60});\r\n\t\tif (gantt.defined(config.dnd_sensitivity))\r\n\t\t\tdnd.config.sensitivity = config.dnd_sensitivity;\r\n\r\n\t\tdnd.attachEvent(\"onBeforeDragStart\", function (obj, e) {\r\n\t\t\treturn _grid_resize.column_before_start(dnd, obj, e);\r\n\t\t});\r\n\t\tdnd.attachEvent(\"onAfterDragStart\", function (obj, e) {\r\n\t\t\treturn _grid_resize.column_after_start(dnd, obj, e);\r\n\t\t});\r\n\t\tdnd.attachEvent(\"onDragMove\", function (obj, e) {\r\n\t\t\treturn _grid_resize.column_drag_move(dnd, obj, e);\r\n\t\t});\r\n\t\tdnd.attachEvent(\"onDragEnd\", function (obj, e) {\r\n\t\t\treturn _grid_resize.column_drag_end(dnd, obj, e);\r\n\t\t});\r\n\r\n\t};\r\n\r\n\treturn {\r\n\t\tinit: _init_resize,\r\n\t\tdoOnRender: _render_grid_header_resize\r\n\t};\r\n}\r\n\r\nmodule.exports = createResizer;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/grid/grid_resize.js\n// module id = 48\n// module chunks = 0","var domHelpers = require(\"../../../utils/dom_helpers\"),\r\n\tutils = require(\"../../../utils/utils\"),\r\n\tresourceStoreMixin = require(\"../resouce_store_mixin\"),\r\n\tGrid = require(\"./grid\");\r\nvar __extends = require(\"../../../utils/extends\");\r\n\r\nvar ResourceGrid = (function (_super) {\r\n\r\n\tfunction ResourceGrid(parent, config, factory, gantt) {\r\n\t\treturn _super.apply(this, arguments) || this;\r\n\t}\r\n\r\n\t__extends(ResourceGrid, _super);\r\n\r\n\tutils.mixin(ResourceGrid.prototype, {\r\n\t\tinit: function(){\r\n\t\t\tif(this.$config.bind === undefined){\r\n\t\t\t\tthis.$config.bind = this.$getConfig().resource_store;\r\n\t\t\t}\r\n\t\t\t_super.prototype.init.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\t_initEvents: function(){\r\n\t\t\t_super.prototype._initEvents.apply(this, arguments);\r\n\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_row\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\tvar store = this.$config.rowStore;\r\n\t\t\t\tif(!store) return true;\r\n\r\n\t\t\t\tvar target = domHelpers.locateAttribute(e, this.$config.item_attribute);\r\n\t\t\t\tif(target){\r\n\t\t\t\t\tstore.select(target.getAttribute(this.$config.item_attribute));\r\n\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}, this), this.$grid);\r\n\r\n\t\t}\r\n\r\n\t}, true);\r\n\r\n\tutils.mixin(ResourceGrid.prototype, resourceStoreMixin(_super), true);\r\n\r\n\treturn ResourceGrid;\r\n})(Grid);\r\n\r\nmodule.exports = ResourceGrid;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/grid/resource_grid.js\n// module id = 49\n// module chunks = 0","var utils = require(\"../../../utils/utils\");\r\nvar Timeline = require(\"./timeline\");\r\nvar resourceStoreMixin = require(\"../resouce_store_mixin\");\r\nvar __extends = require(\"../../../utils/extends\");\r\n\r\nvar ResourceTimeline = (function (_super) {\r\n\r\n\tfunction ResourceTimeline(parent, config, factory, gantt) {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\t\tself.$config.bindLinks = null;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(ResourceTimeline, _super);\r\n\r\n\tutils.mixin(ResourceTimeline.prototype, {\r\n\t\tinit: function(){\r\n\t\t\tif(this.$config.bind === undefined){\r\n\t\t\t\tthis.$config.bind = this.$getConfig().resource_store;\r\n\t\t\t}\r\n\t\t\t_super.prototype.init.apply(this, arguments);\r\n\t\t},\r\n\t\t_createLayerConfig: function(){\r\n\t\t\tvar self = this;\r\n\t\t\tvar taskFilter = function(){\r\n\t\t\t\treturn self.isVisible();\r\n\t\t\t};\r\n\r\n\t\t\tvar taskLayers = [\r\n\t\t\t\t{\r\n\t\t\t\t\trenderer: this.$gantt.$ui.layers.resourceRow,\r\n\t\t\t\t\tcontainer: this.$task_bars,\r\n\t\t\t\t\tfilter: [taskFilter]\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trenderer: this.$gantt.$ui.layers.taskBg,\r\n\t\t\t\t\tcontainer: this.$task_bg,\r\n\t\t\t\t\tfilter: [taskFilter]\r\n\t\t\t\t}\r\n\t\t\t];\r\n\r\n\t\t\tvar linkLayers = [];\r\n\r\n\t\t\treturn {\r\n\t\t\t\ttasks: taskLayers,\r\n\t\t\t\tlinks: linkLayers\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t}, true);\r\n\r\n\tutils.mixin(ResourceTimeline.prototype, resourceStoreMixin(_super), true);\r\n\r\n\treturn ResourceTimeline;\r\n})(Timeline);\r\n\r\n\r\nmodule.exports = ResourceTimeline;\r\n\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/timeline/resource_timeline.js\n// module id = 50\n// module chunks = 0","function createTaskRenderer(gantt){\r\n\r\n\tfunction _render_task_element(task, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar painters = config.type_renderers;\r\n\t\tvar renderer = painters[gantt.getTaskType(task.type)],\r\n\t\t\tdefaultRenderer = _task_default_render;\r\n\r\n\t\tif (!renderer) {\r\n\t\t\treturn defaultRenderer.call(gantt, task, view);\r\n\t\t}else{\r\n\t\t\treturn renderer.call(gantt, task, function(task){ return defaultRenderer.call(gantt, task, view);}, view);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _task_default_render(task, view) {\r\n\t\tif (gantt._isAllowedUnscheduledTask(task))\r\n\t\t\treturn;\r\n\r\n\r\n\t\tvar pos = view.getItemPosition(task);\r\n\r\n\t\tvar cfg = view.$getConfig(),\r\n\t\t\ttemplates = view.$getTemplates();\r\n\t\tvar height = view.getItemHeight();\r\n\r\n\t\tvar taskType = gantt.getTaskType(task.type);\r\n\r\n\t\tvar padd = Math.floor((gantt.config.row_height - height) / 2);\r\n\t\tif (taskType == cfg.types.milestone && cfg.link_line_width > 1) {\r\n\t\t\t//little adjust milestone position, so horisontal corners would match link arrow when thickness of link line is more than 1px\r\n\t\t\tpadd += 1;\r\n\t\t}\r\n\r\n\t\tif (taskType == cfg.types.milestone){\r\n\t\t\tpos.left -= Math.round(height / 2);\r\n\t\t\tpos.width = height;\r\n\t\t}\r\n\r\n\t\tvar div = document.createElement(\"div\");\r\n\r\n\t\tvar width = Math.round(pos.width);\r\n\r\n\t\tif(view.$config.item_attribute){\r\n\t\t\tdiv.setAttribute(view.$config.item_attribute, task.id);\r\n\t\t}\r\n\r\n\t\tif (cfg.show_progress && taskType != cfg.types.milestone) {\r\n\t\t\t_render_task_progress(task, div, width, cfg, templates);\r\n\t\t}\r\n\r\n\t\t//use separate div to display content above progress bar\r\n\t\tvar content = _render_task_content(task, width, templates);\r\n\t\tif (task.textColor) {\r\n\t\t\tcontent.style.color = task.textColor;\r\n\t\t}\r\n\t\tdiv.appendChild(content);\r\n\r\n\t\tvar css = _combine_item_class(\"gantt_task_line\",\r\n\t\t\ttemplates.task_class(task.start_date, task.end_date, task),\r\n\t\t\ttask.id,\r\n\t\t\tview);\r\n\t\tif (task.color || task.progressColor || task.textColor) {\r\n\t\t\tcss += \" gantt_task_inline_color\";\r\n\t\t}\r\n\t\tdiv.className = css;\r\n\r\n\t\tvar styles = [\r\n\t\t\t\"left:\" + pos.left + \"px\",\r\n\t\t\t\"top:\" + (padd + pos.top) + 'px',\r\n\t\t\t\"height:\" + height + 'px',\r\n\t\t\t\"line-height:\" + (Math.max(height < 30 ? height - 2 : height, 0)) + 'px',\r\n\t\t\t\"width:\" + width + 'px'\r\n\t\t];\r\n\t\tif (task.color) {\r\n\t\t\tstyles.push(\"background-color:\" + task.color);\r\n\t\t}\r\n\t\tif (task.textColor) {\r\n\t\t\tstyles.push(\"color:\" + task.textColor);\r\n\t\t}\r\n\r\n\t\tdiv.style.cssText = styles.join(\";\");\r\n\t\tvar side = _render_leftside_content(task, cfg, templates);\r\n\t\tif (side) div.appendChild(side);\r\n\r\n\t\tside = _render_rightside_content(task, cfg, templates);\r\n\t\tif (side) div.appendChild(side);\r\n\r\n\t\tgantt._waiAria.setTaskBarAttr(task, div);\r\n\r\n\t\tvar state = gantt.getState();\r\n\r\n\t\tif (!gantt.isReadonly(task)) {\r\n\t\t\tif (cfg.drag_resize && !gantt.isSummaryTask(task) && taskType != cfg.types.milestone) {\r\n\t\t\t\t_render_pair(div, \"gantt_task_drag\", task, function (css) {\r\n\t\t\t\t\tvar el = document.createElement(\"div\");\r\n\t\t\t\t\tel.className = css;\r\n\t\t\t\t\treturn el;\r\n\t\t\t\t}, cfg);\r\n\t\t\t}\r\n\t\t\tif (cfg.drag_links && cfg.show_links) {\r\n\t\t\t\t_render_pair(div, \"gantt_link_control\", task, function (css) {\r\n\t\t\t\t\tvar outer = document.createElement(\"div\");\r\n\t\t\t\t\touter.className = css;\r\n\t\t\t\t\touter.style.cssText = [\r\n\t\t\t\t\t\t\"height:\" + height + 'px',\r\n\t\t\t\t\t\t\"line-height:\" + height + 'px'\r\n\t\t\t\t\t].join(\";\");\r\n\t\t\t\t\tvar inner = document.createElement(\"div\");\r\n\t\t\t\t\tinner.className = \"gantt_link_point\";\r\n\r\n\t\t\t\t\tvar showLinkPoints = false;\r\n\t\t\t\t\tif(state.link_source_id && cfg.touch){\r\n\t\t\t\t\t\tshowLinkPoints = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tinner.style.display = showLinkPoints ? \"block\" : \"\";\r\n\t\t\t\t\touter.appendChild(inner);\r\n\t\t\t\t\treturn outer;\r\n\t\t\t\t}, cfg);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn div;\r\n\t}\r\n\r\n\tfunction _render_side_content(task, template, cssClass) {\r\n\t\tif (!template) return null;\r\n\r\n\t\tvar text = template(task.start_date, task.end_date, task);\r\n\t\tif (!text) return null;\r\n\t\tvar content = document.createElement(\"div\");\r\n\t\tcontent.className = \"gantt_side_content \" + cssClass;\r\n\t\tcontent.innerHTML = text;\r\n\t\treturn content;\r\n\t}\r\n\r\n\tfunction _render_leftside_content(task, cfg, templates) {\r\n\t\tvar css = \"gantt_left \" + _get_link_crossing_css(!cfg.rtl ? true : false, task, cfg);\r\n\t\treturn _render_side_content(task, templates.leftside_text, css);\r\n\t}\r\n\r\n\tfunction _render_rightside_content(task, cfg, templates) {\r\n\t\tvar css = \"gantt_right \" + _get_link_crossing_css(!cfg.rtl ? false : true, task, cfg);\r\n\t\treturn _render_side_content(task, templates.rightside_text, css);\r\n\t}\r\n\r\n\tfunction _get_link_crossing_css(left, task) {\r\n\t\tvar cond = _get_conditions(left);\r\n\r\n\t\tfor (var i in cond) {\r\n\t\t\tvar links = task[i];\r\n\t\t\tfor (var ln = 0; ln < links.length; ln++) {\r\n\t\t\t\tvar link = gantt.getLink(links[ln]);\r\n\r\n\t\t\t\tfor (var tp = 0; tp < cond[i].length; tp++) {\r\n\t\t\t\t\tif (link.type == cond[i][tp]) {\r\n\t\t\t\t\t\treturn \"gantt_link_crossing\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\r\n\tfunction _render_task_content(task, width, templates) {\r\n\t\tvar content = document.createElement(\"div\");\r\n\t\tif (gantt.getTaskType(task.type) != gantt.config.types.milestone)\r\n\t\t\tcontent.innerHTML = templates.task_text(task.start_date, task.end_date, task);\r\n\t\tcontent.className = \"gantt_task_content\";\r\n\t\t//content.style.width = width + 'px';\r\n\t\treturn content;\r\n\t}\r\n\r\n\tfunction _render_task_progress(task, element, maxWidth, cfg, templates) {\r\n\t\tvar done = task.progress * 1 || 0;\r\n\r\n\t\tmaxWidth = Math.max(maxWidth - 2, 0);//2px for borders\r\n\t\tvar pr = document.createElement(\"div\");\r\n\t\tvar width = Math.round(maxWidth * done);\r\n\r\n\t\twidth = Math.min(maxWidth, width);\r\n\t\tif (task.progressColor) {\r\n\t\t\tpr.style.backgroundColor = task.progressColor;\r\n\t\t\tpr.style.opacity = 1;\r\n\t\t}\r\n\t\tpr.style.width = width + 'px';\r\n\t\tpr.className = \"gantt_task_progress\";\r\n\t\tpr.innerHTML = templates.progress_text(task.start_date, task.end_date, task);\r\n\r\n\t\tif(cfg.rtl){\r\n\t\t\tpr.style.position = \"absolute\";\r\n\t\t\tpr.style.right = \"0px\";\r\n\t\t}\r\n\r\n\t\tvar wrapper = document.createElement(\"div\");\r\n\t\twrapper.className = \"gantt_task_progress_wrapper\";\r\n\t\twrapper.appendChild(pr);\r\n\t\telement.appendChild(wrapper);\r\n\r\n\t\tif (gantt.config.drag_progress && !gantt.isReadonly(task)) {\r\n\t\t\tvar drag = document.createElement(\"div\");\r\n\r\n\t\t\tvar markerPos = width;\r\n\t\t\tif(cfg.rtl){\r\n\t\t\t\tmarkerPos = maxWidth - width;\r\n\t\t\t}\r\n\r\n\t\t\tdrag.style.left = markerPos + 'px';\r\n\t\t\tdrag.className = \"gantt_task_progress_drag\";\r\n\t\t\tpr.appendChild(drag);\r\n\t\t\telement.appendChild(drag);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _get_conditions(leftside) {\r\n\t\tif (leftside) {\r\n\t\t\treturn {\r\n\t\t\t\t$source: [\r\n\t\t\t\t\tgantt.config.links.start_to_start\r\n\t\t\t\t],\r\n\t\t\t\t$target: [\r\n\t\t\t\t\tgantt.config.links.start_to_start,\r\n\t\t\t\t\tgantt.config.links.finish_to_start\r\n\t\t\t\t]\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\treturn {\r\n\t\t\t\t$source: [\r\n\t\t\t\t\tgantt.config.links.finish_to_start,\r\n\t\t\t\t\tgantt.config.links.finish_to_finish\r\n\t\t\t\t],\r\n\t\t\t\t$target: [\r\n\t\t\t\t\tgantt.config.links.finish_to_finish\r\n\t\t\t\t]\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _combine_item_class(basic, template, itemId, view) {\r\n\t\tvar cfg = view.$getConfig();\r\n\t\tvar css = [basic];\r\n\t\tif (template)\r\n\t\t\tcss.push(template);\r\n\r\n\t\tvar state = gantt.getState();\r\n\r\n\t\tvar task = gantt.getTask(itemId);\r\n\r\n\t\tif (gantt.getTaskType(task.type) == cfg.types.milestone) {\r\n\t\t\tcss.push(\"gantt_milestone\");\r\n\t\t}\r\n\r\n\t\tif (gantt.getTaskType(task.type) == cfg.types.project) {\r\n\t\t\tcss.push(\"gantt_project\");\r\n\t\t}\r\n\r\n\t\tif (gantt.isSummaryTask(task))\r\n\t\t\tcss.push(\"gantt_dependent_task\");\r\n\r\n\t\tif (cfg.select_task && itemId == state.selected_task)\r\n\t\t\tcss.push(\"gantt_selected\");\r\n\r\n\t\tif (itemId == state.drag_id) {\r\n\t\t\tcss.push(\"gantt_drag_\" + state.drag_mode);\r\n\t\t\tif (state.touch_drag) {\r\n\t\t\t\tcss.push(\"gantt_touch_\" + state.drag_mode);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (state.link_source_id == itemId)\r\n\t\t\tcss.push(\"gantt_link_source\");\r\n\r\n\t\tif (state.link_target_id == itemId)\r\n\t\t\tcss.push(\"gantt_link_target\");\r\n\r\n\r\n\t\tif (cfg.highlight_critical_path && gantt.isCriticalTask) {\r\n\t\t\tif (gantt.isCriticalTask(task))\r\n\t\t\t\tcss.push(\"gantt_critical_task\");\r\n\t\t}\r\n\r\n\t\tif (state.link_landing_area &&\r\n\t\t\t(state.link_target_id && state.link_source_id) &&\r\n\t\t\t(state.link_target_id != state.link_source_id)) {\r\n\r\n\t\t\tvar from_id = state.link_source_id;\r\n\t\t\tvar from_start = state.link_from_start;\r\n\t\t\tvar to_start = state.link_to_start;\r\n\r\n\t\t\tvar allowDrag = gantt.isLinkAllowed(from_id, itemId, from_start, to_start);\r\n\r\n\t\t\tvar dragClass = \"\";\r\n\t\t\tif (allowDrag) {\r\n\t\t\t\tif (to_start)\r\n\t\t\t\t\tdragClass = \"link_start_allow\";\r\n\t\t\t\telse\r\n\t\t\t\t\tdragClass = \"link_finish_allow\";\r\n\t\t\t} else {\r\n\t\t\t\tif (to_start)\r\n\t\t\t\t\tdragClass = \"link_start_deny\";\r\n\t\t\t\telse\r\n\t\t\t\t\tdragClass = \"link_finish_deny\";\r\n\t\t\t}\r\n\t\t\tcss.push(dragClass);\r\n\t\t}\r\n\t\treturn css.join(\" \");\r\n\t}\r\n\r\n\tfunction _render_pair(parent, css, task, content, config) {\r\n\t\tvar state = gantt.getState();\r\n\t\tvar className, element;\r\n\t\tif (+task.start_date >= +state.min_date) {\r\n\t\t\tclassName = [css, config.rtl ? \"task_right\" : \"task_left\", \"task_start_date\"];\r\n\t\t\telement = content(className.join(\" \"));\r\n\t\t\telement.setAttribute(\"data-bind-property\", \"start_date\");\r\n\t\t\tparent.appendChild(element);\r\n\t\t}\r\n\r\n\t\tif (+task.end_date <= +state.max_date){\r\n\t\t\tclassName = [css, config.rtl ? \"task_left\" : \"task_right\", \"task_end_date\"];\r\n\t\t\telement = content(className.join(\" \"));\r\n\t\t\telement.setAttribute(\"data-bind-property\", \"end_date\");\r\n\t\t\tparent.appendChild(element);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn _render_task_element;\r\n}\r\n\r\nmodule.exports = createTaskRenderer;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/render/task_bar_render.js\n// module id = 51\n// module chunks = 0","function createTaskBgRender(gantt){\r\n\t//this.getTaskTop\r\n\tfunction _render_bg_line(item, view) {\r\n\t\tvar config = view.$getConfig(),\r\n\t\t\ttemplates = view.$getTemplates();\r\n\t\tvar cfg = view.getScale();\r\n\t\tvar count = cfg.count;\r\n\t\tvar row = document.createElement(\"div\");\r\n\t\tif (config.show_task_cells) {\r\n\t\t\tfor (var j = 0; j < count; j++) {\r\n\t\t\t\tvar width = cfg.width[j],\r\n\t\t\t\t\tcssclass = \"\";\r\n\r\n\t\t\t\tif (width > 0) {//do not render skipped columns\r\n\t\t\t\t\tvar cell = document.createElement(\"div\");\r\n\t\t\t\t\tcell.style.width = (width) + \"px\";\r\n\r\n\t\t\t\t\tcssclass = \"gantt_task_cell\" + (j == count - 1 ? \" gantt_last_cell\" : \"\");\r\n\t\t\t\t\tcssTemplate = templates.task_cell_class(item, cfg.trace_x[j]);\r\n\t\t\t\t\tif (cssTemplate)\r\n\t\t\t\t\t\tcssclass += \" \" + cssTemplate;\r\n\t\t\t\t\tcell.className = cssclass;\r\n\r\n\t\t\t\t\trow.appendChild(cell);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar odd = gantt.getGlobalTaskIndex(item.id) % 2 !== 0;\r\n\t\tvar cssTemplate = templates.task_row_class(item.start_date, item.end_date, item);\r\n\t\tvar css = \"gantt_task_row\" + (odd ? \" odd\" : \"\") + (cssTemplate ? ' ' + cssTemplate : '');\r\n\r\n\t\tvar store = view.$config.rowStore;\r\n\t\tif(store.getSelectedId() == item.id) {\r\n\t\t\tcss += \" gantt_selected\";\r\n\t\t}\r\n\r\n\t\t//var row = \"<div class='\" + css + \"' \" + this.config.task_attribute + \"='\" + item.id + \"'>\" + cells.join(\"\") + \"</div>\";\r\n\r\n\t\trow.className = css;\r\n\r\n\t\tif (config.smart_rendering) {\r\n\t\t\trow.style.position = \"absolute\";\r\n\t\t\trow.style.top = view.getItemTop(item.id) + \"px\";\r\n\t\t\trow.style.width = \"100%\";\r\n\t\t}\r\n\t\trow.style.height = (config.row_height) + \"px\";\r\n\r\n\t\tif(view.$config.item_attribute){\r\n\t\t\trow.setAttribute(view.$config.item_attribute, item.id);\r\n\t\t}\r\n\r\n\t\treturn row;\r\n\t}\r\n\r\n\treturn _render_bg_line;\r\n}\r\n\r\nmodule.exports = createTaskBgRender;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/render/task_bg_render.js\n// module id = 52\n// module chunks = 0","\r\nfunction createLinkRender(gantt){\r\n\r\nfunction _render_link_element(link, view) {\r\n\tvar config = view.$getConfig();\r\n\tvar dots = path_builder.get_points(link, view);\r\n\tvar lines = drawer.get_lines(dots, view);\r\n\r\n\tvar div = document.createElement(\"div\");\r\n\r\n\tvar css = \"gantt_task_link\";\r\n\r\n\tif (link.color) {\r\n\t\tcss += \" gantt_link_inline_color\";\r\n\t}\r\n\tvar cssTemplate = gantt.templates.link_class ? gantt.templates.link_class(link) : \"\";\r\n\tif (cssTemplate) {\r\n\t\tcss += \" \" + cssTemplate;\r\n\t}\r\n\r\n\tif (config.highlight_critical_path && gantt.isCriticalLink) {\r\n\t\tif (gantt.isCriticalLink(link))\r\n\t\t\tcss += \" gantt_critical_link\";\r\n\t}\r\n\r\n\tdiv.className = css;\r\n\r\n\tif(view.$config.link_attribute){\r\n\t\tdiv.setAttribute(view.$config.link_attribute, link.id);\r\n\t}\r\n\r\n\tfor (var i = 0; i < lines.length; i++) {\r\n\t\tif (i == lines.length - 1) {\r\n\t\t\tlines[i].size -= config.link_arrow_size;\r\n\t\t}\r\n\t\tvar el = drawer.render_line(lines[i], lines[i + 1], view);\r\n\t\tif (link.color) {\r\n\t\t\tel.firstChild.style.backgroundColor = link.color;\r\n\t\t}\r\n\t\tdiv.appendChild(el);\r\n\t}\r\n\r\n\tvar direction = lines[lines.length - 1].direction;\r\n\tvar endpoint = _render_link_arrow(dots[dots.length - 1], direction, view);\r\n\tif (link.color) {\r\n\t\tendpoint.style.borderColor = link.color;\r\n\t}\r\n\tdiv.appendChild(endpoint);\r\n\r\n\tgantt._waiAria.linkAttr(link, div);\r\n\r\n\treturn div;\r\n}\r\n\r\nfunction _render_link_arrow(point, direction, view) {\r\n\tvar config = view.$getConfig();\r\n\tvar div = document.createElement(\"div\");\r\n\tvar top = point.y;\r\n\tvar left = point.x;\r\n\r\n\tvar size = config.link_arrow_size;\r\n\tvar line_width = config.row_height;\r\n\tvar className = \"gantt_link_arrow gantt_link_arrow_\" + direction;\r\n\tswitch (direction) {\r\n\t\tcase drawer.dirs.right:\r\n\t\t\ttop -= (size - line_width) / 2;\r\n\t\t\tleft -= size;\r\n\t\t\tbreak;\r\n\t\tcase drawer.dirs.left:\r\n\t\t\ttop -= (size - line_width) / 2;\r\n\t\t\tbreak;\r\n\t\tcase drawer.dirs.up:\r\n\t\t\tleft -= size;\r\n\t\t\tbreak;\r\n\t\tcase drawer.dirs.down:\r\n\t\t\ttop += size * 2;\r\n\t\t\tleft -= size;\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tbreak;\r\n\t}\r\n\tdiv.style.cssText = [\r\n\t\t\"top:\" + top + \"px\",\r\n\t\t\"left:\" + left + 'px'].join(';');\r\n\tdiv.className = className;\r\n\r\n\treturn div;\r\n}\r\n\r\n\r\nvar drawer = {\r\n\tcurrent_pos: null,\r\n\tdirs: {\"left\": 'left', \"right\": 'right', \"up\": 'up', \"down\": 'down'},\r\n\tpath: [],\r\n\tclear: function () {\r\n\t\tthis.current_pos = null;\r\n\t\tthis.path = [];\r\n\t},\r\n\tpoint: function (pos) {\r\n\t\tthis.current_pos = gantt.copy(pos);\r\n\t},\r\n\tget_lines: function (dots) {\r\n\t\tthis.clear();\r\n\t\tthis.point(dots[0]);\r\n\t\tfor (var i = 1; i < dots.length; i++) {\r\n\t\t\tthis.line_to(dots[i]);\r\n\t\t}\r\n\t\treturn this.get_path();\r\n\t},\r\n\tline_to: function (pos) {\r\n\t\tvar next = gantt.copy(pos);\r\n\t\tvar prev = this.current_pos;\r\n\r\n\t\tvar line = this._get_line(prev, next);\r\n\t\tthis.path.push(line);\r\n\t\tthis.current_pos = next;\r\n\t},\r\n\tget_path: function () {\r\n\t\treturn this.path;\r\n\t},\r\n\tget_wrapper_sizes: function (v, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar res,\r\n\t\t\twrapper_size = config.link_wrapper_width,\r\n\t\t\tline_size = config.link_line_width,\r\n\t\t\ty = v.y + (config.row_height - wrapper_size) / 2;\r\n\t\tswitch (v.direction) {\r\n\t\t\tcase this.dirs.left:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y,\r\n\t\t\t\t\theight: wrapper_size,\r\n\t\t\t\t\tlineHeight: wrapper_size,\r\n\t\t\t\t\tleft: v.x - v.size - wrapper_size / 2,\r\n\t\t\t\t\twidth: v.size + wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.right:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y,\r\n\t\t\t\t\tlineHeight: wrapper_size,\r\n\t\t\t\t\theight: wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: v.size + wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.up:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y - v.size,\r\n\t\t\t\t\tlineHeight: v.size + wrapper_size,\r\n\t\t\t\t\theight: v.size + wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.down:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y /*- wrapper_size/2*/,\r\n\t\t\t\t\tlineHeight: v.size + wrapper_size,\r\n\t\t\t\t\theight: v.size + wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t},\r\n\tget_line_sizes: function (v, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar res,\r\n\t\t\tline_size = config.link_line_width,\r\n\t\t\twrapper_size = config.link_wrapper_width,\r\n\t\t\tsize = v.size + line_size;\r\n\t\tswitch (v.direction) {\r\n\t\t\tcase this.dirs.left:\r\n\t\t\tcase this.dirs.right:\r\n\t\t\t\tres = {\r\n\t\t\t\t\theight: line_size,\r\n\t\t\t\t\twidth: size,\r\n\t\t\t\t\tmarginTop: (wrapper_size - line_size) / 2,\r\n\t\t\t\t\tmarginLeft: (wrapper_size - line_size) / 2\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.up:\r\n\t\t\tcase this.dirs.down:\r\n\t\t\t\tres = {\r\n\t\t\t\t\theight: size,\r\n\t\t\t\t\twidth: line_size,\r\n\t\t\t\t\tmarginTop: (wrapper_size - line_size) / 2,\r\n\t\t\t\t\tmarginLeft: (wrapper_size - line_size) / 2\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\r\n\t\treturn res;\r\n\t},\r\n\trender_line: function (v, end, view) {\r\n\t\tvar pos = this.get_wrapper_sizes(v, view);\r\n\t\tvar wrapper = document.createElement(\"div\");\r\n\t\twrapper.style.cssText = [\r\n\t\t\t\"top:\" + pos.top + \"px\",\r\n\t\t\t\"left:\" + pos.left + \"px\",\r\n\t\t\t\"height:\" + pos.height + \"px\",\r\n\t\t\t\"width:\" + pos.width + \"px\"\r\n\t\t].join(';');\r\n\t\twrapper.className = \"gantt_line_wrapper\";\r\n\r\n\t\tvar innerPos = this.get_line_sizes(v, view);\r\n\t\tvar inner = document.createElement(\"div\");\r\n\t\tinner.style.cssText = [\r\n\t\t\t\"height:\" + innerPos.height + \"px\",\r\n\t\t\t\"width:\" + innerPos.width + \"px\",\r\n\t\t\t\"margin-top:\" + innerPos.marginTop + \"px\",\r\n\t\t\t\"margin-left:\" + innerPos.marginLeft + \"px\"\r\n\t\t].join(\";\");\r\n\r\n\t\tinner.className = \"gantt_link_line_\" + v.direction;\r\n\t\twrapper.appendChild(inner);\r\n\r\n\t\treturn wrapper;\r\n\t},\r\n\t_get_line: function (from, to) {\r\n\t\tvar direction = this.get_direction(from, to);\r\n\t\tvar vect = {\r\n\t\t\tx: from.x,\r\n\t\t\ty: from.y,\r\n\t\t\tdirection: this.get_direction(from, to)\r\n\t\t};\r\n\t\tif (direction == this.dirs.left || direction == this.dirs.right) {\r\n\t\t\tvect.size = Math.abs(from.x - to.x);\r\n\t\t} else {\r\n\t\t\tvect.size = Math.abs(from.y - to.y);\r\n\t\t}\r\n\t\treturn vect;\r\n\t},\r\n\tget_direction: function (from, to) {\r\n\t\tvar direction = 0;\r\n\t\tif (to.x < from.x) {\r\n\t\t\tdirection = this.dirs.left;\r\n\t\t} else if (to.x > from.x) {\r\n\t\t\tdirection = this.dirs.right;\r\n\t\t} else if (to.y > from.y) {\r\n\t\t\tdirection = this.dirs.down;\r\n\t\t} else {\r\n\t\t\tdirection = this.dirs.up;\r\n\t\t}\r\n\t\treturn direction;\r\n\t}\r\n\r\n};\r\n\r\nvar path_builder = {\r\n\r\n\tpath: [],\r\n\tclear: function () {\r\n\t\tthis.path = [];\r\n\t},\r\n\tcurrent: function () {\r\n\t\treturn this.path[this.path.length - 1];\r\n\t},\r\n\tpoint: function (next) {\r\n\t\tif (!next)\r\n\t\t\treturn this.current();\r\n\r\n\t\tthis.path.push(gantt.copy(next));\r\n\t\treturn next;\r\n\t},\r\n\tpoint_to: function (direction, diff, point) {\r\n\t\tif (!point)\r\n\t\t\tpoint = gantt.copy(this.point());\r\n\t\telse\r\n\t\t\tpoint = {x: point.x, y: point.y};\r\n\t\tvar dir = drawer.dirs;\r\n\t\tswitch (direction) {\r\n\t\t\tcase (dir.left):\r\n\t\t\t\tpoint.x -= diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.right):\r\n\t\t\t\tpoint.x += diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.up):\r\n\t\t\t\tpoint.y -= diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.down):\r\n\t\t\t\tpoint.y += diff;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn this.point(point);\r\n\t},\r\n\tget_points: function (link, view) {\r\n\t\tvar pt = this.get_endpoint(link, view);\r\n\t\tvar xy = gantt.config;\r\n\r\n\t\tvar dy = pt.e_y - pt.y;\r\n\t\tvar dx = pt.e_x - pt.x;\r\n\r\n\t\tvar dir = drawer.dirs;\r\n\r\n\t\tthis.clear();\r\n\t\tthis.point({x: pt.x, y: pt.y});\r\n\r\n\t\tvar shiftX = 2 * xy.link_arrow_size;//just random size for first line\r\n\t\tvar lineType = this.get_line_type(link, view.$getConfig());\r\n\r\n\t\tvar forward = (pt.e_x > pt.x);\r\n\t\tif (lineType.from_start && lineType.to_start) {\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t}\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\r\n\t\t} else if (!lineType.from_start && lineType.to_start) {\r\n\t\t\tforward = (pt.e_x > (pt.x + 2 * shiftX));\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tdx -= shiftX;\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tdx -= 2 * shiftX;\r\n\t\t\t\tvar sign = dy > 0 ? 1 : -1;\r\n\r\n\t\t\t\tthis.point_to(dir.down, sign * (xy.row_height / 2));\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, sign * ( Math.abs(dy) - (xy.row_height / 2)));\r\n\t\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\t}\r\n\r\n\t\t} else if (!lineType.from_start && !lineType.to_start) {\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t} else {\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t}\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t} else if (lineType.from_start && !lineType.to_start) {\r\n\r\n\t\t\tforward = (pt.e_x > (pt.x - 2 * shiftX));\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\r\n\t\t\tif (!forward) {\r\n\t\t\t\tdx += shiftX;\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tdx += 2 * shiftX;\r\n\t\t\t\tvar sign = dy > 0 ? 1 : -1;\r\n\t\t\t\tthis.point_to(dir.down, sign * (xy.row_height / 2));\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, sign * ( Math.abs(dy) - (xy.row_height / 2)));\r\n\t\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this.path;\r\n\t},\r\n\tget_line_type: function(link, config){\r\n\t\tvar types = config.links;\r\n\t\tvar from_start = false, to_start = false;\r\n\t\tif (link.type == types.start_to_start) {\r\n\t\t\tfrom_start = to_start = true;\r\n\t\t} else if (link.type == types.finish_to_finish) {\r\n\t\t\tfrom_start = to_start = false;\r\n\t\t} else if (link.type == types.finish_to_start) {\r\n\t\t\tfrom_start = false;\r\n\t\t\tto_start = true;\r\n\t\t} else if (link.type == types.start_to_finish) {\r\n\t\t\tfrom_start = true;\r\n\t\t\tto_start = false;\r\n\t\t} else {\r\n\t\t\tgantt.assert(false, \"Invalid link type\");\r\n\t\t}\r\n\r\n\t\tif(config.rtl){\r\n\t\t\tfrom_start = !from_start;\r\n\t\t\tto_start = !to_start;\r\n\t\t}\r\n\r\n\t\treturn {from_start: from_start, to_start: to_start};\r\n\t},\r\n\r\n\tget_endpoint: function (link, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar types = config.links;\r\n\r\n\t\tvar lineType = this.get_line_type(link, config);\r\n\t\tvar from_start = lineType.from_start,\r\n\t\t\tto_start = lineType.to_start;\r\n\r\n\t\tvar source = gantt.getTask(link.source);\r\n\t\tvar target = gantt.getTask(link.target);\r\n\r\n\t\tvar from = getMilestonePosition(source, view),\r\n\t\t\tto = getMilestonePosition(target, view);\r\n\r\n\t\treturn {\r\n\t\t\tx: from_start ? from.left : (from.left + from.width),\r\n\t\t\te_x: to_start ? to.left : (to.left + to.width),\r\n\t\t\ty: from.top,\r\n\t\t\te_y: to.top\r\n\t\t};\r\n\t}\r\n};\r\n\r\nfunction getMilestonePosition(task, view){\r\n\tvar config = view.$getConfig();\r\n\tvar pos = view.getItemPosition(task);\r\n\tif(gantt.getTaskType(task.type) == config.types.milestone){\r\n\t\tvar milestoneHeight = gantt.getTaskHeight();\r\n\t\tvar milestoneWidth = Math.sqrt(2*milestoneHeight*milestoneHeight);\r\n\t\tpos.left -= milestoneWidth / 2;\r\n\t\tpos.width = milestoneWidth;\r\n\t}\r\n\treturn pos;\r\n}\r\n\r\nreturn _render_link_element;\r\n\r\n}\r\n\r\nmodule.exports = createLinkRender;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/render/link_render.js\n// module id = 53\n// module chunks = 0","var dateHelper = require(\"../../../utils/date_helpers\");\r\n\r\nfunction createGridLineRender(gantt){\r\n\tfunction _render_grid_item(item, view) {\r\n\t\t//if (!_is_grid_visible.call(this))\r\n\t\t//\treturn null;\r\n\r\n\t\tvar columns = view.getGridColumns();\r\n\t\tvar config = view.$getConfig(),\r\n\t\t\ttemplates = view.$getTemplates();\r\n\r\n\t\tvar store = view.$config.rowStore;\r\n\r\n\t\tif(config.rtl){\r\n\t\t\tcolumns = columns.reverse();\r\n\t\t}\r\n\r\n\t\tvar cells = [];\r\n\t\tvar width = 0;\r\n\t\tvar has_child;\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar last = i == columns.length - 1;\r\n\t\t\tvar col = columns[i];\r\n\t\t\tvar cell;\r\n\r\n\t\t\tvar value;\r\n\t\t\tvar textValue;\r\n\t\t\tif (col.name == \"add\") {\r\n\t\t\t\tvar aria = gantt._waiAria.gridAddButtonAttrString(col);\r\n\r\n\t\t\t\tvalue = \"<div \" + aria + \" class='gantt_add'></div>\";\r\n\t\t\t\ttextValue = \"\";\r\n\t\t\t} else {\r\n\t\t\t\tif (col.template)\r\n\t\t\t\t\tvalue = col.template(item);\r\n\t\t\t\telse\r\n\t\t\t\t\tvalue = item[col.name];\r\n\r\n\t\t\t\tif (dateHelper.isDate(value))\r\n\t\t\t\t\tvalue = templates.date_grid(value, item);\r\n\t\t\t\ttextValue = value;\r\n\t\t\t\tvalue = \"<div class='gantt_tree_content'>\" + value + \"</div>\";\r\n\t\t\t}\r\n\t\t\tvar css = \"gantt_cell\" + (last ? \" gantt_last_cell\" : \"\");\r\n\r\n\t\t\tvar tree = [];\r\n\t\t\tif (col.tree) {\r\n\t\t\t\tfor (var j = 0; j < item.$level; j++)\r\n\t\t\t\t\ttree.push(templates.grid_indent(item));\r\n\r\n\t\t\t\thas_child = store.hasChild(item.id);\r\n\t\t\t\tif (has_child) {\r\n\t\t\t\t\ttree.push(templates.grid_open(item));\r\n\t\t\t\t\ttree.push(templates.grid_folder(item));\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttree.push(templates.grid_blank(item));\r\n\t\t\t\t\ttree.push(templates.grid_file(item));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar style = \"width:\" + (col.width - (last ? 1 : 0)) + \"px;\";\r\n\t\t\tif (this.defined(col.align))\r\n\t\t\t\tstyle += \"text-align:\" + col.align + \";\";\r\n\r\n\t\t\tvar aria = gantt._waiAria.gridCellAttrString(col, textValue);\r\n\r\n\t\t\ttree.push(value);\r\n\t\t\tif(config.rtl){\r\n\t\t\t\ttree = tree.reverse();\r\n\t\t\t}\r\n\t\t\tcell = \"<div class='\" + css + \"' style='\" + style + \"' \" + aria + \">\" + tree.join(\"\") + \"</div>\";\r\n\t\t\tcells.push(cell);\r\n\t\t}\r\n\t\tvar css = gantt.getGlobalTaskIndex(item.id) % 2 === 0 ? \"\" : \" odd\";\r\n\t\tcss += (item.$transparent) ? \" gantt_transparent\" : \"\";\r\n\r\n\t\tcss += (item.$dataprocessor_class ? \" \" + item.$dataprocessor_class : \"\");\r\n\r\n\t\tif (templates.grid_row_class) {\r\n\t\t\tvar css_template = templates.grid_row_class.call(gantt, item.start_date, item.end_date, item);\r\n\t\t\tif (css_template)\r\n\t\t\t\tcss += \" \" + css_template;\r\n\t\t}\r\n\r\n\t\tif(store.getSelectedId() == item.id) {\r\n\t\t\tcss += \" gantt_selected\";\r\n\t\t}\r\n\r\n\t\tvar el = document.createElement(\"div\");\r\n\t\tel.className = \"gantt_row\" + css;\r\n\t\tvar height = view.getItemHeight();\r\n\t\tel.style.height = height + \"px\";\r\n\t\tel.style.lineHeight = height + \"px\";\r\n\r\n\t\tif(config.smart_rendering){\r\n\t\t\tel.style.position = \"absolute\";\r\n\t\t\tel.style.left = \"0px\";\r\n\t\t\tel.style.top = view.getItemTop(item.id) + \"px\";\r\n\t\t}\r\n\r\n\t\tif(view.$config.item_attribute){\r\n\t\t\tel.setAttribute(view.$config.item_attribute, item.id);\r\n\t\t}\r\n\r\n\t\tgantt._waiAria.taskRowAttr(item, el);\r\n\r\n\t\tel.innerHTML = cells.join(\"\");\r\n\t\treturn el;\r\n\t}\r\n\r\n\treturn _render_grid_item;\r\n}\r\n\r\nmodule.exports = createGridLineRender;\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/render/task_grid_line_render.js\n// module id = 54\n// module chunks = 0","var utils = require(\"../../../utils/utils\");\r\nvar rowDnd = require(\"./tasks_grid_dnd\");\r\n\r\nvar initializer = (function(){\r\n\treturn function(gantt){\r\n\t\treturn {\r\n\t\t\tonCreated: function (grid) {\r\n\t\t\t\tgrid.$config = utils.mixin(grid.$config, {\r\n\t\t\t\t\tbind: \"task\"\r\n\t\t\t\t});\r\n\t\t\t\tif(grid.$config.id == \"grid\") {\r\n\t\t\t\t\tthis.extendGantt(grid);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._mouseDelegates = require(\"../mouse_event_container\")(gantt);\r\n\t\t\t},\r\n\t\t\tonInitialized: function (grid) {\r\n\t\t\t\tvar config = grid.$getConfig();\r\n\t\t\t\tif (config.order_branch) {\r\n\t\t\t\t\trowDnd.init(grid.$gantt, grid);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.initEvents(grid, gantt);\r\n\t\t\t\tif(grid.$config.id == \"grid\") {\r\n\t\t\t\t\tthis.extendDom(grid);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (grid) {\r\n\t\t\t\tthis.clearEvents(grid, gantt);\r\n\t\t\t},\r\n\r\n\t\t\tinitEvents: function (grid, gantt) {\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_row\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar config = grid.$getConfig();\r\n\t\t\t\t\tif (id !== null) {\r\n\t\t\t\t\t\tvar task = this.getTask(id);\r\n\t\t\t\t\t\tif (config.scroll_on_click && !gantt._is_icon_open_click(e))\r\n\t\t\t\t\t\t\tthis.showDate(task.start_date);\r\n\t\t\t\t\t\tgantt.callEvent(\"onTaskRowClick\", [id, trg]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt), grid.$grid);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_grid_head_cell\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar column = trg.getAttribute(\"data-column-id\");\r\n\r\n\t\t\t\t\tif (!gantt.callEvent(\"onGridHeaderClick\", [column, e]))\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tvar config = grid.$getConfig();\r\n\r\n\t\t\t\t\tif (column == \"add\") {\r\n\t\t\t\t\t\tvar mouseEvents = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\t\t\t\tmouseEvents.callHandler(\"click\", \"gantt_add\", grid.$grid, [e, config.root_id]);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (config.sort) {\r\n\t\t\t\t\t\tvar sorting_method = column,\r\n\t\t\t\t\t\t\tconf;\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < config.columns.length; i++) {\r\n\t\t\t\t\t\t\tif (config.columns[i].name == column) {\r\n\t\t\t\t\t\t\t\tconf = config.columns[i];\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (conf && conf.sort !== undefined && conf.sort !== true) {\r\n\t\t\t\t\t\t\tsorting_method = conf.sort;\r\n\r\n\t\t\t\t\t\t\tif (!sorting_method) { // column sort property 'false', no sorting\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar sort = (this._sort && this._sort.direction && this._sort.name == column) ? this._sort.direction : \"desc\";\r\n\t\t\t\t\t\t// invert sort direction\r\n\t\t\t\t\t\tsort = (sort == \"desc\") ? \"asc\" : \"desc\";\r\n\t\t\t\t\t\tthis._sort = {\r\n\t\t\t\t\t\t\tname: column,\r\n\t\t\t\t\t\t\tdirection: sort\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tthis.sort(sorting_method, sort == \"desc\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt), grid.$grid);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_add\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar config = grid.$getConfig();\r\n\t\t\t\t\tif (config.readonly) return;\r\n\r\n\t\t\t\t\tvar item = {};\r\n\t\t\t\t\tthis.createTask(item, id ? id : gantt.config.root_id);\r\n\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}, gantt), grid.$grid);\r\n\r\n\t\t\t},\r\n\r\n\t\t\tclearEvents: function(grid, gantt){\r\n\t\t\t\tthis._mouseDelegates.destructor();\r\n\t\t\t\tthis._mouseDelegates = null;\r\n\t\t\t},\r\n\r\n\t\t\textendDom: function(grid){\r\n\t\t\t\tgantt.$grid = grid.$grid;\r\n\t\t\t\tgantt.$grid_scale = grid.$grid_scale;\r\n\t\t\t\tgantt.$grid_data = grid.$grid_data;\r\n\t\t\t},\r\n\t\t\textendGantt: function(grid){\r\n\r\n\t\t\t\tgantt.getGridColumns = gantt.bind(grid.getGridColumns, grid);\r\n\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeStart\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResizeStart\", arguments);\r\n\t\t\t\t});\r\n\t\t\t\tgrid.attachEvent(\"onColumnResize\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResize\", arguments);\r\n\t\t\t\t});\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeEnd\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResizeEnd\", arguments);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeComplete\", function(columns, totalWidth){\r\n\t\t\t\t\tgantt.config.grid_width = totalWidth;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n})();\r\n\r\nmodule.exports = initializer;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/grid/main_grid_initializer.js\n// module id = 55\n// module chunks = 0","var domHelpers = require(\"../../../utils/dom_helpers\");\r\n\r\nfunction _init_dnd(gantt, grid) {\r\n\tvar DnD = gantt.$services.getService(\"dnd\");\r\n\r\n\tif(!grid.$config.bind || !gantt.getDatastore(grid.$config.bind)){\r\n\t\treturn;\r\n\t}\r\n\r\n\tfunction locate(e){\r\n\t\treturn domHelpers.locateAttribute(e, grid.$config.item_attribute);\r\n\t}\r\n\r\n\tfunction getStore(){\r\n\t\treturn gantt.getDatastore(grid.$config.bind);\r\n\t}\r\n\r\n\tvar dnd = new DnD(grid.$grid_data, {updates_per_second: 60});\r\n\tif (gantt.defined(grid.$getConfig().dnd_sensitivity))\r\n\t\tdnd.config.sensitivity = grid.$getConfig().dnd_sensitivity;\r\n\r\n\tdnd.attachEvent(\"onBeforeDragStart\", gantt.bind(function (obj, e) {\r\n\t\tvar el = locate(e);\r\n\t\tif (!el) return false;\r\n\t\tif (gantt.hideQuickInfo) gantt._hideQuickInfo();\r\n\r\n\t\tvar id = el.getAttribute(grid.$config.item_attribute);\r\n\r\n\t\tvar datastore = getStore();\r\n\r\n\t\tvar task = datastore.getItem(id);\r\n\r\n\t\tif (gantt.isReadonly(task))\r\n\t\t\treturn false;\r\n\r\n\t\tdnd.config.initial_open_state = task.$open;\r\n\t\tif (!gantt.callEvent(\"onRowDragStart\", [id, e.target || e.srcElement, e])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}, gantt));\r\n\r\n\tdnd.attachEvent(\"onAfterDragStart\", gantt.bind(function (obj, e) {\r\n\t\tvar el = locate(e);\r\n\t\tdnd.config.marker.innerHTML = el.outerHTML;\r\n\t\tvar element = dnd.config.marker.firstChild;\r\n\t\tif(element){\r\n\t\t\telement.style.position = \"static\";\r\n\t\t}\r\n\r\n\t\tdnd.config.id = el.getAttribute(grid.$config.item_attribute);\r\n\r\n\t\tvar store = getStore();\r\n\r\n\t\tvar task = store.getItem(dnd.config.id);\r\n\t\tdnd.config.index = store.getBranchIndex(dnd.config.id);\r\n\t\tdnd.config.parent = task.parent;\r\n\t\ttask.$open = false;\r\n\t\ttask.$transparent = true;\r\n\t\tthis.refreshData();\r\n\t}, gantt));\r\n\r\n\tdnd.lastTaskOfLevel = function (level) {\r\n\t\tvar last_item = null;\r\n\t\tvar store = getStore();\r\n\t\tvar tasks = store.getItems();\r\n\t\tfor (var i = 0, len = tasks.length; i < len; i++) {\r\n\t\t\tif (tasks[i].$level == level) {\r\n\t\t\t\tlast_item = tasks[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn last_item ? last_item.id : null;\r\n\t};\r\n\tdnd._getGridPos = gantt.bind(function (e) {\r\n\t\tvar pos = domHelpers.getNodePosition(grid.$grid_data);\r\n\t\tvar store = getStore();\r\n\t\t// row offset\r\n\t\tvar x = pos.x;\r\n\t\tvar y = e.pos.y - 10;\r\n\r\n\t\tvar config = grid.$getConfig();\r\n\t\t// prevent moving row out of grid_data container\r\n\t\tif (y < pos.y) y = pos.y;\r\n\t\tvar gridHeight = store.countVisible() * config.row_height;\r\n\t\tif (y > pos.y + gridHeight - config.row_height) y = pos.y + gridHeight - config.row_height;\r\n\r\n\t\tpos.x = x;\r\n\t\tpos.y = y;\r\n\t\treturn pos;\r\n\t}, gantt);\r\n\tdnd._getTargetY = gantt.bind(function (e) {\r\n\t\tvar pos = domHelpers.getNodePosition(grid.$grid_data);\r\n\r\n\t\tvar y = e.pageY - pos.y + (grid.$state.scrollTop || 0);\r\n\t\tif (y < 0)\r\n\t\t\ty = 0;\r\n\t\treturn y;\r\n\t}, gantt);\r\n\tdnd._getTaskByY = gantt.bind(function (y, dropIndex) {\r\n\r\n\t\tvar config = grid.$getConfig(),\r\n\t\t\tstore = getStore();\r\n\r\n\t\ty = y || 0;\r\n\r\n\t\tvar index = Math.floor(y / config.row_height);\r\n\t\tindex = dropIndex < index ? index - 1 : index;\r\n\r\n\t\tif (index > store.countVisible() - 1)\r\n\t\t\treturn null;\r\n\r\n\t\treturn store.getIdByIndex(index);\r\n\t}, gantt);\r\n\tdnd.attachEvent(\"onDragMove\", gantt.bind(function (obj, e) {\r\n\t\tvar dd = dnd.config;\r\n\t\tvar pos = dnd._getGridPos(e);\r\n\r\n\t\tvar config = grid.$getConfig(),\r\n\t\t\tstore = getStore();\r\n\r\n\t\t// setting position of row\r\n\t\tdd.marker.style.left = pos.x + 10 + \"px\";\r\n\t\tdd.marker.style.top = pos.y + \"px\";\r\n\r\n\t\t// highlight row when mouseover\r\n\t\tvar item = store.getItem(dnd.config.id);\r\n\t\tvar targetY = dnd._getTargetY(e);\r\n\t\tvar el = dnd._getTaskByY(targetY, store.getIndexById(item.id));\r\n\r\n\t\tif (!store.exists(el)) {\r\n\t\t\tel = dnd.lastTaskOfLevel(config.order_branch_free ? item.$level : 0);\r\n\t\t\tif (el == dnd.config.id) {\r\n\t\t\t\tel = null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction allowedLevel(next, item) {\r\n\t\t\treturn (!(store.isChildOf(over.id, item.id)) && (next.$level == item.$level || config.order_branch_free));\r\n\t\t}\r\n\r\n\t\tif (store.exists(el)) {\r\n\t\t\tvar over = store.getItem(el);\r\n\r\n\t\t\tif (store.getIndexById(over.id) * config.row_height + config.row_height / 2 < targetY) {\r\n\t\t\t\t//hovering over bottom part of item, check can be drop to bottom\r\n\t\t\t\tvar index = store.getIndexById(over.id);\r\n\t\t\t\tvar nextId = store.getNext(over.id);//adds +1 when hovering over placeholder\r\n\t\t\t\tvar next = store.getItem(nextId);\r\n\t\t\t\tif (next) {\r\n\t\t\t\t\tif (next.id != item.id) {\r\n\t\t\t\t\t\tover = next; //there is a valid target\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif (config.order_branch_free) {\r\n\t\t\t\t\t\t\tif (!(store.isChildOf(item.id, over.id) && store.getChildren(over.id).length == 1))\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tstore.move(item.id, store.getBranchIndex(over.id) + 1, store.getParent(over.id));\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//we at end of the list, check and drop at the end of list\r\n\t\t\t\t\tnextId = store.getIdByIndex(index);\r\n\t\t\t\t\tnext = store.getItem(nextId);\r\n\r\n\t\t\t\t\tif (allowedLevel(next, item) && next.id != item.id) {\r\n\t\t\t\t\t\tstore.move(item.id, -1, store.getParent(next.id));\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (config.order_branch_free) {\r\n\t\t\t\tif (over.id != item.id && allowedLevel(over, item)) {\r\n\t\t\t\t\tif (!store.hasChild(over.id)) {\r\n\t\t\t\t\t\tover.$open = true;\r\n\t\t\t\t\t\tstore.move(item.id, -1, over.id);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (store.getIndexById(over.id) || config.row_height / 3 < targetY) return;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//if item is on different level, check the one before it\r\n\t\t\tvar index = store.getIndexById(over.id),\r\n\t\t\t\tprevId = store.getIdByIndex(index - 1);\r\n\r\n\t\t\tvar prev = store.getItem(prevId);\r\n\r\n\t\t\tvar shift = 1;\r\n\t\t\twhile ((!prev || prev.id == over.id) && index - shift >= 0) {\r\n\r\n\t\t\t\tprevId = store.getIdByIndex(index - shift);\r\n\t\t\t\tprev = store.getItem(prevId);\r\n\t\t\t\tshift++;\r\n\t\t\t}\r\n\r\n\t\t\tif (item.id == over.id) return;\r\n\t\t\t//replacing item under cursor\r\n\t\t\tif (allowedLevel(over, item) && item.id != over.id) {\r\n\t\t\t\tstore.move(item.id, 0, 0, over.id);\r\n\r\n\t\t\t} else if (over.$level == item.$level - 1 && !store.getChildren(over.id).length) {\r\n\t\t\t\tstore.move(item.id, 0, over.id);\r\n\r\n\t\t\t} else if (prev && (allowedLevel(prev, item)) && (item.id != prev.id)) {\r\n\t\t\t\tstore.move(item.id, -1, store.getParent(prev.id));\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}, gantt));\r\n\r\n\tdnd.attachEvent(\"onDragEnd\", gantt.bind(function () {\r\n\t\tvar store = getStore();\r\n\t\tvar task = store.getItem(dnd.config.id);\r\n\t\ttask.$transparent = false;\r\n\t\ttask.$open = dnd.config.initial_open_state;\r\n\r\n\t\tif (this.callEvent(\"onBeforeRowDragEnd\", [dnd.config.id, dnd.config.parent, dnd.config.index]) === false) {\r\n\t\t\tstore.move(dnd.config.id, dnd.config.index, dnd.config.parent);\r\n\t\t\ttask.$drop_target = null;\r\n\t\t} else {\r\n\t\t\tthis.callEvent(\"onRowDragEnd\", [dnd.config.id, task.$drop_target]);\r\n\t\t}\r\n\r\n\t\tstore.refresh(task.id);\r\n\t\t//this.refreshData();\r\n\t}, gantt));\r\n}\r\n\r\nmodule.exports = {\r\n\tinit: _init_dnd\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/grid/tasks_grid_dnd.js\n// module id = 56\n// module chunks = 0","var utils = require(\"../../../utils/utils\"),\r\n\ttaskDnD = require(\"./tasks_dnd\"),\r\n\tlinkDnD = require(\"./links_dnd\"),\r\n\tdomHelpers = require(\"../../../utils/dom_helpers\");\r\n\r\nvar initializer = (function(){\r\n\treturn function(gantt){\r\n\t\tvar services = gantt.$services;\r\n\t\treturn {\r\n\t\t\tonCreated: function (timeline) {\r\n\t\t\t\tvar config = timeline.$config;\r\n\t\t\t\tconfig.bind = utils.defined(config.bind) ? config.bind : \"task\";\r\n\t\t\t\tconfig.bindLinks = utils.defined(config.bindLinks) ? config.bindLinks : \"link\";\r\n\r\n\t\t\t\ttimeline._linksDnD = linkDnD.createLinkDND();\r\n\t\t\t\ttimeline._tasksDnD = taskDnD.createTaskDND();\r\n\t\t\t\ttimeline._tasksDnD.extend(timeline);\r\n\r\n\t\t\t\tthis._mouseDelegates = require(\"../mouse_event_container\")(gantt);\r\n\t\t\t},\r\n\t\t\tonInitialized: function (timeline) {\r\n\t\t\t\tthis._attachDomEvents(gantt);\r\n\r\n\t\t\t\tthis._attachStateProvider(gantt, timeline);\r\n\r\n\t\t\t\ttimeline._tasksDnD.init(timeline, gantt);\r\n\t\t\t\ttimeline._linksDnD.init(timeline, gantt);\r\n\r\n\t\t\t\tif(timeline.$config.id == \"timeline\"){\r\n\t\t\t\t\tthis.extendDom(timeline);\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (timeline) {\r\n\t\t\t\tthis._clearDomEvents(gantt);\r\n\t\t\t\tthis._clearStateProvider(gantt);\r\n\t\t\t},\r\n\t\t\textendDom: function(timeline){\r\n\t\t\t\tgantt.$task = timeline.$task;\r\n\t\t\t\tgantt.$task_scale = timeline.$task_scale;\r\n\t\t\t\tgantt.$task_data = timeline.$task_data;\r\n\t\t\t\tgantt.$task_bg = timeline.$task_bg;\r\n\t\t\t\tgantt.$task_links = timeline.$task_links;\r\n\t\t\t\tgantt.$task_bars = timeline.$task_bars;\r\n\t\t\t},\r\n\r\n\t\t\t_clearDomEvents: function(){\r\n\t\t\t\tthis._mouseDelegates.destructor();\r\n\t\t\t\tthis._mouseDelegates = null;\r\n\t\t\t},\r\n\r\n\t\t\t_attachDomEvents: function(gantt){\r\n\t\t\t\tfunction _delete_link_handler(id, e) {\r\n\t\t\t\t\tif (id && this.callEvent(\"onLinkDblClick\", [id, e])) {\r\n\r\n\t\t\t\t\t\tvar link = this.getLink(id);\r\n\t\t\t\t\t\tif (this.isReadonly(link)) return;\r\n\r\n\t\t\t\t\t\tvar title = \"\";\r\n\t\t\t\t\t\tvar question = this.locale.labels.link + \" \" + this.templates.link_description(this.getLink(id)) + \" \" + this.locale.labels.confirm_link_deleting;\r\n\r\n\t\t\t\t\t\twindow.setTimeout(function () {\r\n\t\t\t\t\t\t\tgantt._dhtmlx_confirm(question, title, function () {\r\n\t\t\t\t\t\t\t\tgantt.deleteLink(id);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}, (this.config.touch ? 300 : 1));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_task_link\", gantt.bind(function (e, trg) {\r\n\t\t\t\t\tvar id = this.locate(e, this.config.link_attribute);\r\n\t\t\t\t\tif (id) {\r\n\t\t\t\t\t\tthis.callEvent(\"onLinkClick\", [id, e]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt), this.$task);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_scale_cell\", gantt.bind(function (e, trg) {\r\n\t\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\t\t\t\t\tvar date = gantt.dateFromPos(pos.x);\r\n\t\t\t\t\tvar coll = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\t\t\tvar coll_date = gantt.getScale().trace_x[coll];\r\n\r\n\t\t\t\t\tgantt.callEvent(\"onScaleClick\", [e, coll_date]);\r\n\t\t\t\t}, gantt), this.$task);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"doubleclick\", \"gantt_task_link\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar id = this.locate(e, gantt.config.link_attribute);\r\n\t\t\t\t\t_delete_link_handler.call(this, id, e);\r\n\t\t\t\t}, gantt), this.$task);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"doubleclick\", \"gantt_link_point\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar id = this.locate(e),\r\n\t\t\t\t\t\ttask = this.getTask(id);\r\n\r\n\t\t\t\t\tvar link = null;\r\n\t\t\t\t\tif (trg.parentNode && domHelpers.getClassName(trg.parentNode)) {\r\n\t\t\t\t\t\tif (domHelpers.getClassName(trg.parentNode).indexOf(\"_left\") > -1) {\r\n\t\t\t\t\t\t\tlink = task.$target[0];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlink = task.$source[0];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (link)\r\n\t\t\t\t\t\t_delete_link_handler.call(this, link, e);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}, gantt), this.$task);\r\n\t\t\t},\r\n\r\n\t\t\t_attachStateProvider: function(gantt, timeline){\r\n\t\t\t\tvar self = timeline;\r\n\t\t\t\tvar state = services.getService(\"state\");\r\n\t\t\t\tstate.registerProvider(\"tasksTimeline\", function(){\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tscale_unit: self._tasks ? self._tasks.unit : undefined,\r\n\t\t\t\t\t\tscale_step:  self._tasks ? self._tasks.step  : undefined\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t_clearStateProvider: function(){\r\n\t\t\t\tvar state = services.getService(\"state\");\r\n\t\t\t\tstate.unregisterProvider(\"tasksTimeline\");\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n})();\r\n\r\nmodule.exports = initializer;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/timeline/main_timeline_initializer.js\n// module id = 57\n// module chunks = 0","var domHelpers = require(\"../../../utils/dom_helpers\"),\r\n\tutils = require(\"../../../utils/utils\");\r\nvar timeout = require(\"../../../utils/timeout\");\r\n\r\nfunction createTaskDND(timeline, gantt){\r\n\tvar services = gantt.$services;\r\n\treturn {\r\n\t\tdrag: null,\r\n\t\tdragMultiple: {},\r\n\t\t_events: {\r\n\t\t\tbefore_start: {},\r\n\t\t\tbefore_finish: {},\r\n\t\t\tafter_finish: {}\r\n\t\t},\r\n\t\t_handlers: {},\r\n\t\tinit: function () {\r\n\t\t\tthis._domEvents = gantt._createDomEventScope();\r\n\t\t\tthis.clear_drag_state();\r\n\t\t\tvar drag = gantt.config.drag_mode;\r\n\t\t\tthis.set_actions();\r\n\r\n\t\t\tvar stateService = services.getService(\"state\");\r\n\t\t\tstateService.registerProvider(\"tasksDnd\", utils.bind(function(){\r\n\t\t\t\treturn {\r\n\t\t\t\t\tdrag_id : this.drag ? this.drag.id : undefined,\r\n\t\t\t\t\tdrag_mode : this.drag ? this.drag.mode : undefined,\r\n\t\t\t\t\tdrag_from_start : this.drag ? this.drag.left : undefined\r\n\t\t\t\t};\r\n\t\t\t}, this));\r\n\r\n\t\t\tvar evs = {\r\n\t\t\t\t\"before_start\": \"onBeforeTaskDrag\",\r\n\t\t\t\t\"before_finish\": \"onBeforeTaskChanged\",\r\n\t\t\t\t\"after_finish\": \"onAfterTaskDrag\"\r\n\t\t\t};\r\n\t\t\t//for now, all drag operations will trigger the same events\r\n\t\t\tfor (var stage in this._events) {\r\n\t\t\t\tfor (var mode in drag) {\r\n\t\t\t\t\tthis._events[stage][mode] = evs[stage];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._handlers[drag.move] = this._move;\r\n\t\t\tthis._handlers[drag.resize] = this._resize;\r\n\t\t\tthis._handlers[drag.progress] = this._resize_progress;\r\n\t\t},\r\n\t\tset_actions: function () {\r\n\t\t\tvar data = timeline.$task_data;\r\n\t\t\tthis._domEvents.attach(data, \"mousemove\", gantt.bind(function (e) {\r\n\t\t\t\tthis.on_mouse_move(e || event);\r\n\t\t\t}, this));\r\n\t\t\tthis._domEvents.attach(data, \"mousedown\", gantt.bind(function (e) {\r\n\t\t\t\tthis.on_mouse_down(e || event);\r\n\t\t\t}, this));\r\n\t\t\tthis._domEvents.attach(data, \"mouseup\", gantt.bind(function (e) {\r\n\t\t\t\tthis.on_mouse_up(e || event);\r\n\t\t\t}, this));\r\n\t\t},\r\n\r\n\t\tclear_drag_state: function () {\r\n\t\t\tthis.drag = {\r\n\t\t\t\tid: null,\r\n\t\t\t\tmode: null,\r\n\t\t\t\tpos: null,\r\n\t\t\t\tstart_x: null,\r\n\t\t\t\tstart_y: null,\r\n\t\t\t\tobj: null,\r\n\t\t\t\tleft: null\r\n\t\t\t};\r\n\t\t\tthis.dragMultiple = {};\r\n\t\t},\r\n\t\t_resize: function (ev, shift, drag) {\r\n\t\t\tvar cfg = timeline.$getConfig();\r\n\t\t\tvar coords_x = this._drag_task_coords(ev, drag);\r\n\t\t\tif (drag.left) {\r\n\t\t\t\tev.start_date = gantt.dateFromPos(coords_x.start + shift);\r\n\t\t\t\tif (!ev.start_date) {\r\n\t\t\t\t\tev.start_date = new Date(gantt.getState().min_date);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tev.end_date = gantt.dateFromPos(coords_x.end + shift);\r\n\t\t\t\tif (!ev.end_date) {\r\n\t\t\t\t\tev.end_date = new Date(gantt.getState().max_date);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (ev.end_date - ev.start_date < cfg.min_duration) {\r\n\t\t\t\tif (drag.left)\r\n\t\t\t\t\tev.start_date = gantt.calculateEndDate({start_date: ev.end_date, duration: -1, task: ev});\r\n\t\t\t\telse\r\n\t\t\t\t\tev.end_date = gantt.calculateEndDate({start_date: ev.start_date, duration: 1, task: ev});\r\n\t\t\t}\r\n\t\t\tgantt._init_task_timing(ev);\r\n\t\t},\r\n\t\t_resize_progress: function (ev, shift, drag) {\r\n\t\t\tvar coords_x = this._drag_task_coords(ev, drag);\r\n\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar diffValue = !config.rtl ? (drag.pos.x - coords_x.start) : (coords_x.start - drag.pos.x);\r\n\r\n\t\t\tvar diff = Math.max(0, diffValue);\r\n\t\t\tev.progress = Math.min(1, diff / Math.abs(coords_x.end - coords_x.start));\r\n\t\t},\r\n\r\n\t\t_find_max_shift: function(dragItems, shift){\r\n\t\t\tvar correctShift;\r\n\t\t\tfor(var i in dragItems){\r\n\t\t\t\tvar drag = dragItems[i];\r\n\t\t\t\tvar ev = gantt.getTask(drag.id);\r\n\r\n\t\t\t\tvar coords_x = this._drag_task_coords(ev, drag);\r\n\t\t\t\tvar minX = gantt.posFromDate( new Date(gantt.getState().min_date)),\r\n\t\t\t\t\tmaxX = gantt.posFromDate( new Date(gantt.getState().max_date));\r\n\r\n\t\t\t\tif(coords_x.end + shift > maxX){\r\n\t\t\t\t\tvar maxShift = maxX - coords_x.end;\r\n\t\t\t\t\tif(maxShift < correctShift || correctShift === undefined){\r\n\t\t\t\t\t\tcorrectShift = maxShift;\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(coords_x.start + shift < minX){\r\n\t\t\t\t\tvar minShift = minX - coords_x.start;\r\n\t\t\t\t\tif(minShift < correctShift || correctShift === undefined){\r\n\t\t\t\t\t\tcorrectShift = minShift;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn correctShift;\r\n\t\t},\r\n\t\t_move: function (ev, shift, drag) {\r\n\t\t\tvar coords_x = this._drag_task_coords(ev, drag);\r\n\t\t\tvar new_start = gantt.dateFromPos(coords_x.start + shift),\r\n\t\t\t\tnew_end = gantt.dateFromPos(coords_x.end + shift);\r\n\t\t\tif (!new_start) {\r\n\t\t\t\tev.start_date = new Date(gantt.getState().min_date);\r\n\t\t\t\tev.end_date = gantt.dateFromPos(gantt.posFromDate(ev.start_date) + (coords_x.end - coords_x.start));\r\n\t\t\t} else if (!new_end) {\r\n\t\t\t\tev.end_date = new Date(gantt.getState().max_date);\r\n\t\t\t\tev.start_date = gantt.dateFromPos(gantt.posFromDate(ev.end_date) - (coords_x.end - coords_x.start));\r\n\t\t\t} else {\r\n\t\t\t\tev.start_date = new_start;\r\n\t\t\t\tev.end_date = new_end;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_drag_task_coords: function (t, drag) {\r\n\t\t\tvar start = drag.obj_s_x = drag.obj_s_x || gantt.posFromDate(t.start_date);\r\n\t\t\tvar end = drag.obj_e_x = drag.obj_e_x || gantt.posFromDate(t.end_date);\r\n\t\t\treturn {\r\n\t\t\t\tstart: start,\r\n\t\t\t\tend: end\r\n\t\t\t};\r\n\t\t},\r\n\t\t_mouse_position_change: function (oldPos, newPos) {\r\n\t\t\tvar dx = oldPos.x - newPos.x,\r\n\t\t\t\tdy = oldPos.y - newPos.y;\r\n\t\t\treturn Math.sqrt(dx * dx + dy * dy);\r\n\t\t},\r\n\t\t_is_number: function (n) {\r\n\t\t\treturn !isNaN(parseFloat(n)) && isFinite(n);\r\n\t\t},\r\n\r\n\t\ton_mouse_move: function (e) {\r\n\t\t\tif (this.drag.start_drag) {\r\n\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\r\n\t\t\t\tvar sX = this.drag.start_drag.start_x,\r\n\t\t\t\t\tsY = this.drag.start_drag.start_y;\r\n\r\n\t\t\t\tif ((Date.now() - this.drag.timestamp > 50) ||\r\n\t\t\t\t\t(this._is_number(sX) && this._is_number(sY) && this._mouse_position_change({\r\n\t\t\t\t\t\tx: sX,\r\n\t\t\t\t\t\ty: sY\r\n\t\t\t\t\t}, pos) > 20)) {\r\n\t\t\t\t\tthis._start_dnd(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar drag = this.drag;\r\n\r\n\t\t\tif (drag.mode) {\r\n\t\t\t\tif (!timeout(this, 40))//limit update frequency\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tthis._update_on_move(e);\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_update_item_on_move: function(shift, id, mode, drag, e){\r\n\t\t\tvar ev = gantt.getTask(id);\r\n\t\t\tvar original = gantt.mixin({}, ev);\r\n\t\t\tvar copy = gantt.mixin({}, ev);\r\n\t\t\tthis._handlers[mode].apply(this, [copy, shift, drag]);\r\n\t\t\tgantt.mixin(ev, copy, true);\r\n\t\t\t//gantt._update_parents(drag.id, true);\r\n\t\t\tgantt.callEvent(\"onTaskDrag\", [ev.id, mode, copy, original, e]);\r\n\t\t\tgantt.mixin(ev, copy, true);\r\n\t\t\tgantt.refreshTask(id);\r\n\t\t},\r\n\r\n\t\t_update_on_move: function (e) {\r\n\t\t\tvar drag = this.drag;\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tif (drag.mode) {\r\n\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, timeline.$task_data);\r\n\t\t\t\tif (drag.pos && drag.pos.x == pos.x)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tdrag.pos = pos;\r\n\r\n\t\t\t\tvar curr_date = gantt.dateFromPos(pos.x);\r\n\t\t\t\tif (!curr_date || isNaN(curr_date.getTime()))\r\n\t\t\t\t\treturn;\r\n\r\n\r\n\t\t\t\tvar shift = pos.x - drag.start_x;\r\n\t\t\t\tvar ev = gantt.getTask(drag.id);\r\n\r\n\t\t\t\tif (this._handlers[drag.mode]) {\r\n\r\n\t\t\t\t\tif(gantt.isSummaryTask(ev) && gantt.config.drag_project && drag.mode == config.drag_mode.move){\r\n\r\n\t\t\t\t\t\tvar initialDrag = {};\r\n\t\t\t\t\t\tinitialDrag[drag.id] = utils.copy(drag);\r\n\t\t\t\t\t\tvar maxShift = this._find_max_shift(utils.mixin(initialDrag, this.dragMultiple), shift);\r\n\t\t\t\t\t\tif(maxShift !== undefined){\r\n\t\t\t\t\t\t\tshift = maxShift;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis._update_item_on_move(shift, drag.id, drag.mode, drag, e);\r\n\t\t\t\t\t\tfor(var i in this.dragMultiple){\r\n\t\t\t\t\t\t\tvar childDrag =  this.dragMultiple[i];\r\n\t\t\t\t\t\t\tthis._update_item_on_move(shift, childDrag.id, childDrag.mode, childDrag, e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis._update_item_on_move(shift, drag.id, drag.mode, drag, e);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgantt._update_parents(drag.id);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ton_mouse_down: function (e, src) {\r\n\t\t\t// on Mac we do not get onmouseup event when clicking right mouse button leaving us in dnd state\r\n\t\t\t// let's ignore right mouse button then\r\n\t\t\tif (e.button == 2 && e.button !== undefined)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar id = gantt.locate(e);\r\n\t\t\tvar task = null;\r\n\t\t\tif (gantt.isTaskExists(id)) {\r\n\t\t\t\ttask = gantt.getTask(id);\r\n\t\t\t}\r\n\r\n\t\t\tif (gantt.isReadonly(task) || this.drag.mode) return;\r\n\r\n\t\t\tthis.clear_drag_state();\r\n\r\n\t\t\tsrc = src || (e.target || e.srcElement);\r\n\r\n\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\tvar drag = this._get_drag_mode(className, src);\r\n\r\n\t\t\tif (!className || !drag) {\r\n\t\t\t\tif (src.parentNode)\r\n\t\t\t\t\treturn this.on_mouse_down(e, src.parentNode);\r\n\t\t\t\telse\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!drag) {\r\n\t\t\t\tif (gantt.checkEvent(\"onMouseDown\") && gantt.callEvent(\"onMouseDown\", [className.split(\" \")[0]])) {\r\n\t\t\t\t\tif (src.parentNode)\r\n\t\t\t\t\t\treturn this.on_mouse_down(e, src.parentNode);\r\n\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (drag.mode && drag.mode != config.drag_mode.ignore && config[\"drag_\" + drag.mode]) {\r\n\t\t\t\t\tid = gantt.locate(src);\r\n\t\t\t\t\ttask = gantt.copy(gantt.getTask(id) || {});\r\n\r\n\t\t\t\t\tif (gantt.isReadonly(task)) {\r\n\t\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ((gantt.isSummaryTask(task) && !config.drag_project) && drag.mode != config.drag_mode.progress) {//only progress drag is allowed for tasks with flexible duration\r\n\t\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdrag.id = id;\r\n\t\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\r\n\t\t\t\t\tdrag.start_x = pos.x;\r\n\t\t\t\t\tdrag.start_y = pos.y;\r\n\t\t\t\t\tdrag.obj = task;\r\n\t\t\t\t\tthis.drag.start_drag = drag;\r\n\t\t\t\t\tthis.drag.timestamp = Date.now();\r\n\r\n\t\t\t\t} else\r\n\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t}\r\n\t\t},\r\n\t\t_fix_dnd_scale_time: function (task, drag) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar unit = gantt.getScale().unit,\r\n\t\t\t\tstep = gantt.getScale().step;\r\n\t\t\tif (!config.round_dnd_dates) {\r\n\t\t\t\tunit = 'minute';\r\n\t\t\t\tstep = config.time_step;\r\n\t\t\t}\r\n\r\n\t\t\tfunction fixStart(task) {\r\n\t\t\t\tif (!gantt.config.correct_work_time)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\tif (!gantt.isWorkTime(task.start_date, undefined, task))\r\n\t\t\t\t\ttask.start_date = gantt.calculateEndDate({\r\n\t\t\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\t\t\tduration: -1,\r\n\t\t\t\t\t\tunit: config.duration_unit,\r\n\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction fixEnd(task) {\r\n\t\t\t\tif (!gantt.config.correct_work_time)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\tif (!gantt.isWorkTime(new Date(task.end_date - 1), undefined, task))\r\n\t\t\t\t\ttask.end_date = gantt.calculateEndDate({\r\n\t\t\t\t\t\tstart_date: task.end_date,\r\n\t\t\t\t\t\tduration: 1,\r\n\t\t\t\t\t\tunit: config.duration_unit,\r\n\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (drag.mode == config.drag_mode.resize) {\r\n\t\t\t\tif (drag.left) {\r\n\t\t\t\t\ttask.start_date = gantt.roundDate({date: task.start_date, unit: unit, step: step});\r\n\t\t\t\t\tfixStart(task);\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttask.end_date = gantt.roundDate({date: task.end_date, unit: unit, step: step});\r\n\t\t\t\t\tfixEnd(task);\r\n\t\t\t\t}\r\n\t\t\t} else if (drag.mode == config.drag_mode.move) {\r\n\t\t\t\ttask.start_date = gantt.roundDate({date: task.start_date, unit: unit, step: step});\r\n\t\t\t\tfixStart(task);\r\n\t\t\t\ttask.end_date = gantt.calculateEndDate(task);\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\t_fix_working_times: function (task, drag) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar drag = drag || {mode: config.drag_mode.move};\r\n\t\t\t\r\n\t\t\tif (drag.mode == config.drag_mode.resize) {\r\n\t\t\t\tif (drag.left) {\r\n\t\t\t\t\ttask.start_date = gantt.getClosestWorkTime({date: task.start_date, dir: 'future', task: task});\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttask.end_date = gantt.getClosestWorkTime({date: task.end_date, dir: 'past', task: task});\r\n\t\t\t\t}\r\n\t\t\t} else if (drag.mode == config.drag_mode.move) {\r\n\t\t\t\tgantt.correctTaskWorkTime(task);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_finalize_mouse_up: function(taskId, config, drag, e){\r\n\t\t\tvar ev = gantt.getTask(taskId);\r\n\r\n\t\t\tif (config.work_time && config.correct_work_time) {\r\n\t\t\t\tthis._fix_working_times(ev, drag);\r\n\t\t\t}\r\n\r\n\t\t\tthis._fix_dnd_scale_time(ev, drag);\r\n\r\n\t\t\tif (!this._fireEvent(\"before_finish\", drag.mode, [taskId, drag.mode, gantt.copy(drag.obj), e])) {\r\n\t\t\t\t//drag.obj._dhx_changed = false;\r\n\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\tif(taskId == drag.id){\r\n\t\t\t\t\tdrag.obj._dhx_changed = false;\r\n\t\t\t\t\tgantt.mixin(ev, drag.obj, true);\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tgantt.refreshTask(ev.id);\r\n\t\t\t} else {\r\n\t\t\t\tvar drag_id = taskId;\r\n\r\n\t\t\t\tgantt._init_task_timing(ev);\r\n\r\n\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\tgantt.updateTask(ev.id);\r\n\t\t\t\tthis._fireEvent(\"after_finish\", drag.mode, [drag_id, drag.mode, e]);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\ton_mouse_up: function (e) {\r\n\r\n\t\t\tvar drag = this.drag;\r\n\t\t\tif (drag.mode && drag.id) {\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\t//drop\r\n\t\t\t\tvar ev = gantt.getTask(drag.id);\r\n\r\n\t\t\t\tvar dragMultiple = this.dragMultiple;\r\n\t\t\t\tthis._finalize_mouse_up(drag.id, config, drag, e);\r\n\t\t\t\tif(gantt.isSummaryTask(ev) && config.drag_project && drag.mode == config.drag_mode.move){\r\n\t\t\t\t\tfor(var i in dragMultiple){\r\n\t\t\t\t\t\tthis._finalize_mouse_up(dragMultiple[i].id, config, dragMultiple[i], e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.clear_drag_state();\r\n\t\t},\r\n\t\t_get_drag_mode: function (className, el) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar modes = config.drag_mode;\r\n\t\t\tvar classes = (className || \"\").split(\" \");\r\n\t\t\tvar classname = classes[0];\r\n\t\t\tvar drag = {mode: null, left: null};\r\n\t\t\tswitch (classname) {\r\n\t\t\t\tcase \"gantt_task_line\":\r\n\t\t\t\tcase \"gantt_task_content\":\r\n\t\t\t\t\tdrag.mode = modes.move;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_task_drag\":\r\n\t\t\t\t\tdrag.mode = modes.resize;\r\n\r\n\t\t\t\t\tvar dragProperty = el.getAttribute(\"data-bind-property\");\r\n\r\n\t\t\t\t\tif (dragProperty == \"start_date\") {\r\n\t\t\t\t\t\tdrag.left = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdrag.left = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_task_progress_drag\":\r\n\t\t\t\t\tdrag.mode = modes.progress;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_link_control\":\r\n\t\t\t\tcase \"gantt_link_point\":\r\n\t\t\t\t\tdrag.mode = modes.ignore;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tdrag = null;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\treturn drag;\r\n\r\n\t\t},\r\n\r\n\t\t_start_dnd: function (e) {\r\n\t\t\tvar drag = this.drag = this.drag.start_drag;\r\n\t\t\tdelete drag.start_drag;\r\n\r\n\t\t\tvar cfg = timeline.$getConfig();\r\n\t\t\tvar id = drag.id;\r\n\t\t\tif (!cfg[\"drag_\" + drag.mode] || !gantt.callEvent(\"onBeforeDrag\", [id, drag.mode, e]) || !this._fireEvent(\"before_start\", drag.mode, [id, drag.mode, e])) {\r\n\t\t\t\tthis.clear_drag_state();\r\n\t\t\t} else {\r\n\t\t\t\tdelete drag.start_drag;\r\n\r\n\t\t\t\tvar task = gantt.getTask(id);\r\n\t\t\t\tif(gantt.isSummaryTask(task) && gantt.config.drag_project && drag.mode == cfg.drag_mode.move){\r\n\t\t\t\t\tgantt.eachTask(function(child){\r\n\t\t\t\t\t\tthis.dragMultiple[child.id] = gantt.mixin({\r\n\t\t\t\t\t\t\tid: child.id,\r\n\t\t\t\t\t\t\tobj: child\r\n\t\t\t\t\t\t}, this.drag);\r\n\t\t\t\t\t}, task.id, this);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgantt.callEvent(\"onTaskDragStart\", []);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\t_fireEvent: function (stage, mode, params) {\r\n\t\t\tgantt.assert(this._events[stage], \"Invalid stage:{\" + stage + \"}\");\r\n\r\n\t\t\tvar trigger = this._events[stage][mode];\r\n\r\n\t\t\tgantt.assert(trigger, \"Unknown after drop mode:{\" + mode + \"}\");\r\n\t\t\tgantt.assert(params, \"Invalid event arguments\");\r\n\r\n\r\n\t\t\tif (!gantt.checkEvent(trigger))\r\n\t\t\t\treturn true;\r\n\r\n\t\t\treturn gantt.callEvent(trigger, params);\r\n\t\t},\r\n\r\n\t\tround_task_dates: function(task){\r\n\t\t\tvar drag_state = this.drag;\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tif (!drag_state) {\r\n\t\t\t\tdrag_state = {mode: config.drag_mode.move};\r\n\t\t\t}\r\n\t\t\tthis._fix_dnd_scale_time(task, drag_state);\r\n\t\t},\r\n\t\tdestructor: function(){\r\n\t\t\tthis._domEvents.detachAll();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction initTaskDND() {\r\n\tvar _tasks_dnd;\r\n\treturn {\r\n\t\textend: function(timeline){\r\n\t\t\ttimeline.roundTaskDates = function (task) {\r\n\t\t\t\t_tasks_dnd.round_task_dates(task);\r\n\t\t\t};\r\n\r\n\t\t},\r\n\t\tinit: function(timeline, gantt){\r\n\t\t\t_tasks_dnd = createTaskDND(timeline, gantt);\r\n\t\t\t// TODO: entry point for touch handlers, move touch to timeline\r\n\t\t\ttimeline._tasks_dnd = _tasks_dnd;\r\n\t\t\treturn _tasks_dnd.init(gantt);\r\n\t\t},\r\n\t\tdestructor: function(){\r\n\t\t\t_tasks_dnd.destructor();\r\n\t\t\t_tasks_dnd = null;\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = {\r\n\tcreateTaskDND: initTaskDND\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/timeline/tasks_dnd.js\n// module id = 58\n// module chunks = 0","var domHelpers = require(\"../../../utils/dom_helpers\");\r\n\r\nvar initLinksDND = function(timeline, gantt) {\r\n\tvar _link_landing,\r\n\t\t_link_target_task,\r\n\t\t_link_target_task_start,\r\n\t\t_link_source_task,\r\n\t\t_link_source_task_start;\r\n\r\n\r\n\tfunction getVisibleMilestoneWidth() {\r\n\t\tvar origWidth = timeline.getItemHeight();//m-s have square shape\r\n\t\treturn Math.round(Math.sqrt(2 * origWidth * origWidth)) - 2;\r\n\t}\r\n\r\n\tfunction isMilestone(task) {\r\n\t\treturn gantt.getTaskType(task.type) == gantt.config.types.milestone;\r\n\t}\r\n\r\n\tfunction getDndState(){\r\n\t\treturn {\r\n\t\t\tlink_source_id : _link_source_task,\r\n\t\t\tlink_target_id : _link_target_task,\r\n\t\t\tlink_from_start : _link_source_task_start,\r\n\t\t\tlink_to_start : _link_target_task_start,\r\n\t\t\tlink_landing_area : _link_landing\r\n\t\t};\r\n\t}\r\n\r\n\tvar services = gantt.$services;\r\n\r\n\tvar state = services.getService(\"state\");\r\n\tvar DnD = services.getService(\"dnd\");\r\n\r\n\tstate.registerProvider(\"linksDnD\", getDndState);\r\n\r\n\tvar dnd = new DnD(timeline.$task_bars, { sensitivity : 0, updates_per_second : 60 }),\r\n\t\tstart_marker = \"task_start_date\",\r\n\t\tend_marker = \"task_end_date\",\r\n\t\tlink_edge_marker = \"gantt_link_point\",\r\n\t\tlink_landing_hover_area = \"gantt_link_control\";\r\n\r\n\tdnd.attachEvent(\"onBeforeDragStart\", gantt.bind(function(obj,e) {\r\n\t\tvar target = (e.target||e.srcElement);\r\n\t\tresetDndState();\r\n\t\tif(gantt.getState().drag_id)\r\n\t\t\treturn false;\r\n\r\n\t\tif(domHelpers.locateClassName(target, link_edge_marker)){\r\n\t\t\tif(domHelpers.locateClassName(target, start_marker))\r\n\t\t\t\t_link_source_task_start = true;\r\n\r\n\t\t\tvar sid = gantt.locate(e);\r\n\t\t\t_link_source_task = sid;\r\n\r\n\t\t\tvar t = gantt.getTask(sid);\r\n\t\t\tif(gantt.isReadonly(t)){\r\n\t\t\t\tresetDndState();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tvar shift = 0;\r\n\r\n\t\t\tthis._dir_start = getLinePos(t, !!_link_source_task_start, shift, timeline.$getConfig(), true);\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}, this));\r\n\r\n\tdnd.attachEvent(\"onAfterDragStart\", gantt.bind(function(obj,e) {\r\n\t\tif(gantt.config.touch) {\r\n\t\t\tgantt.refreshData();\r\n\t\t}\r\n\t\tupdateMarkedHtml(dnd.config.marker);\r\n\t}, this));\r\n\r\n\tfunction getLinePos(task, to_start, shift, cfg, isStart){\r\n\t\tvar taskPos = getMilestonePosition(task, function(task){ return gantt.getTaskPosition(task);}, cfg);\r\n\r\n\t\tvar pos = {x: taskPos.x, y: taskPos.y};\r\n\t\tif(!to_start){\r\n\t\t\tpos.x = taskPos.xEnd;\r\n\t\t}\r\n\r\n\t\t//var pos = gantt._get_task_pos(task, !!to_start);\r\n\t\tpos.y += gantt.config.row_height/2;\r\n\r\n\t\tvar offset = isMilestone(task) && isStart ? 2 : 0;\r\n\r\n\t\tshift = shift || 0;\r\n\t\tif(cfg.rtl)\r\n\t\t\tshift = shift * -1;\r\n\r\n\t\tpos.x += (to_start ? -1 : 1)*shift  - offset;\r\n\t\treturn pos;\r\n\t}\r\n\r\n\tfunction getMilestonePosition(task, getTaskPosition, cfg){\r\n\t\tvar pos = getTaskPosition(task);\r\n\r\n\t\tvar res = {\r\n\t\t\tx: pos.left,\r\n\t\t\ty: pos.top,\r\n\t\t\twidth: pos.width,\r\n\t\t\theight: pos.height\r\n\t\t};\r\n\r\n\t\tif(cfg.rtl){\r\n\t\t\tres.xEnd = res.x;\r\n\t\t\tres.x = res.xEnd + res.width;\r\n\t\t}else{\r\n\t\t\tres.xEnd = res.x + res.width;\r\n\t\t}\r\n\t\tres.yEnd = res.y + res.height;\r\n\r\n\t\tif(gantt.getTaskType(task.type) == gantt.config.types.milestone){\r\n\t\t\tvar milestoneWidth = getVisibleMilestoneWidth();\r\n\r\n\t\t\tres.x += (!cfg.rtl ? -1 : 1)*(milestoneWidth / 2);\r\n\t\t\tres.xEnd += (!cfg.rtl ? 1 : -1)*(milestoneWidth / 2);\r\n\r\n\t\t\t//pos.x -= milestoneWidth / 2;\r\n\t\t\t//pos.xEnd += milestoneWidth / 2;\r\n\t\t\tres.width = pos.xEnd - pos.x;\r\n\t\t}\r\n\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\tdnd.attachEvent(\"onDragMove\", gantt.bind(function(obj,e) {\r\n\t\tvar dd = dnd.config;\r\n\t\tvar pos = dnd.getPosition(e);\r\n\t\tadvanceMarker(dd.marker, pos);\r\n\t\tvar landing = !!domHelpers.locateClassName(e, link_landing_hover_area);\r\n\r\n\t\tvar prevTarget = _link_target_task;\r\n\t\tvar prevLanding = _link_landing;\r\n\t\tvar prevToStart = _link_target_task_start;\r\n\r\n\t\tvar targ = gantt.locate(e),\r\n\t\t\tto_start = true;\r\n\t\tif(landing){\r\n\t\t\t//refreshTask\r\n\t\t\tto_start = !domHelpers.locateClassName(e, end_marker);\r\n\t\t\tlanding = !!targ;\r\n\t\t}\r\n\r\n\t\t_link_target_task = targ;\r\n\t\t_link_landing = landing;\r\n\t\t_link_target_task_start = to_start;\r\n\r\n\t\tif(landing){\r\n\t\t\tvar t = gantt.getTask(targ);\r\n\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar node = domHelpers.locateClassName(e, link_landing_hover_area);\r\n\t\t\tvar shift = 0;\r\n\t\t\tif(node){\r\n\t\t\t\tshift = Math.floor(node.offsetWidth  / 2);\r\n\t\t\t}\r\n\r\n\t\t\tthis._dir_end = getLinePos(t, !!_link_target_task_start,shift, config);\r\n\t\t}else{\r\n\t\t\tthis._dir_end = domHelpers.getRelativeEventPosition(e, timeline.$task_data);\r\n\t\t}\r\n\r\n\t\tvar targetChanged = !(prevLanding == landing && prevTarget == targ && prevToStart == to_start);\r\n\t\tif(targetChanged){\r\n\t\t\tif(prevTarget)\r\n\t\t\t\tgantt.refreshTask(prevTarget, false);\r\n\t\t\tif(targ)\r\n\t\t\t\tgantt.refreshTask(targ, false);\r\n\t\t}\r\n\r\n\t\tif(targetChanged){\r\n\t\t\tupdateMarkedHtml(dd.marker);\r\n\t\t}\r\n\r\n\t\tshowDirectingLine(this._dir_start.x, this._dir_start.y, this._dir_end.x, this._dir_end.y);\r\n\r\n\t\treturn true;\r\n\t}, this));\r\n\r\n\r\n\tdnd.attachEvent(\"onDragEnd\", gantt.bind(function() {\r\n\t\tvar drag = getDndState();\r\n\r\n\t\tif(drag.link_source_id && drag.link_target_id && drag.link_source_id != drag.link_target_id){\r\n\t\t\tvar type = gantt._get_link_type(drag.link_from_start, drag.link_to_start);\r\n\r\n\t\t\tvar link = {source : drag.link_source_id, target: drag.link_target_id, type:type};\r\n\t\t\tif(link.type && gantt.isLinkAllowed(link))\r\n\t\t\t\tgantt.addLink(link);\r\n\t\t}\r\n\r\n\t\tresetDndState();\r\n\r\n\t\tif(gantt.config.touch) {\r\n\t\t\tgantt.refreshData();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (drag.link_source_id)\r\n\t\t\t\tgantt.refreshTask(drag.link_source_id, false);\r\n\t\t\tif (drag.link_target_id)\r\n\t\t\t\tgantt.refreshTask(drag.link_target_id, false);\r\n\t\t}\r\n\t\tremoveDirectionLine();\r\n\t}, this));\r\n\r\n\tfunction updateMarkedHtml(marker){\r\n\t\tvar link = getDndState();\r\n\r\n\t\tvar css = [\"gantt_link_tooltip\"];\r\n\t\tif(link.link_source_id && link.link_target_id){\r\n\t\t\tif(gantt.isLinkAllowed(link.link_source_id, link.link_target_id, link.link_from_start, link.link_to_start)){\r\n\t\t\t\tcss.push(\"gantt_allowed_link\");\r\n\t\t\t}else{\r\n\t\t\t\tcss.push(\"gantt_invalid_link\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar className = gantt.templates.drag_link_class(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start);\r\n\t\tif(className)\r\n\t\t\tcss.push(className);\r\n\r\n\t\tvar html = \"<div class='\"+className+ \"'>\" +\r\n\t\t\tgantt.templates.drag_link(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start) +\r\n\t\t\t\"</div>\";\r\n\t\tmarker.innerHTML = html;\r\n\t}\r\n\r\n\tfunction advanceMarker(marker, pos){\r\n\t\tmarker.style.left = pos.x + 5 + \"px\";\r\n\t\tmarker.style.top = pos.y + 5 + \"px\";\r\n\t}\r\n\r\n\tfunction resetDndState(){\r\n\t\t_link_source_task =\r\n\t\t\t_link_source_task_start =\r\n\t\t\t\t_link_target_task = null;\r\n\t\t_link_target_task_start = true;\r\n\t}\r\n\tfunction showDirectingLine(s_x, s_y, e_x, e_y){\r\n\t\tvar div = getDirectionLine();\r\n\r\n\t\tvar link = getDndState();\r\n\r\n\t\tvar css = [\"gantt_link_direction\"];\r\n\t\tif(gantt.templates.link_direction_class){\r\n\t\t\tcss.push(gantt.templates.link_direction_class(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start));\r\n\t\t}\r\n\r\n\t\tvar dist =Math.sqrt( (Math.pow(e_x - s_x, 2)) + (Math.pow(e_y - s_y, 2)) );\r\n\t\tdist = Math.max(0, dist - 3);\r\n\t\tif(!dist)\r\n\t\t\treturn;\r\n\r\n\t\tdiv.className = css.join(\" \");\r\n\t\tvar tan = (e_y - s_y)/(e_x - s_x),\r\n\t\t\tangle = Math.atan(tan);\r\n\r\n\t\tif(coordinateCircleQuarter(s_x, e_x, s_y, e_y) == 2){\r\n\t\t\tangle += Math.PI;\r\n\t\t}else if(coordinateCircleQuarter(s_x, e_x, s_y, e_y) == 3){\r\n\t\t\tangle -= Math.PI;\r\n\t\t}\r\n\r\n\r\n\r\n\t\tvar sin = Math.sin(angle),\r\n\t\t\tcos = Math.cos(angle),\r\n\t\t\ttop = Math.round(s_y),\r\n\t\t\tleft = Math.round(s_x);\r\n\r\n\r\n\t\tvar style = [\r\n\t\t\t\"-webkit-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-moz-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-ms-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-o-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"width:\" + Math.round(dist) + \"px\"\r\n\t\t];\r\n\r\n\t\tif(window.navigator.userAgent.indexOf(\"MSIE 8.0\") != -1){\r\n\t\t\t//ms-filter breaks styles in ie9, so add it only for 8th\r\n\t\t\tstyle.push(\"-ms-filter: \\\"\" + ieTransform(sin, cos) + \"\\\"\");\r\n\r\n\t\t\tvar shiftLeft = Math.abs(Math.round(s_x - e_x)),\r\n\t\t\t\tshiftTop = Math.abs(Math.round(e_y - s_y));\r\n\t\t\t//fix rotation axis\r\n\t\t\tswitch(coordinateCircleQuarter(s_x, e_x, s_y, e_y)){\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\ttop -= shiftTop;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tleft -= shiftLeft;\r\n\t\t\t\t\ttop -= shiftTop;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tleft -= shiftLeft;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tstyle.push(\"top:\" +  top + \"px\");\r\n\t\tstyle.push(\"left:\" +  left + \"px\");\r\n\r\n\t\tdiv.style.cssText = style.join(\";\");\r\n\t}\r\n\r\n\tfunction ieTransform(sin, cos){\r\n\t\treturn \"progid:DXImageTransform.Microsoft.Matrix(\"+\r\n\t\t\t\"M11 = \"+cos+\",\"+\r\n\t\t\t\"M12 = -\"+sin+\",\"+\r\n\t\t\t\"M21 = \"+sin+\",\"+\r\n\t\t\t\"M22 = \"+cos+\",\"+\r\n\t\t\t\"SizingMethod = 'auto expand'\"+\r\n\t\t\")\";\r\n\t}\r\n\tfunction coordinateCircleQuarter(sX, eX, sY, eY){\r\n\t\tif(eX >= sX){\r\n\t\t\tif(eY <= sY){\r\n\t\t\t\treturn 1;\r\n\t\t\t}else{\r\n\t\t\t\treturn 4;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(eY <= sY){\r\n\t\t\t\treturn 2;\r\n\t\t\t}else{\r\n\t\t\t\treturn 3;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\tfunction getDirectionLine(){\r\n\t\tif(!dnd._direction){\r\n\t\t\tdnd._direction = document.createElement(\"div\");\r\n\t\t\ttimeline.$task_links.appendChild(dnd._direction);\r\n\t\t}\r\n\t\treturn dnd._direction;\r\n\t}\r\n\tfunction removeDirectionLine(){\r\n\t\tif(dnd._direction){\r\n\t\t\tif (dnd._direction.parentNode)\t//the event line can be detached because of data refresh\r\n\t\t\t\tdnd._direction.parentNode.removeChild(dnd._direction);\r\n\r\n\t\t\tdnd._direction = null;\r\n\t\t}\r\n\t}\r\n};\r\n\r\nmodule.exports = {\r\n\tcreateLinkDND: function(){\r\n\t\treturn {\r\n\t\t\tinit: initLinksDND\r\n\t\t};\r\n\t}\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/timeline/links_dnd.js\n// module id = 59\n// module chunks = 0","var domHelpers = require(\"../../utils/dom_helpers\");\r\n\r\nvar initializer = (function() {\r\n\treturn function (gantt) {\r\n\t\treturn {\r\n\r\n\t\t\tgetVerticalScrollbar: function(){\r\n\t\t\t\treturn gantt.$ui.getView(\"scrollVer\");\r\n\t\t\t},\r\n\t\t\tgetHorizontalScrollbar: function(){\r\n\t\t\t\treturn gantt.$ui.getView(\"scrollHor\");\r\n\t\t\t},\r\n\r\n\t\t\t_legacyGridResizerClass: function(layout){\r\n\t\t\t\tvar resizers = layout.getCellsByType(\"resizer\");\r\n\t\t\t\tfor(var i = 0; i < resizers.length; i++){\r\n\t\t\t\t\tvar r = resizers[i];\r\n\t\t\t\t\tvar gridResizer = false;\r\n\r\n\t\t\t\t\tvar prev = r.$parent.getPrevSibling(r.$id);\r\n\t\t\t\t\tif(prev && prev.$config && prev.$config.id === \"grid\"){\r\n\t\t\t\t\t\tgridResizer= true;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar next = r.$parent.getNextSibling(r.$id);\r\n\t\t\t\t\t\tif(next && next.$config && next.$config.id === \"grid\"){\r\n\t\t\t\t\t\t\tgridResizer= true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(gridResizer){\r\n\t\t\t\t\t\tr.$config.css = (r.$config.css ? r.$config.css + \" \" : \"\") + \"gantt_grid_resize_wrap\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tonCreated: function (layout) {\r\n\t\t\t\tvar first = true;\r\n\r\n\t\t\t\tthis._legacyGridResizerClass(layout);\r\n\r\n\t\t\t\tlayout.attachEvent(\"onBeforeResize\", function(){\r\n\t\t\t\t\tvar mainTimeline = gantt.$ui.getView(\"timeline\");\r\n\t\t\t\t\tif(mainTimeline)\r\n\t\t\t\t\t\tmainTimeline.$config.hidden = mainTimeline.$parent.$config.hidden = !gantt.config.show_chart;\r\n\r\n\t\t\t\t\tvar mainGrid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\tif(!mainGrid)\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tvar showGrid = gantt.config.show_grid;\r\n\t\t\t\t\tif(first) {\r\n\t\t\t\t\t\tvar colsWidth = mainGrid._getColsTotalWidth();\r\n\t\t\t\t\t\tif(colsWidth !== false){\r\n\t\t\t\t\t\t\tgantt.config.grid_width = colsWidth;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tshowGrid = showGrid && !!gantt.config.grid_width;\r\n\t\t\t\t\t\tgantt.config.show_grid = showGrid;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmainGrid.$config.hidden = mainGrid.$parent.$config.hidden = !showGrid;\r\n\r\n\t\t\t\t\tif(!mainGrid.$config.hidden){\r\n\t\t\t\t\t\t/* restrict grid width due to min_width, max_width, min_grid_column_width */\r\n\t\t\t\t\t\tvar grid_limits = mainGrid._getGridWidthLimits();\r\n\t\t\t\t\t\tif (grid_limits[0] && gantt.config.grid_width < grid_limits[0])\r\n\t\t\t\t\t\t\tgantt.config.grid_width = grid_limits[0];\r\n\t\t\t\t\t\tif (grid_limits[1] && gantt.config.grid_width > grid_limits[1])\r\n\t\t\t\t\t\t\tgantt.config.grid_width = grid_limits[1];\r\n\t\t\t\t\t\tif(mainTimeline && gantt.config.show_chart){\r\n\r\n\t\t\t\t\t\t\tmainGrid.$config.width = gantt.config.grid_width - 1;\r\n\t\t\t\t\t\t\tif(!first){\r\n\r\n\t\t\t\t\t\t\t\tif(mainTimeline && !domHelpers.isChildOf(mainTimeline.$task, layout.$view)){\r\n\t\t\t\t\t\t\t\t\t// timeline is being displayed after being not visible, reset grid with from full screen\r\n\t\t\t\t\t\t\t\t\tif(!mainGrid.$config.original_grid_width){\r\n\t\t\t\t\t\t\t\t\t\tvar skinSettings = gantt.skins[gantt.skin];\r\n\t\t\t\t\t\t\t\t\t\tif(skinSettings && skinSettings.config && skinSettings.config.grid_width){\r\n\t\t\t\t\t\t\t\t\t\t\tmainGrid.$config.original_grid_width =  skinSettings.config.grid_width;\r\n\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\tmainGrid.$config.original_grid_width = 0;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tgantt.config.grid_width = mainGrid.$config.original_grid_width;\r\n\t\t\t\t\t\t\t\t\tmainGrid.$parent.$config.width = gantt.config.grid_width;\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\tmainGrid.$parent._setContentSize(mainGrid.$config.width, mainGrid.$config.height);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tmainGrid.$parent.$config.width = gantt.config.grid_width;\r\n\t\t\t\t\t\t\t\tif(mainGrid.$parent.$config.group){\r\n\t\t\t\t\t\t\t\t\tgantt.$layout._syncCellSizes(mainGrid.$parent.$config.group, mainGrid.$parent.$config.width);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tif( mainTimeline && domHelpers.isChildOf(mainTimeline.$task, layout.$view)){\r\n\t\t\t\t\t\t\t\t// hiding timeline, remember grid with to restore it when timeline is displayed again\r\n\t\t\t\t\t\t\t\tmainGrid.$config.original_grid_width = gantt.config.grid_width;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(!first){\r\n\t\t\t\t\t\t\t\tmainGrid.$parent.$config.width = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfirst = false;\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgantt._getVerticalScrollbar = this.getVerticalScrollbar;\r\n\t\t\t\tgantt._getHorizontalScrollbar = this.getHorizontalScrollbar;\r\n\r\n\t\t\t\tvar vertical = this.getVerticalScrollbar();\r\n\t\t\t\tvar horizontal = this.getHorizontalScrollbar();\r\n\t\t\t\tif(vertical){\r\n\t\t\t\t\tvertical.attachEvent(\"onScroll\", function(oldPos, newPos, dir){\r\n\t\t\t\t\t\tvar scrollState = gantt.getScrollState();\r\n\t\t\t\t\t\tgantt.callEvent(\"onGanttScroll\", [scrollState.x, oldPos, scrollState.x, newPos]);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif(horizontal){\r\n\t\t\t\t\thorizontal.attachEvent(\"onScroll\", function(oldPos, newPos, dir){\r\n\t\t\t\t\t\tvar scrollState = gantt.getScrollState();\r\n\t\t\t\t\t\tgantt.callEvent(\"onGanttScroll\", [oldPos, scrollState.y, newPos, scrollState.y]);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlayout.attachEvent(\"onResize\", function(){\r\n\t\t\t\t\tif(vertical && !gantt.$scroll_ver){\r\n\t\t\t\t\t\tgantt.$scroll_ver = vertical.$scroll_ver;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(horizontal && !gantt.$scroll_hor){\r\n\t\t\t\t\t\tgantt.$scroll_hor = horizontal.$scroll_hor;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t},\r\n\r\n\t\t\t_findGridResizer: function(layout, grid){\r\n\t\t\t\tvar resizers = layout.getCellsByType(\"resizer\");\r\n\r\n\t\t\t\tvar gridFirst = true;\r\n\t\t\t\tvar gridResizer;\r\n\t\t\t\tfor(var i = 0; i < resizers.length; i++){\r\n\t\t\t\t\tvar res = resizers[i];\r\n\t\t\t\t\tres._getSiblings();\r\n\t\t\t\t\tvar prev = res._behind;\r\n\t\t\t\t\tvar next = res._front;\r\n\t\t\t\t\tif(prev && prev.$content === grid || (prev.isChild && prev.isChild(grid))){\r\n\t\t\t\t\t\tgridResizer = res;\r\n\t\t\t\t\t\tgridFirst = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}else if(next && next.$content === grid || (next.isChild && next.isChild(grid))){\r\n\t\t\t\t\t\tgridResizer = res;\r\n\t\t\t\t\t\tgridFirst = false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn {\r\n\t\t\t\t\tresizer: gridResizer,\r\n\t\t\t\t\tgridFirst: gridFirst\r\n\t\t\t\t};\r\n\t\t\t},\r\n\r\n\t\t\tonInitialized: function (layout) {\r\n\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\r\n\t\t\t\tvar resizeInfo = this._findGridResizer(layout, grid);\r\n\r\n\t\t\t\t// expose grid resize events\r\n\t\t\t\tif(resizeInfo.resizer){\r\n\t\t\t\t\tvar gridFirst = resizeInfo.gridFirst,\r\n\t\t\t\t\t\tnext = resizeInfo.resizer;\r\n\t\t\t\t\tvar initialWidth;\r\n\t\t\t\t\tnext.attachEvent(\"onResizeStart\", function(prevCellWidth, nextCellWidth){\r\n\r\n\t\t\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\t\tvar viewCell = grid ? grid.$parent : null;\r\n\t\t\t\t\t\tif(viewCell){\r\n\t\t\t\t\t\t\tvar limits = grid._getGridWidthLimits();\r\n\r\n\t\t\t\t\t\t\t// min grid width is defined by min widths of its columns, unless grid has horizontal scroll\r\n\t\t\t\t\t\t\tif(!grid.$config.scrollable)\r\n\t\t\t\t\t\t\t\tviewCell.$config.minWidth = limits[0];\r\n\r\n\t\t\t\t\t\t\tviewCell.$config.maxWidth = limits[1];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tinitialWidth = gridFirst ? prevCellWidth : nextCellWidth;\r\n\t\t\t\t\t\treturn gantt.callEvent(\"onGridResizeStart\", [initialWidth]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnext.attachEvent(\"onResize\", function(newBehindSize, newFrontSize){\r\n\t\t\t\t\t\tvar newSize = gridFirst ? newBehindSize : newFrontSize;\r\n\t\t\t\t\t\treturn gantt.callEvent(\"onGridResize\", [initialWidth, newSize]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnext.attachEvent(\"onResizeEnd\", function(oldBackSize, oldFrontSize, newBackSize, newFrontSize){\r\n\r\n\t\t\t\t\t\tvar oldSize = gridFirst ? oldBackSize : oldFrontSize;\r\n\t\t\t\t\t\tvar newSize = gridFirst ? newBackSize : newFrontSize;\r\n\t\t\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\t\tvar viewCell = grid ? grid.$parent : null;\r\n\t\t\t\t\t\tif(viewCell){\r\n\t\t\t\t\t\t\tviewCell.$config.minWidth = undefined;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar res = gantt.callEvent(\"onGridResizeEnd\", [oldSize, newSize]);\r\n\t\t\t\t\t\tif(res){\r\n\t\t\t\t\t\t\tgantt.config.grid_width = newSize;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn res;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (timeline) {\r\n\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n})();\r\n\r\nmodule.exports = initializer;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/ui/main_layout_initializer.js\n// module id = 60\n// module chunks = 0","module.exports = function(gantt) {\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/data_task_layers.js\n// module id = 61\n// module chunks = 0","function createLayoutFacade(){\r\n\r\n\tfunction getTimeline(gantt){\r\n\t\treturn gantt.$ui.getView(\"timeline\");\r\n\t}\r\n\r\n\tfunction getGrid(gantt){\r\n\t\treturn gantt.$ui.getView(\"grid\");\r\n\t}\r\n\r\n\tfunction getVerticalScrollbar(gantt){\r\n\t\treturn gantt.$ui.getView(\"scrollVer\");\r\n\t}\r\n\r\n\tfunction getHorizontalScrollbar(gantt){\r\n\t\treturn gantt.$ui.getView(\"scrollHor\");\r\n\t}\r\n\r\n\tvar DEFAULT_VALUE = \"DEFAULT_VALUE\";\r\n\r\n\tfunction tryCall(getView, method, args, fallback){\r\n\t\tvar view = getView(this);\r\n\t\tif (!(view && view.isVisible())) {\r\n\t\t\tif(fallback){\r\n\t\t\t\treturn fallback();\r\n\t\t\t}else{\r\n\t\t\t\treturn DEFAULT_VALUE;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn view[method].apply(view, args);\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tdateFromPos: function(x) {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"dateFromPos\", Array.prototype.slice.call(arguments));\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn this.getState().min_date;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tposFromDate: function(date) {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"posFromDate\", [date]);\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetRowTop: function(index) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar res = tryCall.call(self, getTimeline, \"getRowTop\", [index],\r\n\t\t\t\tfunction(){ return tryCall.call(self, getGrid, \"getRowTop\", [index]);}\r\n\t\t\t\t);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetTaskTop: function(id) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar res = tryCall.call(self, getTimeline, \"getItemTop\", [id],\r\n\t\t\t\tfunction(){ return tryCall.call(self, getGrid, \"getItemTop\", [id]);}\r\n\t\t\t);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\tgetTaskPosition: function(task, start_date, end_date) {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"getItemPosition\", [task, start_date, end_date]);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\tvar top = this.getTaskTop(task.id);\r\n\t\t\t\tvar height = this.getTaskHeight();\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tleft: 0,\r\n\t\t\t\t\ttop: top,\r\n\t\t\t\t\theight: height,\r\n\t\t\t\t\twidth: 0\r\n\t\t\t\t};\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetTaskHeight: function() {\r\n\t\t\tvar self = this;\r\n\t\t\tvar res = tryCall.call(self, getTimeline, \"getItemHeight\", [],\r\n\t\t\t\tfunction(){ return tryCall.call(self, getGrid, \"getItemHeight\", []);}\r\n\t\t\t);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\tcolumnIndexByDate: function(date) {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"columnIndexByDate\", [date]);\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\troundTaskDates: function() {\r\n\t\t\ttryCall.call(this, getTimeline, \"roundTaskDates\", []);\r\n\t\t},\r\n\r\n\t\tgetScale: function() {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"getScale\", []);\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn null;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetTaskNode: function(id) {\r\n\t\t\tvar timeline = getTimeline(this);\r\n\t\t\tif (!timeline || !timeline.isVisible()) {\r\n\t\t\t\treturn null;\r\n\t\t\t} else {\r\n\t\t\t\treturn timeline._taskRenderer.rendered[id];\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\tgetLinkNode: function(id) {\r\n\t\t\tvar timeline = getTimeline(this);\r\n\t\t\tif (!timeline.isVisible()) {\r\n\t\t\t\treturn null;\r\n\t\t\t} else {\r\n\t\t\t\treturn timeline._linkRenderer.rendered[id];\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tscrollTo: function(left, top){\r\n\t\t\tvar vertical = getVerticalScrollbar(this);\r\n\t\t\tvar horizontal = getHorizontalScrollbar(this);\r\n\r\n\t\t\tvar oldH = {position: 0},\r\n\t\t\t\toldV = {position: 0};\r\n\r\n\t\t\tif(vertical){\r\n\t\t\t\toldV = vertical.getScrollState();\r\n\t\t\t}\r\n\t\t\tif(horizontal){\r\n\t\t\t\toldH = horizontal.getScrollState();\r\n\t\t\t}\r\n\r\n\t\t\tif (horizontal && left*1 == left){\r\n\t\t\t\thorizontal.scroll(left);\r\n\t\t\t}\r\n\t\t\tif(vertical && top*1 == top){\r\n\t\t\t\tvertical.scroll(top);\r\n\t\t\t}\r\n\r\n\t\t\tvar newV = {position: 0},\r\n\t\t\t\tnewH = {position: 0};\r\n\t\t\tif(vertical){\r\n\t\t\t\tnewV = vertical.getScrollState();\r\n\t\t\t}\r\n\t\t\tif(horizontal){\r\n\t\t\t\tnewH = horizontal.getScrollState();\r\n\t\t\t}\r\n\r\n\t\t\tthis.callEvent(\"onGanttScroll\", [oldH.position, oldV.position, newH.position, newV.position]);\r\n\t\t},\r\n\r\n\t\tshowDate: function(date){\r\n\t\t\tvar date_x = this.posFromDate(date);\r\n\t\t\tvar scroll_to = Math.max(date_x - this.config.task_scroll_offset, 0);\r\n\t\t\tthis.scrollTo(scroll_to);\r\n\t\t},\r\n\t\tshowTask: function(id) {\r\n\t\t\tvar pos = this.getTaskPosition(this.getTask(id));\r\n\r\n\t\t\tvar left = Math.max(pos.left - this.config.task_scroll_offset, 0);\r\n\r\n\t\t\tvar dataHeight = this._scroll_state().y;\r\n\t\t\tvar top;\r\n\t\t\tif(!dataHeight){\r\n\t\t\t\ttop = pos.top;\r\n\t\t\t}else{\r\n\t\t\t\ttop = pos.top - (dataHeight - this.config.row_height)/2;\r\n\t\t\t}\r\n\r\n\t\t\tthis.scrollTo(left, top);\r\n\t\t},\r\n\t\t_scroll_state: function(){\r\n\t\t\tvar result = {\r\n\t\t\t\tx: false,\r\n\t\t\t\ty: false,\r\n\t\t\t\tx_pos: 0,\r\n\t\t\t\ty_pos: 0,\r\n\t\t\t\tscroll_size: this.config.scroll_size + 1,//1px for inner content\r\n\t\t\t\tx_inner: 0,\r\n\t\t\t\ty_inner: 0\r\n\t\t\t};\r\n\r\n\t\t\tvar scrollVer = getVerticalScrollbar(this),\r\n\t\t\t\tscrollHor = getHorizontalScrollbar(this);\r\n\t\t\tif(scrollHor){\r\n\t\t\t\tvar horState = scrollHor.getScrollState();\r\n\t\t\t\tif(horState.visible){\r\n\t\t\t\t\tresult.x = horState.size;\r\n\t\t\t\t\tresult.x_inner = horState.scrollSize;\r\n\t\t\t\t}\r\n\t\t\t\tresult.x_pos = horState.position || 0;\r\n\t\t\t}\r\n\r\n\t\t\tif(scrollVer){\r\n\t\t\t\tvar verState = scrollVer.getScrollState();\r\n\t\t\t\tif(verState.visible){\r\n\t\t\t\t\tresult.y = verState.size;\r\n\r\n\t\t\t\t\tresult.y_inner = verState.scrollSize;\r\n\t\t\t\t}\r\n\t\t\t\tresult.y_pos = verState.position || 0;\r\n\t\t\t}\r\n\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\tgetScrollState: function(){\r\n\t\t\tvar state = this._scroll_state();\r\n\t\t\treturn { x:state.x_pos, y:state.y_pos, inner_width:state.x, inner_height:state.y, width: state.x_inner, height: state.y_inner };\r\n\t\t}\r\n\r\n\t};\r\n\r\n}\r\n\r\nmodule.exports = createLayoutFacade;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/facades/layout.js\n// module id = 62\n// module chunks = 0","var utils = require(\"../../utils/utils\");\r\nvar facadeFactory = require(\"./../facades/datastore\");\r\nvar calculateScaleRange = require(\"../gantt_data_range\");\r\nfunction initDataStores(gantt){\r\n\r\n\tvar facade = facadeFactory.create();\r\n\tutils.mixin(gantt, facade);\r\n\tvar tasksStore = gantt.createDatastore({\r\n\t\tname: \"task\",\r\n\t\ttype: \"treeDatastore\",\r\n\t\trootId: function(){return gantt.config.root_id;},\r\n\t\tinitItem: utils.bind(_init_task, gantt)\r\n\t});\r\n\r\n\tvar linksStore = gantt.createDatastore({\r\n\t\tname: \"link\",\r\n\t\tinitItem: utils.bind(_init_link, gantt)\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onBeforeRefreshAll\", function(){\r\n\r\n\t\tvar order = tasksStore.getVisibleItems();\r\n\r\n\t\tfor(var i=0; i < order.length; i++){\r\n\t\t\tvar item = order[i];\r\n\t\t\titem.$index = i;\r\n\t\t\tgantt.resetProjectDates(item);\r\n\t\t}\r\n\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onFilterItem\", function(id, task){\r\n\t\tvar min = null, max = null;\r\n\t\tif (gantt.config.start_date && gantt.config.end_date) {\r\n\t\t\tif (gantt._isAllowedUnscheduledTask(task)) return true;\r\n\t\t\tmin = gantt.config.start_date.valueOf();\r\n\t\t\tmax = gantt.config.end_date.valueOf();\r\n\r\n\t\t\tif (+task.start_date > max || +task.end_date < +min)\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onIdChange\", function(oldId, newId){\r\n\t\tgantt._update_flags(oldId, newId);\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onAfterUpdate\", function(id){\r\n\t\tgantt._update_parents(id);\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onAfterItemMove\", function(sid, parent, tindex){\r\n\t\tvar source = gantt.getTask(sid);\r\n\r\n\t\tif(this.getNextSibling(sid) !== null){\r\n\t\t\tsource.$drop_target = this.getNextSibling(sid);\r\n\t\t} else if(this.getPrevSibling(sid) !== null){\r\n\t\t\tsource.$drop_target = \"next:\" + this.getPrevSibling(sid);\r\n\t\t}else{\r\n\t\t\tsource.$drop_target = \"next:null\";\r\n\t\t}\r\n\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onStoreUpdated\", function(id, item, action){\r\n\t\tif(action == \"delete\"){\r\n\t\t\tgantt._update_flags(id, null);\r\n\t\t}\r\n\r\n\t\tvar state = gantt.$services.getService(\"state\");\r\n\t\tif(state.getState(\"batchUpdate\").batch_update){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(gantt.config.fit_tasks && action !== \"paint\"){\r\n\t\t\tvar oldState = gantt.getState();\r\n\t\t\tcalculateScaleRange(gantt);\r\n\t\t\tvar newState = gantt.getState();\r\n\r\n\t\t\t//this._init_tasks_range();\r\n\t\t\tif (+oldState.min_date != +newState.min_date || +oldState.max_date != +newState.max_date) {\r\n\t\t\t\tgantt.render();\r\n\r\n\t\t\t\tgantt.callEvent(\"onScaleAdjusted\", []);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif(action == \"add\" || action == \"move\" || action == \"delete\"){\r\n\t\t\tgantt.$layout.resize();\r\n\t\t}else if(!id){\r\n\t\t\tlinksStore.refresh();\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tlinksStore.attachEvent(\"onAfterAdd\", function(id, link){\r\n\t\tsync_link(link);\r\n\t});\r\n\tlinksStore.attachEvent(\"onAfterUpdate\", function(id, link){\r\n\t\tsync_links();\r\n\t});\r\n\tlinksStore.attachEvent(\"onAfterDelete\", function(id, link){\r\n\t\tsync_link_delete(link);\r\n\t});\r\n\tlinksStore.attachEvent(\"onBeforeIdChange\", function(oldId, newId){\r\n\t\tsync_link_delete(gantt.mixin({id:oldId}, gantt.$data.linksStore.getItem(newId)));\r\n\t\tsync_link(gantt.$data.linksStore.getItem(newId));\r\n\t});\r\n\r\n\tlinksStore.attachEvent(\"onFilterItem\", function(id, link){\r\n\t\tif (!gantt.config.show_links) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (!(gantt.isTaskVisible(link.source) && gantt.isTaskVisible(link.target)) ||\r\n\t\t\tgantt._isAllowedUnscheduledTask(gantt.getTask(link.source)) || gantt._isAllowedUnscheduledTask(gantt.getTask(link.target)))\r\n\t\t\treturn false;\r\n\r\n\t\treturn gantt.callEvent(\"onBeforeLinkDisplay\", [id, link]);\r\n\t});\r\n\r\n\r\n\t(function(){\r\n\t\t// delete all connected links after task is deleted\r\n\t\tvar treeHelper = require(\"../../utils/task_tree_helpers\");\r\n\t\tvar deletedLinks = {};\r\n\r\n\t\tgantt.attachEvent(\"onBeforeTaskDelete\", function(id, item){\r\n \t\t\tdeletedLinks[id] = treeHelper.getSubtreeLinks(gantt, id);\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onAfterTaskDelete\", function(id, item) {\r\n\t\t\tif(deletedLinks[id]){\r\n\t\t\t\tgantt.$data.linksStore.silent(function(){\r\n\t\t\t\t\tfor(var i in deletedLinks[id]){\r\n\t\t\t\t\t\tgantt.$data.linksStore.removeItem(i);\r\n\t\t\t\t\t\tsync_link_delete(deletedLinks[id][i]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdeletedLinks[id] = null;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t})();\r\n\r\n\tgantt.attachEvent(\"onAfterLinkDelete\", function(id, link) {\r\n\t\tgantt.refreshTask(link.source);\r\n\t\tgantt.refreshTask(link.target);\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onParse\", sync_links);\r\n\r\n\tmapEvents({\r\n\t\tsource: linksStore,\r\n\t\ttarget: gantt,\r\n\t\tevents:{\r\n\t\t\t\"onItemLoading\":\"onLinkLoading\",\r\n\t\t\t\"onBeforeAdd\":\"onBeforeLinkAdd\",\r\n\t\t\t\"onAfterAdd\":\"onAfterLinkAdd\",\r\n\t\t\t\"onBeforeUpdate\":\"onBeforeLinkUpdate\",\r\n\t\t\t\"onAfterUpdate\":\"onAfterLinkUpdate\",\r\n\t\t\t\"onBeforeDelete\":\"onBeforeLinkDelete\",\r\n\t\t\t\"onAfterDelete\":\"onAfterLinkDelete\",\r\n\t\t\t\"onIdChange\":\"onLinkIdChange\"\r\n\t\t}\r\n\t});\r\n\r\n\tmapEvents({\r\n\t\tsource: tasksStore,\r\n\t\ttarget: gantt,\r\n\t\tevents:{\r\n\t\t\t\"onItemLoading\":\"onTaskLoading\",\r\n\t\t\t\"onBeforeAdd\":\"onBeforeTaskAdd\",\r\n\t\t\t\"onAfterAdd\":\"onAfterTaskAdd\",\r\n\t\t\t\"onBeforeUpdate\":\"onBeforeTaskUpdate\",\r\n\t\t\t\"onAfterUpdate\":\"onAfterTaskUpdate\",\r\n\t\t\t\"onBeforeDelete\":\"onBeforeTaskDelete\",\r\n\t\t\t\"onAfterDelete\":\"onAfterTaskDelete\",\r\n\t\t\t\"onIdChange\":\"onTaskIdChange\",\r\n\t\t\t\"onBeforeItemMove\":\"onBeforeTaskMove\",\r\n\t\t\t\"onAfterItemMove\":\"onAfterTaskMove\",\r\n\t\t\t\"onFilterItem\":\"onBeforeTaskDisplay\",\r\n\t\t\t\"onItemOpen\":\"onTaskOpened\",\r\n\t\t\t\"onItemClose\":\"onTaskClosed\",\r\n\t\t\t\"onBeforeSelect\":\"onBeforeTaskSelected\",\r\n\t\t\t\"onAfterSelect\":\"onTaskSelected\",\r\n\t\t\t\"onAfterUnselect\":\"onTaskUnselected\"\r\n\t\t}\r\n\t});\r\n\r\n\tgantt.$data = {\r\n\t\ttasksStore: tasksStore,\r\n\t\tlinksStore: linksStore\r\n\t};\r\n\r\n\tfunction sync_link(link){\r\n\t\tif(gantt.isTaskExists(link.source)){\r\n\t\t\tvar sourceTask = gantt.getTask(link.source);\r\n\t\t\tsourceTask.$source = sourceTask.$source || [];\r\n\t\t\tsourceTask.$source.push(link.id);\r\n\t\t}\r\n\t\tif(gantt.isTaskExists(link.target)){\r\n\t\t\tvar targetTask = gantt.getTask(link.target);\r\n\t\t\ttargetTask.$target = targetTask.$target || [];\r\n\t\t\ttargetTask.$target.push(link.id);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction sync_link_delete(link){\r\n\t\tif(gantt.isTaskExists(link.source)){\r\n\t\t\tvar sourceTask = gantt.getTask(link.source);\r\n\t\t\tfor(var i = 0; i < sourceTask.$source.length; i++){\r\n\t\t\t\tif(sourceTask.$source[i] == link.id){\r\n\t\t\t\t\tsourceTask.$source.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(gantt.isTaskExists(link.target)){\r\n\t\t\tvar targetTask = gantt.getTask(link.target);\r\n\t\t\tfor(var i = 0; i < targetTask.$target.length; i++){\r\n\t\t\t\tif(targetTask.$target[i] == link.id){\r\n\t\t\t\t\ttargetTask.$target.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction sync_links() {\r\n\t\tvar task = null;\r\n\t\tvar tasks = gantt.$data.tasksStore.getItems();\r\n\r\n\t\tfor(var i = 0, len = tasks.length; i < len; i++){\r\n\t\t\ttask = tasks[i];\r\n\t\t\ttask.$source = [];\r\n\t\t\ttask.$target = [];\r\n\t\t}\r\n\r\n\t\tvar links = gantt.$data.linksStore.getItems();\r\n\t\tfor (var i = 0, len = links.length; i < len; i++) {\r\n\r\n\t\t\tvar link = links[i];\r\n\t\t\tsync_link(link);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction mapEvents(conf){\r\n\t\tvar mapFrom = conf.source;\r\n\t\tvar mapTo = conf.target;\r\n\t\tfor(var i in conf.events){\r\n\t\t\t(function(sourceEvent, targetEvent){\r\n\t\t\t\tmapFrom.attachEvent(sourceEvent, function(){\r\n\t\t\t\t\treturn mapTo.callEvent(targetEvent, Array.prototype.slice.call(arguments));\r\n\t\t\t\t}, targetEvent);\r\n\t\t\t})(i, conf.events[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _init_task(task) {\r\n\t\tif (!this.defined(task.id))\r\n\t\t\ttask.id = this.uid();\r\n\r\n\t\tif (task.start_date)\r\n\t\t\ttask.start_date = gantt.date.parseDate(task.start_date, \"xml_date\");\r\n\t\tif (task.end_date)\r\n\t\t\ttask.end_date = gantt.date.parseDate(task.end_date, \"xml_date\");\r\n\r\n\r\n\t\tvar duration = null;\r\n\t\tif (task.duration || task.duration === 0) {\r\n\t\t\ttask.duration = duration = task.duration * 1;\r\n\t\t}\r\n\r\n\t\tif (duration) {\r\n\t\t\tif (task.start_date && !task.end_date) {\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t} else if (!task.start_date && task.end_date) {\r\n\t\t\t\ttask.start_date = this.calculateEndDate({\r\n\t\t\t\t\tstart_date: task.end_date,\r\n\t\t\t\t\tduration: -task.duration,\r\n\t\t\t\t\ttask: task\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tif (this._isAllowedUnscheduledTask(task)) {\r\n\t\t\tthis._set_default_task_timing(task);\r\n\t\t}\r\n\t\tthis._init_task_timing(task);\r\n\t\tif (task.start_date && task.end_date)\r\n\t\t\tthis.correctTaskWorkTime(task);\r\n\r\n\t\ttask.$source = [];\r\n\t\ttask.$target = [];\r\n\t\tif (task.parent === undefined) {\r\n\t\t\tthis.setParent(task, this.config.root_id);\r\n\t\t}\r\n\r\n\t\treturn task;\r\n\t}\r\n\r\n\tfunction _init_link(link) {\r\n\t\tif (!this.defined(link.id))\r\n\t\t\tlink.id = this.uid();\r\n\t\treturn link;\r\n\t}\r\n}\r\n\r\n\r\nmodule.exports = initDataStores;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/datastore/datastore_hooks.js\n// module id = 63\n// module chunks = 0","var utils = require(\"../../utils/utils\");\r\nvar createTasksFacade = require(\"./datastore_tasks\"),\r\n\tcreateLinksFacade = require(\"./datastore_links\"),\r\n\tDataStore = require(\"../datastore/datastore\"),\r\n\tTreeDataStore = require(\"../datastore/treedatastore\"),\r\n\tcreateDatastoreSelect = require(\"../datastore/select\");\r\nvar datastoreRender = require(\"../datastore/datastore_render\");\r\n\r\nfunction getDatastores(){\r\n\tvar storeNames = this.$services.getService(\"datastores\");\r\n\tvar res = [];\r\n\tfor(var i = 0; i < storeNames.length; i++){\r\n\t\tres.push(this.getDatastore(storeNames[i]));\r\n\t}\r\n\treturn res;\r\n}\r\n\r\nvar createDatastoreFacade = function(){\r\n\treturn {\r\n\tcreateDatastore: function(config){\r\n\r\n\t\tvar $StoreType = (config.type || \"\").toLowerCase() == \"treedatastore\" ? TreeDataStore : DataStore;\r\n\r\n\t\tif(config){\r\n\t\t\tvar self = this;\r\n\t\t\tconfig.openInitially = function(){ return self.config.open_tree_initially; };\r\n\t\t}\r\n\r\n\t\tvar store = new $StoreType(config);\r\n\t\tthis.mixin(store, createDatastoreSelect(store));\r\n\r\n\t\tif(config.name){\r\n\r\n\t\t\tthis.$services.setService(\"datastore:\" + config.name, function(){return store;});\r\n\t\t\tvar storeList = this.$services.getService(\"datastores\");\r\n\t\t\tif(!storeList){\r\n\t\t\t\tstoreList = [];\r\n\t\t\t\tthis.$services.setService(\"datastores\", function(){return storeList;});\r\n\t\t\t}\r\n\t\t\tstoreList.push(config.name);\r\n\r\n\t\t\tdatastoreRender.bindDataStore(config.name, this);\r\n\t\t}\r\n\r\n\t\treturn store;\r\n\t},\r\n\tgetDatastore: function(name){\r\n\t\treturn this.$services.getService(\"datastore:\" + name);\r\n\t},\r\n\r\n\trefreshData: function () {\r\n\t\tvar scrollState = this.getScrollState();\r\n\t\tthis.callEvent(\"onBeforeDataRender\", []);\r\n\r\n\t\tvar stores = getDatastores.call(this);\r\n\t\tfor(var i = 0; i < stores.length; i++){\r\n\t\t\tstores[i].refresh();\r\n\t\t}\r\n\r\n\t\tif(scrollState.x || scrollState.y){\r\n\t\t\tthis.scrollTo(scrollState.x, scrollState.y);\r\n\t\t}\r\n\t\tthis.callEvent(\"onDataRender\", []);\r\n\t},\r\n\r\n\tisChildOf: function(childId, parentId){\r\n\t\treturn this.$data.tasksStore.isChildOf(childId, parentId);\r\n\t},\r\n\r\n\trefreshTask: function (taskId, refresh_links) {\r\n\t\tvar task = this.getTask(taskId);\r\n\t\tif (task && this.isTaskVisible(taskId)) {\r\n\r\n\t\t\tthis.$data.tasksStore.refresh(taskId, !!this.getState().drag_id);// do quick refresh during drag and drop\r\n\r\n\t\t\tif (refresh_links !== undefined && !refresh_links)\r\n\t\t\t\treturn;\r\n\t\t\tfor (var i = 0; i < task.$source.length; i++) {\r\n\t\t\t\tthis.refreshLink(task.$source[i]);\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < task.$target.length; i++) {\r\n\t\t\t\tthis.refreshLink(task.$target[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t},\r\n\trefreshLink: function (linkId) {\r\n\t\tthis.$data.linksStore.refresh(linkId, !!this.getState().drag_id);// do quick refresh during drag and drop\r\n\t},\r\n\r\n\tsilent: function(code){\r\n\t\tvar gantt = this;\r\n\t\tgantt.$data.tasksStore.silent(function(){\r\n\t\t\tgantt.$data.linksStore.silent(function(){\r\n\t\t\t\tcode();\r\n\t\t\t});\r\n\t\t});\r\n\t},\r\n\r\n\tclearAll: function () {\r\n\t\tvar stores = getDatastores.call(this);\r\n\t\tfor(var i = 0; i < stores.length; i++){\r\n\t\t\tstores[i].clearAll();\r\n\t\t}\r\n\r\n\t\tthis._update_flags();\r\n\t\tthis.userdata = {};\r\n\t\tthis.callEvent(\"onClear\", []);\r\n\t\tthis.render();\r\n\t},\r\n\t_clear_data: function () {\r\n\t\tthis.$data.tasksStore.clearAll();\r\n\t\tthis.$data.linksStore.clearAll();\r\n\t\tthis._update_flags();\r\n\t\tthis.userdata = {};\r\n\t},\r\n\r\n\tselectTask: function(id){\r\n\t\tvar store = this.$data.tasksStore;\r\n\t\tif(!this.config.select_task)\r\n\t\t\treturn false;\r\n\t\tif (id){\r\n\r\n\t\t\tstore.select(id);\r\n\t\t}\r\n\t\treturn store.getSelectedId();\r\n\t},\r\n\tunselectTask: function(id){\r\n\t\tvar store = this.$data.tasksStore;\r\n\t\tstore.unselect(id);\r\n\t},\r\n\tgetSelectedId: function() {\r\n\t\treturn this.$data.tasksStore.getSelectedId();\r\n\t}\r\n};\r\n};\r\n\r\nfunction createFacade(){\r\n\tvar res = utils.mixin({}, createDatastoreFacade());\r\n\tutils.mixin(res, createTasksFacade());\r\n\tutils.mixin(res, createLinksFacade());\r\n\treturn res;\r\n}\r\n\r\n\r\n\r\n\r\nmodule.exports = {create: createFacade};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/facades/datastore.js\n// module id = 64\n// module chunks = 0","var utils = require(\"../../utils/utils\");\r\n\r\nvar createTasksDatastoreFacade = function(){\r\n\treturn {\r\n\tgetTask: function (id) {\r\n\t\tthis.assert(id, \"Invalid argument for gantt.getTask\");\r\n\t\tvar task = this.$data.tasksStore.getItem(id);\r\n\t\tthis.assert(task, \"Task not found id=\" + id);\r\n\t\treturn task;\r\n\t},\r\n\tgetTaskByTime: function (from, to) {\r\n\t\tvar p = this.$data.tasksStore.getItems();\r\n\r\n\t\tvar res = [];\r\n\r\n\t\tif (!(from || to)) {\r\n\t\t\tres = p;\r\n\t\t} else {\r\n\t\t\tfrom = +from || -Infinity;\r\n\t\t\tto = +to || Infinity;\r\n\t\t\tfor (var t = 0; t < p.length; t++){\r\n\t\t\t\tvar task = p[t];\r\n\t\t\t\tif (+task.start_date < to && +task.end_date > from)\r\n\t\t\t\t\tres.push(task);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\tisTaskExists: function (id) {\r\n\t\treturn this.$data.tasksStore.exists(id);\r\n\t},\r\n\tupdateTask: function (id, item) {\r\n\t\tif (!utils.defined(item)) item = this.getTask(id);\r\n\t\tthis.$data.tasksStore.updateItem(id, item);\r\n\t\tthis.refreshTask(id);\r\n\t},\r\n\taddTask: function (item, parent, index) {\r\n\t\tif (!utils.defined(item.id))\r\n\t\t\titem.id = utils.uid();\r\n\r\n\t\tif (!utils.defined(parent)) parent = this.getParent(item) || 0;\r\n\t\tif (!this.isTaskExists(parent)) parent = 0;\r\n\t\tthis.setParent(item, parent);\r\n\r\n\t\treturn this.$data.tasksStore.addItem(item, index, parent);\r\n\t},\r\n\tdeleteTask: function (id) {\r\n\t\treturn this.$data.tasksStore.removeItem(id);\r\n\t},\r\n\tgetTaskCount: function () {\r\n\t\treturn this.$data.tasksStore.count();\r\n\t},\r\n\tgetVisibleTaskCount: function () {\r\n\t\treturn this.$data.tasksStore.countVisible();\r\n\t},\r\n\tgetTaskIndex: function (id) {\r\n\t\treturn this.$data.tasksStore.getBranchIndex(id);\r\n\t},\r\n\tgetGlobalTaskIndex: function (id) {\r\n\t\tthis.assert(id, \"Invalid argument\");\r\n\t\treturn this.$data.tasksStore.getIndexById(id);\r\n\t},\r\n\teachTask: function (code, parent, master) {\r\n\t\treturn this.$data.tasksStore.eachItem(utils.bind(code, master||this), parent);\r\n\t},\r\n\teachParent: function (callback, startTask, master) {\r\n\t\treturn this.$data.tasksStore.eachParent(utils.bind(callback, master || this), startTask);\r\n\t},\r\n\tchangeTaskId: function (oldid, newid) {\r\n\t\tthis.$data.tasksStore.changeId(oldid, newid);\r\n\t\tvar task = this.$data.tasksStore.getItem(newid);\r\n\r\n\t\tvar links = [];\r\n\r\n\t\tif (task.$source) {\r\n\t\t\tlinks = links.concat(task.$source);\r\n\t\t}\r\n\t\tif (task.$target) {\r\n\t\t\tlinks = links.concat(task.$target);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\tvar link = this.getLink(links[i]);\r\n\t\t\tif (link.source == oldid) {\r\n\t\t\t\tlink.source = newid;\r\n\t\t\t}\r\n\t\t\tif (link.target == oldid) {\r\n\t\t\t\tlink.target = newid;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcalculateTaskLevel: function (item) {\r\n\t\treturn this.$data.tasksStore.calculateItemLevel(item);\r\n\t},\r\n\tgetNext: function (id) {\r\n\t\treturn this.$data.tasksStore.getNext(id);\r\n\t},\r\n\tgetPrev: function (id) {\r\n\t\treturn this.$data.tasksStore.getPrev(id);\r\n\t},\r\n\tgetParent: function (id) {\r\n\t\treturn this.$data.tasksStore.getParent(id);\r\n\t},\r\n\tsetParent: function (task, new_pid, silent) {\r\n\t\treturn this.$data.tasksStore.setParent(task, new_pid, silent);\r\n\t},\r\n\tgetSiblings: function (id) {\r\n\t\treturn this.$data.tasksStore.getSiblings(id).slice();\r\n\t},\r\n\tgetNextSibling: function (id) {\r\n\t\treturn this.$data.tasksStore.getNextSibling(id);\r\n\t},\r\n\tgetPrevSibling: function (id) {\r\n\t\treturn this.$data.tasksStore.getPrevSibling(id);\r\n\t},\r\n\tgetTaskByIndex: function(index){\r\n\t\tvar id = this.$data.tasksStore.getIdByIndex(index);\r\n\t\tif(this.isTaskExists(id)){\r\n\t\t\treturn this.getTask(id);\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\tgetChildren: function (id) {\r\n\t\tif(!this.hasChild(id)){\r\n\t\t\treturn [];\r\n\t\t}else{\r\n\t\t\treturn this.$data.tasksStore.getChildren(id).slice();\r\n\t\t}\r\n\t},\r\n\thasChild: function (id) {\r\n\t\treturn this.$data.tasksStore.hasChild(id);\r\n\t},\r\n\topen: function (id) {\r\n\t\tthis.$data.tasksStore.open(id);\r\n\t},\r\n\tclose: function (id) {\r\n\t\tthis.$data.tasksStore.close(id);\r\n\t},\r\n\tmoveTask: function (sid, tindex, parent) {\r\n\t\tthis.$data.tasksStore.move.apply(this.$data.tasksStore, arguments);\r\n\t},\r\n\tsort: function(field, desc, parent, silent) {\r\n\t\tvar render = !silent;//4th argument to cancel redraw after sorting\r\n\t\tthis.$data.tasksStore.sort(field, desc, parent);\r\n\t\tif (render) {\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t}\r\n};\r\n};\r\n\r\nmodule.exports = createTasksDatastoreFacade;\r\n\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/facades/datastore_tasks.js\n// module id = 65\n// module chunks = 0","var utils = require(\"../../utils/utils\");\r\n\r\n\r\nvar createLinksStoreFacade = function(){\r\n\treturn {\r\n\tgetLinkCount: function () {\r\n\t\treturn this.$data.linksStore.count();\r\n\t},\r\n\r\n\tgetLink : function (id) {\r\n\t\treturn this.$data.linksStore.getItem(id);\r\n\t},\r\n\r\n\tgetLinks : function () {\r\n\t\treturn this.$data.linksStore.getItems();\r\n\t},\r\n\r\n\tisLinkExists : function (id) {\r\n\t\treturn this.$data.linksStore.exists(id);\r\n\t},\r\n\r\n\taddLink : function (link) {\r\n\t\treturn this.$data.linksStore.addItem(link);\r\n\t},\r\n\r\n\tupdateLink : function (id, data) {\r\n\t\tif (!utils.defined(data))\r\n\t\t\tdata = this.getLink(id);\r\n\t\tthis.$data.linksStore.updateItem(id, data);\r\n\t},\r\n\r\n\tdeleteLink : function (id) {\r\n\t\treturn this.$data.linksStore.removeItem(id);\r\n\t},\r\n\r\n\tchangeLinkId : function (oldid, newid) {\r\n\t\treturn this.$data.linksStore.changeId(oldid, newid);\r\n\t}\r\n};\r\n};\r\n\r\nmodule.exports = createLinksStoreFacade;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/facades/datastore_links.js\n// module id = 66\n// module chunks = 0","\r\nfunction createDataStoreSelectMixin(store){\r\n\tvar selectedId = null;\r\n\r\n\tvar deleteItem = store._removeItemInner;\r\n\tstore._removeItemInner = function(id){\r\n\t\tif(selectedId == id){\r\n\t\t\tselectedId = null;\r\n\t\t}\r\n\t\treturn deleteItem.apply(this, arguments);\r\n\t};\r\n\r\n\r\n\tstore.attachEvent(\"onIdChange\", function(oldId, newId) {\r\n\t\tif (store.getSelectedId() == oldId) {\r\n\t\t\tstore.silent(function () {\r\n\t\t\t\tstore.unselect(oldId);\r\n\t\t\t\tstore.select(newId);\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\treturn {\r\n\t\tselect: function(id){\r\n\t\t\tif (id){\r\n\r\n\t\t\t\tif(selectedId == id)\r\n\t\t\t\t\treturn selectedId;\r\n\r\n\t\t\t\tif(!this._skip_refresh) {\r\n\t\t\t\t\tif (!this.callEvent(\"onBeforeSelect\", [id])) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.unselect();\r\n\r\n\t\t\t\tselectedId = id;\r\n\r\n\t\t\t\tif(!this._skip_refresh) {\r\n\t\t\t\t\tthis.refresh(id);\r\n\t\t\t\t\tthis.callEvent(\"onAfterSelect\", [id]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn selectedId;\r\n\t\t},\r\n\t\tgetSelectedId: function(){\r\n\t\t\treturn selectedId;\r\n\t\t},\r\n\t\tunselect: function(id){\r\n\t\t\tvar id = id || selectedId;\r\n\t\t\tif(!id)\r\n\t\t\t\treturn;\r\n\t\t\tselectedId = null;\r\n\t\t\tif(!this._skip_refresh){\r\n\t\t\t\tthis.refresh(id);\r\n\t\t\t\tthis.callEvent(\"onAfterUnselect\", [id]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = createDataStoreSelectMixin;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/datastore/select.js\n// module id = 67\n// module chunks = 0","var storeRenderCreator = function(name, gantt){\r\n\tvar store = gantt.getDatastore(name);\r\n\r\n\tvar itemRepainter = {\r\n\t\trenderItem: function(id, renderer){\r\n\r\n\t\t\tvar renders = renderer.getLayers();\r\n\r\n\t\t\tvar item = store.getItem(id);\r\n\t\t\tif(item && store.isVisible(id)) {\r\n\t\t\t\tfor (var i = 0; i < renders.length; i++)\r\n\t\t\t\t\trenders[i].render_item(item);\r\n\t\t\t}\r\n\t\t},\r\n\t\trenderItems: function(renderer){\r\n\t\t\tvar renderers = renderer.getLayers();\r\n\t\t\tfor (var i = 0; i < renderers.length; i++) {\r\n\t\t\t\trenderers[i].clear();\r\n\t\t\t}\r\n\r\n\t\t\tvar data = store.getVisibleItems();\r\n\r\n\t\t\tfor (var i = 0; i < renderers.length; i++) {\r\n\t\t\t\trenderers[i].render_items(data);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tfunction skipRepaint(gantt){\r\n\t\tvar state = gantt.$services.getService(\"state\");\r\n\t\tif(state.getState(\"batchUpdate\").batch_update){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tstore.attachEvent(\"onStoreUpdated\", function(id, item, action){\r\n\t\tif(skipRepaint(gantt)){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar renderer = gantt.$services.getService(\"layers\").getDataRender(name);\r\n\r\n\t\tif(renderer){\r\n\t\t\tif(!id || action == \"move\" || action == \"delete\"){\r\n\t\t\t\tstore.callEvent(\"onBeforeRefreshAll\", []);\r\n\t\t\t\titemRepainter.renderItems(renderer);\r\n\t\t\t\tstore.callEvent(\"onAfterRefreshAll\", []);\r\n\t\t\t}else{\r\n\t\t\t\tstore.callEvent(\"onBeforeRefreshItem\", [item.id]);\r\n\t\t\t\titemRepainter.renderItem(item.id, renderer);\r\n\t\t\t\tstore.callEvent(\"onAfterRefreshItem\", [item.id]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t// TODO: probably can be done more in a more efficient way\r\n\tstore.attachEvent(\"onItemOpen\", function(){\r\n\t\tgantt.render();\r\n\t});\r\n\r\n\tstore.attachEvent(\"onItemClose\", function(){\r\n\t\tgantt.render();\r\n\t});\r\n\r\n\tfunction refreshId(renders, oldId, newId, item) {\r\n\t\tfor (var i = 0; i < renders.length; i++) {\r\n\t\t\trenders[i].change_id(oldId, newId);\r\n\t\t}\r\n\t}\r\n\r\n\tstore.attachEvent(\"onIdChange\", function(oldId, newId){\r\n\r\n\t\t// in case of linked datastores (tasks <-> links), id change should recalculate something in linked datastore before any repaint\r\n\t\t// use onBeforeIdChange for this hook.\r\n\t\t// TODO: use something more reasonable instead\r\n\t\tstore.callEvent(\"onBeforeIdChange\", [oldId, newId]);\r\n\r\n\t\tif(skipRepaint(gantt)){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar renderer = gantt.$services.getService(\"layers\").getDataRender(name);\r\n\t\trefreshId(renderer.getLayers(), oldId, newId, store.getItem(newId));\r\n\t\titemRepainter.renderItem(newId, renderer);\r\n\t});\r\n\r\n};\r\n\r\nmodule.exports = {\r\n\tbindDataStore: storeRenderCreator\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/datastore/datastore_render.js\n// module id = 68\n// module chunks = 0","var liveUpdateHooks = require(\"./live_update_hooks\");\r\nvar dateHelper = require(\"../../utils/date_helpers\");\r\nvar helpers = require(\"../../utils/helpers\");\r\n\r\nfunction addDataProcessorHooks(gantt) {\r\n\r\n\tgantt.dataProcessor = require(\"./dataprocessor\");\r\n\r\n\tfunction detachDataProcessor(gantt, dp){\r\n\t\tdelete dp.$gantt;\r\n\t\tdelete dp.setGanttMode;\r\n\t\tdelete dp._getRowData;\r\n\t\tdp.afterUpdate = oldAfterUpdate;\r\n\r\n\t\tdelete gantt._dp;\r\n\t\tdelete gantt._change_id;\r\n\t\tdelete gantt._row_style;\r\n\t\tdelete gantt._delete_task;\r\n\t\tdelete gantt._sendTaskOrder;\r\n\r\n\t\thelpers.forEach(dataProcessorHandlers, function(e){\r\n\t\t\tgantt.detachEvent(e);\r\n\t\t});\r\n\t\tdataProcessorHandlers = [];\r\n\t}\r\n\r\n\tvar oldAfterUpdate;\r\n\tfunction extendDataProcessor(gantt, dp){\r\n\t\tdp.setGanttMode = function(mode){\r\n\t\t\tvar modes = dp.modes || {};\r\n\t\t\tif(dp._ganttMode){\r\n\t\t\t\tmodes[dp._ganttMode] = {\r\n\t\t\t\t\t_in_progress : dp._in_progress,\r\n\t\t\t\t\t_invalid : dp._invalid,\r\n\t\t\t\t\tupdatedRows : dp.updatedRows\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tvar newState = modes[mode];\r\n\t\t\tif(!newState){\r\n\t\t\t\tnewState = modes[mode] = {\r\n\t\t\t\t\t_in_progress : {},\r\n\t\t\t\t\t_invalid : {},\r\n\t\t\t\t\tupdatedRows : []\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tdp._in_progress = newState._in_progress;\r\n\t\t\tdp._invalid = newState._invalid;\r\n\t\t\tdp.updatedRows = newState.updatedRows;\r\n\t\t\tdp.modes = modes;\r\n\t\t\tdp._ganttMode = mode;\r\n\t\t};\r\n\r\n\t\toldAfterUpdate = dp.afterUpdate;\r\n\t\tdp.afterUpdate = function(){\r\n\t\t\tvar xml;\r\n\t\t\tif(arguments.length == 3){\r\n\t\t\t\txml = arguments[1];\r\n\t\t\t}else{\r\n\t\t\t\t// old dataprocessor\r\n\t\t\t\txml = arguments[4];\r\n\t\t\t}\r\n\t\t\tvar mode = dp._ganttMode;\r\n\t\t\tvar reqUrl = xml.filePath;\r\n\r\n\t\t\tif(this._tMode != \"REST\"){\r\n\t\t\t\tif (reqUrl.indexOf(\"gantt_mode=links\") != -1) {\r\n\t\t\t\t\tmode = \"links\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tmode = \"tasks\";\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(reqUrl.indexOf(\"/link\") > reqUrl.indexOf(\"/task\")){\r\n\t\t\t\t\tmode = \"links\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tmode = \"tasks\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdp.setGanttMode(mode);\r\n\r\n\t\t\tvar res = oldAfterUpdate.apply(dp, arguments);\r\n\t\t\tdp.setGanttMode(mode);\r\n\t\t\treturn res;\r\n\t\t};\r\n\r\n\t\tdp._getRowData=gantt.bind(function(id, pref) {\r\n\t\t\tvar task;\r\n\t\t\tif (dp._ganttMode == \"tasks\")\r\n\t\t\t\ttask = this.isTaskExists(id) ? this.getTask(id) : { id: id };\r\n\t\t\telse\r\n\t\t\t\ttask = this.isLinkExists(id) ? this.getLink(id) : { id: id };\r\n\r\n\t\t\ttask = gantt.copy(task);\r\n\r\n\t\t\tvar data = {};\r\n\t\t\tfor (var key in task) {\r\n\t\t\t\tif (key.substr(0, 1) == \"$\") continue;\r\n\t\t\t\tvar value = task[key];\r\n\t\t\t\tif (dateHelper.isDate(value))\r\n\t\t\t\t\tdata[key] = this.templates.xml_format(value);\r\n\t\t\t\telse if(value === null)\r\n\t\t\t\t\tdata[key] = \"\";\r\n\t\t\t\telse\r\n\t\t\t\t\tdata[key] = value;\r\n\t\t\t}\r\n\r\n\t\t\tvar taskTiming = this._get_task_timing_mode(task);\r\n\t\t\tif(taskTiming.$no_start){\r\n\t\t\t\ttask.start_date = \"\";\r\n\t\t\t\ttask.duration = \"\";\r\n\t\t\t}\r\n\t\t\tif(taskTiming.$no_end){\r\n\t\t\t\ttask.end_date = \"\";\r\n\t\t\t\ttask.duration = \"\";\r\n\t\t\t}\r\n\t\t\tdata[dp.action_param] = this.getUserData(id, dp.action_param);\r\n\t\t\treturn data;\r\n\t\t}, gantt);\r\n\t}\r\n\r\n\tfunction extendGantt(gantt, dp){\r\n\t\tgantt._change_id = gantt.bind(function(oldid, newid) {\r\n\t\t\tif (dp._ganttMode != \"tasks\")\r\n\t\t\t\tthis.changeLinkId(oldid, newid);\r\n\t\t\telse\r\n\t\t\t\tthis.changeTaskId(oldid, newid);\r\n\t\t}, this);\r\n\r\n\t\tgantt._row_style = function(row_id, classname){\r\n\t\t\tif (dp._ganttMode != \"tasks\") return;\r\n\t\t\tif(!gantt.isTaskExists(row_id))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar task = gantt.getTask(row_id);\r\n\t\t\ttask.$dataprocessor_class = classname;\r\n\t\t\tgantt.refreshTask(row_id);\r\n\t\t};\r\n\r\n\t\t// fake method for dataprocessor\r\n\t\tgantt._delete_task = function(row_id, node){};\r\n\r\n\t\tgantt._sendTaskOrder = function(id, item){\r\n\t\t\tif(item.$drop_target){\r\n\t\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\t\tthis.getTask(id).target = item.$drop_target;\r\n\t\t\t\tdp.setUpdated(id, true,\"order\");\r\n\t\t\t\tdelete this.getTask(id).$drop_target;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis._dp = dp;\r\n\t}\r\n\r\n\tfunction attachDataProcessorEvents(gantt, dp){\r\n\t\tfunction clientSideDelete(id){\r\n\t\t\tvar updated = dp.updatedRows.slice();\r\n\t\t\tvar clientOnly = false;\r\n\r\n\t\t\tfor(var i = 0; i < updated.length && !dp._in_progress[id]; i++){\r\n\t\t\t\tif(updated[i] == id ){\r\n\t\t\t\t\tif(gantt.getUserData(id, \"!nativeeditor_status\") == \"inserted\"){\r\n\t\t\t\t\t\tclientOnly = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdp.setUpdated(id,false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn clientOnly;\r\n\t\t}\r\n\r\n\t\tfunction getTaskLinks(task){\r\n\t\t\tvar links = [];\r\n\r\n\t\t\tif (task.$source) {\r\n\t\t\t\tlinks = links.concat(task.$source);\r\n\t\t\t}\r\n\t\t\tif (task.$target) {\r\n\t\t\t\tlinks = links.concat(task.$target);\r\n\t\t\t}\r\n\r\n\t\t\treturn links;\r\n\t\t}\r\n\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterTaskAdd\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\tdp.setUpdated(id,true,\"inserted\");\r\n\t\t}));\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterTaskUpdate\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\tdp.setUpdated(id,true);\r\n\r\n\t\t\tgantt._sendTaskOrder(id, item);\r\n\t\t}));\r\n\r\n\t\tvar treeHelper = require(\"../../utils/task_tree_helpers\");\r\n\t\tvar cascadeDelete = {};\r\n\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onBeforeTaskDelete\", function(id, item){\r\n\t\t\tif(!gantt.config.cascade_delete){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tcascadeDelete[id] = {\r\n\t\t\t\ttasks: treeHelper.getSubtreeTasks(gantt, id),\r\n\t\t\t\tlinks: treeHelper.getSubtreeLinks(gantt, id)\r\n\t\t\t};\r\n\t\t\treturn true;\r\n\t\t}));\r\n\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterTaskDelete\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"tasks\");\r\n\r\n\t\t\t// not send delete request if item is not inserted into the db - just remove it from the client\r\n\t\t\tvar needDbDelete = !clientSideDelete(id);\r\n\t\t\tif(!needDbDelete)\r\n\t\t\t\treturn;\r\n\t\t\t\r\n\t\t\tif(gantt.config.cascade_delete && cascadeDelete[id]){\r\n\t\t\t\tvar dpMode = dp.updateMode;\r\n\t\t\t\tdp.setUpdateMode(\"off\");\r\n\r\n\t\t\t\tvar cascade = cascadeDelete[id];\r\n\t\t\t\tfor(var i in cascade.tasks){\r\n\t\t\t\t\tif(!clientSideDelete(i)){\r\n\t\t\t\t\t\tdp.setUpdated(i, true, \"deleted\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\t\tfor(var i in cascade.links){\r\n\t\t\t\t\tif(!clientSideDelete(i)){\r\n\t\t\t\t\t\tdp.setUpdated(i, true, \"deleted\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcascadeDelete[id] = null;\r\n\r\n\t\t\t\tif(dpMode != \"off\"){\r\n\t\t\t\t\tdp.sendAllData();\r\n\t\t\t\t}\r\n\t\t\t\tdp.setGanttMode(\"tasks\");\r\n\r\n\t\t\t\tdp.setUpdateMode(dpMode);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdp.setUpdated(id,true,\"deleted\");\r\n\r\n\t\t\tif(dp.updateMode != 'off' && !dp._tSend){\r\n\t\t\t\tdp.sendAllData();\r\n\t\t\t}\r\n\r\n\t\t}));\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterLinkUpdate\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\tdp.setUpdated(id, true);\r\n\t\t}));\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterLinkAdd\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\tdp.setUpdated(id, true,\"inserted\");\r\n\t\t}));\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterLinkDelete\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"links\");\r\n\r\n\t\t\tvar needDbDelete = !clientSideDelete(id);\r\n\t\t\tif(!needDbDelete)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tdp.setUpdated(id, true,\"deleted\");\r\n\t\t}));\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onRowDragEnd\", function(id, target) {\r\n\t\t\tgantt._sendTaskOrder(id, gantt.getTask(id));\r\n\t\t}));\r\n\r\n\t\tvar tasks = null,\r\n\t\t\tlinks = null;\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onTaskIdChange\",function(oldId, newId){\r\n\t\t\tif(!dp._waitMode) return;\r\n\r\n\t\t\tvar children = gantt.getChildren(newId);\r\n\t\t\tif(children.length) {\r\n\t\t\t\ttasks = tasks || {};\r\n\r\n\t\t\t\tfor (var i = 0; i < children.length; i++) {\r\n\t\t\t\t\tvar ch = this.getTask(children[i]);\r\n\t\t\t\t\ttasks[ch.id] = ch;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar item = this.getTask(newId),\r\n\t\t\t\titemLinks = getTaskLinks(item);\r\n\r\n\t\t\tif(itemLinks.length) {\r\n\t\t\t\tlinks = links || {};\r\n\r\n\t\t\t\tfor (var i = 0; i < itemLinks.length; i++) {\r\n\t\t\t\t\tvar link = this.getLink(itemLinks[i]);\r\n\t\t\t\t\tlinks[link.id] = link;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tdp.attachEvent(\"onAfterUpdateFinish\", function(){\r\n\t\t\tif(tasks || links){\r\n\t\t\t\tgantt.batchUpdate(function(){\r\n\t\t\t\t\tfor(var id in tasks){\r\n\t\t\t\t\t\tgantt.updateTask(tasks[id].id);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor(var id in links){\r\n\t\t\t\t\t\tgantt.updateLink(links[id].id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttasks = null;\r\n\t\t\t\t\tlinks = null;\r\n\t\t\t\t});\r\n\t\t\t\tif(tasks) {\r\n\t\t\t\t\tgantt._dp.setGanttMode(\"tasks\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tgantt._dp.setGanttMode(\"links\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdp.attachEvent(\"onBeforeDataSending\", function() {\r\n\t\t\tvar url = this._serverProcessor;\r\n\t\t\tif(this._tMode == \"REST\"){\r\n\t\t\t\tvar mode = this._ganttMode.substr(0, this._ganttMode.length - 1);// links, tasks -> /link/id, /task/id\r\n\r\n\t\t\t\turl = url.substring(0, url.indexOf(\"?\") > -1 ? url.indexOf(\"?\") : url.length);\r\n\t\t\t\t//editing=true&\r\n\t\t\t\tthis.serverProcessor = url + (url.slice(-1) == \"/\" ? \"\" : \"/\") + mode;\r\n\t\t\t}else{\r\n\t\t\t\tthis.serverProcessor = url + gantt.ajax.urlSeparator(url) + \"gantt_mode=\" + this._ganttMode;\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t});\r\n\t}\r\n\r\n\tvar dataProcessorHandlers = [];\r\n\r\n\tgantt._dp_init = function(dp) {\r\n\t\tgantt.assert(!this._dp, \"The dataProcessor is already attached to this gantt instance\");\r\n\r\n\t\tdp.setTransactionMode(\"POST\", true);\r\n\t\tdp.serverProcessor += (dp.serverProcessor.indexOf(\"?\") != -1 ? \"&\" : \"?\") + \"editing=true\";\r\n\t\tdp._serverProcessor = dp.serverProcessor;\r\n\t\tdp.$gantt = this;\r\n\t\tdp.styles = {\r\n\t\t\tupdated:\"gantt_updated\",\r\n\t\t\torder:\"gantt_updated\",\r\n\t\t\tinserted:\"gantt_inserted\",\r\n\t\t\tdeleted:\"gantt_deleted\",\r\n\t\t\tinvalid:\"gantt_invalid\",\r\n\t\t\terror:\"gantt_error\",\r\n\t\t\tclear:\"\"\r\n\t\t};\r\n\r\n\t\tdp._methods=[\"_row_style\",\"setCellTextStyle\",\"_change_id\",\"_delete_task\"];\r\n\r\n\t\textendDataProcessor.call(this, gantt, dp);\r\n\t\textendGantt.call(this, gantt, dp);\r\n\t\tattachDataProcessorEvents.call(this, gantt, dp);\r\n\r\n\t\tdp.attachEvent(\"onDestroy\", function(){\r\n\t\t\tdetachDataProcessor(gantt, dp);\r\n\t\t});\r\n\t\tliveUpdateHooks(gantt, dp);\r\n\t};\r\n\r\n\tgantt.getUserData = function(id, name) {\r\n\t\tif (!this.userdata) this.userdata = {};\r\n\t\tif (this.userdata[id] && this.userdata[id][name]) return this.userdata[id][name];\r\n\t\treturn \"\";\r\n\t};\r\n\tgantt.setUserData = function(id, name, value) {\r\n\t\tif (!this.userdata) this.userdata = {};\r\n\t\tif (!this.userdata[id]) this.userdata[id] = {};\r\n\t\tthis.userdata[id][name] = value;\r\n\t};\r\n}\r\n\r\nmodule.exports = addDataProcessorHooks;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/dataprocessor/hooks.js\n// module id = 69\n// module chunks = 0","var utils = require (\"../../utils/utils\");\r\n\r\nfunction updateCallback(upd, id) {\r\n\tvar data = upd.data || this.xml._xmlNodeToJSON(upd.firstChild);\r\n\tif(!this.isTaskExists(id))\r\n\t\treturn;\r\n\tvar objData = this.getTask(id);\r\n\tfor(var key in data) {\r\n\t\tvar property = data[key];\r\n\t\tswitch(key) {\r\n\t\t\tcase \"id\":\r\n\t\t\t\tcontinue;\r\n\t\t\tcase \"start_date\":\r\n\t\t\tcase \"end_date\":\r\n\t\t\t\tproperty = this.templates.xml_date(property);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"duration\":\r\n\t\t\t\tobjData.end_date = this.calculateEndDate({start_date: objData.start_date, duration: property, task:objData});\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tobjData[key] = property;\r\n\t}\r\n\tthis.updateTask(id);\r\n\tthis.refreshData();\r\n}\r\n\r\nfunction insertCallback(upd, id, parent, mode) {\r\n\tvar data = upd.data || this.xml._xmlNodeToJSON(upd.firstChild),\r\n\t\tmethods = {\r\n\t\t\tadd: this.addTask,\r\n\t\t\tisExist: this.isTaskExists\r\n\t\t};\r\n\tif(mode == \"links\") {\r\n\t\tmethods.add = this.addLink;\r\n\t\tmethods.isExist = this.isLinkExists;\r\n\t}\r\n\tif(methods.isExist.call(this, id))\r\n\t\treturn;\r\n\tdata.id = id;\r\n\tmethods.add.call(this, data);\r\n}\r\n\r\nfunction deleteCallback(upd, id, parent, mode) {\r\n\tvar methods = {\r\n\t\t\"delete\": this.deleteTask,\r\n\t\t\"isExist\": this.isTaskExists\r\n\t};\r\n\tif(mode == \"links\") {\r\n\t\tmethods[\"delete\"] = this.deleteLink;\r\n\t\tmethods.isExist = this.isLinkExists;\r\n\t}\r\n\tif(methods.isExist.call(this, id))\r\n\t\tmethods[\"delete\"].call(this, id);\r\n}\r\n\r\nfunction patchDataProcessor(gantt, dataprocessor){\r\n\tdataprocessor.attachEvent(\"insertCallback\", utils.bind(insertCallback, gantt));\r\n\tdataprocessor.attachEvent(\"updateCallback\",  utils.bind(deleteCallback, gantt));\r\n\tdataprocessor.attachEvent(\"deleteCallback\",  utils.bind(deleteCallback, gantt));\r\n}\r\n\r\nmodule.exports = patchDataProcessor;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/dataprocessor/live_update_hooks.js\n// module id = 70\n// module chunks = 0","var utils = require(\"../../utils/utils\");\r\nvar eventable = require(\"../../utils/eventable\");\r\n\r\n/**\r\n\t* \t@desc: constructor, data processor object \r\n\t*\t@param: serverProcessorURL - url used for update\r\n\t*\t@type: public\r\n\t*/\r\nvar dataProcessor = function(serverProcessorURL){\r\n    this.serverProcessor = serverProcessorURL;\r\n    this.action_param=\"!nativeeditor_status\";\r\n    \r\n\tthis.object = null;\r\n\tthis.updatedRows = []; //ids of updated rows\r\n\t\r\n\tthis.autoUpdate = true;\r\n\tthis.updateMode = \"cell\";\r\n\tthis._tMode=\"GET\"; \r\n\tthis._headers = null;\r\n\tthis._payload = null;\r\n\tthis.post_delim = \"_\";\r\n\t\r\n    this._waitMode=0;\r\n    this._in_progress={};//?\r\n    this._invalid={};\r\n    this.mandatoryFields=[];\r\n    this.messages=[];\r\n    \r\n    this.styles={\r\n    \tupdated:\"font-weight:bold;\",\r\n    \tinserted:\"font-weight:bold;\",\r\n    \tdeleted:\"text-decoration : line-through;\",\r\n    \tinvalid:\"background-color:FFE0E0;\",\r\n    \tinvalid_cell:\"border-bottom:2px solid red;\",\r\n    \terror:\"color:red;\",\r\n    \tclear:\"font-weight:normal;text-decoration:none;\"\r\n    };\r\n    \r\n    this.enableUTFencoding(true);\r\n\teventable(this);\r\n\r\n    return this;\r\n};\r\n\r\ndataProcessor.prototype={\r\n\tsetTransactionMode:function(mode,total){\r\n\t\tif (typeof mode == \"object\"){\r\n\t\t\tthis._tMode = mode.mode || this._tMode;\r\n\r\n\t\t\tif(utils.defined(mode.headers)){\r\n\t\t\t\tthis._headers = mode.headers;\r\n\t\t\t}\r\n\r\n\t\t\tif(utils.defined(mode.payload)){\r\n\t\t\t\tthis._payload = mode.payload;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t} else {\r\n     \t    this._tMode=mode;\r\n\t\t\tthis._tSend=total;\r\n\t\t}\r\n\r\n\t\tif (this._tMode == \"REST\"){\r\n\t\t\tthis._tSend = false;\r\n\t\t\tthis._endnm = true;\r\n\t\t}\r\n\r\n\t\tif (this._tMode == \"JSON\"){\r\n\t\t\tthis._tSend = false;\r\n\t\t\tthis._endnm = true;\r\n\t\t\tthis._headers = this._headers || {};\r\n\t\t\tthis._headers[\"Content-type\"] = \"application/json\";\r\n\t\t}\r\n    },\r\n    escape:function(data){\r\n    \tif (this._utf)\r\n    \t\treturn encodeURIComponent(data);\r\n    \telse\r\n        \treturn escape(data);\r\n\t},\r\n    /**\r\n\t* \t@desc: allows to set escaping mode\r\n\t*\t@param: true - utf based escaping, simple - use current page encoding\r\n\t*\t@type: public\r\n\t*/\t\r\n\tenableUTFencoding:function(mode){\r\n        this._utf=!!mode;\r\n    },\r\n    /**\r\n\t* \t@desc: allows to define, which column may trigger update\r\n\t*\t@param: val - array or list of true/false values\r\n\t*\t@type: public\r\n\t*/\r\n\tsetDataColumns:function(val){\r\n\t\tthis._columns=(typeof val == \"string\")?val.split(\",\"):val;\r\n    },\r\n    /**\r\n\t* \t@desc: get state of updating\r\n\t*\t@returns:   true - all in sync with server, false - some items not updated yet.\r\n\t*\t@type: public\r\n\t*/\r\n\tgetSyncState:function(){\r\n\t\treturn !this.updatedRows.length;\r\n\t},\r\n\t/**\r\n\t* \t@desc: enable/disable named field for data syncing, will use column ids for grid\r\n\t*\t@param:   mode - true/false\r\n\t*\t@type: public\r\n\t*/\r\n\tenableDataNames:function(mode){\r\n\t\tthis._endnm= !!mode;\r\n\t},\r\n\t/**\r\n\t* \t@desc: enable/disable mode , when only changed fields and row id send to the server side, instead of all fields in default mode\r\n\t*\t@param:   mode - true/false\r\n\t*\t@type: public\r\n\t*/\r\n\tenablePartialDataSend:function(mode){\r\n\t\tthis._changed= !!mode;\r\n\t},\r\n\t/**\r\n\t* \t@desc: set if rows should be send to server automaticaly\r\n\t*\t@param: mode - \"row\" - based on row selection changed, \"cell\" - based on cell editing finished, \"off\" - manual data sending\r\n\t*\t@type: public\r\n\t*/\r\n\tsetUpdateMode:function(mode,dnd){\r\n\t\tthis.autoUpdate = (mode==\"cell\");\r\n\t\tthis.updateMode = mode;\r\n\t\tthis.dnd=dnd;\r\n\t},\r\n\tignore:function(code,master){\r\n\t\tthis._silent_mode=true;\r\n\t\tcode.call(master||window);\r\n\t\tthis._silent_mode=false;\r\n\t},\r\n\t/**\r\n\t* \t@desc: mark row as updated/normal. check mandatory fields,initiate autoupdate (if turned on)\r\n\t*\t@param: rowId - id of row to set update-status for\r\n\t*\t@param: state - true for \"updated\", false for \"not updated\"\r\n\t*\t@param: mode - update mode name\r\n\t*\t@type: public\r\n\t*/\r\n\tsetUpdated:function(rowId,state,mode){\r\n\t\tif (this._silent_mode) return;\r\n\t\tvar ind=this.findRow(rowId);\r\n\t\t\r\n\t\tmode=mode||\"updated\";\r\n\t\tvar existing = this.obj.getUserData(rowId,this.action_param);\r\n\t\tif (existing && mode == \"updated\") mode=existing;\r\n\t\tif (state){\r\n\t\t\tthis.set_invalid(rowId,false); //clear previous error flag\r\n\t\t\tthis.updatedRows[ind]=rowId;\r\n\t\t\tthis.obj.setUserData(rowId,this.action_param,mode);\r\n\t\t\tif (this._in_progress[rowId]) \r\n\t\t\t\tthis._in_progress[rowId]=\"wait\";\r\n\t\t} else{\r\n\t\t\tif (!this.is_invalid(rowId)){\r\n\t\t\t\tthis.updatedRows.splice(ind,1);\r\n\t\t\t\tthis.obj.setUserData(rowId,this.action_param,\"\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//clear changed flag\r\n\t\tif (!state)\r\n\t\t\tthis._clearUpdateFlag(rowId);\r\n     \t\t\t\r\n\t\tthis.markRow(rowId,state,mode);\r\n\t\tif (state && this.autoUpdate) this.sendData(rowId);\r\n\t},\r\n\t_clearUpdateFlag:function(id){},\r\n\tmarkRow:function(id,state,mode){ \r\n\t\tvar str=\"\";\r\n\t\tvar invalid=this.is_invalid(id);\r\n\t\tif (invalid){\r\n        \tstr=this.styles[invalid];\r\n        \tstate=true;\r\n    \t}\r\n\t\tif (this.callEvent(\"onRowMark\",[id,state,mode,invalid])){\r\n\t\t\t//default logic\r\n\t\t\tstr=this.styles[state?mode:\"clear\"]+str;\r\n\t\t\t\r\n        \tthis.obj[this._methods[0]](id,str);\r\n\r\n\t\t\tif (invalid && invalid.details){\r\n\t\t\t\tstr+=this.styles[invalid+\"_cell\"];\r\n\t\t\t\tfor (var i=0; i < invalid.details.length; i++)\r\n\t\t\t\t\tif (invalid.details[i])\r\n        \t\t\t\tthis.obj[this._methods[1]](id,i,str);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetState:function(id){\r\n\t\treturn this.obj.getUserData(id,this.action_param);\r\n\t},\r\n\tis_invalid:function(id){\r\n\t\treturn this._invalid[id];\r\n\t},\r\n\tset_invalid:function(id,mode,details){ \r\n\t\tif (details) mode={value:mode, details:details, toString:function(){ return this.value.toString(); }};\r\n\t\tthis._invalid[id]=mode;\r\n\t},\r\n\t/**\r\n\t* \t@desc: check mandatory fields and varify values of cells, initiate update (if specified)\r\n\t*\t@param: rowId - id of row to set update-status for\r\n\t*\t@type: public\r\n\t*/\r\n\tcheckBeforeUpdate:function(rowId){ \r\n\t\treturn true;\r\n\t},\r\n\t/**\r\n\t* \t@desc: send row(s) values to server\r\n\t*\t@param: rowId - id of row which data to send. If not specified, then all \"updated\" rows will be send\r\n\t*\t@type: public\r\n\t*/\r\n\tsendData:function(rowId){\r\n\t\tif (this._waitMode && (this.obj.mytype==\"tree\" || this.obj._h2)) return;\r\n\t\tif (this.obj.editStop) this.obj.editStop();\r\n\t\r\n\t\t\r\n\t\tif(typeof rowId == \"undefined\" || this._tSend) return this.sendAllData();\r\n\t\tif (this._in_progress[rowId]) return false;\r\n\t\t\r\n\t\tthis.messages=[];\r\n\t\tif (!this.checkBeforeUpdate(rowId) && this.callEvent(\"onValidationError\",[rowId,this.messages])) return false;\r\n\t\tthis._beforeSendData(this._getRowData(rowId),rowId);\r\n    },\r\n    _beforeSendData:function(data,rowId){\r\n    \tif (!this.callEvent(\"onBeforeUpdate\",[rowId,this.getState(rowId),data])) return false;\t\r\n\t\tthis._sendData(data,rowId);\r\n    },\r\n    serialize:function(data, id){\r\n    \tif (typeof data == \"string\")\r\n    \t\treturn data;\r\n    \tif (typeof id != \"undefined\")\r\n    \t\treturn this.serialize_one(data,\"\");\r\n    \telse{\r\n    \t\tvar stack = [];\r\n    \t\tvar keys = [];\r\n    \t\tfor (var key in data)\r\n    \t\t\tif (data.hasOwnProperty(key)){\r\n    \t\t\t\tstack.push(this.serialize_one(data[key],key+this.post_delim));\r\n    \t\t\t\tkeys.push(key);\r\n\t\t\t\t}\r\n    \t\tstack.push(\"ids=\"+this.escape(keys.join(\",\")));\r\n    \t\tif (this.$gantt.security_key)\r\n\t\t\t\tstack.push(\"dhx_security=\"+this.$gantt.security_key);\r\n    \t\treturn stack.join(\"&\");\r\n    \t}\r\n    },\r\n    serialize_one:function(data, pref){\r\n    \tif (typeof data == \"string\")\r\n    \t\treturn data;\r\n    \tvar stack = [];\r\n    \tfor (var key in data)\r\n    \t\tif (data.hasOwnProperty(key)){\r\n    \t\t\tif ((key == \"id\" || key == this.action_param) && this._tMode == \"REST\") continue;\r\n    \t\t\tstack.push(this.escape((pref||\"\")+key)+\"=\"+this.escape(data[key]));\r\n    \t\t}\r\n\t\treturn stack.join(\"&\");\r\n    },\r\n\t_applyPayload:function(url){\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\t\tif (this._payload)\r\n\t\t\tfor (var key in this._payload)\r\n\t\t\t\turl = url + ajax.urlSeparator(url) + this.escape(key) + \"=\" + this.escape(this._payload[key]);\r\n\t\treturn url;\r\n\t},\r\n    _sendData:function(a1,rowId){\r\n    \tif (!a1) return; //nothing to send\r\n\t\tif (!this.callEvent(\"onBeforeDataSending\",rowId?[rowId,this.getState(rowId),a1]:[null, null, a1])) return false;\t\t\t\t\r\n\t\t\r\n    \tif (rowId)\r\n\t\t\tthis._in_progress[rowId]=(new Date()).valueOf();\r\n\r\n\t\tvar that = this;\r\n\t\tvar back = function(xml){\r\n\t\t\tvar ids = [];\r\n\t\t\tif (rowId)\r\n\t\t\t\tids.push(rowId);\r\n\t\t\telse if (a1)\r\n\t\t\t\tfor (var key in a1)\r\n\t\t\t\t\tids.push(key);\r\n\r\n\t\t\treturn that.afterUpdate(that,xml,ids);\r\n\t\t};\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\r\n\t\tvar a3 = this.serverProcessor+(this._user?(ajax.urlSeparator(this.serverProcessor)+[\"dhx_user=\"+this._user,\"dhx_version=\"+this.obj.getUserData(0,\"version\")].join(\"&\")):\"\");\r\n\t\tvar a4 = this._applyPayload(a3);\r\n\r\n\t\tif (this._tMode==\"GET\") {\r\n\t\t\tajax.query({\r\n\t\t\t\turl: a4 + ajax.urlSeparator(a4) + this.serialize(a1, rowId),\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t\tcallback: back,\r\n\t\t\t\theaders: this._headers\r\n\t\t\t});\r\n\t\t} else if (this._tMode == \"POST\") {\r\n\t\t\tajax.query({\r\n\t\t\t\turl: a4,\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\theaders: this._headers,\r\n\t\t\t\tdata: this.serialize(a1, rowId),\r\n\t\t\t\tcallback: back\r\n\t\t\t});\r\n\t\t} else if (this._tMode == \"JSON\"){\r\n\t\t\tvar action = a1[this.action_param];\r\n\t\t\tvar data = {};\r\n\t\t\tfor (var key in a1) data[key] = a1[key];\r\n\t\t\tdelete data[this.action_param];\r\n\t\t\tdelete data.id;\r\n\t\t\tdelete data.gr_id;\r\n\r\n\t\t\tajax.query({\r\n\t\t\t\turl:a4,\r\n\t\t\t\tmethod:\"POST\",\r\n\t\t\t\theaders:this._headers,\r\n\t\t\t\tcallback:back,\r\n\t\t\t\tdata:JSON.stringify({\r\n\t\t\t\t\tid: rowId,\r\n\t\t\t\t\taction: action,\r\n\t\t\t\t\tdata: data\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n        else if (this._tMode == \"REST\"){\r\n        \tvar state = this.getState(rowId);\r\n        \tvar url = a3.replace(/(\\&|\\?)editing\\=true/,\"\");\r\n        \tvar data = \"\";\r\n        \tvar method = \"post\";\r\n\r\n        \tif (state == \"inserted\"){\r\n        \t\tdata = this.serialize(a1, rowId);\r\n        \t} else if (state == \"deleted\"){\r\n        \t\tmethod = \"DELETE\";\r\n        \t\turl = url + (url.slice(-1) == \"/\" ? \"\" : \"/\") + rowId;\r\n        \t} else {\r\n        \t\tmethod = \"PUT\";\r\n        \t\tdata = this.serialize(a1, rowId);\r\n        \t\turl = url + (url.slice(-1) == \"/\" ? \"\" : \"/\") + rowId;\r\n        \t}\r\n\r\n\r\n        \turl = this._applyPayload(url);\r\n        \tajax.query({\r\n        \t\turl:url,\r\n        \t\tmethod:method,\r\n        \t\theaders:this._headers,\r\n        \t\tdata:data,\r\n        \t\tcallback:back\r\n        \t});\r\n        }\r\n\r\n\t\tthis._waitMode++;\r\n    },\r\n\tsendAllData:function(){\r\n\t\tif (!this.updatedRows.length) return;\t\t\t\r\n\r\n\t\tthis.messages=[]; var valid=true;\r\n\t\tfor (var i=0; i<this.updatedRows.length; i++)\r\n\t\t\tvalid&=this.checkBeforeUpdate(this.updatedRows[i]);\r\n\t\tif (!valid && !this.callEvent(\"onValidationError\",[\"\",this.messages])) return false;\r\n\t\r\n\t\tif (this._tSend) \r\n\t\t\tthis._sendData(this._getAllData());\r\n\t\telse\r\n\t\t\tfor (var i=0; i<this.updatedRows.length; i++)\r\n\t\t\t\tif (!this._in_progress[this.updatedRows[i]]){\r\n\t\t\t\t\tif (this.is_invalid(this.updatedRows[i])) continue;\r\n\t\t\t\t\tthis._beforeSendData(this._getRowData(this.updatedRows[i]),this.updatedRows[i]);\r\n\t\t\t\t\tif (this._waitMode && (this.obj.mytype==\"tree\" || this.obj._h2)) return; //block send all for tree\r\n\t\t\t\t}\r\n\t},\r\n\r\n\t_getAllData:function(rowId){\r\n\t\tvar out={};\r\n\t\tvar has_one = false;\r\n\t\tfor(var i=0;i<this.updatedRows.length;i++){\r\n\t\t\tvar id=this.updatedRows[i];\r\n\t\t\tif (this._in_progress[id] || this.is_invalid(id)) continue;\r\n\t\t\tvar row = this._getRowData(id);\r\n\t\t\tif (!this.callEvent(\"onBeforeUpdate\",[id,this.getState(id), row])) continue;\r\n\t\t\tout[id]=row;\r\n\t\t\thas_one = true;\r\n\t\t\tthis._in_progress[id]=(new Date()).valueOf();\r\n\t\t}\r\n\t\treturn has_one?out:null;\r\n\t},\r\n\t\r\n\t\r\n\t/**\r\n\t* \t@desc: specify column which value should be varified before sending to server\r\n\t*\t@param: ind - column index (0 based)\r\n\t*\t@param: verifFunction - function (object) which should verify cell value (if not specified, then value will be compared to empty string). Two arguments will be passed into it: value and column name\r\n\t*\t@type: public\r\n\t*/\r\n\tsetVerificator:function(ind,verifFunction){\r\n\t\tthis.mandatoryFields[ind] = verifFunction||(function(value){return (value!==\"\");});\r\n\t},\r\n\t/**\r\n\t* \t@desc: remove column from list of those which should be verified\r\n\t*\t@param: ind - column Index (0 based)\r\n\t*\t@type: public\r\n\t*/\r\n\tclearVerificator:function(ind){\r\n\t\tthis.mandatoryFields[ind] = false;\r\n\t},\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\tfindRow:function(pattern){\r\n\t\tvar i=0;\r\n    \tfor(i=0;i<this.updatedRows.length;i++)\r\n\t\t    if(pattern==this.updatedRows[i]) break;\r\n\t    return i;\r\n    },\r\n\r\n   \r\n\t\r\n\r\n\r\n    \r\n\r\n\r\n\r\n\r\n\r\n\t/**\r\n\t* \t@desc: define custom actions\r\n\t*\t@param: name - name of action, same as value of action attribute\r\n\t*\t@param: handler - custom function, which receives a XMl response content for action\r\n\t*\t@type: private\r\n\t*/\r\n\tdefineAction:function(name,handler){\r\n        if (!this._uActions) this._uActions=[];\r\n            this._uActions[name]=handler;\r\n\t},\r\n\r\n\r\n\r\n\r\n\t/**\r\n*     @desc: used in combination with setOnBeforeUpdateHandler to create custom client-server transport system\r\n*     @param: sid - id of item before update\r\n*     @param: tid - id of item after up0ate\r\n*     @param: action - action name\r\n*     @type: public\r\n*     @topic: 0\r\n*/\r\n\tafterUpdateCallback:function(sid, tid, action, btag) {\r\n\t\tvar marker = sid;\r\n\t\tvar correct=(action!=\"error\" && action!=\"invalid\");\r\n\t\tif (!correct) this.set_invalid(sid,action);\r\n\t\tif ((this._uActions)&&(this._uActions[action])&&(!this._uActions[action](btag)))\r\n\t\t\treturn (delete this._in_progress[marker]);\r\n\r\n\t\tif (this._in_progress[marker]!=\"wait\")\r\n\t\t\tthis.setUpdated(sid, false);\r\n\r\n\t\tvar soid = sid;\r\n\r\n\t\tswitch (action) {\r\n\t\t\tcase \"inserted\":\r\n\t\t\tcase \"insert\":\r\n\t\t\t\tif (tid != sid) {\r\n\t\t\t\t\tthis.setUpdated(sid,false);\r\n\t\t\t\t\tthis.obj[this._methods[2]](sid, tid);\r\n\t\t\t\t\tsid = tid;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"delete\":\r\n\t\t\tcase \"deleted\":\r\n\t\t\t\tthis.obj.setUserData(sid, this.action_param, \"true_deleted\");\r\n\t\t\t\tthis.obj[this._methods[3]](sid);\r\n\t\t\t\tdelete this._in_progress[marker];\r\n\t\t\t\treturn this.callEvent(\"onAfterUpdate\", [sid, action, tid, btag]);\r\n\t\t}\r\n\r\n\t\tif (this._in_progress[marker]!=\"wait\"){\r\n\t\t\tif (correct) this.obj.setUserData(sid, this.action_param,'');\r\n\t\t\tdelete this._in_progress[marker];\r\n\t\t} else {\r\n\t\t\tdelete this._in_progress[marker];\r\n\t\t\tthis.setUpdated(tid,true,this.obj.getUserData(sid,this.action_param));\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onAfterUpdate\", [soid, action, tid, btag]);\r\n\t},\r\n\r\n\t/**\r\n\t* \t@desc: response from server\r\n\t*\t@param: xml - XMLLoader object with response XML\r\n\t*\t@type: private\r\n\t*/\r\n\tafterUpdate:function(that,xml,id){\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\t\t//try to use json first\r\n\t\tif (window.JSON){\r\n\t\t\tvar tag;\r\n\r\n\t\t\ttry{\r\n\t\t\t\ttag = JSON.parse(xml.xmlDoc.responseText);\r\n\t\t\t} catch(e){\r\n\r\n\t\t\t\t// empty response also can be processed by json handler\r\n\t\t\t\tif(!xml.xmlDoc.responseText.length){\r\n\t\t\t\t\ttag = {};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(tag){\r\n\t\t\t\tvar action = tag.action || this.getState(id) || \"updated\";\r\n\t\t\t\tvar sid = tag.sid || id[0];\r\n\t\t\t\tvar tid = tag.tid || id[0];\r\n\t\t\t\tthat.afterUpdateCallback(sid, tid, action, tag);\r\n\t\t\t\tthat.finalizeUpdate();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\t//xml response\r\n\t\tvar top = ajax.xmltop(\"data\", xml.xmlDoc); //fix incorrect content type in IE\r\n\t\tif (!top) return this.cleanUpdate(id);\r\n\t\tvar atag=ajax.xpath(\"//data/action\", top);\r\n\t\tif (!atag.length) return this.cleanUpdate(id);\r\n\r\n\t\tfor (var i=0; i<atag.length; i++){\r\n        \tvar btag=atag[i];\r\n\t\t\tvar action = btag.getAttribute(\"type\");\r\n\t\t\tvar sid = btag.getAttribute(\"sid\");\r\n\t\t\tvar tid = btag.getAttribute(\"tid\");\r\n\t\t\t\r\n\t\t\tthat.afterUpdateCallback(sid,tid,action,btag);\r\n\t\t}\r\n\t\tthat.finalizeUpdate();\r\n\t},\r\n\tcleanUpdate:function(id){\r\n\t\tif (id)\r\n\t\t\tfor (var i = 0; i < id.length; i++)\r\n\t\t\t\tdelete this._in_progress[id[i]];\r\n\t},\r\n\tfinalizeUpdate:function(){\r\n\t\tif (this._waitMode) this._waitMode--;\r\n\t\t\r\n\t\tif ((this.obj.mytype==\"tree\" || this.obj._h2) && this.updatedRows.length) \r\n\t\t\tthis.sendData();\r\n\t\tthis.callEvent(\"onAfterUpdateFinish\",[]);\r\n\t\tif (!this.updatedRows.length)\r\n\t\t\tthis.callEvent(\"onFullSync\",[]);\r\n\t},\r\n\r\n\r\n\r\n\r\n\t\r\n\t/**\r\n\t* \t@desc: initializes data-processor\r\n\t*\t@param: anObj - dhtmlxGrid object to attach this data-processor to\r\n\t*\t@type: public\r\n\t*/\r\n\tinit:function(anObj){\r\n\t\tthis.obj = anObj;\r\n\t\tif (this.obj._dp_init) \r\n\t\t\tthis.obj._dp_init(this);\r\n\t},\r\n\t\r\n\t\r\n\tsetOnAfterUpdate:function(ev){\r\n\t\tthis.attachEvent(\"onAfterUpdate\",ev);\r\n\t},\r\n\tenableDebug:function(mode){\r\n\t},\r\n\tsetOnBeforeUpdateHandler:function(func){  \r\n\t\tthis.attachEvent(\"onBeforeDataSending\",func);\r\n\t},\r\n\r\n\r\n\r\n\t/* starts autoupdate mode\r\n\t\t@param interval\r\n\t\t\ttime interval for sending update requests\r\n\t*/\r\n\tsetAutoUpdate: function(interval, user) {\r\n\t\tinterval = interval || 2000;\r\n\t\t\r\n\t\tthis._user = user || (new Date()).valueOf();\r\n\t\tthis._need_update = false;\r\n\t\t//this._loader = null;\r\n\t\tthis._update_busy = false;\r\n\t\t\r\n\t\tthis.attachEvent(\"onAfterUpdate\",function(sid,action,tid,xml_node){\r\n\t\t\tthis.afterAutoUpdate(sid, action, tid, xml_node);\r\n\t\t});\r\n\t\tthis.attachEvent(\"onFullSync\",function(){\r\n\t\t\tthis.fullSync();\r\n\t\t});\r\n\t\t\r\n\t\tvar self = this;\r\n\t\twindow.setInterval(function(){\r\n\t\t\tself.loadUpdate();\r\n\t\t}, interval);\r\n\t},\r\n\r\n\r\n\t/* process updating request answer\r\n\t\tif status == collision version is depricated\r\n\t\tset flag for autoupdating immidiatly\r\n\t*/\r\n\tafterAutoUpdate: function(sid, action, tid, xml_node) {\r\n\t\tif (action == 'collision') {\r\n\t\t\tthis._need_update = true;\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t/* callback function for onFillSync event\r\n\t\tcall update function if it's need\r\n\t*/\r\n\tfullSync: function() {\r\n\t\tif (this._need_update) {\r\n\t\t\tthis._need_update = false;\r\n\t\t\tthis.loadUpdate();\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\r\n\t/* sends query to the server and call callback function\r\n\t*/\r\n\tgetUpdates: function(url,callback){\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\t\tif (this._update_busy) \r\n\t\t\treturn false;\r\n\t\telse\r\n\t\t\tthis._update_busy = true;\r\n\t\t\r\n\t\t//this._loader = this._loader || new dtmlXMLLoaderObject(true);\r\n\t\t\r\n\t\t//this._loader.async=true;\r\n\t\t//this._loader.waitCall=callback;\r\n\t\t//this._loader.loadXML(url);\r\n\t\tajax.get(url, callback);\r\n\r\n\t},\r\n\r\n\r\n\t/* returns xml node value\r\n\t\t@param node\r\n\t\t\txml node\r\n\t*/\r\n\t_v: function(node) {\r\n\t\tif (node.firstChild) return node.firstChild.nodeValue;\r\n\t\treturn \"\";\r\n\t},\r\n\r\n\r\n\t/* returns values array of xml nodes array\r\n\t\t@param arr\r\n\t\t\tarray of xml nodes\r\n\t*/\r\n\t_a: function(arr) {\r\n\t\tvar res = [];\r\n\t\tfor (var i=0; i < arr.length; i++) {\r\n\t\t\tres[i]=this._v(arr[i]);\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\r\n\r\n\t/* loads updates and processes them\r\n\t*/\r\n\tloadUpdate: function(){\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\t\tvar self = this;\r\n\t\tvar version = this.obj.getUserData(0,\"version\");\r\n\t\tvar url = this.serverProcessor+ajax.urlSeparator(this.serverProcessor)+[\"dhx_user=\"+this._user,\"dhx_version=\"+version].join(\"&\");\r\n\t\turl = url.replace(\"editing=true&\",\"\");\r\n\t\tthis.getUpdates(url, function(xml){\r\n\t\t\tvar vers = ajax.xpath(\"//userdata\", xml);\r\n\t\t\tself.obj.setUserData(0,\"version\",self._v(vers[0]));\r\n\t\t\t\r\n\t\t\tvar upds = ajax.xpath(\"//update\", xml);\r\n\t\t\tif (upds.length){\r\n\t\t\t\tself._silent_mode = true;\r\n\t\t\t\t\r\n\t\t\t\tfor (var i=0; i<upds.length; i++) {\r\n\t\t\t\t\tvar status = upds[i].getAttribute('status');\r\n\t\t\t\t\tvar id = upds[i].getAttribute('id');\r\n\t\t\t\t\tvar parent = upds[i].getAttribute('parent');\r\n\t\t\t\t\tswitch (status) {\r\n\t\t\t\t\t\tcase 'inserted':\r\n\t\t\t\t\t\t\tself.callEvent(\"insertCallback\",[upds[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'updated':\r\n\t\t\t\t\t\t\tself.callEvent(\"updateCallback\",[upds[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'deleted':\r\n\t\t\t\t\t\t\tself.callEvent(\"deleteCallback\",[upds[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tself._silent_mode = false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tself._update_busy = false;\r\n\t\t\tself = null;\r\n\t\t});\r\n\t},\r\n\r\n\tdestructor: function(){\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\r\n\t\tthis.updatedRows = [];\r\n\t\tthis._in_progress={};//?\r\n\t\tthis._invalid={};\r\n\t\tthis._headers = null;\r\n\t\tthis._payload = null;\r\n\t\tthis.obj = null;\r\n\t}\r\n\r\n\r\n\r\n};\r\n\r\nmodule.exports = dataProcessor;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/dataprocessor/dataprocessor.js\n// module id = 71\n// module chunks = 0","module.exports = function(gantt){\r\n\tvar modules = [\r\n\t\trequire(\"./autoscroll\"),\r\n\t\trequire(\"./batch_update\"),\r\n\t\trequire(\"./wbs\"),\r\n\t\trequire(\"./jquery_hooks\"),\r\n\t\trequire(\"./dhtmlx_hooks\"),\r\n\t\trequire(\"./resources\")\r\n\t];\r\n\r\n\tfor(var i = 0; i < modules.length; i++){\r\n\t\tif(modules[i])\r\n\t\t\tmodules[i](gantt);\r\n\t}\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/plugins/index.js\n// module id = 72\n// module chunks = 0","var domHelpers = require(\"../../utils/dom_helpers\");\r\n\r\nmodule.exports = function(gantt){\r\n\r\n\tvar scrollRange = 50,\r\n\t\tscrollStep = 30,\r\n\t\tscrollDelay = 10,\r\n\t\tscrollSpeed = 50;\r\n\r\n\tvar interval = null,\r\n\t\tisMove = false,\r\n\t\tdelayTimeout = null,\r\n\t\tbox = {},\r\n\t\tstartPos = {\r\n\t\t\tstarted: false\r\n\t\t},\r\n\t\teventPos = {};\r\n\r\n\tfunction getAutoscrollContainer(){\r\n\t\treturn gantt.$task || gantt.$grid || gantt.$root;\r\n\t}\r\n\r\n\tfunction isScrollState() {\r\n\t\tvar dragMarker = !!document.querySelector(\".gantt_drag_marker\");\r\n\t\tvar isResize = !!document.querySelector(\".gantt_drag_marker.gantt_grid_resize_area\");\r\n\t\tvar isLink = !!document.querySelector(\".gantt_link_direction\");\r\n\t\tisMove = dragMarker && !isResize && !isLink;\r\n\t\treturn !((!gantt.getState().drag_mode && !dragMarker) || isResize);\r\n\t}\r\n\r\n\tfunction defineDelayTimeout(state) {\r\n\t\tif (delayTimeout) {\r\n\t\t\tclearTimeout(delayTimeout);\r\n\t\t\tdelayTimeout = null;\r\n\t\t}\r\n\t\tif (state) {\r\n\t\t\tvar speed = gantt.config.autoscroll_speed;\r\n\t\t\tif (speed && speed < 10) // limit speed value to 10 \r\n\t\t\t\tspeed = 10;\r\n\r\n\t\t\tdelayTimeout = setTimeout(function() {\r\n\t\t\t\tinterval = setInterval(tick, speed || scrollSpeed);\r\n\t\t\t\tbox = domHelpers.getNodePosition(getAutoscrollContainer());\r\n\t\t\t}, gantt.config.autoscroll_delay || scrollDelay);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction defineScrollInterval(state) {\r\n\t\tif (state) {\r\n\t\t\tdefineDelayTimeout(true);\r\n\t\t\tif (!startPos.started) {\r\n\t\t\t\tstartPos.x = eventPos.x;\r\n\t\t\t\tstartPos.y = eventPos.y;\r\n\t\t\t\tstartPos.started = true;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (interval) {\r\n\t\t\t\tclearInterval(interval);\r\n\t\t\t\tinterval = null;\r\n\t\t\t}\r\n\t\t\tdefineDelayTimeout(false);\r\n\t\t\tstartPos.started = false;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction autoscrollInterval(event) {\r\n\r\n\t\tvar isScroll = isScrollState();\r\n\r\n\t\tif ((interval || delayTimeout) && !isScroll) { \r\n\t\t\tdefineScrollInterval(false);\r\n\t\t}\r\n\r\n\t\tif (!gantt.config.autoscroll || !isScroll) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\teventPos = {\r\n\t\t\tx: event.clientX,\r\n\t\t\ty: event.clientY\r\n\t\t};\r\n\r\n\t\tif (!interval && isScroll) {\r\n\t\t\tdefineScrollInterval(true);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction tick() {\r\n\r\n\t\tif (!isScrollState()) {\r\n\t\t\tdefineScrollInterval(false);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar box = domHelpers.getNodePosition(getAutoscrollContainer());\r\n\t\tvar posX = eventPos.x - box.x; \r\n\t\tvar posY = eventPos.y - box.y;\r\n\r\n\t\tvar scrollLeft = isMove ? 0 : need_scroll(posX, box.width, startPos.x - box.x);\r\n\t\tvar scrollTop = need_scroll(posY, box.height, startPos.y - box.y);\r\n\r\n\t\tvar scrollState = gantt.getScrollState();\r\n\r\n\t\tvar currentScrollTop = scrollState.y,\r\n\t\t\tscrollOuterHeight = scrollState.inner_height,\r\n\t\t\tscrollInnerHeight = scrollState.height,\r\n\t\t\tcurrentScrollLeft = scrollState.x,\r\n\t\t\tscrollOuterWidth = scrollState.inner_width,\r\n\t\t\tscrollInnerWidth = scrollState.width;\r\n\r\n\t\t// do scrolling only if we have scrollable area to do so\r\n\t\tif (scrollTop && !scrollOuterHeight) {\r\n\t\t\tscrollTop = 0;\r\n\t\t} else if (scrollTop < 0 && !currentScrollTop) {\r\n\t\t\tscrollTop = 0;\r\n\t\t} else if (scrollTop > 0 && currentScrollTop + scrollOuterHeight >= scrollInnerHeight + 2) {\r\n\t\t\tscrollTop = 0;\r\n\t\t}\r\n\r\n\t\tif (scrollLeft && !scrollOuterWidth) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t} else if (scrollLeft < 0 && !currentScrollLeft) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t} else if (scrollLeft > 0 && currentScrollLeft + scrollOuterWidth >= scrollInnerWidth) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t}\r\n\r\n\t\tvar step = gantt.config.autoscroll_step;\r\n\r\n\t\tif (step && step < 2) // limit step value to 2\r\n\t\t\tstep = 2;\r\n\r\n\t\tscrollLeft = scrollLeft * (step || scrollStep);\r\n\t\tscrollTop = scrollTop * (step || scrollStep);\r\n\r\n\t\tif (scrollLeft || scrollTop) {\r\n\t\t\tscroll(scrollLeft, scrollTop);\r\n\t\t} \r\n\r\n\t}\r\n\r\n\tfunction need_scroll(pos, boxSize, startCoord) {\r\n\t\tif ((pos - scrollRange < 0) && (pos < startCoord))\r\n\t\t\treturn -1;\r\n\t\telse if ((pos > boxSize - scrollRange) && (pos > startCoord))\r\n\t\t\treturn 1;\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tfunction scroll(left, top) {\r\n\t\tvar scrollState = gantt.getScrollState();\r\n\r\n\t\tvar scrollLeft = null,\r\n\t\t\tscrollTop = null;\r\n\r\n\t\tif (left) {\r\n\t\t\tscrollLeft = scrollState.x + left;\r\n\t\t\tscrollLeft = Math.min(scrollState.width, scrollLeft);\r\n\t\t\tscrollLeft = Math.max(0, scrollLeft);\r\n\t\t}\r\n\r\n\t\tif (top) {\r\n\t\t\tscrollTop = scrollState.y + top;\r\n\t\t\tscrollTop = Math.min(scrollState.height, scrollTop);\r\n\t\t\tscrollTop = Math.max(0, scrollTop);\r\n\t\t}\r\n\r\n\t\tgantt.scrollTo(scrollLeft, scrollTop);\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onGanttReady\", function() {\r\n\t\tgantt.eventRemove(document.body, \"mousemove\", autoscrollInterval);\r\n\t\tgantt.event(document.body, \"mousemove\", autoscrollInterval);\r\n\t});\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/plugins/autoscroll.js\n// module id = 73\n// module chunks = 0","function createMethod(gantt){\r\n\tvar methods = {};\r\n\tvar isActive = false;\r\n\tfunction disableMethod(methodName, dummyMethod){\r\n\t\tdummyMethod = typeof dummyMethod == \"function\" ? dummyMethod : function(){};\r\n\r\n\t\tif(!methods[methodName]){\r\n\t\t\tmethods[methodName] = this[methodName];\r\n\t\t\tthis[methodName] = dummyMethod;\r\n\t\t}\r\n\t}\r\n\tfunction restoreMethod(methodName){\r\n\t\tif(methods[methodName]){\r\n\t\t\tthis[methodName] = methods[methodName];\r\n\t\t\tmethods[methodName] = null;\r\n\t\t}\r\n\t}\r\n\tfunction disableMethods(methodsHash){\r\n\t\tfor(var i in methodsHash){\r\n\t\t\tdisableMethod.call(this, i, methodsHash[i]);\r\n\t\t}\r\n\t}\r\n\t function restoreMethods(){\r\n\t\tfor(var i in methods){\r\n\t\t\trestoreMethod.call(this, i);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction batchUpdatePayload(callback){\r\n\t\ttry{\r\n\t\t\tcallback();\r\n\t\t}catch(e){\r\n\t\t\twindow.console.error(e);\r\n\t\t}\r\n\t}\r\n\r\n\tvar state = gantt.$services.getService(\"state\");\r\n\tstate.registerProvider(\"batchUpdate\", function(){\r\n\t\treturn {\r\n\t\t\tbatch_update: isActive\r\n\t\t};\r\n\t}, true);\r\n\r\n\treturn function batchUpdate(callback, noRedraw) {\r\n\t\tif(isActive){\r\n\t\t\t// batch mode is already active\r\n\t\t\tbatchUpdatePayload(callback);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar call_dp = (this._dp && this._dp.updateMode != \"off\");\r\n\t\tvar dp_mode;\r\n\t\tif (call_dp){\r\n\t\t\tdp_mode = this._dp.updateMode;\r\n\t\t\tthis._dp.setUpdateMode(\"off\");\r\n\t\t}\r\n\r\n\t\t// temporary disable some methods while updating multiple tasks\r\n\t\tvar resetProjects = {};\r\n\t\tvar methods = {\r\n\t\t\t\"render\":true,\r\n\t\t\t\"refreshData\":true,\r\n\t\t\t\"refreshTask\":true,\r\n\t\t\t\"refreshLink\":true,\r\n\t\t\t\"resetProjectDates\":function(task){\r\n\t\t\t\tresetProjects[task.id] = task;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tdisableMethods.call(this, methods);\r\n\r\n\t\tisActive = true;\r\n\t\tthis.callEvent(\"onBeforeBatchUpdate\", []);\r\n\r\n\t\tbatchUpdatePayload(callback);\r\n\r\n\t\tthis.callEvent(\"onAfterBatchUpdate\", []);\r\n\r\n\t\trestoreMethods.call(this);\r\n\r\n\t\t// do required updates after changes applied\r\n\t\tfor(var i in resetProjects){\r\n\t\t\tthis.resetProjectDates(resetProjects[i]);\r\n\t\t}\r\n\r\n\t\tisActive = false;\r\n\r\n\t\tif(!noRedraw){\r\n\t\t\tthis.render();\r\n\t\t}\r\n\r\n\t\tif (call_dp) {\r\n\t\t\tthis._dp.setUpdateMode(dp_mode);\r\n\t\t\tthis._dp.setGanttMode(\"tasks\");\r\n\t\t\tthis._dp.sendData();\r\n\t\t\tthis._dp.setGanttMode(\"links\");\r\n\t\t\tthis._dp.sendData();\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n}\r\n\r\nmodule.exports = function(gantt){\r\n\tgantt.batchUpdate = createMethod(gantt);\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/plugins/batch_update.js\n// module id = 74\n// module chunks = 0","var createWbs = (function(gantt){\r\n\treturn {\r\n\t_needRecalc: true,\r\n\treset: function(){\r\n\t\tthis._needRecalc = true;\r\n\t},\r\n\t_isRecalcNeeded: function(){\r\n\t\treturn (!this._isGroupSort() && this._needRecalc);\r\n\t},\r\n\t_isGroupSort: function() {\r\n\t\treturn !!(gantt._groups && gantt._groups.is_active());\r\n\t},\r\n\t_getWBSCode: function(task) {\r\n\t\tif(!task) return \"\";\r\n\r\n\t\tif(this._isRecalcNeeded()){\r\n\t\t\tthis._calcWBS();\r\n\t\t}\r\n\r\n\t\tif(task.$virtual) return \"\";\r\n\t\tif(this._isGroupSort()) return task.$wbs || \"\";\r\n\r\n\t\tif(!task.$wbs) {\r\n\t\t\tthis.reset();\r\n\t\t\tthis._calcWBS();\r\n\t\t}\r\n\t\treturn task.$wbs;\r\n\t},\r\n\t_setWBSCode: function(task, value) {\r\n\t\ttask.$wbs = value;\r\n\t},\r\n\tgetWBSCode: function(task) {\r\n\t\treturn this._getWBSCode(task);\r\n\t},\r\n\t_calcWBS: function() {\r\n\t\tif(!this._isRecalcNeeded()) return;\r\n\r\n\t\tvar _isFirst = true;\r\n\t\tgantt.eachTask(function(ch) {\r\n\t\t\tif(_isFirst) {\r\n\t\t\t\t_isFirst = false;\r\n\t\t\t\tthis._setWBSCode(ch, \"1\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar _prevSibling = gantt.getPrevSibling(ch.id);\r\n\t\t\tif (_prevSibling !== null) {\r\n\t\t\t\tvar _wbs = gantt.getTask(_prevSibling).$wbs;\r\n\t\t\t\tif(_wbs) {\r\n\t\t\t\t\t_wbs = _wbs.split(\".\");\r\n\t\t\t\t\t_wbs[_wbs.length-1]++;\r\n\t\t\t\t\tthis._setWBSCode(ch, _wbs.join(\".\"));\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar _parent = gantt.getParent(ch.id);\r\n\t\t\t\tthis._setWBSCode(ch, gantt.getTask(_parent).$wbs + \".1\");\r\n\t\t\t}\r\n\t\t}, gantt.config.root_id, this);\r\n\r\n\t\tthis._needRecalc = false;\r\n\t}\r\n};\r\n});\r\n\r\nmodule.exports = function(gantt){\r\n\tvar wbs = createWbs(gantt);\r\n\tgantt.getWBSCode = function getWBSCode(task) {\r\n\t\treturn wbs.getWBSCode(task);\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onAfterTaskMove\", function() {\r\n\t\twbs.reset();\r\n\t\treturn true;\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onBeforeParse\", function() {\r\n\t\twbs.reset();\r\n\t\treturn true;\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onAfterTaskDelete\", function() {\r\n\t\twbs.reset();\r\n\t\treturn true;\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onAfterTaskAdd\", function() {\r\n\t\twbs.reset();\r\n\t\treturn true;\r\n\t});\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/plugins/wbs.js\n// module id = 75\n// module chunks = 0","if (window.jQuery){\r\n\r\n\t(function( $ ){\r\n\r\n\t\tvar methods = [];\r\n\t\t$.fn.dhx_gantt = function(config){\r\n\t\t\tconfig = config || {};\r\n\t\t\tif (typeof(config) === 'string') {\r\n\t\t\t\tif (methods[config] ) {\r\n\t\t\t\t\treturn methods[config].apply(this, []);\r\n\t\t\t\t}else {\r\n\t\t\t\t\t$.error('Method ' +  config + ' does not exist on jQuery.dhx_gantt');\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar views = [];\r\n\t\t\t\tthis.each(function() {\r\n\t\t\t\t\tif (this && this.getAttribute){\r\n\t\t\t\t\t\tif (!this.gantt && !(window.gantt.$root == this)){\r\n\r\n\t\t\t\t\t\t\tvar newgantt = (window.gantt.$container && window.Gantt) ? window.Gantt.getGanttInstance():window.gantt;\r\n\t\t\t\t\t\t\tfor (var key in config)\r\n\t\t\t\t\t\t\t\tif (key!=\"data\")\r\n\t\t\t\t\t\t\t\t\tnewgantt.config[key] = config[key];\r\n\r\n\t\t\t\t\t\t\tnewgantt.init(this);\r\n\t\t\t\t\t\t\tif (config.data)\r\n\t\t\t\t\t\t\t\tnewgantt.parse(config.data);\r\n\r\n\t\t\t\t\t\t\tviews.push(newgantt);\r\n\t\t\t\t\t\t} else\r\n\t\t\t\t\t\t\tviews.push(typeof this.gantt == \"object\" ? this.gantt : window.gantt);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t\tif (views.length === 1) return views[0];\r\n\t\t\t\treturn views;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t})(jQuery);\r\n\r\n}\r\n\r\n\r\nmodule.exports = null;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/plugins/jquery_hooks.js\n// module id = 76\n// module chunks = 0","if (window.dhtmlx){\r\n\r\n\tif (!dhtmlx.attaches)\r\n\t\tdhtmlx.attaches = {};\r\n\r\n\tdhtmlx.attaches.attachGantt=function(start, end, gantt){\r\n\t\tvar obj = document.createElement(\"DIV\");\r\n\r\n\t\tgantt = gantt || window.gantt;\r\n\r\n\t\tobj.id = \"gantt_\"+ gantt.uid();\r\n\t\tobj.style.width = \"100%\";\r\n\t\tobj.style.height = \"100%\";\r\n\t\tobj.cmp = \"grid\";\r\n\r\n\t\tdocument.body.appendChild(obj);\r\n\t\tthis.attachObject(obj.id);\r\n\t\tthis.dataType = \"gantt\";\r\n\t\tthis.dataObj = gantt;\r\n\r\n\t\tvar that = this.vs[this.av];\r\n\t\tthat.grid = gantt;\r\n\r\n\t\tgantt.init(obj.id, start, end);\r\n\t\tobj.firstChild.style.border = \"none\";\r\n\r\n\t\tthat.gridId = obj.id;\r\n\t\tthat.gridObj = obj;\r\n\r\n\t\tvar method_name=\"_viewRestore\";\r\n\t\treturn this.vs[this[method_name]()].grid;\r\n\t};\r\n\r\n}\r\nif (typeof(window.dhtmlXCellObject) != \"undefined\") {\r\n\r\n\tdhtmlXCellObject.prototype.attachGantt=function(start, end, gantt){\r\n\t\tgantt = gantt || window.gantt;\r\n\r\n\t\tvar obj = document.createElement(\"DIV\");\r\n\t\tobj.id = \"gantt_\"+gantt.uid();\r\n\t\tobj.style.width = \"100%\";\r\n\t\tobj.style.height = \"100%\";\r\n\t\tobj.cmp = \"grid\";\r\n\r\n\t\tdocument.body.appendChild(obj);\r\n\t\tthis.attachObject(obj.id);\r\n\r\n\t\tthis.dataType = \"gantt\";\r\n\t\tthis.dataObj = gantt;\r\n\r\n\t\tgantt.init(obj.id, start, end);\r\n\t\tobj.firstChild.style.border = \"none\";\r\n\t\tvar method_name=\"_viewRestore\";\r\n\t\tobj = null;\r\n\t\tthis.callEvent(\"_onContentAttach\",[]);\r\n\r\n\t\treturn this.dataObj;\r\n\t};\r\n}\r\n\r\nmodule.exports = null;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/plugins/dhtmlx_hooks.js\n// module id = 77\n// module chunks = 0","function createResourceMethods(gantt){\r\n\r\n\tvar resourceTaskCache = {},\r\n\t\tresourceLoadCache = {};\r\n\r\n\tgantt.$data.tasksStore.attachEvent(\"onStoreUpdated\", function(){\r\n\t\tresourceTaskCache = {};\r\n\t\tresourceLoadCache = {};\r\n\t});\r\n\r\n\tfunction getTaskBy(propertyName, propertyValue){\r\n\t\tif(typeof propertyName == \"function\"){\r\n\t\t\treturn filterResourceTasks(propertyName);\r\n\t\t}else{\r\n\t\t\tif(propertyValue instanceof Array){\r\n\t\t\t\treturn getResourceTasks(propertyName, propertyValue);\r\n\t\t\t}else{\r\n\t\t\t\treturn getResourceTasks(propertyName, [propertyValue]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction filterResourceTasks(filter){\r\n\t\tvar res = [];\r\n\t\tgantt.eachTask(function (task) {\r\n\t\t\tif (filter(task)) {\r\n\t\t\t\tres.push(task);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn res;\r\n\t}\r\n\r\n\tfunction getResourceTasks(property, resourceIds) {\r\n\t\tvar res;\r\n\r\n\t\tvar cacheKey = resourceIds.join(\"_\") + \"_\" + property;\r\n\r\n\t\tvar resourceHash = {};\r\n\t\tfor(var i = 0; i < resourceIds.length; i++){\r\n\t\t\tresourceHash[resourceIds[i]] = true;\r\n\t\t}\r\n\r\n\t\tif(!resourceTaskCache[cacheKey]){\r\n\t\t\tres = resourceTaskCache[cacheKey] = [];\r\n\t\t\tgantt.eachTask(function (task) {\r\n\t\t\t\tif (resourceHash[task[property]] && task.type != gantt.config.types.project) {\r\n\t\t\t\t\tres.push(task);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tres = resourceTaskCache[cacheKey];\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\tfunction getResourceLoad(resourceId, resourceProperty, scale, timeline){\r\n\t\tvar cacheKey = [resourceId, resourceProperty, scale.unit, scale.step].join(\"_\");\r\n\t\tvar res;\r\n\t\tif(!resourceTaskCache[cacheKey]){\r\n\t\t\tres = resourceTaskCache[cacheKey] = calculateResourceLoad(resourceId, resourceProperty, scale, timeline);\r\n\r\n\t\t}else{\r\n\t\t\tres = resourceTaskCache[cacheKey];\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\tfunction calculateResourceLoad(resourceProperty, resourceId, scale, timeline) {\r\n\r\n\t\tvar tasks = getTaskBy(resourceProperty, resourceId);\r\n\t\tvar step = scale.unit;\r\n\t\tvar timegrid = {};\r\n\r\n\t\tfor (var i = 0; i < tasks.length; i++) {\r\n\t\t\tvar task = tasks[i];\r\n\r\n\t\t\tvar currDate = gantt.date[step + \"_start\"](new Date(task.start_date));\r\n\r\n\t\t\twhile (currDate < task.end_date) {\r\n\r\n\t\t\t\tvar date = currDate;\r\n\t\t\t\tcurrDate = gantt.date.add(currDate, 1, step);\r\n\r\n\t\t\t\tif (!gantt.isWorkTime({date: date, task: task, unit: step})) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar timestamp = date.valueOf();\r\n\t\t\t\tif (!timegrid[timestamp]){\r\n\t\t\t\t\ttimegrid[timestamp] = [];\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttimegrid[timestamp].push(task);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar timetable = [];\r\n\t\tvar start, end, tasks;\r\n\t\tvar config = timeline.$getConfig();\r\n\r\n\t\tfor(var i = 0; i < scale.trace_x.length; i++){\r\n\t\t\tstart = new Date(scale.trace_x[i]);\r\n\t\t\tend = gantt.date.add(start, 1, step);\r\n\t\t\ttasks = timegrid[start.valueOf()] || [];\r\n\t\t\tif(tasks.length || config.resource_render_empty_cells){\r\n\t\t\t\ttimetable.push({\r\n\t\t\t\t\tstart_date: start,\r\n\t\t\t\t\tend_date: end,\r\n\t\t\t\t\ttasks: tasks\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn timetable;\r\n\t}\r\n\r\n\tfunction renderResourceLine(resource, timeline) {\r\n\t\tvar config = timeline.$getConfig(),\r\n\t\t\ttemplates = timeline.$getTemplates();\r\n\t\tvar timetable = getResourceLoad(config.resource_property, resource.id, timeline.getScale(), timeline);\r\n\r\n\t\tvar cells = [];\r\n\t\tfor (var i = 0; i < timetable.length; i++) {\r\n\r\n\t\t\tvar day = timetable[i];\r\n\r\n\t\t\tvar css = templates.resource_cell_class(day.start_date, day.end_date, resource, day.tasks);\r\n\t\t\tvar content = templates.resource_cell_value(day.start_date, day.end_date, resource, day.tasks);\r\n\r\n\t\t\tif(css || content){\r\n\t\t\t\tvar sizes = timeline.getItemPosition(resource, day.start_date, day.end_date);\r\n\t\t\t\tvar el = document.createElement('div');\r\n\t\t\t\tel.className = [\"gantt_resource_marker\", css].join(\" \");\r\n\r\n\t\t\t\tel.style.cssText = [\r\n\t\t\t\t\t'left:' + sizes.left + 'px',\r\n\t\t\t\t\t'width:' + sizes.width + 'px',\r\n\t\t\t\t\t'height:' + (config.row_height - 1) + 'px',\r\n\t\t\t\t\t'line-height:' + (config.row_height - 1) + 'px',\r\n\t\t\t\t\t'top:' + sizes.top + 'px'\r\n\t\t\t\t].join(\";\");\r\n\r\n\t\t\t\tif(content)\r\n\t\t\t\t\tel.innerHTML = content;\r\n\r\n\t\t\t\tcells.push(el);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar row = null;\r\n\t\tif(cells.length){\r\n\t\t\trow = document.createElement(\"div\");\r\n\t\t\tfor(var i = 0; i < cells.length; i++){\r\n\t\t\t\trow.appendChild(cells[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn row;\r\n\t}\r\n\treturn {\r\n\t\trenderLine: renderResourceLine,\r\n\t\tfilterTasks: getTaskBy\r\n\t};\r\n}\r\n\r\nmodule.exports = function(gantt){\r\n\tvar methods = createResourceMethods(gantt);\r\n\r\n\tgantt.getTaskBy = methods.filterTasks;\r\n\tgantt.$ui.layers.resourceRow = methods.renderLine;\r\n\tgantt.config.resource_property = \"owner_id\";\r\n\tgantt.config.resource_store = \"resource\";\r\n\tgantt.config.resource_render_empty_cells = false;\r\n\r\n\tgantt.templates.resource_cell_class = function(start, end, resource, tasks){\r\n\t\tvar css = \"\";\r\n\t\tif (tasks.length <= 1) {\r\n\t\t\tcss = \"gantt_resource_marker_ok\";\r\n\t\t} else {\r\n\t\t\tcss = \"gantt_resource_marker_overtime\";\r\n\t\t}\r\n\t\treturn css;\r\n\t};\r\n\r\n\tgantt.templates.resource_cell_value = function(start, end, resource, tasks){\r\n\t\treturn tasks.length * 8;\r\n\t};\r\n};\r\n\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/plugins/resources.js\n// module id = 78\n// module chunks = 0","module.exports = function(gantt) {\r\n\tvar TreeDataStore = require(\"./datastore/treedatastore\");\r\n\r\n\tvar old_has_children = TreeDataStore.prototype.hasChild;\r\n\tgantt.$data.tasksStore.hasChild = function (id) {\r\n\t\tif (old_has_children.apply(this, arguments))\r\n\t\t\treturn true;\r\n\t\tif (this.exists(id)) {\r\n\t\t\treturn this.getItem(id)[gantt.config.branch_loading_property];\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\tfunction needLoading(id) {\r\n\t\tif (gantt.config.branch_loading && gantt._load_url) {\r\n\t\t\tvar was_rendered = gantt.getUserData(id, \"was_rendered\");\r\n\t\t\t// call ajax only if branch has children\r\n\t\t\tif (!was_rendered && (!gantt.getChildren(id).length && gantt.hasChild(id))) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onTaskOpened\", function (id) {\r\n\t\tif (gantt.config.branch_loading && gantt._load_url) {\r\n\t\t\t// call ajax only if branch has children\r\n\t\t\tif (needLoading(id)) {\r\n\t\t\t\tvar url = gantt._load_url;\r\n\t\t\t\turl = url.replace(/(\\?|&)?parent_id=.+&?/, \"\");\r\n\t\t\t\tvar param = url.indexOf(\"?\") >= 0 ? \"&\" : \"?\";\r\n\t\t\t\tvar y = gantt.getScrollState().y || 0;\r\n\r\n\t\t\t\tgantt.load(url + param + \"parent_id=\" + encodeURIComponent(id), this._load_type, function () {\r\n\t\t\t\t\tif (y) {\r\n\t\t\t\t\t\tgantt.scrollTo(null, y);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgantt.setUserData(id, \"was_rendered\", true);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/dynamic_loading.js\n// module id = 79\n// module chunks = 0","var Grid = require(\"./ui/grid/grid\");\r\n\r\nmodule.exports = function(gantt) {\r\n\trequire(\"./grid_column_api.gpl\")(gantt);\r\n\tGrid.prototype.getGridColumns = function () {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar columns = config.columns,\r\n\t\t\tvisibleColumns = [];\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tif (!columns[i].hide)\r\n\t\t\t\tvisibleColumns.push(columns[i]);\r\n\t\t}\r\n\r\n\t\treturn visibleColumns;\r\n\t};\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/grid_column_api.js\n// module id = 80\n// module chunks = 0","module.exports = function(gantt) {\r\n\tgantt.getGridColumn = function (name) {\r\n\t\tvar columns = gantt.config.columns;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tif (columns[i].name == name)\r\n\t\t\t\treturn columns[i];\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t};\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/grid_column_api.gpl.js\n// module id = 81\n// module chunks = 0","module.exports = function(gantt){\r\n\r\n\tvar htmlTags = new RegExp(\"<(?:.|\\n)*?>\", \"gm\");\r\n\tvar extraSpaces = new RegExp(\" +\", \"gm\");\r\n\r\n\tfunction stripHTMLLite(htmlText){\r\n\t\treturn (htmlText + \"\")\r\n\t\t\t.replace(htmlTags, \" \").\r\n\t\t\treplace(extraSpaces, \" \");\r\n\t}\r\n\r\n\tvar singleQuotes = new RegExp(\"'\", \"gm\");\r\n\tfunction escapeQuotes(text){\r\n\t\treturn (text + \"\").replace(singleQuotes, \"&#39;\");\r\n\t}\r\n\r\n\tgantt._waiAria = {\r\n\t\tgetAttributeString: function(attr){\r\n\t\t\tvar attributes = [\" \"];\r\n\t\t\tfor(var i in attr){\r\n\t\t\t\tvar text = escapeQuotes(stripHTMLLite(attr[i]));\r\n\t\t\t\tattributes.push(i + \"='\" + text + \"'\");\r\n\t\t\t}\r\n\t\t\tattributes.push(\" \");\r\n\t\t\treturn attributes.join(\" \");\r\n\r\n\t\t},\r\n\r\n\t\tgetTimelineCellAttr:function(dateString){\r\n\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"aria-label\": dateString});\r\n\t\t},\r\n\r\n\r\n\t\t_taskCommonAttr: function(task, div){\r\n\r\n\t\t\tif(!(task.start_date && task.end_date))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tdiv.setAttribute(\"aria-label\", stripHTMLLite(gantt.templates.tooltip_text(task.start_date, task.end_date, task)));\r\n\r\n\t\t\tif(gantt.isReadonly(task)){\r\n\t\t\t\tdiv.setAttribute(\"aria-readonly\", true);\r\n\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(task.$dataprocessor_class){\r\n\t\t\t\tdiv.setAttribute(\"aria-busy\", true);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tdiv.setAttribute(\"aria-selected\",\r\n\t\t\t\t(gantt.getState().selected_task == task.id || (gantt.isSelectedTask && gantt.isSelectedTask(task.id))) ? \"true\" : \"false\");\r\n\t\t},\r\n\r\n\t\tsetTaskBarAttr: function(task, div){\r\n\t\t\tthis._taskCommonAttr(task, div);\r\n\r\n\t\t\tif(!gantt.isReadonly(task) && gantt.config.drag_move){\r\n\t\t\t\tif(task.id != gantt.getState().drag_id){\r\n\t\t\t\t\tdiv.setAttribute(\"aria-grabbed\", false);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdiv.setAttribute(\"aria-grabbed\", true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ttaskRowAttr: function(task, div){\r\n\r\n\t\t\tthis._taskCommonAttr(task, div);\r\n\r\n\t\t\tif(!gantt.isReadonly(task) && gantt.config.order_branch){\r\n\t\t\t\tdiv.setAttribute(\"aria-grabbed\", false);\r\n\t\t\t}\r\n\r\n\t\t\tdiv.setAttribute(\"role\", \"row\");\r\n\r\n\t\t\tdiv.setAttribute(\"aria-level\", task.$level);\r\n\r\n\t\t\tif(gantt.hasChild(task.id)){\r\n\t\t\t\tdiv.setAttribute(\"aria-expanded\", task.$open ? \"true\" : \"false\");\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tlinkAttr: function(link, div){\r\n\r\n\t\t\tvar linkTypes = gantt.config.links;\r\n\r\n\t\t\tvar toStart = link.type == linkTypes.finish_to_start || link.type == linkTypes.start_to_start;\r\n\t\t\tvar fromStart = link.type == linkTypes.start_to_start || link.type == linkTypes.start_to_finish;\r\n\r\n\t\t\tvar content = gantt.locale.labels.link + \" \" +  gantt.templates.drag_link(link.source, fromStart, link.target, toStart);\r\n\r\n\t\t\tdiv.setAttribute(\"aria-label\", stripHTMLLite(content));\r\n\t\t\tif(gantt.isReadonly(link)){\r\n\t\t\t\tdiv.setAttribute(\"aria-readonly\", true);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgridSeparatorAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"separator\");\r\n\t\t},\r\n\r\n\t\tlightboxHiddenAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t},\r\n\r\n\t\tlightboxVisibleAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"false\");\r\n\t\t},\r\n\r\n\t\tlightboxAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t\tdiv.firstChild.setAttribute(\"role\", \"heading\");\r\n\t\t},\r\n\r\n\t\tlightboxButtonAttrString:function(buttonName){\r\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\":gantt.locale.labels[buttonName], \"tabindex\":\"0\"});\r\n\t\t},\r\n\r\n\t\tlightboxHeader: function(div, headerText){\r\n\t\t\tdiv.setAttribute(\"aria-label\", headerText);\r\n\t\t},\r\n\r\n\t\tlightboxSelectAttrString: function(time_option){\r\n\t\t\tvar label = \"\";\r\n\r\n\t\t\tswitch (time_option) {\r\n\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.years;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%m\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.months;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%d\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.days;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%H:%i\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.hours + gantt.locale.labels.minutes;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"aria-label\": label});\r\n\t\t},\r\n\r\n\t\tlightboxDurationInputAttrString: function(section){\r\n\t\t\treturn this.getAttributeString({\"aria-label\": gantt.locale.labels.column_duration, \"aria-valuemin\": \"0\"});\r\n\t\t},\r\n\r\n\t\tgridAttrString: function(){\r\n\t\t\treturn [\" role='treegrid'\", gantt.config.multiselect ? \"aria-multiselectable='true'\" : \"aria-multiselectable='false'\", \" \"].join(\" \");\r\n\t\t},\r\n\r\n\r\n\t\tgridScaleRowAttrString: function(){\r\n\t\t\treturn \"role='row'\";\r\n\t\t},\r\n\r\n\t\tgridScaleCellAttrString: function(column, label){\r\n\t\t\tvar attrs = \"\";\r\n\t\t\tif(column.name == \"add\"){\r\n\t\t\t\tattrs = this.getAttributeString({\"role\":\"button\", \"aria-label\": gantt.locale.labels.new_task});\r\n\t\t\t}else{\r\n\r\n\t\t\t\tvar attributes = {\r\n\t\t\t\t\t\"role\":\"columnheader\",\r\n\t\t\t\t\t\"aria-label\": label\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(gantt._sort && gantt._sort.name == column.name){\r\n\t\t\t\t\tif(gantt._sort.direction == \"asc\"){\r\n\t\t\t\t\t\tattributes[\"aria-sort\"] = \"ascending\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tattributes[\"aria-sort\"] = \"descending\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tattrs = this.getAttributeString(attributes);\r\n\t\t\t}\r\n\t\t\treturn attrs;\r\n\t\t},\r\n\r\n\t\tgridDataAttrString: function(){\r\n\t\t\treturn \"role='rowgroup'\";\r\n\t\t},\r\n\r\n\t\tgridCellAttrString: function(column, textValue){\r\n\t\t\treturn this.getAttributeString({\"role\":\"gridcell\", \"aria-label\": textValue});\r\n\t\t},\r\n\r\n\t\tgridAddButtonAttrString: function(column){\r\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\": gantt.locale.labels.new_task});\r\n\t\t},\r\n\r\n\t\tmessageButtonAttrString: function(buttonLabel){\r\n\t\t\treturn \"tabindex='0' role='button' aria-label='\"+buttonLabel+\"'\";\r\n\t\t},\r\n\r\n\t\tmessageInfoAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"alert\");\r\n\t\t\t//div.setAttribute(\"tabindex\", \"-1\");\r\n\t\t},\r\n\r\n\t\tmessageModalAttr: function(div, uid){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t\tif(uid){\r\n\t\t\t\tdiv.setAttribute(\"aria-labelledby\", uid);\r\n\t\t\t}\r\n\r\n\t\t//\tdiv.setAttribute(\"tabindex\", \"-1\");\r\n\t\t},\r\n\r\n\t\tquickInfoAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t},\r\n\r\n\t\tquickInfoHeaderAttrString: function(){\r\n\t\t\treturn \" role='heading' \";\r\n\t\t},\r\n\r\n\t\tquickInfoHeader: function(div, header){\r\n\t\t\tdiv.setAttribute(\"aria-label\", header);\r\n\t\t},\r\n\r\n\t\tquickInfoButtonAttrString: function(label){\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"role\":\"button\", \"aria-label\":label, \"tabindex\":\"0\"});\r\n\t\t},\r\n\r\n\t\ttooltipAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"tooltip\");\r\n\t\t},\r\n\r\n\t\ttooltipVisibleAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"false\");\r\n\t\t},\r\n\r\n\t\ttooltipHiddenAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t}\r\n\t};\r\n\r\n\tfunction isDisabled(){\r\n\t\treturn !gantt.config.wai_aria_attributes;\r\n\t}\r\n\r\n\tfor(var i in gantt._waiAria){\r\n\t\tgantt._waiAria[i] = (function(payload){\r\n\t\t\treturn function(){\r\n\t\t\t\tif(isDisabled()){\r\n\t\t\t\t\treturn \"\";\r\n\t\t\t\t}\r\n\t\t\t\treturn payload.apply(this, arguments);\r\n\t\t\t};\r\n\t\t})(gantt._waiAria[i]);\r\n\t}\r\n\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/wai_aria.js\n// module id = 82\n// module chunks = 0","module.exports = function(gantt) {\r\n\tgantt.isReadonly = function (item) {\r\n\t\tif (item && item[this.config.editable_property]) {\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn (item && item[this.config.readonly_property]) || this.config.readonly;\r\n\t\t}\r\n\t};\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/tasks.js\n// module id = 83\n// module chunks = 0","var utils = require(\"../utils/utils\");\r\nvar dateHelper = require(\"../utils/date_helpers\");\r\n\r\nmodule.exports = function(gantt) {\r\n\r\n\tgantt.load = function (url, type, callback) {\r\n\t\tthis._load_url = url;\r\n\t\tthis.assert(arguments.length, \"Invalid load arguments\");\r\n\r\n\t\tvar tp = 'json', cl = null;\r\n\t\tif (arguments.length >= 3) {\r\n\t\t\ttp = type;\r\n\t\t\tcl = callback;\r\n\t\t} else {\r\n\t\t\tif (typeof arguments[1] == \"string\")\r\n\t\t\t\ttp = arguments[1];\r\n\t\t\telse if (typeof arguments[1] == \"function\")\r\n\t\t\t\tcl = arguments[1];\r\n\t\t}\r\n\r\n\t\tthis._load_type = tp;\r\n\r\n\t\tthis.callEvent(\"onLoadStart\", [url, tp]);\r\n\r\n\t\tthis.ajax.get(url, gantt.bind(function (l) {\r\n\t\t\tthis.on_load(l, tp);\r\n\t\t\tthis.callEvent(\"onLoadEnd\", [url, tp]);\r\n\t\t\tif (typeof cl == \"function\")\r\n\t\t\t\tcl.call(this);\r\n\t\t}, this));\r\n\t};\r\n\tgantt.parse = function (data, type) {\r\n\t\tthis.on_load({xmlDoc: {responseText: data}}, type);\r\n\t};\r\n\r\n\tgantt.serialize = function (type) {\r\n\t\ttype = type || \"json\";\r\n\t\treturn this[type].serialize();\r\n\t};\r\n\r\n\t/*\r\n\ttasks and relations\r\n\t{\r\n\tdata:[\r\n\t\t{\r\n\t\t\t\"id\":\"string\",\r\n\t\t\t\"text\":\"...\",\r\n\t\t\t\"start_date\":\"Date or string\",\r\n\t\t\t\"end_date\":\"Date or string\",\r\n\t\t\t\"duration\":\"number\",\r\n\t\t\t\"progress\":\"0..1\",\r\n\t\t\t\"parent_id\":\"string\",\r\n\t\t\t\"order\":\"number\"\r\n\t\t},...],\r\n\tlinks:[\r\n\t\t{\r\n\t\t\tid:\"string\",\r\n\t\t\tsource:\"string\",\r\n\t\t\ttarget:\"string\",\r\n\t\t\ttype:\"string\"\r\n\t\t},...],\r\n\tcollections:{\r\n\t\t\tcollectionName:[\r\n\t\t\t\t{key:, label:, optional:...},...\r\n\t\t\t],...\r\n\t\t}\r\n\t}\r\n\r\n\t* */\r\n\r\n\tgantt.on_load = function (resp, type) {\r\n\t\tthis.callEvent(\"onBeforeParse\", []);\r\n\t\tif (!type)\r\n\t\t\ttype = \"json\";\r\n\t\tthis.assert(this[type], \"Invalid data type:'\" + type + \"'\");\r\n\r\n\t\tvar raw = resp.xmlDoc.responseText;\r\n\r\n\t\tvar data = this[type].parse(raw, resp);\r\n\t\tthis._process_loading(data);\r\n\t};\r\n\r\n\tgantt._process_loading = function (data) {\r\n\t\tif(data.collections)\r\n\t\t\tthis._load_collections(data.collections);\r\n\r\n\t\tthis.$data.tasksStore.parse(data.data);\r\n\t\tvar links = data.links || (data.collections ? data.collections.links : []);\r\n\t\tthis.$data.linksStore.parse(links);\r\n\r\n\t\t//this._sync_links();\r\n\t\tthis.callEvent(\"onParse\", []);\r\n\t\tthis.render();\r\n\t\tif(this.config.initial_scroll){\r\n\t\t\tvar firstTask = this.getTaskByIndex(0);\r\n\t\t\tvar id = firstTask ? firstTask.id : this.config.root_id;\r\n\t\t\tif(this.isTaskExists(id))\r\n\t\t\t\tthis.showTask(id);\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt._load_collections = function (collections) {\r\n\t\tvar collections_loaded = false;\r\n\t\tfor (var key in collections) {\r\n\t\t\tif (collections.hasOwnProperty(key)) {\r\n\t\t\t\tcollections_loaded = true;\r\n\t\t\t\tvar collection = collections[key];\r\n\t\t\t\tvar arr = this.serverList[key];\r\n\t\t\t\tif (!arr) continue;\r\n\t\t\t\tarr.splice(0, arr.length); //clear old options\r\n\t\t\t\tfor (var j = 0; j < collection.length; j++) {\r\n\t\t\t\t\tvar option = collection[j];\r\n\t\t\t\t\tvar obj = this.copy(option);\r\n\t\t\t\t\tobj.key = obj.value;// resulting option object\r\n\r\n\t\t\t\t\tfor (var option_key in option) {\r\n\t\t\t\t\t\tif (option.hasOwnProperty(option_key)) {\r\n\t\t\t\t\t\t\tif (option_key == \"value\" || option_key == \"label\")\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\tobj[option_key] = option[option_key]; // obj['value'] = option['value']\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tarr.push(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (collections_loaded)\r\n\t\t\tthis.callEvent(\"onOptionsLoad\", []);\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskDisplay\", function (id, task) {\r\n\t\treturn !task.$ignore;\r\n\t});\r\n\r\n\tgantt.json = {\r\n\t\tparse: function (data) {\r\n\t\t\tgantt.assert(data, \"Invalid data\");\r\n\r\n\t\t\tif (typeof data == \"string\") {\r\n\t\t\t\tif (window.JSON)\r\n\t\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t\telse {\r\n\t\t\t\t\tgantt.assert(false, \"JSON is not supported\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (data.dhx_security)\r\n\t\t\t\tgantt.security_key = data.dhx_security;\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\tserializeTask: function (task) {\r\n\t\t\treturn this._copyObject(task);\r\n\t\t},\r\n\t\tserializeLink: function (link) {\r\n\t\t\treturn this._copyLink(link);\r\n\t\t},\r\n\t\t_copyLink: function (obj) {\r\n\t\t\tvar copy = {};\r\n\t\t\tfor (var key in obj)\r\n\t\t\t\tcopy[key] = obj[key];\r\n\t\t\treturn copy;\r\n\t\t},\r\n\t\t_copyObject: function (obj) {\r\n\t\t\tvar copy = {};\r\n\t\t\tfor (var key in obj) {\r\n\t\t\t\tif (key.charAt(0) == \"$\")\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tcopy[key] = obj[key];\r\n\r\n\t\t\t\tif (dateHelper.isDate(copy[key])) {\r\n\t\t\t\t\tcopy[key] = gantt.templates.xml_format(copy[key]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn copy;\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tvar tasks = [];\r\n\t\t\tvar links = [];\r\n\r\n\t\t\tgantt.eachTask(function (obj) {\r\n\t\t\t\tgantt.resetProjectDates(obj);\r\n\t\t\t\ttasks.push(this.serializeTask(obj));\r\n\t\t\t}, gantt.config.root_id, this);\r\n\r\n\t\t\tvar rawLinks = gantt.getLinks();\r\n\t\t\tfor (var i = 0; i < rawLinks.length; i++) {\r\n\t\t\t\tlinks.push(this.serializeLink(rawLinks[i]));\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tdata: tasks,\r\n\t\t\t\tlinks: links\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n\r\n\t/*\r\n\t<data>\r\n\t\t<task id:\"some\" parent_id=\"0\" progress=\"0.5\">\r\n\t\t\t<text>My task 1</text>\r\n\t\t\t<start_date>16.08.2013</start_date>\r\n\t\t\t<end_date>22.08.2013</end_date>\r\n\t\t</task>\r\n\t\t<coll_options>\r\n\t\t\t<links>\r\n\t\t\t\t<link source='a1' target='b2' type='c3' />\r\n\t\t\t</links>\r\n\t\t</coll_options>\r\n\t</data>\r\n\t*/\r\n\r\n\tgantt.xml = {\r\n\t\t_xmlNodeToJSON: function (node, attrs_only) {\r\n\t\t\tvar t = {};\r\n\t\t\tfor (var i = 0; i < node.attributes.length; i++)\r\n\t\t\t\tt[node.attributes[i].name] = node.attributes[i].value;\r\n\r\n\t\t\tif (!attrs_only) {\r\n\t\t\t\tfor (var i = 0; i < node.childNodes.length; i++) {\r\n\t\t\t\t\tvar child = node.childNodes[i];\r\n\t\t\t\t\tif (child.nodeType == 1)\r\n\t\t\t\t\t\tt[child.tagName] = child.firstChild ? child.firstChild.nodeValue : \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!t.text) t.text = node.firstChild ? node.firstChild.nodeValue : \"\";\r\n\t\t\t}\r\n\r\n\t\t\treturn t;\r\n\t\t},\r\n\t\t_getCollections: function (loader) {\r\n\t\t\tvar collection = {};\r\n\t\t\tvar opts = gantt.ajax.xpath(\"//coll_options\", loader);\r\n\t\t\tfor (var i = 0; i < opts.length; i++) {\r\n\t\t\t\tvar bind = opts[i].getAttribute(\"for\");\r\n\t\t\t\tvar arr = collection[bind] = [];\r\n\t\t\t\tvar itms = gantt.ajax.xpath(\".//item\", opts[i]);\r\n\t\t\t\tfor (var j = 0; j < itms.length; j++) {\r\n\t\t\t\t\tvar itm = itms[j];\r\n\t\t\t\t\tvar attrs = itm.attributes;\r\n\t\t\t\t\tvar obj = {key: itms[j].getAttribute(\"value\"), label: itms[j].getAttribute(\"label\")};\r\n\t\t\t\t\tfor (var k = 0; k < attrs.length; k++) {\r\n\t\t\t\t\t\tvar attr = attrs[k];\r\n\t\t\t\t\t\tif (attr.nodeName == \"value\" || attr.nodeName == \"label\")\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\tobj[attr.nodeName] = attr.nodeValue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tarr.push(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn collection;\r\n\t\t},\r\n\t\t_getXML: function (text, loader, toptag) {\r\n\t\t\ttoptag = toptag || \"data\";\r\n\t\t\tif (!loader.getXMLTopNode) {\r\n\t\t\t\tloader = gantt.ajax.parse(loader);\r\n\t\t\t}\r\n\r\n\t\t\tvar xml = gantt.ajax.xmltop(toptag, loader.xmlDoc);\r\n\t\t\tif (!xml || xml.tagName != toptag) throw \"Invalid XML data\";\r\n\r\n\t\t\tvar skey = xml.getAttribute(\"dhx_security\");\r\n\t\t\tif (skey)\r\n\t\t\t\tgantt.security_key = skey;\r\n\r\n\t\t\treturn xml;\r\n\t\t},\r\n\t\tparse: function (text, loader) {\r\n\t\t\tloader = this._getXML(text, loader);\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tvar evs = data.data = [];\r\n\t\t\tvar xml = gantt.ajax.xpath(\"//task\", loader);\r\n\r\n\t\t\tfor (var i = 0; i < xml.length; i++)\r\n\t\t\t\tevs[i] = this._xmlNodeToJSON(xml[i]);\r\n\r\n\t\t\tdata.collections = this._getCollections(loader);\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\t_copyLink: function (obj) {\r\n\t\t\treturn \"<item id='\" + obj.id + \"' source='\" + obj.source + \"' target='\" + obj.target + \"' type='\" + obj.type + \"' />\";\r\n\t\t},\r\n\t\t_copyObject: function (obj) {\r\n\t\t\treturn \"<task id='\" + obj.id + \"' parent='\" + (obj.parent || \"\") + \"' start_date='\" + obj.start_date + \"' duration='\" + obj.duration + \"' open='\" + (!!obj.open) + \"' progress='\" + obj.progress + \"' end_date='\" + obj.end_date + \"'><![CDATA[\" + obj.text + \"]]></task>\";\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tvar tasks = [];\r\n\t\t\tvar links = [];\r\n\r\n\t\t\tvar json = gantt.json.serialize();\r\n\t\t\tfor (var i = 0, len = json.data.length; i < len; i++) {\r\n\t\t\t\ttasks.push(this._copyObject(json.data[i]));\r\n\t\t\t}\r\n\t\t\tfor (var i = 0, len = json.links.length; i < len; i++) {\r\n\t\t\t\tlinks.push(this._copyLink(json.links[i]));\r\n\t\t\t}\r\n\t\t\treturn \"<data>\" + tasks.join(\"\") + \"<coll_options for='links'>\" + links.join(\"\") + \"</coll_options></data>\";\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt.oldxml = {\r\n\t\tparse: function (text, loader) {\r\n\t\t\tloader = gantt.xml._getXML(text, loader, \"projects\");\r\n\t\t\tvar data = {collections: {links: []}};\r\n\r\n\t\t\tvar evs = data.data = [];\r\n\t\t\tvar xml = gantt.ajax.xpath(\"//task\", loader);\r\n\r\n\t\t\tfor (var i = 0; i < xml.length; i++) {\r\n\t\t\t\tevs[i] = gantt.xml._xmlNodeToJSON(xml[i]);\r\n\t\t\t\tvar parent = xml[i].parentNode;\r\n\r\n\t\t\t\tif (parent.tagName == \"project\")\r\n\t\t\t\t\tevs[i].parent = \"project-\" + parent.getAttribute(\"id\");\r\n\t\t\t\telse\r\n\t\t\t\t\tevs[i].parent = parent.parentNode.getAttribute(\"id\");\r\n\t\t\t}\r\n\r\n\t\t\txml = gantt.ajax.xpath(\"//project\", loader);\r\n\t\t\tfor (var i = 0; i < xml.length; i++) {\r\n\t\t\t\tvar ev = gantt.xml._xmlNodeToJSON(xml[i], true);\r\n\t\t\t\tev.id = \"project-\" + ev.id;\r\n\t\t\t\tevs.push(ev);\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < evs.length; i++) {\r\n\t\t\t\tvar ev = evs[i];\r\n\t\t\t\tev.start_date = ev.startdate || ev.est;\r\n\t\t\t\tev.end_date = ev.enddate;\r\n\t\t\t\tev.text = ev.name;\r\n\t\t\t\tev.duration = ev.duration / 8;\r\n\t\t\t\tev.open = 1;\r\n\t\t\t\tif (!ev.duration && !ev.end_date) ev.duration = 1;\r\n\t\t\t\tif (ev.predecessortasks)\r\n\t\t\t\t\tdata.collections.links.push({\r\n\t\t\t\t\t\ttarget: ev.id,\r\n\t\t\t\t\t\tsource: ev.predecessortasks,\r\n\t\t\t\t\t\ttype: gantt.config.links.finish_to_start\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tgantt.message(\"Serialization to 'old XML' is not implemented\");\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.serverList = function (name, array) {\r\n\t\tif (array) {\r\n\t\t\tthis.serverList[name] = array.slice(0);\r\n\t\t} else if (!this.serverList[name]) {\r\n\t\t\tthis.serverList[name] = [];\r\n\t\t}\r\n\t\treturn this.serverList[name];\r\n\t};\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/load.js\n// module id = 84\n// module chunks = 0","var CalendarManager = require(\"./calendar_manager\"),\r\n\tTimeCalculator = require(\"./time_calculator\"),\r\n\tworktimeFacadeFactory = require(\"../facades/worktime_calendars\"),\r\n\tutils = require(\"../../utils/utils\");\r\n\r\nmodule.exports = function (gantt) {\r\n\tvar manager = new CalendarManager(gantt),\r\n\ttimeCalculator = new TimeCalculator(manager);\r\n\tvar facade = worktimeFacadeFactory.create(manager, timeCalculator);\r\n\tutils.mixin(gantt, facade);\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/worktime/work_time.js\n// module id = 85\n// module chunks = 0","var utils = require(\"../../utils/utils\");\r\nvar createArgumentsHelper = require(\"./calendar_arguments_helper\");\r\nvar CalendarWorktimeStrategy = require(\"./strategy/calendar_strategy\");\r\n\r\nfunction CalendarManager (gantt){\r\n\tthis.$gantt = gantt;\r\n\tthis._calendars = {};\r\n}\r\n\r\nCalendarManager.prototype = {\r\n\t_calendars: {},\r\n\t_getDayHoursForMultiple: function (calendars, date) {\r\n\t\tvar units = [],\r\n\t\t\ttick = true,\r\n\t\t\tcurrPos = 0,\r\n\t\t\tis_work_hour = false,\r\n\t\t\tstart = this.$gantt.date.day_start(new Date(date));\r\n\t\tfor (var hour = 0; hour < 24; hour++) {\r\n\t\t\tis_work_hour = calendars.reduce(function (acc, calendar) {\r\n\t\t\t\treturn acc && calendar._is_work_hour(start);\r\n\t\t\t}, true);\r\n\t\t\tif (is_work_hour) {\r\n\t\t\t\tif (tick) {\r\n\t\t\t\t\tunits[currPos] = hour;\r\n\t\t\t\t\tunits[currPos + 1] = (hour + 1);\r\n\t\t\t\t\tcurrPos += 2;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tunits[currPos - 1] += 1;\r\n\t\t\t\t}\r\n\t\t\t\ttick = false;\r\n\t\t\t} else if (!tick) {\r\n\t\t\t\ttick = true;\r\n\t\t\t}\r\n\t\t\tstart = this.$gantt.date.add(start, 1, \"hour\");\r\n\t\t}\r\n\t\tif (!units.length)\r\n\t\t\tunits = false;\r\n\t\treturn units;\r\n\t},\r\n\tmergeCalendars: function () {\r\n\t\tvar newCalendar = this.createCalendar(),\r\n\t\t\tday,\r\n\t\t\tunits = [];\r\n\t\tvar calendars = Array.prototype.slice.call(arguments, 0);\r\n\t\tnewCalendar.worktime.hours = [0, 24];\r\n\t\tnewCalendar.worktime.dates = {};\r\n\t\tvar start = this.$gantt.date.day_start(new Date(259200000)); // 1970 day=0\r\n\t\tfor (day = 0; day < 7; day++) {\r\n\t\t\tunits = this._getDayHoursForMultiple(calendars, start);\r\n\t\t\tnewCalendar.worktime.dates[day] = units;\r\n\t\t\tstart = this.$gantt.date.add(start, 1, \"day\");\r\n\t\t}\r\n\t\tfor (var i = 0; i < calendars.length; i++) {\r\n\t\t\tfor (var value in calendars[i].worktime.dates) if (+value > 10000) {\r\n\t\t\t\tunits = this._getDayHoursForMultiple(calendars, new Date(+value));\r\n\t\t\t\tnewCalendar.worktime.dates[value] = units;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn newCalendar;\r\n\t},\r\n\r\n\t_convertWorktimeSettings: function (settings) {\r\n\t\tvar days = settings.days;\r\n\t\tif (days) {\r\n\t\t\tsettings.dates = settings.dates || {};\r\n\t\t\tfor (var i = 0; i < days.length; i++) {\r\n\t\t\t\tsettings.dates[i] = days[i];\r\n\t\t\t\tif (!(days[i] instanceof Array)) {\r\n\t\t\t\t\tsettings.dates[i] = !!days[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdelete settings.days;\r\n\t\t}\r\n\t\treturn settings;\r\n\t},\r\n\r\n\tcreateCalendar: function (parentCalendar) {\r\n\t\tvar settings;\r\n\r\n\t\tif (!parentCalendar) {\r\n\t\t\tparentCalendar = {};\r\n\t\t}\r\n\r\n\t\tif (parentCalendar.worktime) {\r\n\t\t\tsettings = utils.copy(parentCalendar.worktime);\r\n\t\t} else {\r\n\t\t\tsettings = utils.copy(parentCalendar);\r\n\t\t}\r\n\r\n\t\tvar defaults = utils.copy(this.defaults.fulltime.worktime);\r\n\t\tutils.mixin(settings, defaults);\r\n\r\n\t\tvar id = utils.uid();\r\n\t\tvar calendar = {\r\n\t\t\tid: id + \"\",\r\n\t\t\tworktime: this._convertWorktimeSettings(settings)\r\n\t\t};\r\n\r\n\t\tvar apiCore = new CalendarWorktimeStrategy(this.$gantt, createArgumentsHelper(this.$gantt));\r\n\t\tutils.mixin(apiCore, calendar);\r\n\r\n\t\t// validate/check if empty calendar\r\n\t\tif (!apiCore._tryChangeCalendarSettings(function () {\r\n\t\t\t})) {\r\n\t\t\treturn null;\r\n\t\t} else {\r\n\t\t\treturn apiCore;\r\n\t\t}\r\n\t},\r\n\r\n\tgetCalendar: function (id) {\r\n\t\tid = id || \"global\";\r\n\t\tthis.createDefaultCalendars();\r\n\t\treturn this._calendars[id];\r\n\t},\r\n\r\n\tgetCalendars: function () {\r\n\t\tvar res = [];\r\n\t\tfor (var i in this._calendars) {\r\n\t\t\tres.push(this.getCalendar(i));\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\r\n\tgetTaskCalendar: function (task) {\r\n\t\tvar config = this.$gantt.$services.config();\r\n\t\tif (!task) {\r\n\t\t\treturn this.getCalendar();\r\n\t\t} else if (task[config.calendar_property]) {\r\n\t\t\treturn this.getCalendar(task[config.calendar_property]);\r\n\t\t} else if (config.resource_calendars) {\r\n\r\n\t\t\tfor (var field in config.resource_calendars) {\r\n\t\t\t\tvar resource = config.resource_calendars[field];\r\n\t\t\t\tif (task[field]) {\r\n\t\t\t\t\tvar calendarId = resource[task[field]];\r\n\t\t\t\t\tif (calendarId) {\r\n\t\t\t\t\t\treturn this.getCalendar(calendarId);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this.getCalendar();\r\n\t},\r\n\r\n\taddCalendar: function (calendar) { // puts new calendar to Global Storage - gantt.calendarManager._calendars {}\r\n\t\tif (!(calendar instanceof CalendarWorktimeStrategy)) {\r\n\t\t\tvar id = calendar.id;\r\n\t\t\tcalendar = this.createCalendar(calendar);\r\n\t\t\tcalendar.id = id;\r\n\t\t}\r\n\t\tvar config = this.$gantt.$services.config();\r\n\r\n\t\tcalendar.id = calendar.id || utils.uid();\r\n\t\tthis._calendars[calendar.id] = calendar;\r\n\t\tif (!config.worktimes)\r\n\t\t\tconfig.worktimes = {};\r\n\t\tconfig.worktimes[calendar.id] = calendar.worktime;\r\n\t\treturn calendar.id;\r\n\t},\r\n\r\n\tdeleteCalendar: function (calendar) {\r\n\t\tvar config = this.$gantt.$services.config();\r\n\t\tif (!calendar) return false;\r\n\t\tif (this._calendars[calendar]) {\r\n\t\t\tdelete this._calendars[calendar];\r\n\t\t\tif (config.worktimes && config.worktimes[calendar])\r\n\t\t\t\tdelete config.worktimes[calendar];\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\t},\r\n\r\n\trestoreConfigCalendars: function (configs) {\r\n\t\tfor (var i in configs) {\r\n\t\t\tif (this._calendars[i])\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar settings = configs[i];\r\n\t\t\tvar calendar = this.createCalendar(settings);\r\n\t\t\tcalendar.id = i;\r\n\t\t\tthis.addCalendar(calendar);\r\n\t\t}\r\n\t},\r\n\r\n\tdefaults: {\r\n\t\tglobal: {\r\n\t\t\tid: \"global\",\r\n\t\t\tworktime: {\r\n\t\t\t\thours: [8, 17],\r\n\t\t\t\tdays: [0, 1, 1, 1, 1, 1, 0]\r\n\t\t\t}\r\n\t\t},\r\n\t\tfulltime: {\r\n\t\t\tid: \"fulltime\",\r\n\t\t\tworktime: {\r\n\t\t\t\thours: [0, 24],\r\n\t\t\t\tdays: [1, 1, 1, 1, 1, 1, 1]\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tcreateDefaultCalendars: function () {\r\n\t\tvar config = this.$gantt.$services.config();\r\n\t\tthis.restoreConfigCalendars(this.defaults);\r\n\t\tthis.restoreConfigCalendars(config.worktimes);\r\n\t}\r\n};\r\n\r\nmodule.exports = CalendarManager;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/worktime/calendar_manager.js\n// module id = 86\n// module chunks = 0","var Cache = require(\"./calendar_workunit_cache\"),\r\n\tutils = require(\"../../../utils/utils\");\r\n\r\nfunction CalendarWorkTimeStrategy(gantt, argumentsHelper){\r\n\tthis.argumentsHelper = argumentsHelper;\r\n\tthis.$gantt = gantt;\r\n\tthis._workingUnitsCache = new Cache();\r\n}\r\n\r\nCalendarWorkTimeStrategy.prototype = {\r\n\tunits: [\r\n\t\t\"year\",\r\n\t\t\"month\",\r\n\t\t\"week\",\r\n\t\t\"day\",\r\n\t\t\"hour\",\r\n\t\t\"minute\"\r\n\t],\r\n\t// cache previously calculated worktime\r\n\t_getUnitOrder: function (unit) {\r\n\t\tfor (var i = 0, len = this.units.length; i < len; i++) {\r\n\t\t\tif (this.units[i] == unit)\r\n\t\t\t\treturn i;\r\n\t\t}\r\n\t},\r\n\t_timestamp: function (settings) {\r\n\r\n\t\tvar timestamp = null;\r\n\t\tif ((settings.day || settings.day === 0)) {\r\n\t\t\ttimestamp = settings.day;\r\n\t\t} else if (settings.date) {\r\n\t\t\t// store worktime datestamp in utc so it could be recognized in different timezones (e.g. opened locally and sent to the export service in different timezone)\r\n\t\t\ttimestamp = Date.UTC(settings.date.getFullYear(), settings.date.getMonth(), settings.date.getDate());\r\n\t\t}\r\n\t\treturn timestamp;\r\n\t},\r\n\t_checkIfWorkingUnit: function (date, unit, order) {\r\n\t\tif (order === undefined) {\r\n\t\t\torder = this._getUnitOrder(unit);\r\n\t\t}\r\n\r\n\t\t// disable worktime check for custom time units\r\n\t\tif (order === undefined) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (order) {\r\n\t\t\t//check if bigger time unit is a work time (hour < day < month...)\r\n\t\t\t//i.e. don't check particular hour if the whole day is marked as not working\r\n\t\t\tif (!this._isWorkTime(date, this.units[order - 1], order - 1))\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t\tif (!this[\"_is_work_\" + unit])\r\n\t\t\treturn true;\r\n\t\treturn this[\"_is_work_\" + unit](date);\r\n\t},\r\n\t//checkings for particular time units\r\n\t//methods for month-year-week can be defined, otherwise always return 'true'\r\n\t_is_work_day: function (date) {\r\n\t\tvar val = this._getWorkHours(date);\r\n\r\n\t\tif (val instanceof Array) {\r\n\t\t\treturn val.length > 0;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t_is_work_hour: function (date) {\r\n\t\tvar hours = this._getWorkHours(date); // [7,12] or []\r\n\t\tvar hour = date.getHours();\r\n\t\tfor (var i = 0; i < hours.length; i += 2) {\r\n\t\t\tif (hours[i + 1] === undefined) {\r\n\t\t\t\treturn hours[i] == hour;\r\n\t\t\t} else {\r\n\t\t\t\tif (hour >= hours[i] && hour < hours[i + 1])\r\n\t\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t_internDatesPull: {},\r\n\t_nextDate: function (start, unit, step) {\r\n\t\tvar dateHelper = this.$gantt.date;\r\n\t\treturn dateHelper.add(start, step, unit);\r\n\r\n\t\t/*var start_value = +start,\r\n\t\t\tkey = unit + \"_\" + step;\r\n\t\tvar interned = this._internDatesPull[key];\r\n\t\tif(!interned){\r\n\t\t\tinterned = this._internDatesPull[key] = {};\r\n\t\t}\r\n\t\tvar calculated;\r\n\t\tif(!interned[start_value]){\r\n\t\t\tinterned[start_value] = calculated = dateHelper.add(start, step, unit);\r\n\t\t\t//interned[start_value] = dateHelper.add(start, step, unit);\r\n\t\t}\r\n\t\treturn calculated || interned[start_value];*/\r\n\t},\r\n\t_getWorkUnitsBetweenGeneric: function (from, to, unit, step) {\r\n\t\tvar dateHelper = this.$gantt.date;\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\t\tvar units = 0;\r\n\r\n\r\n\t\tvar next = null;\r\n\t\tvar stepStart,\r\n\t\t\tstepEnd;\r\n\r\n\t\t// calculating decimal durations, i.e. 2016-09-20 00:05:00 - 2016-09-20 01:00:00 ~ 0.95 instead of 1\r\n\t\t// and also  2016-09-20 00:00:00 - 2016-09-20 00:05:00 ~ 0.05 instead of 1\r\n\t\t// durations must be rounded later\r\n\t\tvar checkFirst = false;\r\n\t\tstepStart = dateHelper[unit + \"_start\"](new Date(start));\r\n\t\tif (stepStart.valueOf() != start.valueOf()) {\r\n\t\t\tcheckFirst = true;\r\n\t\t}\r\n\t\tvar checkLast = false;\r\n\t\tstepEnd = dateHelper[unit + \"_start\"](new Date(to));\r\n\t\tif (stepEnd.valueOf() != to.valueOf()) {\r\n\t\t\tcheckLast = true;\r\n\t\t}\r\n\r\n\t\tvar isLastStep = false;\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tnext = this._nextDate(start, unit, step);\r\n\t\t\tisLastStep = (next.valueOf() > end.valueOf());\r\n\r\n\t\t\tif (this._isWorkTime(start, unit)) {\r\n\t\t\t\tif (checkFirst || (checkLast && isLastStep)) {\r\n\t\t\t\t\tstepStart = dateHelper[unit + \"_start\"](new Date(start));\r\n\t\t\t\t\tstepEnd = dateHelper.add(stepStart, step, unit);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (checkFirst) {\r\n\t\t\t\t\tcheckFirst = false;\r\n\t\t\t\t\tnext = this._nextDate(stepStart, unit, step);\r\n\t\t\t\t\tunits += ((stepEnd.valueOf() - start.valueOf()) / (stepEnd.valueOf() - stepStart.valueOf()));\r\n\t\t\t\t} else if (checkLast && isLastStep) {\r\n\t\t\t\t\tcheckLast = false;\r\n\t\t\t\t\tunits += ((end.valueOf() - start.valueOf()) / (stepEnd.valueOf() - stepStart.valueOf()));\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tunits++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tstart = next;\r\n\t\t}\r\n\t\treturn units;\r\n\t},\r\n\t_getHoursPerDay: function (date) {\r\n\t\tvar hours = this._getWorkHours(date);\r\n\t\tvar res = 0;\r\n\t\tfor (var i = 0; i < hours.length; i += 2) {\r\n\t\t\tres += ((hours[i + 1] - hours[i]) || 0);\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\t_getWorkHoursForRange: function (from, to) {\r\n\t\tvar hours = 0;\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tif (this._isWorkTime(start, \"day\"))\r\n\t\t\t\thours += this._getHoursPerDay(start);\r\n\t\t\tstart = this._nextDate(start, \"day\", 1);\r\n\t\t}\r\n\t\treturn hours;\r\n\t},\r\n\t_getWorkUnitsBetweenHours: function (from, to, unit, step) {\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\r\n\t\tvar firstDayStart = new Date(start);\r\n\t\tvar firstDayEnd = this.$gantt.date.add(this.$gantt.date.day_start(new Date(start)), 1, \"day\");\r\n\r\n\t\tif (end.valueOf() <= firstDayEnd.valueOf()) {\r\n\t\t\treturn this._getWorkUnitsBetweenGeneric(from, to, unit, step);\r\n\t\t} else {\r\n\r\n\t\t\tvar lastDayStart = this.$gantt.date.day_start(new Date(end));\r\n\t\t\tvar lastDayEnd = end;\r\n\r\n\t\t\tvar startPart = this._getWorkUnitsBetweenGeneric(firstDayStart, firstDayEnd, unit, step);\r\n\t\t\tvar endPart = this._getWorkUnitsBetweenGeneric(lastDayStart, lastDayEnd, unit, step);\r\n\r\n\t\t\tvar hourRange = this._getWorkHoursForRange(firstDayEnd, lastDayStart);\r\n\t\t\thourRange = ((hourRange / step) + startPart + endPart);\r\n\r\n\t\t\treturn hourRange;\r\n\t\t}\r\n\t},\r\n\r\n\t_getCalendar: function () {\r\n\t\treturn this.worktime;\r\n\t},\r\n\t_setCalendar: function (settings) {\r\n\t\tthis.worktime = settings;\r\n\t},\r\n\r\n\t_tryChangeCalendarSettings: function (payload) {\r\n\t\tvar backup = JSON.stringify(this._getCalendar());\r\n\t\tpayload();\r\n\t\tif (this._isEmptyCalendar(this._getCalendar())) {\r\n\t\t\tthis.$gantt.assert(false, \"Invalid calendar settings, no worktime available\");\r\n\t\t\tthis._setCalendar(JSON.parse(backup));\r\n\t\t\tthis._workingUnitsCache.clear();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\t_isEmptyCalendar: function (settings) {\r\n\t\tvar result = false,\r\n\t\t\tdatesArray = [],\r\n\t\t\tisFullWeekSet = true;\r\n\t\tfor (var i in settings.dates) {\r\n\t\t\tresult |= !!settings.dates[i];\r\n\t\t\tdatesArray.push(i);\r\n\t\t}\r\n\r\n\t\tvar checkFullArray = [];\r\n\t\tfor (var i = 0; i < datesArray.length; i++) {\r\n\t\t\tif (datesArray[i] < 10) {\r\n\t\t\t\tcheckFullArray.push(datesArray[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcheckFullArray.sort();\r\n\r\n\t\tfor (var i = 0; i < 7; i++) {\r\n\t\t\tif (checkFullArray[i] != i)\r\n\t\t\t\tisFullWeekSet = false;\r\n\t\t}\r\n\t\tif (isFullWeekSet)\r\n\t\t\treturn !result;\r\n\t\treturn !(result || !!settings.hours); // can still return false if separated dates are set to true\r\n\t},\r\n\r\n\tgetWorkHours: function () {\r\n\t\tvar config = this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper, arguments);\r\n\t\treturn this._getWorkHours(config.date);\r\n\t},\r\n\t_getWorkHours: function (date) {\r\n\t\tvar t = this._timestamp({date: date});\r\n\t\tvar hours = true;\r\n\t\tvar calendar = this._getCalendar();\r\n\t\tif (calendar.dates[t] !== undefined) {\r\n\t\t\thours = calendar.dates[t];//custom day\r\n\t\t} else if (calendar.dates[date.getDay()] !== undefined) {\r\n\t\t\thours = calendar.dates[date.getDay()];//week day\r\n\t\t}\r\n\t\tif (hours === true) {\r\n\t\t\treturn calendar.hours;\r\n\t\t} else if (hours) {\r\n\t\t\treturn hours;\r\n\t\t}\r\n\t\treturn [];\r\n\t},\r\n\r\n\tsetWorkTime: function (settings) {\r\n\t\treturn this._tryChangeCalendarSettings(utils.bind(function () {\r\n\t\t\tvar hours = settings.hours !== undefined ? settings.hours : true;\r\n\t\t\tvar timestamp = this._timestamp(settings);\r\n\t\t\tif (timestamp !== null) {\r\n\t\t\t\tthis._getCalendar().dates[timestamp] = hours;\r\n\t\t\t} else {\r\n\t\t\t\tthis._getCalendar().hours = hours;\r\n\t\t\t}\r\n\t\t\tthis._workingUnitsCache.clear();\r\n\t\t}, this));\r\n\t},\r\n\r\n\tunsetWorkTime: function (settings) {\r\n\t\treturn this._tryChangeCalendarSettings(utils.bind(function () {\r\n\t\t\tif (!settings) {\r\n\t\t\t\tthis.reset_calendar();\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar timestamp = this._timestamp(settings);\r\n\r\n\t\t\t\tif (timestamp !== null) {\r\n\t\t\t\t\tdelete this._getCalendar().dates[timestamp];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// Clear work units cache\r\n\t\t\tthis._workingUnitsCache.clear();\r\n\t\t}, this));\r\n\t},\r\n\r\n\t_isWorkTime: function (date, unit, order) {\r\n\t\t//Check if this item has in the cache\r\n\t\tvar is_work_unit = this._workingUnitsCache.get(unit, date);\r\n\r\n\t\tif (is_work_unit == -1) {\r\n\t\t\t// calculate if not cached\r\n\t\t\tis_work_unit = this._checkIfWorkingUnit(date, unit, order);\r\n\t\t\tthis._workingUnitsCache.put(unit, date, is_work_unit);\r\n\t\t}\r\n\r\n\t\treturn is_work_unit;\r\n\t},\r\n\r\n\tisWorkTime: function () {\r\n\t\tvar config =  this.argumentsHelper.isWorkTimeArguments.apply( this.argumentsHelper, arguments);\r\n\t\treturn this._isWorkTime(config.date, config.unit);\r\n\t},\r\n\r\n\tcalculateDuration: function () {\r\n\t\tvar config =  this.argumentsHelper.getDurationArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tif (!config.unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar res = 0;\r\n\t\tif (config.unit == \"hour\") {\r\n\t\t\tres = this._getWorkUnitsBetweenHours(config.start_date, config.end_date, config.unit, config.step);\r\n\t\t} else {\r\n\t\t\tres = this._getWorkUnitsBetweenGeneric(config.start_date, config.end_date, config.unit, config.step);\r\n\t\t}\r\n\r\n\t\t// getDuration.. returns decimal durations\r\n\t\treturn Math.round(res);\r\n\t},\r\n\thasDuration: function () {\r\n\t\tvar config =  this.argumentsHelper.getDurationArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\tif (!unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tif (this._isWorkTime(start, unit))\r\n\t\t\t\treturn true;\r\n\t\t\tstart = this._nextDate(start, unit, step);\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\tcalculateEndDate: function () {\r\n\t\tvar config =  this.argumentsHelper.calculateEndDateArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tvar from = config.start_date,\r\n\t\t\tduration = config.duration,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\tvar mult = (config.duration >= 0) ? 1 : -1;\r\n\t\treturn this._calculateEndDate(from, duration, unit, step * mult);\r\n\t},\r\n\t_calculateEndDate: function (from, duration, unit, step) {\r\n\t\tif (!unit)\r\n\t\t\treturn false;\r\n\r\n\t\tvar start = new Date(from),\r\n\t\t\tadded = 0;\r\n\t\tstep = step || 1;\r\n\t\tduration = Math.abs(duration * 1);\r\n\r\n\t\twhile (added < duration) {\r\n\t\t\tvar next = this._nextDate(start, unit, step);\r\n\t\t\t//if(this.isWorkTime(step > 0 ? start : next, unit))\r\n\t\t\tif (this._isWorkTime(step > 0 ? new Date(next.valueOf() - 1) : new Date(next.valueOf() + 1), unit))\r\n\t\t\t\tadded++;\r\n\t\t\tstart = next;\r\n\t\t}\r\n\t\treturn start;\r\n\t},\r\n\r\n\tgetClosestWorkTime: function () {\r\n\t\tvar config =  this.argumentsHelper.getClosestWorkTimeArguments.apply( this.argumentsHelper, arguments);\r\n\t\treturn this._getClosestWorkTime(config);\r\n\t},\r\n\r\n\t_getClosestWorkTime: function (settings) {\r\n\t\tif (this._isWorkTime(settings.date, settings.unit))\r\n\t\t\treturn settings.date;\r\n\r\n\t\tvar unit = settings.unit;\r\n\r\n\t\tvar curr = this.$gantt.date[unit + '_start'](settings.date);\r\n\r\n\t\tvar future_target = new Date(curr),\r\n\t\t\tprev_target = new Date(curr),\r\n\t\t\ttick = true,\r\n\t\t\tmaximum_loop = 3000,//be extra sure we won't fall into infinite loop, 3k seems big enough\r\n\t\t\tcount = 0,\r\n\t\t\tboth_directins = (settings.dir == 'any' || !settings.dir);\r\n\r\n\t\tvar inc = 1;\r\n\t\tif (settings.dir == 'past')\r\n\t\t\tinc = -1;\r\n\r\n\t\tvar unitOrder = this._getUnitOrder(unit),\r\n\t\t\tbiggerTimeUnit = this.units[unitOrder - 1];\r\n\r\n\t\t//will seek closest working hour in future or in past, one step in one direction per iteration\r\n\t\twhile (!this._isWorkTime(curr, unit)) {\r\n\r\n\t\t\tif(biggerTimeUnit && !this._isWorkTime(curr, biggerTimeUnit)){\r\n\t\t\t\t// no need to check every hour/minute if we know that the whole day is not working\r\n\t\t\t\tvar biggerTimeUnitSettings = this.$gantt.copy(settings);\r\n\t\t\t\tbiggerTimeUnitSettings.date = curr;\r\n\t\t\t\tbiggerTimeUnitSettings.unit = biggerTimeUnit;\r\n\r\n\t\t\t\tcurr = this._getClosestWorkTime(biggerTimeUnitSettings);\r\n\t\t\t}\r\n\r\n\t\t\tif (both_directins) {\r\n\t\t\t\tcurr = tick ? future_target : prev_target;\r\n\t\t\t\tinc = inc * (-1);\r\n\t\t\t}\r\n\t\t\tvar tzOffset = curr.getTimezoneOffset();\r\n\t\t\tcurr = this.$gantt.date.add(curr, inc, unit);\r\n\r\n\t\t\tcurr = this.$gantt._correct_dst_change(curr, tzOffset, inc, unit);\r\n\t\t\tif (this.$gantt.date[unit + '_start'])\r\n\t\t\t\tcurr = this.$gantt.date[unit + '_start'](curr);\r\n\r\n\t\t\tif (both_directins) {\r\n\t\t\t\tif (tick) {\r\n\t\t\t\t\tfuture_target = curr;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tprev_target = curr;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttick = !tick;\r\n\t\t\tcount++;\r\n\t\t\tif (count > maximum_loop) {\r\n\t\t\t\tthis.$gantt.assert(false, \"Invalid working time check\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (curr == prev_target || settings.dir == 'past') {\r\n\t\t\tcurr = this.$gantt.date.add(curr, 1, unit);\r\n\t\t}\r\n\r\n\t\treturn curr;\r\n\t}\r\n};\r\n\r\nmodule.exports = CalendarWorkTimeStrategy;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/worktime/strategy/calendar_strategy.js\n// module id = 87\n// module chunks = 0","function WorkUnitsCache() {\r\n\tthis._cache = {};\r\n}\r\n\r\nWorkUnitsCache.prototype = {\r\n\t// cache previously calculated worktime\r\n\tget: function (unit, date) {\r\n\t\tvar result = -1;// default value (if not existed in the cache)\r\n\r\n\t\tvar cache = this._cache;\r\n\t\tif (cache && cache[unit]) {\r\n\t\t\tvar units = cache[unit];\r\n\t\t\tvar time = date.getTime();\r\n\t\t\tif (units[time] !== undefined)\r\n\t\t\t\tresult = units[time];\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\r\n\tput: function (unit, date, value) {\r\n\t\tif (!unit || !date) return false;\r\n\r\n\t\tvar cache = this._cache;\r\n\r\n\t\tvar time = date.getTime();\r\n\r\n\t\tvalue = !!value;\r\n\r\n\t\tif (!cache) return false;\r\n\t\tif (!cache[unit]) cache[unit] = {};\r\n\t\tcache[unit][time] = value;\r\n\t\treturn true;\r\n\t},\r\n\r\n\tclear: function () {\r\n\t\tthis._cache = {};\r\n\t}\r\n};\r\n\r\nmodule.exports = WorkUnitsCache;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/worktime/strategy/calendar_workunit_cache.js\n// module id = 88\n// module chunks = 0","var createArgumentsHelper = require(\"./calendar_arguments_helper\"),\r\n\tNoWorkTimeCalendar = require(\"./strategy/no_work_time\");\r\n\r\nfunction TimeCalculator(calendarManager){\r\n\r\n\tthis.$gantt = calendarManager.$gantt;\r\n\tthis.argumentsHelper = createArgumentsHelper(this.$gantt);\r\n\tthis.calendarManager = calendarManager;\r\n\tthis.$disabledCalendar = new NoWorkTimeCalendar(this.$gantt, this.argumentsHelper);\r\n}\r\n\r\nTimeCalculator.prototype = {\r\n\t_getCalendar: function (config) {\r\n\t\tvar calendar;\r\n\t\tif (!this.$gantt.$services.config().work_time) {\r\n\t\t\tcalendar = this.$disabledCalendar;\r\n\t\t} else {\r\n\t\t\tvar manager = this.calendarManager;\r\n\t\t\tif (config.task) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar(config.task);\r\n\t\t\t} else if (config.id) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar(config);\r\n\t\t\t} else if (config.calendar) {\r\n\t\t\t\tcalendar = config.calendar;\r\n\t\t\t}\r\n\t\t\tif (!calendar) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn calendar;\r\n\t},\r\n\r\n\tgetWorkHours: function (config) {\r\n\t\tconfig = this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.getWorkHours(config.date);\r\n\t},\r\n\r\n\tsetWorkTime: function (config, calendar) {\r\n\t\tconfig = this.argumentsHelper.setWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tif (!calendar)\r\n\t\t\tcalendar = this.calendarManager.getCalendar(); // Global\r\n\t\treturn calendar.setWorkTime(config);\r\n\t},\r\n\r\n\tunsetWorkTime: function (config, calendar) {\r\n\t\tconfig = this.argumentsHelper.unsetWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tif (!calendar)\r\n\t\t\tcalendar = this.calendarManager.getCalendar(); // Global\r\n\t\treturn calendar.unsetWorkTime(config);\r\n\t},\r\n\tisWorkTime: function (date, unit, task, calendar) {\r\n\t\tvar config = this.argumentsHelper.isWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tcalendar = this._getCalendar(config);\r\n\t\treturn calendar.isWorkTime(config);\r\n\t},\r\n\tgetClosestWorkTime: function (config) {\r\n\t\tconfig = this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.getClosestWorkTime(config);\r\n\t},\r\n\r\n\tcalculateDuration: function () { // start_date_date, end_date, task\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\t\treturn calendar.calculateDuration(config);\r\n\t},\r\n\thasDuration: function () {\r\n\t\tvar config = this.argumentsHelper.hasDurationArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.hasDuration(config);\r\n\t},\r\n\tcalculateEndDate: function (config) { // start_date, duration, unit, task\r\n\t\tvar config = this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\t\treturn calendar.calculateEndDate(config);\r\n\t}\r\n};\r\n\r\nmodule.exports = TimeCalculator;\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/worktime/time_calculator.js\n// module id = 89\n// module chunks = 0","function CalendarDisabledTimeStrategy(gantt, argumentsHelper){\r\n\tthis.argumentsHelper = argumentsHelper;\r\n\tthis.$gantt = gantt;\r\n}\r\n\r\nCalendarDisabledTimeStrategy.prototype = {\r\n\tgetWorkHours: function () {\r\n\t\treturn [0, 24];\r\n\t},\r\n\tsetWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tunsetWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tisWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tgetClosestWorkTime: function (config) {\r\n\t\tvar config = this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\t\treturn config.date;\r\n\t},\r\n\r\n\tcalculateDuration: function () {\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\treturn this._calculateDuration(from, to, unit, step);\r\n\t},\r\n\t_calculateDuration: function (start, end, unit, step) {\r\n\t\tvar dateHelper = this.$gantt.date;\r\n\t\tvar fixedUnits = {\r\n\t\t\t\"week\": 1000 * 60 * 60 * 24 * 7,\r\n\t\t\t\"day\": 1000 * 60 * 60 * 24,\r\n\t\t\t\"hour\": 1000 * 60 * 60,\r\n\t\t\t\"minute\": 1000 * 60\r\n\t\t};\r\n\r\n\t\tvar res = 0;\r\n\t\tif (fixedUnits[unit]) {\r\n\t\t\tres = Math.round((end - start) / (step * fixedUnits[unit]));\r\n\t\t} else {\r\n\t\t\tvar from = new Date(start),\r\n\t\t\t\tto = new Date(end);\r\n\t\t\twhile (from.valueOf() < to.valueOf()) {\r\n\t\t\t\tres += 1;\r\n\t\t\t\tfrom = dateHelper.add(from, step, unit);\r\n\t\t\t}\r\n\r\n\t\t\tif (from.valueOf() != end.valueOf()) {\r\n\t\t\t\tres += (to - from) / (dateHelper.add(from, step, unit) - from);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn Math.round(res);\r\n\t},\r\n\r\n\thasDuration: function () {\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\tif (!unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tfrom = new Date(from);\r\n\t\tto = new Date(to);\r\n\r\n\t\treturn (from.valueOf() < to.valueOf());\r\n\t},\r\n\r\n\tcalculateEndDate: function () {\r\n\t\tvar config = this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar start = config.start_date,\r\n\t\t\tduration = config.duration,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\treturn this.$gantt.date.add(start, step * duration, unit);\r\n\t}\r\n};\r\n\r\nmodule.exports = CalendarDisabledTimeStrategy;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/worktime/strategy/no_work_time.js\n// module id = 90\n// module chunks = 0","// TODO: rework public api for date methods\r\nvar utils = require(\"../../utils/utils\");\r\n\r\nvar createWorktimeFacade = function(calendarManager, timeCalculator){\r\n\treturn {\r\n\t\tgetWorkHours: function (date) {\r\n\t\t\treturn timeCalculator.getWorkHours(date);\r\n\t\t},\r\n\r\n\t\tsetWorkTime: function (config) {\r\n\t\t\treturn timeCalculator.setWorkTime(config);\r\n\t\t},\r\n\r\n\t\tunsetWorkTime: function (config) {\r\n\t\t\ttimeCalculator.unsetWorkTime(config);\r\n\t\t},\r\n\r\n\t\tisWorkTime: function (date, unit, task) {\r\n\t\t\treturn timeCalculator.isWorkTime(date, unit, task);\r\n\t\t},\r\n\r\n\t\tgetClosestWorkTime: function (config) {\r\n\t\t\treturn timeCalculator.getClosestWorkTime(config);\r\n\t\t},\r\n\r\n\t\tcalculateDuration: function (start_date, end_date, task) {\r\n\t\t\treturn timeCalculator.calculateDuration(start_date, end_date, task);\r\n\t\t},\r\n\t\t_hasDuration: function (start_date, end_date, task) {\r\n\t\t\treturn timeCalculator.hasDuration(start_date, end_date, task);\r\n\t\t},\r\n\r\n\t\tcalculateEndDate: function (start, duration, unit, task) {\r\n\t\t\treturn timeCalculator.calculateEndDate(start, duration, unit, task);\r\n\t\t},\r\n\r\n\t\tcreateCalendar: utils.bind(calendarManager.createCalendar, calendarManager),\r\n\t\taddCalendar: utils.bind(calendarManager.addCalendar, calendarManager),\r\n\t\tgetCalendar: utils.bind(calendarManager.getCalendar, calendarManager),\r\n\t\tgetCalendars: utils.bind(calendarManager.getCalendars, calendarManager),\r\n\t\tgetTaskCalendar: utils.bind(calendarManager.getTaskCalendar, calendarManager),\r\n\t\tdeleteCalendar: utils.bind(calendarManager.deleteCalendar, calendarManager)\r\n\t};\r\n};\r\n\r\n\r\nmodule.exports = { create: createWorktimeFacade };\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/facades/worktime_calendars.js\n// module id = 91\n// module chunks = 0","var dateHelper = require(\"../utils/date_helpers\"),\r\n\thelpers = require(\"../utils/helpers\");\r\n\r\nmodule.exports = function(gantt) {\r\n\r\n\tgantt.isUnscheduledTask = function (task) {\r\n\t\treturn (!!task.unscheduled || !task.start_date);\r\n\t};\r\n\r\n\tgantt._isAllowedUnscheduledTask = function (task) {\r\n\t\treturn !!(task.unscheduled && gantt.config.show_unscheduled);\r\n\t};\r\n\r\n\tgantt.isTaskVisible = function (id) {\r\n\t\tif (!this.isTaskExists(id))\r\n\t\t\treturn false;\r\n\r\n\t\tvar task = this.getTask(id),\r\n\t\t\ttype = this.getTaskType(task.type);\r\n\r\n\t\tif (!(gantt._isAllowedUnscheduledTask(task) || (task.start_date.valueOf() <= this._max_date.valueOf() && task.end_date.valueOf() >= this._min_date.valueOf()))){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn !!(gantt.getGlobalTaskIndex(id) >= 0);\r\n\t};\r\n\r\n\tgantt._defaultTaskDate = function (item, parent_id) {\r\n\t\tvar parent = (parent_id && parent_id != this.config.root_id) ? this.getTask(parent_id) : false,\r\n\t\t\tstartDate = '';\r\n\t\tif (parent) {\r\n\t\t\tstartDate = parent.start_date;\r\n\t\t} else {\r\n\t\t\tvar first = this.getTaskByIndex(0);\r\n\t\t\tstartDate = first ? (first.start_date ? first.start_date : (first.end_date ? this.calculateEndDate({\r\n\t\t\t\tstart_date: first.end_date,\r\n\t\t\t\tduration: -this.config.duration_step\r\n\t\t\t}) : '')) : this.config.start_date || this.getState().min_date;\r\n\t\t}\r\n\t\tgantt.assert(startDate, \"Invalid dates\");\r\n\t\treturn new Date(startDate);\r\n\t};\r\n\r\n\tgantt._set_default_task_timing = function (task) {\r\n\t\ttask.start_date = task.start_date || gantt._defaultTaskDate(task, this.getParent(task));\r\n\t\ttask.duration = task.duration || this.config.duration_step;\r\n\t\ttask.end_date = task.end_date || this.calculateEndDate(task);\r\n\t};\r\n\r\n\tgantt.createTask = function (item, parent, index) {\r\n\t\titem = item || {};\r\n\t\tif (!gantt.defined(item.id))\r\n\t\t\titem.id = gantt.uid();\r\n\r\n\t\tif (!item.start_date) {\r\n\t\t\titem.start_date = gantt._defaultTaskDate(item, parent);\r\n\t\t}\r\n\t\tif (item.text === undefined) {\r\n\t\t\titem.text = gantt.locale.labels.new_task;\r\n\t\t}\r\n\t\tif (item.duration === undefined) {\r\n\t\t\titem.duration = 1;\r\n\t\t}\r\n\r\n\t\tif (parent) {\r\n\t\t\tthis.setParent(item, parent, true);\r\n\t\t\tvar parentObj = this.getTask(parent);\r\n\t\t\tparentObj.$open = true;\r\n\t\t}\r\n\r\n\t\tif (!this.callEvent(\"onTaskCreated\", [item])) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (this.config.details_on_create) {\r\n\t\t\titem.$new = true;\r\n\t\t\tthis.silent(function(){\r\n\t\t\t\tgantt.$data.tasksStore.addItem(item, index);\r\n\t\t\t});\r\n\t\t\tthis.selectTask(item.id);\r\n\t\t\tthis.refreshData();\r\n\t\t\tthis.showLightbox(item.id);\r\n\t\t} else {\r\n\t\t\tif (this.addTask(item, parent, index)) {\r\n\t\t\t\tthis.showTask(item.id);\r\n\t\t\t\tthis.selectTask(item.id);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn item.id;\r\n\t};\r\n\r\n\tgantt._update_flags = function (oldid, newid) {\r\n\t\t//  TODO: need a proper way to update all possible flags\r\n\t\tvar store = gantt.$data.tasksStore;\r\n\t\tif (oldid === undefined) {\r\n\t\t\tthis._lightbox_id = null;\r\n\r\n\t\t\tstore.silent(function(){\r\n\t\t\t\tstore.unselect();\r\n\t\t\t});\r\n\r\n\t\t\tif (this._tasks_dnd && this._tasks_dnd.drag) {\r\n\t\t\t\tthis._tasks_dnd.drag.id = null;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (this._lightbox_id == oldid)\r\n\t\t\t\tthis._lightbox_id = newid;\r\n\r\n\t\t\t// TODO: probably can be removed\r\n\t\t\tif (store.getSelectedId() == oldid) {\r\n\t\t\t\tstore.silent(function(){\r\n\t\t\t\t\tstore.unselect(oldid);\r\n\t\t\t\t\tstore.select(newid);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (this._tasks_dnd && this._tasks_dnd.drag && this._tasks_dnd.drag.id == oldid) {\r\n\t\t\t\tthis._tasks_dnd.drag.id = newid;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._get_task_timing_mode = function (task, force) {\r\n\t\tvar task_type = this.getTaskType(task.type);\r\n\r\n\t\tvar state = {\r\n\t\t\ttype: task_type,\r\n\t\t\t$no_start: false,\r\n\t\t\t$no_end: false\r\n\t\t};\r\n\r\n\t\tif (!force && task_type == task.$rendered_type) {\r\n\t\t\tstate.$no_start = task.$no_start;\r\n\t\t\tstate.$no_end = task.$no_end;\r\n\t\t\treturn state;\r\n\t\t}\r\n\r\n\t\tif (task_type == this.config.types.project) {\r\n\t\t\t//project duration is always defined by children duration\r\n\t\t\tstate.$no_end = state.$no_start = true;\r\n\t\t} else if (task_type != this.config.types.milestone) {\r\n\t\t\t//tasks can have fixed duration, children duration(as projects), or one date fixed, and other defined by nested items\r\n\t\t\tstate.$no_end = !(task.end_date || task.duration);\r\n\t\t\tstate.$no_start = !task.start_date;\r\n\r\n\t\t\tif (this._isAllowedUnscheduledTask(task)) {\r\n\t\t\t\tstate.$no_end = state.$no_start = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn state;\r\n\t};\r\n\r\n\tgantt._init_task_timing = function (task) {\r\n\t\tvar task_mode = gantt._get_task_timing_mode(task, true);\r\n\r\n\t\tvar dirty = task.$rendered_type != task_mode.type;\r\n\r\n\t\tvar task_type = task_mode.type;\r\n\r\n\t\tif (dirty) {\r\n\t\t\ttask.$no_start = task_mode.$no_start;\r\n\t\t\ttask.$no_end = task_mode.$no_end;\r\n\t\t\ttask.$rendered_type = task_mode.type;\r\n\t\t}\r\n\r\n\t\tif (dirty && task_type != this.config.types.milestone) {\r\n\t\t\tif (task_type == this.config.types.project) {\r\n\t\t\t\t//project duration is always defined by children duration\r\n\t\t\t\tthis._set_default_task_timing(task);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (task_type == this.config.types.milestone) {\r\n\t\t\ttask.end_date = task.start_date;\r\n\t\t}\r\n\t\tif (task.start_date && task.end_date) {\r\n\t\t\ttask.duration = this.calculateDuration(task);\r\n\t\t}\r\n\t\ttask.duration = task.duration || 0;\r\n\t};\r\n\r\n\tgantt.isSummaryTask = function (task) {\r\n\t\tvar mode = gantt._get_task_timing_mode(task);\r\n\r\n\t\treturn !!(mode.$no_end || mode.$no_start);\r\n\t};\r\n\r\n// downward calculation of project duration\r\n\tgantt.resetProjectDates = function (task) {\r\n\t\tvar taskMode = this._get_task_timing_mode(task);\r\n\t\tif (taskMode.$no_end || taskMode.$no_start) {\r\n\t\t\tvar dates = this.getSubtaskDates(task.id);\r\n\t\t\tthis._assign_project_dates(task, dates.start_date, dates.end_date);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.getSubtaskDuration = function (task_id) {\r\n\t\tvar res = 0,\r\n\t\t\troot = task_id !== undefined ? task_id : gantt.config.root_id;\r\n\r\n\t\tthis.eachTask(function (child) {\r\n\t\t\tif (this.getTaskType(child.type) == gantt.config.types.project || this.isUnscheduledTask(child))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tres += child.duration;\r\n\t\t}, root);\r\n\r\n\t\treturn res;\r\n\t};\r\n\r\n\tgantt.getSubtaskDates = function (task_id) {\r\n\t\tvar min = null,\r\n\t\t\tmax = null,\r\n\t\t\troot = task_id !== undefined ? task_id : gantt.config.root_id;\r\n\r\n\t\tthis.eachTask(function (child) {\r\n\t\t\tif (this.getTaskType(child.type) == gantt.config.types.project || this.isUnscheduledTask(child))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif ((child.start_date && !child.$no_start) && (!min || min > child.start_date.valueOf()))\r\n\t\t\t\tmin = child.start_date.valueOf();\r\n\t\t\tif ((child.end_date && !child.$no_end) && (!max || max < child.end_date.valueOf()))\r\n\t\t\t\tmax = child.end_date.valueOf();\r\n\t\t}, root);\r\n\r\n\t\treturn {\r\n\t\t\tstart_date: min ? new Date(min) : null,\r\n\t\t\tend_date: max ? new Date(max) : null\r\n\t\t};\r\n\t};\r\n\r\n\tgantt._assign_project_dates = function (task, from, to) {\r\n\t\tvar taskTiming = this._get_task_timing_mode(task);\r\n\t\tif (taskTiming.$no_start) {\r\n\t\t\tif (from && from != Infinity) {\r\n\t\t\t\ttask.start_date = new Date(from);\r\n\t\t\t} else {\r\n\t\t\t\ttask.start_date = this._defaultTaskDate(task, this.getParent(task));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (taskTiming.$no_end) {\r\n\t\t\tif (to && to != -Infinity) {\r\n\t\t\t\ttask.end_date = new Date(to);\r\n\t\t\t} else {\r\n\t\t\t\ttask.end_date = this.calculateEndDate({\r\n\t\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\t\tduration: this.config.duration_step,\r\n\t\t\t\t\ttask: task\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (taskTiming.$no_start || taskTiming.$no_end) {\r\n\t\t\tthis._init_task_timing(task);\r\n\t\t}\r\n\t};\r\n\r\n// upward calculation of project duration\r\n\tgantt._update_parents = function (taskId, silent) {\r\n\t\tif (!taskId) return;\r\n\r\n\t\tvar task = this.getTask(taskId);\r\n\t\tvar pid = this.getParent(task);\r\n\r\n\t\tvar taskTiming = this._get_task_timing_mode(task);\r\n\r\n\t\tvar has_changed = true;\r\n\r\n\t\tif (taskTiming.$no_start || taskTiming.$no_end) {\r\n\t\t\tvar oldStart = task.start_date.valueOf(),\r\n\t\t\t\toldEnd = task.end_date.valueOf();\r\n\r\n\t\t\tgantt.resetProjectDates(task);\r\n\r\n\t\t\t// not refresh parent projects if dates hasn't changed\r\n\t\t\tif (oldStart == task.start_date.valueOf() && oldEnd == task.end_date.valueOf()) {\r\n\t\t\t\thas_changed = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (has_changed && !silent) {\r\n\t\t\t\tthis.refreshTask(task.id, true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tif (has_changed && pid && this.isTaskExists(pid)) {\r\n\t\t\tthis._update_parents(pid, silent);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.roundDate = function (config) {\r\n\t\tvar scale = gantt.getScale();\r\n\r\n\t\tif (dateHelper.isDate(config)) {\r\n\t\t\tconfig = {\r\n\t\t\t\tdate: config,\r\n\t\t\t\tunit: scale ? scale.unit : gantt.config.duration_unit,\r\n\t\t\t\tstep: scale ?  scale.step : gantt.config.duration_step\r\n\t\t\t};\r\n\t\t}\r\n\t\tvar date = config.date,\r\n\t\t\tsteps = config.step,\r\n\t\t\tunit = config.unit;\r\n\r\n\t\tif(!scale){\r\n\t\t\treturn date;\r\n\t\t}\r\n\r\n\t\tvar upper, lower, colIndex;\r\n\t\tif (unit == scale.unit && steps == scale.step &&\r\n\t\t\t+date >= +scale.min_date && +date <= +scale.max_date) {\r\n\t\t\t//find date in time scale config\r\n\t\t\tcolIndex = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\tif (!scale.trace_x[colIndex]) {\r\n\t\t\t\tcolIndex -= 1;// end of time scale\r\n\t\t\t\tif(scale.rtl){\r\n\t\t\t\t\tcolIndex = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlower = new Date(scale.trace_x[colIndex]);\r\n\t\t\tupper = gantt.date.add(lower, steps, unit);\r\n\t\t} else {\r\n\t\t\tcolIndex = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\tupper = gantt.date[unit + \"_start\"](new Date(scale.min_date));\r\n\t\t\tif (scale.trace_x[colIndex]) {\r\n\t\t\t\tupper = gantt.date[unit + \"_start\"](scale.trace_x[colIndex]);// end of time scale\r\n\t\t\t}\r\n\r\n\t\t\twhile (+upper < +date) {\r\n\t\t\t\tupper = gantt.date[unit + \"_start\"](gantt.date.add(upper, steps, unit));\r\n\r\n\t\t\t\tvar tzOffset = upper.getTimezoneOffset();\r\n\r\n\t\t\t\tupper = gantt._correct_dst_change(upper, tzOffset, upper, unit);\r\n\t\t\t\tif (gantt.date[unit + '_start'])\r\n\t\t\t\t\tupper = gantt.date[unit + '_start'](upper);\r\n\t\t\t}\r\n\r\n\t\t\tlower = gantt.date.add(upper, -1 * steps, unit);\r\n\r\n\t\t}\r\n\t\tif (config.dir && config.dir == 'future')\r\n\t\t\treturn upper;\r\n\t\tif (config.dir && config.dir == 'past')\r\n\t\t\treturn lower;\r\n\r\n\t\tif (Math.abs(date - lower) < Math.abs(upper - date)) {\r\n\t\t\treturn lower;\r\n\t\t} else {\r\n\t\t\treturn upper;\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tgantt.correctTaskWorkTime = function (task) {\r\n\t\tif (gantt.config.work_time && gantt.config.correct_work_time) {\r\n\t\t\tif (!this.isWorkTime(task.start_date, undefined, task)) {\r\n\t\t\t\ttask.start_date = this.getClosestWorkTime({date: task.start_date, dir: 'future', task: task});\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t} else if (!this.isWorkTime(new Date(+task.end_date - 1), undefined, task)) {\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskUpdate\", function (id, task) {\r\n\t\tgantt._init_task_timing(task);\r\n\t\treturn true;\r\n\t});\r\n\tgantt.attachEvent(\"onBeforeTaskAdd\", function (id, task) {\r\n\t\tgantt._init_task_timing(task);\r\n\t\treturn true;\r\n\t});\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/data.js\n// module id = 92\n// module chunks = 0","module.exports = function(gantt) {\r\n\tvar domHelpers = require(\"../utils/dom_helpers\"),\r\n\t\thelpers = require(\"../utils/helpers\");\r\n\r\n\tgantt._lightbox_methods = {};\r\n\tgantt._lightbox_template = \"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span></div><div class='gantt_cal_larea'></div>\";\r\n\r\n\r\n\t//TODO: gantt._lightbox_id is changed from data.js and accessed from autoscheduling, check if it can be removed from gantt object\r\n\tvar state = gantt.$services.getService(\"state\");\r\n\tstate.registerProvider(\"lightbox\", function(){\r\n\t\treturn {\r\n\t\t\tlightbox: gantt._lightbox_id\r\n\t\t};\r\n\t});\r\n\r\n\tgantt.showLightbox = function (id) {\r\n\t\tif (!id || gantt.isReadonly(this.getTask(id))) return;\r\n\t\tif (!this.callEvent(\"onBeforeLightbox\", [id])) return;\r\n\r\n\t\tvar task = this.getTask(id);\r\n\r\n\t\tvar box = this.getLightbox(this.getTaskType(task.type));\r\n\t\tthis._center_lightbox(box);\r\n\t\tthis.showCover();\r\n\t\tthis._fill_lightbox(id, box);\r\n\r\n\t\tthis._waiAria.lightboxVisibleAttr(box);\r\n\r\n\t\tthis.callEvent(\"onLightbox\", [id]);\r\n\t};\r\n\r\n\tfunction _is_chart_visible(gantt) {\r\n\t\tvar timeline = gantt.$ui.getView(\"timeline\");\r\n\t\tif(timeline && timeline.isVisible()){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tgantt._get_timepicker_step = function () {\r\n\t\tif (this.config.round_dnd_dates) {\r\n\t\t\tvar step;\r\n\t\t\tif (_is_chart_visible(this)) {\r\n\t\t\t\tvar scale = gantt.getScale();\r\n\t\t\t\tstep = (helpers.getSecondsInUnit(scale.unit) * scale.step) / 60;//timepicker step is measured in minutes\r\n\t\t\t}\r\n\r\n\t\t\tif(!step || step >= 60 * 24){\r\n\t\t\t\tstep = this.config.time_step;\r\n\t\t\t}\r\n\t\t\treturn step;\r\n\t\t}\r\n\t\treturn this.config.time_step;\r\n\t};\r\n\tgantt.getLabel = function (property, key) {\r\n\t\tvar sections = this._get_typed_lightbox_config();\r\n\t\tfor (var i = 0; i < sections.length; i++) {\r\n\t\t\tif (sections[i].map_to == property) {\r\n\t\t\t\tvar options = sections[i].options;\r\n\t\t\t\tfor (var j = 0; j < options.length; j++) {\r\n\t\t\t\t\tif (options[j].key == key) {\r\n\t\t\t\t\t\treturn options[j].label;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"\";\r\n\t};\r\n\r\n\tgantt.updateCollection = function (list_name, collection) {\r\n\t\tcollection = collection.slice(0);\r\n\t\tvar list = gantt.serverList(list_name);\r\n\t\tif (!list) return false;\r\n\t\tlist.splice(0, list.length);\r\n\t\tlist.push.apply(list, collection || []);\r\n\t\tgantt.resetLightbox();\r\n\t};\r\n\tgantt.getLightboxType = function () {\r\n\t\treturn this.getTaskType(this._lightbox_type);\r\n\t};\r\n\tgantt.getLightbox = function (type) {\r\n\t\tif (type === undefined)\r\n\t\t\ttype = this.getLightboxType();\r\n\r\n\t\tif (!this._lightbox || this.getLightboxType() != this.getTaskType(type)) {\r\n\t\t\tthis._lightbox_type = this.getTaskType(type);\r\n\t\t\tvar d = document.createElement(\"DIV\");\r\n\t\t\td.className = \"gantt_cal_light\";\r\n\r\n\t\t\tvar full_width = this._is_lightbox_timepicker();\r\n\t\t\tif (gantt.config.wide_form || full_width)\r\n\t\t\t\td.className += \" gantt_cal_light_wide\";\r\n\r\n\t\t\tif (full_width) {\r\n\t\t\t\tgantt.config.wide_form = true;\r\n\t\t\t\td.className += \" gantt_cal_light_full\";\r\n\t\t\t}\r\n\r\n\r\n\t\t\td.style.visibility = \"hidden\";\r\n\r\n\t\t\tvar html = this._lightbox_template;\r\n\r\n\t\t\tvar ariaAttr;\r\n\t\t\tvar buttons = this.config.buttons_left;\r\n\t\t\tfor (var i = 0; i < buttons.length; i++) {\r\n\t\t\t\t// needed to migrate from 'dhx_something' to 'gantt_something' naming in a lightbox\r\n\t\t\t\tvar button = this.config._migrate_buttons[buttons[i]] ? this.config._migrate_buttons[buttons[i]] : buttons[i];\r\n\r\n\t\t\t\tariaAttr = this._waiAria.lightboxButtonAttrString(button);\r\n\t\t\t\thtml += \"<div \" + ariaAttr + \" class='gantt_btn_set gantt_left_btn_set \" + button + \"_set'><div dhx_button='1' data-dhx-button='1' class='\" + button + \"'></div><div>\" + this.locale.labels[button] + \"</div></div>\";\r\n\r\n\t\t\t}\r\n\t\t\tbuttons = this.config.buttons_right;\r\n\t\t\tfor (var i = 0; i < buttons.length; i++) {\r\n\t\t\t\tvar button = this.config._migrate_buttons[buttons[i]] ? this.config._migrate_buttons[buttons[i]] : buttons[i];\r\n\t\t\t\tariaAttr = this._waiAria.lightboxButtonAttrString(button);\r\n\r\n\t\t\t\thtml += \"<div \" + ariaAttr + \" class='gantt_btn_set gantt_right_btn_set \" + button + \"_set' style='float:right;'><div dhx_button='1' data-dhx-button='1' class='\" + button + \"'></div><div>\" + this.locale.labels[button] + \"</div></div>\";\r\n\r\n\t\t\t}\r\n\t\t\thtml += \"</div>\";\r\n\t\t\td.innerHTML = html;\r\n\r\n\t\t\tgantt._waiAria.lightboxAttr(d);\r\n\r\n\t\t\tif (gantt.config.drag_lightbox) {\r\n\t\t\t\td.firstChild.onmousedown = gantt._ready_to_dnd;\r\n\t\t\t\td.firstChild.onselectstart = function () {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t};\r\n\t\t\t\td.firstChild.style.cursor = \"pointer\";\r\n\t\t\t\tgantt._init_dnd_events();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdocument.body.insertBefore(d, document.body.firstChild);\r\n\t\t\tthis._lightbox = d;\r\n\r\n\t\t\tvar sns = this._get_typed_lightbox_config(type);\r\n\t\t\thtml = this._render_sections(sns);\r\n\r\n\t\t\tvar ds = d.getElementsByTagName(\"div\");\r\n\t\t\tfor (var i = 0; i < ds.length; i++) {\r\n\t\t\t\tvar t_ds = ds[i];\r\n\t\t\t\tif (t_ds.className == \"gantt_cal_larea\") {\r\n\t\t\t\t\tt_ds.innerHTML = html;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// bind labels to lightbox inputs\r\n\t\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\t\tvar section = sns[i];\r\n\t\t\t\tif (!section.id || !document.getElementById(section.id))\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tvar labelBlock = document.getElementById(section.id);\r\n\t\t\t\tvar label = labelBlock.querySelector(\"label\");\r\n\t\t\t\tvar inputBlock = labelBlock.nextSibling;\r\n\t\t\t\tif (!inputBlock)\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tvar input = inputBlock.querySelector(\"input, select, textarea\");\r\n\t\t\t\tif (input) {\r\n\t\t\t\t\tsection.inputId = input.id || \"input_\" + gantt.uid();\r\n\t\t\t\t\tif (!input.id)\r\n\t\t\t\t\t\tinput.id = section.inputId;\r\n\r\n\t\t\t\t\tlabel.setAttribute(\"for\", section.inputId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//sizes\r\n\t\t\tthis.resizeLightbox();\r\n\r\n\t\t\tthis._init_lightbox_events(this);\r\n\t\t\td.style.display = \"none\";\r\n\t\t\td.style.visibility = \"visible\";\r\n\t\t}\r\n\t\treturn this._lightbox;\r\n\t};\r\n\r\n\tgantt._render_sections = function (sns) {\r\n\t\tvar html = \"\";\r\n\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\tvar block = this.form_blocks[sns[i].type];\r\n\t\t\tif (!block) continue; //ignore incorrect blocks\r\n\t\t\tsns[i].id = \"area_\" + this.uid();\r\n\r\n\t\t\tvar display = sns[i].hidden ? \" style='display:none'\" : \"\";\r\n\t\t\tvar button = \"\";\r\n\t\t\tif (sns[i].button) {\r\n\t\t\t\tbutton = \"<div class='gantt_custom_button' data-index='\" + i + \"'><div class='gantt_custom_button_\" + sns[i].button + \"'></div><div class='gantt_custom_button_label'>\" + this.locale.labels[\"button_\" + sns[i].button] + \"</div></div>\";\r\n\t\t\t}\r\n\t\t\tif (this.config.wide_form) {\r\n\t\t\t\thtml += \"<div class='gantt_wrap_section' \" + display + \">\";\r\n\t\t\t}\r\n\t\t\thtml += \"<div id='\" + sns[i].id + \"' class='gantt_cal_lsection'><label>\" + button + this.locale.labels[\"section_\" + sns[i].name] + \"</label></div>\" + block.render.call(this, sns[i]);\r\n\t\t\thtml += \"</div>\";\r\n\t\t}\r\n\t\treturn html;\r\n\t};\r\n\r\n\r\n\tgantt.resizeLightbox = function () {\r\n\t\tvar d = this._lightbox;\r\n\t\tif (!d) return;\r\n\r\n\t\tvar con = d.childNodes[1];\r\n\t\tcon.style.height = \"0px\";\r\n\t\tcon.style.height = con.scrollHeight + \"px\";\r\n\t\td.style.height = con.scrollHeight + this.config.lightbox_additional_height + \"px\";\r\n\t\tcon.style.height = con.scrollHeight + \"px\"; //it is incredible , how ugly IE can be\r\n\r\n\r\n\t};\r\n\r\n\tgantt._center_lightbox = function (box) {\r\n\t\tif (box) {\r\n\t\t\tbox.style.display = \"block\";\r\n\r\n\t\t\tvar scroll_top = window.pageYOffset || document.body.scrollTop || document.documentElement.scrollTop;\r\n\t\t\tvar scroll_left = window.pageXOffset || document.body.scrollLeft || document.documentElement.scrollLeft;\r\n\r\n\t\t\tvar view_height = window.innerHeight || document.documentElement.clientHeight;\r\n\r\n\t\t\tif (scroll_top) // if vertical scroll on window\r\n\t\t\t\tbox.style.top = Math.round(scroll_top + Math.max((view_height - box.offsetHeight) / 2, 0)) + \"px\";\r\n\t\t\telse // vertical scroll on body\r\n\t\t\t\tbox.style.top = Math.round(Math.max(((view_height - box.offsetHeight) / 2), 0) + 9) + \"px\"; // +9 for compatibility with auto tests\r\n\r\n\t\t\t// not quite accurate but used for compatibility reasons\r\n\t\t\tif (document.documentElement.scrollWidth > document.body.offsetWidth) // if horizontal scroll on the window\r\n\t\t\t\tbox.style.left = Math.round(scroll_left + (document.body.offsetWidth - box.offsetWidth) / 2) + \"px\";\r\n\t\t\telse // horizontal scroll on the body\r\n\t\t\t\tbox.style.left = Math.round((document.body.offsetWidth - box.offsetWidth) / 2) + \"px\";\r\n\t\t}\r\n\t};\r\n\tgantt.showCover = function () {\r\n\t\tif (this._cover) return;\r\n\r\n\t\tthis._cover = document.createElement(\"DIV\");\r\n\t\tthis._cover.className = \"gantt_cal_cover\";\r\n\t\tvar _document_height = ((document.height !== undefined) ? document.height : document.body.offsetHeight);\r\n\t\tvar _scroll_height = ((document.documentElement) ? document.documentElement.scrollHeight : 0);\r\n\t\tthis._cover.style.height = Math.max(_document_height, _scroll_height) + 'px';\r\n\t\tdocument.body.appendChild(this._cover);\r\n\t};\r\n\r\n\r\n\tgantt._init_lightbox_events = function () {\r\n\t\tgantt.lightbox_events = {};\r\n\r\n\r\n\t\tgantt.lightbox_events[\"gantt_save_btn\"] = function (e) {\r\n\t\t\tgantt._save_lightbox();\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events[\"gantt_delete_btn\"] = function (e) {\r\n\t\t\tif (!gantt.callEvent(\"onLightboxDelete\", [gantt._lightbox_id]))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif (gantt.isTaskExists(gantt._lightbox_id)) {\r\n\t\t\t\tgantt.$click.buttons[\"delete\"](gantt._lightbox_id);\r\n\t\t\t} else {\r\n\t\t\t\tgantt.hideLightbox();\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events[\"gantt_cancel_btn\"] = function (e) {\r\n\t\t\tgantt._cancel_lightbox();\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events[\"default\"] = function (e, src) {\r\n\t\t\tif (src.getAttribute(\"data-dhx-button\")) {\r\n\t\t\t\tgantt.callEvent(\"onLightboxButton\", [src.className, src, e]);\r\n\t\t\t} else {\r\n\t\t\t\tvar index, block, sec;\r\n\r\n\t\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\t\tif (className.indexOf(\"gantt_custom_button\") != -1) {\r\n\t\t\t\t\tif (className.indexOf(\"gantt_custom_button_\") != -1) {\r\n\t\t\t\t\t\tindex = src.parentNode.getAttribute(\"data-index\");\r\n\t\t\t\t\t\tsec = src;\r\n\t\t\t\t\t\twhile (sec && domHelpers.getClassName(sec).indexOf(\"gantt_cal_lsection\") == -1) {\r\n\t\t\t\t\t\t\tsec = sec.parentNode;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tindex = src.getAttribute(\"data-index\");\r\n\t\t\t\t\t\tsec = src.parentNode;\r\n\t\t\t\t\t\tsrc = src.firstChild;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar sections = gantt._get_typed_lightbox_config();\r\n\r\n\t\t\t\tif (index) {\r\n\t\t\t\t\tindex = index * 1;\r\n\t\t\t\t\tblock = gantt.form_blocks[sections[index * 1].type];\r\n\t\t\t\t\tblock.button_click(index, src, sec, sec.nextSibling);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.event(gantt.getLightbox(), \"click\", function (e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar src = e.target ? e.target : e.srcElement;\r\n\r\n\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\tif (!className) {\r\n\t\t\t\tsrc = src.previousSibling;\r\n\t\t\t\tclassName = domHelpers.getClassName(src);\r\n\t\t\t}\r\n\t\t\tif (src && className && className.indexOf(\"gantt_btn_set\") === 0) {\r\n\t\t\t\tsrc = src.firstChild;\r\n\t\t\t\tclassName = domHelpers.getClassName(src);\r\n\t\t\t}\r\n\t\t\tif (src && className) {\r\n\t\t\t\tvar func = gantt.defined(gantt.lightbox_events[src.className]) ? gantt.lightbox_events[src.className] : gantt.lightbox_events[\"default\"];\r\n\t\t\t\treturn func(e, src);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\tgantt.getLightbox().onkeydown = function (e) {\r\n\t\t\tvar event = e || window.event;\r\n\t\t\tvar target = e.target || e.srcElement;\r\n\t\t\tvar buttonTarget = !!(domHelpers.getClassName(target).indexOf(\"gantt_btn_set\") > -1);\r\n\r\n\t\t\tswitch ((e || event).keyCode) {\r\n\t\t\t\tcase 32: {//space\r\n\t\t\t\t\tif ((e || event).shiftKey) return;\r\n\t\t\t\t\tif (buttonTarget && target.click) {\r\n\t\t\t\t\t\ttarget.click();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tcase gantt.keys.edit_save:\r\n\t\t\t\t\tif ((e || event).shiftKey) return;\r\n\t\t\t\t\tif (buttonTarget && target.click) {\r\n\t\t\t\t\t\ttarget.click();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tgantt._save_lightbox();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase gantt.keys.edit_cancel:\r\n\t\t\t\t\tgantt._cancel_lightbox();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\tgantt._cancel_lightbox = function () {\r\n\t\tvar task = this.getLightboxValues();\r\n\t\tthis.callEvent(\"onLightboxCancel\", [this._lightbox_id, task.$new]);\r\n\t\tif (gantt.isTaskExists(task.id) && task.$new) {\r\n\t\t\tthis.silent(function(){\r\n\t\t\t\tgantt.$data.tasksStore.removeItem(task.id);\r\n\t\t\t\tgantt._update_flags(task.id, null);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.refreshData();\r\n\t\tthis.hideLightbox();\r\n\t};\r\n\r\n\tgantt._save_lightbox = function () {\r\n\t\tvar task = this.getLightboxValues();\r\n\t\tif (!this.callEvent(\"onLightboxSave\", [this._lightbox_id, task, !!task.$new]))\r\n\t\t\treturn;\r\n\r\n\t\tif (task.$new) {\r\n\t\t\tdelete task.$new;\r\n\t\t\tthis.addTask(task);\r\n\t\t}else if(this.isTaskExists(task.id)){\r\n\t\t\tthis.mixin(this.getTask(task.id), task, true);\r\n\t\t\tthis.refreshTask(task.id);\r\n\t\t\tthis.updateTask(task.id);\r\n\t\t}\r\n\t\tthis.refreshData();\r\n\r\n\t\t// TODO: do we need any blockable events here to prevent closing lightbox?\r\n\t\tthis.hideLightbox();\r\n\t};\r\n\r\n\tgantt._resolve_default_mapping = function (section) {\r\n\t\tvar mapping = section.map_to;\r\n\t\tvar time_controls = {\"time\": true, \"time_optional\": true, \"duration\": true, \"duration_optional\": true};\r\n\t\tif (time_controls[section.type]) {\r\n\t\t\tif (section.map_to == 'auto') {\r\n\t\t\t\tmapping = {start_date: \"start_date\", end_date: \"end_date\", duration: \"duration\"};\r\n\t\t\t} else if (typeof(section.map_to) === \"string\") {\r\n\t\t\t\tmapping = {start_date: section.map_to};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn mapping;\r\n\t};\r\n\r\n\tgantt.getLightboxValues = function () {\r\n\t\tvar task = {};\r\n\r\n\t\tif (gantt.isTaskExists(this._lightbox_id)) {\r\n\t\t\ttask = this.mixin({}, this.getTask(this._lightbox_id));\r\n\t\t}\r\n\r\n\t\tvar sns = this._get_typed_lightbox_config();\r\n\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\tvar node = document.getElementById(sns[i].id);\r\n\t\t\tnode = (node ? node.nextSibling : node);\r\n\t\t\tvar block = this.form_blocks[sns[i].type];\r\n\t\t\tif (!block) continue;\r\n\t\t\tvar res = block.get_value.call(this, node, task, sns[i]);\r\n\t\t\tvar map_to = gantt._resolve_default_mapping(sns[i]);\r\n\t\t\tif (typeof map_to == \"string\" && map_to != \"auto\") {\r\n\t\t\t\ttask[map_to] = res;\r\n\t\t\t} else if (typeof map_to == \"object\") {\r\n\t\t\t\tfor (var property in map_to) {\r\n\t\t\t\t\tif (map_to[property])\r\n\t\t\t\t\t\ttask[map_to[property]] = res[property];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn task;\r\n\t};\r\n\r\n\r\n\tgantt.hideLightbox = function () {\r\n\t\tvar box = this.getLightbox();\r\n\t\tif (box) box.style.display = \"none\";\r\n\r\n\t\tthis._waiAria.lightboxHiddenAttr(box);\r\n\t\tthis._lightbox_id = null;\r\n\r\n\t\tthis.hideCover();\r\n\t\tthis.callEvent(\"onAfterLightbox\", []);\r\n\t};\r\n\tgantt.hideCover = function () {\r\n\t\tif (this._cover)\r\n\t\t\tthis._cover.parentNode.removeChild(this._cover);\r\n\t\tthis._cover = null;\r\n\t};\r\n\r\n\tgantt.resetLightbox = function () {\r\n\t\tif (gantt._lightbox && !gantt._custom_lightbox)\r\n\t\t\tgantt._lightbox.parentNode.removeChild(gantt._lightbox);\r\n\t\tgantt._lightbox = null;\r\n\t};\r\n\tgantt._set_lightbox_values = function (data, box) {\r\n\t\tvar task = data;\r\n\t\tvar s = box.getElementsByTagName(\"span\");\r\n\t\tvar lightboxHeader = [];\r\n\t\tif (gantt.templates.lightbox_header) {\r\n\t\t\tlightboxHeader.push(\"\");\r\n\t\t\tlightboxHeader.push(gantt.templates.lightbox_header(task.start_date, task.end_date, task));\r\n\t\t\ts[1].innerHTML = \"\";\r\n\t\t\ts[2].innerHTML = gantt.templates.lightbox_header(task.start_date, task.end_date, task);\r\n\t\t} else {\r\n\t\t\tlightboxHeader.push(this.templates.task_time(task.start_date, task.end_date, task));\r\n\t\t\tlightboxHeader.push((this.templates.task_text(task.start_date, task.end_date, task) || \"\").substr(0, 70)); //IE6 fix\r\n\t\t\ts[1].innerHTML = this.templates.task_time(task.start_date, task.end_date, task);\r\n\t\t\ts[2].innerHTML = (this.templates.task_text(task.start_date, task.end_date, task) || \"\").substr(0, 70); //IE6 fix\r\n\t\t}\r\n\t\ts[1].innerHTML = lightboxHeader[0];\r\n\t\ts[2].innerHTML = lightboxHeader[1];\r\n\r\n\t\tgantt._waiAria.lightboxHeader(box, lightboxHeader.join(\" \"));\r\n\r\n\t\tvar sns = this._get_typed_lightbox_config(this.getLightboxType());\r\n\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\tvar section = sns[i];\r\n\r\n\t\t\tif (!this.form_blocks[section.type]) {\r\n\t\t\t\tcontinue;//skip incorrect sections, same check is done during rendering\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvar node = document.getElementById(section.id).nextSibling;\r\n\t\t\tvar block = this.form_blocks[section.type];\r\n\t\t\tvar map_to = gantt._resolve_default_mapping(sns[i]);\r\n\t\t\tvar value = this.defined(task[map_to]) ? task[map_to] : section.default_value;\r\n\t\t\tblock.set_value.call(gantt, node, value, task, section);\r\n\r\n\t\t\tif (section.focus)\r\n\t\t\t\tblock.focus.call(gantt, node);\r\n\t\t}\r\n\t\tif (data.id)\r\n\t\t\tgantt._lightbox_id = data.id;\r\n\t};\r\n\tgantt._fill_lightbox = function (id, box) {\r\n\t\tvar task = this.getTask(id);\r\n\t\tthis._set_lightbox_values(task, box);\r\n\t};\r\n\r\n\r\n\tgantt.getLightboxSection = function (name) {\r\n\t\tvar config = this._get_typed_lightbox_config();\r\n\t\tvar i = 0;\r\n\t\tfor (i; i < config.length; i++)\r\n\t\t\tif (config[i].name == name)\r\n\t\t\t\tbreak;\r\n\t\tvar section = config[i];\r\n\t\tif (!section)\r\n\t\t\treturn null;\r\n\r\n\t\tif (!this._lightbox)\r\n\t\t\tthis.getLightbox();\r\n\t\tvar header = document.getElementById(section.id);\r\n\t\tvar node = header.nextSibling;\r\n\r\n\t\tvar result = {\r\n\t\t\tsection: section,\r\n\t\t\theader: header,\r\n\t\t\tnode: node,\r\n\t\t\tgetValue: function (ev) {\r\n\t\t\t\treturn gantt.form_blocks[section.type].get_value.call(gantt, node, (ev || {}), section);\r\n\t\t\t},\r\n\t\t\tsetValue: function (value, ev) {\r\n\t\t\t\treturn gantt.form_blocks[section.type].set_value.call(gantt, node, value, (ev || {}), section);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar handler = this._lightbox_methods[\"get_\" + section.type + \"_control\"];\r\n\t\treturn handler ? handler(result) : result;\r\n\t};\r\n\r\n\tgantt._lightbox_methods.get_template_control = function (result) {\r\n\t\tresult.control = result.node;\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_select_control = function (result) {\r\n\t\tresult.control = result.node.getElementsByTagName('select')[0];\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_textarea_control = function (result) {\r\n\t\tresult.control = result.node.getElementsByTagName('textarea')[0];\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_time_control = function (result) {\r\n\t\tresult.control = result.node.getElementsByTagName('select'); // array\r\n\t\treturn result;\r\n\t};\r\n\r\n\r\n\tgantt._init_dnd_events = function () {\r\n\t\tthis.event(document.body, \"mousemove\", gantt._move_while_dnd);\r\n\t\tthis.event(document.body, \"mouseup\", gantt._finish_dnd);\r\n\t\tgantt._init_dnd_events = function () {\r\n\t\t};\r\n\t};\r\n\tgantt._move_while_dnd = function (e) {\r\n\t\tif (gantt._dnd_start_lb) {\r\n\t\t\tif (!document.gantt_unselectable) {\r\n\t\t\t\tdocument.body.className += \" gantt_unselectable\";\r\n\t\t\t\tdocument.gantt_unselectable = true;\r\n\t\t\t}\r\n\t\t\tvar lb = gantt.getLightbox();\r\n\t\t\tvar now = (e && e.target) ? [e.pageX, e.pageY] : [event.clientX, event.clientY];\r\n\t\t\tlb.style.top = gantt._lb_start[1] + now[1] - gantt._dnd_start_lb[1] + \"px\";\r\n\t\t\tlb.style.left = gantt._lb_start[0] + now[0] - gantt._dnd_start_lb[0] + \"px\";\r\n\t\t}\r\n\t};\r\n\tgantt._ready_to_dnd = function (e) {\r\n\t\tvar lb = gantt.getLightbox();\r\n\t\tgantt._lb_start = [parseInt(lb.style.left, 10), parseInt(lb.style.top, 10)];\r\n\t\tgantt._dnd_start_lb = (e && e.target) ? [e.pageX, e.pageY] : [event.clientX, event.clientY];\r\n\t};\r\n\tgantt._finish_dnd = function () {\r\n\t\tif (gantt._lb_start) {\r\n\t\t\tgantt._lb_start = gantt._dnd_start_lb = false;\r\n\t\t\tdocument.body.className = document.body.className.replace(\" gantt_unselectable\", \"\");\r\n\t\t\tdocument.gantt_unselectable = false;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt._focus = function (node, select) {\r\n\t\tif (node && node.focus) {\r\n\t\t\tif (gantt.config.touch) {\r\n\t\t\t\t//do not focus editor, to prevent auto-zoom\r\n\t\t\t} else {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (select && node.select) node.select();\r\n\t\t\t\t\tnode.focus();\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt.form_blocks = {\r\n\t\tgetTimePicker: function (sns, hidden) {\r\n\t\t\tvar time_format = sns.time_format;\r\n\t\t\tif (!time_format) {\r\n\t\t\t\t// default order\r\n\t\t\t\tvar time_format = [\"%d\", \"%m\", \"%Y\"];\r\n\r\n\t\t\t\tvar scale = gantt.getScale();\r\n\t\t\t\tvar unit = scale ? scale.unit : gantt.config.duration_unit;\r\n\r\n\t\t\t\tif (helpers.getSecondsInUnit(unit) < helpers.getSecondsInUnit(\"day\")) {\r\n\t\t\t\t\ttime_format.push(\"%H:%i\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// map: default order => real one\r\n\t\t\tsns._time_format_order = {size: 0};\r\n\r\n\r\n\t\t\tvar cfg = this.config;\r\n\t\t\tvar dt = this.date.date_part(new Date(gantt._min_date.valueOf()));\r\n\t\t\tvar last = 24 * 60, first = 0;\r\n\t\t\tif (gantt.config.limit_time_select) {\r\n\t\t\t\tlast = 60 * cfg.last_hour + 1;\r\n\t\t\t\tfirst = 60 * cfg.first_hour;\r\n\t\t\t\tdt.setHours(cfg.first_hour);\r\n\t\t\t}\r\n\t\t\tvar html = \"\";\r\n\r\n\t\t\tfor (var p = 0; p < time_format.length; p++) {\r\n\t\t\t\tvar time_option = time_format[p];\r\n\r\n\t\t\t\t// adding spaces between selects\r\n\t\t\t\tif (p > 0) {\r\n\t\t\t\t\thtml += \" \";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar options = '';\r\n\t\t\t\tswitch (time_option) {\r\n\t\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\t\tsns._time_format_order[2] = p;\r\n\t\t\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t\t\t//year\r\n\r\n\t\t\t\t\t\tvar range, offset, start_year, end_year;\r\n\r\n\t\t\t\t\t\tif (sns.year_range) {\r\n\t\t\t\t\t\t\tif (!isNaN(sns.year_range)) {\r\n\t\t\t\t\t\t\t\trange = sns.year_range;\r\n\t\t\t\t\t\t\t} else if (sns.year_range.push) {\r\n\t\t\t\t\t\t\t\t// if\r\n\t\t\t\t\t\t\t\tstart_year = sns.year_range[0];\r\n\t\t\t\t\t\t\t\tend_year = sns.year_range[1];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\trange = range || 10;\r\n\t\t\t\t\t\toffset = offset || Math.floor(range / 2);\r\n\t\t\t\t\t\tstart_year = start_year || dt.getFullYear() - offset;\r\n\t\t\t\t\t\tend_year = end_year || start_year + range;\r\n\r\n\r\n\t\t\t\t\t\tfor (var i = start_year; i < end_year; i++)\r\n\t\t\t\t\t\t\toptions += \"<option value='\" + (i) + \"'>\" + (i) + \"</option>\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%m\":\r\n\t\t\t\t\t\tsns._time_format_order[1] = p;\r\n\t\t\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t\t\t//month\r\n\t\t\t\t\t\tfor (var i = 0; i < 12; i++)\r\n\t\t\t\t\t\t\toptions += \"<option value='\" + i + \"'>\" + this.locale.date.month_full[i] + \"</option>\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%d\":\r\n\t\t\t\t\t\tsns._time_format_order[0] = p;\r\n\t\t\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t\t\t//days\r\n\t\t\t\t\t\tfor (var i = 1; i < 32; i++)\r\n\t\t\t\t\t\t\toptions += \"<option value='\" + i + \"'>\" + i + \"</option>\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%H:%i\":\r\n\t\t\t\t\t\t//  var last = 24*60, first = 0;\r\n\t\t\t\t\t\tsns._time_format_order[3] = p;\r\n\t\t\t\t\t\tsns._time_format_order.size++;\r\n\t\t\t\t\t\t//hours\r\n\t\t\t\t\t\tvar i = first;\r\n\t\t\t\t\t\tvar tdate = dt.getDate();\r\n\t\t\t\t\t\tsns._time_values = [];\r\n\r\n\t\t\t\t\t\twhile (i < last) {\r\n\t\t\t\t\t\t\tvar time = this.templates.time_picker(dt);\r\n\t\t\t\t\t\t\toptions += \"<option value='\" + i + \"'>\" + time + \"</option>\";\r\n\t\t\t\t\t\t\tsns._time_values.push(i);\r\n\t\t\t\t\t\t\tdt.setTime(dt.valueOf() + this._get_timepicker_step() * 60 * 1000);\r\n\t\t\t\t\t\t\tvar diff = (dt.getDate() != tdate) ? 1 : 0; // moved or not to the next day\r\n\t\t\t\t\t\t\ti = diff * 24 * 60 + dt.getHours() * 60 + dt.getMinutes();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (options) {\r\n\r\n\t\t\t\t\tvar ariaAttrs = gantt._waiAria.lightboxSelectAttrString(time_option);\r\n\r\n\t\t\t\t\tvar readonly = sns.readonly ? \"disabled='disabled'\" : \"\";\r\n\t\t\t\t\tvar display = hidden ? \" style='display:none' \" : \"\";\r\n\t\t\t\t\thtml += \"<select \" + readonly + display + ariaAttrs + \">\" + options + \"</select>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn html;\r\n\t\t},\r\n\t\t_fill_lightbox_select: function (s, i, d, map, cfg) {\r\n\t\t\ts[i + map[0]].value = d.getDate();\r\n\t\t\ts[i + map[1]].value = d.getMonth();\r\n\t\t\ts[i + map[2]].value = d.getFullYear();\r\n\t\t\tif (gantt.defined(map[3])) {\r\n\t\t\t\tvar v = d.getHours() * 60 + d.getMinutes();\r\n\t\t\t\tv = Math.round(v / gantt._get_timepicker_step()) * gantt._get_timepicker_step();\r\n\t\t\t\tvar input = s[i + map[3]];\r\n\t\t\t\tinput.value = v;\r\n\t\t\t\t//in case option not shown\r\n\t\t\t\tinput.setAttribute('data-value', v);\r\n\t\t\t}\r\n\t\t},\r\n\t\ttemplate: {\r\n\t\t\trender: function (sns) {\r\n\t\t\t\tvar height = (sns.height || \"30\") + \"px\";\r\n\t\t\t\treturn \"<div class='gantt_cal_ltext gantt_cal_template' style='height:\" + height + \";'></div>\";\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev, config) {\r\n\t\t\t\tnode.innerHTML = value || \"\";\r\n\t\t\t},\r\n\t\t\tget_value: function (node, ev, config) {\r\n\t\t\t\treturn node.innerHTML || \"\";\r\n\t\t\t},\r\n\t\t\tfocus: function (node) {\r\n\t\t\t}\r\n\t\t},\r\n\t\ttextarea: {\r\n\t\t\trender: function (sns) {\r\n\t\t\t\tvar height = (sns.height || \"130\") + \"px\";\r\n\t\t\t\treturn \"<div class='gantt_cal_ltext' style='height:\" + height + \";'><textarea></textarea></div>\";\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev) {\r\n\t\t\t\tthis.form_blocks.textarea._get_input(node).value = value || \"\";\r\n\t\t\t},\r\n\t\t\tget_value: function (node, ev) {\r\n\t\t\t\treturn this.form_blocks.textarea._get_input(node).value;\r\n\t\t\t},\r\n\t\t\tfocus: function (node) {\r\n\t\t\t\tvar a = this.form_blocks.textarea._get_input(node);\r\n\t\t\t\tgantt._focus(a, true);\r\n\t\t\t},\r\n\t\t\t_get_input: function (node) {\r\n\t\t\t\treturn node.querySelector(\"textarea\");\r\n\t\t\t}\r\n\t\t},\r\n\t\tselect: {\r\n\t\t\trender: function (sns) {\r\n\t\t\t\tvar height = (sns.height || \"23\") + \"px\";\r\n\t\t\t\tvar html = \"<div class='gantt_cal_ltext' style='height:\" + height + \";'><select style='width:100%;'>\";\r\n\t\t\t\tfor (var i = 0; i < sns.options.length; i++)\r\n\t\t\t\t\thtml += \"<option value='\" + sns.options[i].key + \"'>\" + sns.options[i].label + \"</option>\";\r\n\t\t\t\thtml += \"</select></div>\";\r\n\t\t\t\treturn html;\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev, sns) {\r\n\t\t\t\tvar select = node.firstChild;\r\n\t\t\t\tif (!select._dhx_onchange && sns.onchange) {\r\n\t\t\t\t\tselect.onchange = sns.onchange;\r\n\t\t\t\t\tselect._dhx_onchange = true;\r\n\t\t\t\t}\r\n\t\t\t\tif (typeof value == \"undefined\")\r\n\t\t\t\t\tvalue = (select.options[0] || {}).value;\r\n\t\t\t\tselect.value = value || \"\";\r\n\t\t\t},\r\n\t\t\tget_value: function (node, ev) {\r\n\t\t\t\treturn node.firstChild.value;\r\n\t\t\t},\r\n\t\t\tfocus: function (node) {\r\n\t\t\t\tvar a = node.firstChild;\r\n\t\t\t\tgantt._focus(a, true);\r\n\t\t\t}\r\n\t\t},\r\n\t\ttime: {\r\n\t\t\trender: function (sns) {\r\n\t\t\t\tvar time = this.form_blocks.getTimePicker.call(this, sns);\r\n\t\t\t\tvar parts = [\"<div style='height:\" + (sns.height || 30) + \"px;padding-top:0px;font-size:inherit;text-align:center;' class='gantt_section_time'>\"];\r\n\t\t\t\tparts.push(time);\r\n\r\n\t\t\t\tif (sns.single_date) {\r\n\t\t\t\t\ttime = this.form_blocks.getTimePicker.call(this, sns, true);\r\n\t\t\t\t\tparts.push(\"<span></span>\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tparts.push(\"<span style='font-weight:normal; font-size:10pt;'> &nbsp;&ndash;&nbsp; </span>\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tparts.push(time);\r\n\t\t\t\tparts.push(\"</div>\");\r\n\t\t\t\treturn parts.join('');\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev, config) {\r\n\t\t\t\tvar cfg = config;\r\n\t\t\t\tvar s = node.getElementsByTagName(\"select\");\r\n\r\n\t\t\t\tvar map = config._time_format_order;\r\n\t\t\t\tvar map_size = config._time_format_size;\r\n\r\n\t\t\t\tif (cfg.auto_end_date) {\r\n\t\t\t\t\tvar _update_lightbox_select = function () {\r\n\t\t\t\t\t\tstart_date = new Date(s[map[2]].value, s[map[1]].value, s[map[0]].value, 0, 0);\r\n\t\t\t\t\t\tend_date = gantt.calculateEndDate({start_date: start_date, duration: 1, task: ev});\r\n\t\t\t\t\t\tthis.form_blocks._fill_lightbox_select(s, map.size, end_date, map, cfg);\r\n\t\t\t\t\t};\r\n\t\t\t\t\tfor (var i = 0; i < 4; i++) {\r\n\t\t\t\t\t\ts[i].onchange = _update_lightbox_select;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar mapping = gantt._resolve_default_mapping(config);\r\n\r\n\t\t\t\tif (typeof(mapping) === \"string\") mapping = {start_date: mapping};\r\n\r\n\t\t\t\tvar start_date = ev[mapping.start_date] || new Date();\r\n\t\t\t\tvar end_date = ev[mapping.end_date] || gantt.calculateEndDate({\r\n\t\t\t\t\tstart_date: start_date,\r\n\t\t\t\t\tduration: 1,\r\n\t\t\t\t\ttask: ev\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.form_blocks._fill_lightbox_select(s, 0, start_date, map, cfg);\r\n\t\t\t\tthis.form_blocks._fill_lightbox_select(s, map.size, end_date, map, cfg);\r\n\t\t\t},\r\n\r\n\t\t\tget_value: function (node, ev, config) {\r\n\t\t\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\t\t\tvar map = config._time_format_order;\r\n\r\n\t\t\t\tvar hours = 0, minutes = 0;\r\n\t\t\t\tif (gantt.defined(map[3])) {\r\n\t\t\t\t\tvar time = parseInt(s[map[3]].value, 10);\r\n\t\t\t\t\thours = Math.floor(time / 60);\r\n\t\t\t\t\tminutes = time % 60;\r\n\t\t\t\t}\r\n\t\t\t\tvar start_date = new Date(s[map[2]].value, s[map[1]].value, s[map[0]].value, hours, minutes);\r\n\r\n\t\t\t\thours = minutes = 0;\r\n\t\t\t\tif (gantt.defined(map[3])) {\r\n\t\t\t\t\tvar time = parseInt(s[map.size + map[3]].value, 10);\r\n\t\t\t\t\thours = Math.floor(time / 60);\r\n\t\t\t\t\tminutes = time % 60;\r\n\t\t\t\t}\r\n\t\t\t\tvar end_date = new Date(s[map[2] + map.size].value, s[map[1] + map.size].value, s[map[0] + map.size].value, hours, minutes);\r\n\r\n\t\t\t\tif (end_date <= start_date)\r\n\t\t\t\t\tend_date = gantt.date.add(start_date, gantt._get_timepicker_step(), \"minute\");\r\n\r\n\t\t\t\tvar mapped_fields = gantt._resolve_default_mapping(config);\r\n\r\n\t\t\t\tvar res = {\r\n\t\t\t\t\tstart_date: new Date(start_date),\r\n\t\t\t\t\tend_date: new Date(end_date)\r\n\t\t\t\t};\r\n\t\t\t\tif (typeof mapped_fields == \"string\") {\r\n\t\t\t\t\treturn res.start_date;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn res;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfocus: function (node) {\r\n\t\t\t\tgantt._focus(node.getElementsByTagName(\"select\")[0]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tduration: {\r\n\t\t\trender: function (sns) {\r\n\t\t\t\tvar time = this.form_blocks.getTimePicker.call(this, sns);\r\n\t\t\t\ttime = \"<div class='gantt_time_selects'>\" + time + \"</div>\";\r\n\t\t\t\tvar label = this.locale.labels[this.config.duration_unit + \"s\"];\r\n\r\n\t\t\t\tvar singleDate = sns.single_date ? ' style=\"display:none\"' : \"\";\r\n\t\t\t\tvar readonly = sns.readonly ? \" disabled='disabled'\" : \"\";\r\n\r\n\t\t\t\tvar ariaAttr = this._waiAria.lightboxDurationInputAttrString(sns);\r\n\r\n\t\t\t\tvar duration = \"<div class='gantt_duration' \" + singleDate + \">\" +\r\n\t\t\t\t\t\"<input type='button' class='gantt_duration_dec' value=''\" + readonly + \">\" +\r\n\t\t\t\t\t\"<input type='text' value='5' class='gantt_duration_value'\" + readonly + \" \" + ariaAttr + \">\" +\r\n\t\t\t\t\t\"<input type='button' class='gantt_duration_inc' value='+'\" + readonly + \"> \" + label + \" <span></span>\" +\r\n\t\t\t\t\t\"</div>\";\r\n\t\t\t\tvar html = \"<div style='height:\" + (sns.height || 30) + \"px;padding-top:0px;font-size:inherit;' class='gantt_section_time'>\" + time + \" \" + duration + \"</div>\";\r\n\t\t\t\treturn html;\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev, config) {\r\n\t\t\t\tvar cfg = config;\r\n\t\t\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\t\t\tvar inps = node.getElementsByTagName(\"input\");\r\n\r\n\t\t\t\tvar duration = inps[1];\r\n\t\t\t\tvar btns = [inps[0], inps[2]];\r\n\t\t\t\tvar endspan = node.getElementsByTagName(\"span\")[0];\r\n\r\n\t\t\t\tvar map = config._time_format_order;\r\n\r\n\t\t\t\tfunction _calc_date() {\r\n\t\t\t\t\tvar start_date = gantt.form_blocks.duration._get_start_date.call(gantt, node, config);\r\n\t\t\t\t\tvar duration = gantt.form_blocks.duration._get_duration.call(gantt, node, config);\r\n\t\t\t\t\tvar end_date = gantt.calculateEndDate({start_date: start_date, duration: duration, task: ev});\r\n\r\n\t\t\t\t\tendspan.innerHTML = gantt.templates.task_date(end_date);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction _change_duration(step) {\r\n\t\t\t\t\tvar value = duration.value;\r\n\t\t\t\t\tvalue = parseInt(value, 10);\r\n\t\t\t\t\tif (window.isNaN(value))\r\n\t\t\t\t\t\tvalue = 0;\r\n\t\t\t\t\tvalue += step;\r\n\t\t\t\t\tif (value < 1) value = 1;\r\n\t\t\t\t\tduration.value = value;\r\n\t\t\t\t\t_calc_date();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbtns[0].onclick = gantt.bind(function () {\r\n\t\t\t\t\t_change_duration(-1 * this.config.duration_step);\r\n\t\t\t\t}, this);\r\n\t\t\t\tbtns[1].onclick = gantt.bind(function () {\r\n\t\t\t\t\t_change_duration(1 * this.config.duration_step);\r\n\t\t\t\t}, this);\r\n\t\t\t\ts[0].onchange = _calc_date;\r\n\t\t\t\ts[1].onchange = _calc_date;\r\n\t\t\t\ts[2].onchange = _calc_date;\r\n\t\t\t\tif (s[3]) s[3].onchange = _calc_date;\r\n\t\t\t\tduration.onkeydown = gantt.bind(function (e) {\r\n\t\t\t\t\te = e || window.event;\r\n\t\t\t\t\t// up\r\n\t\t\t\t\tvar code = (e.charCode || e.keyCode || e.which);\r\n\r\n\t\t\t\t\tif (code == 40) {\r\n\t\t\t\t\t\t_change_duration(-1 * this.config.duration_step);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// down\r\n\t\t\t\t\tif (code == 38) {\r\n\t\t\t\t\t\t_change_duration(1 * this.config.duration_step);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\twindow.setTimeout(function (e) {\r\n\t\t\t\t\t\t_calc_date();\r\n\t\t\t\t\t}, 1);\r\n\t\t\t\t}, this);\r\n\r\n\t\t\t\tduration.onchange = gantt.bind(function (e) {\r\n\t\t\t\t\t_calc_date();\r\n\t\t\t\t}, this);\r\n\r\n\t\t\t\tvar mapping = gantt._resolve_default_mapping(config);\r\n\t\t\t\tif (typeof(mapping) === \"string\") mapping = {start_date: mapping};\r\n\r\n\t\t\t\tvar start_date = ev[mapping.start_date] || new Date();\r\n\t\t\t\tvar end_date = ev[mapping.end_date] || gantt.calculateEndDate({\r\n\t\t\t\t\tstart_date: start_date,\r\n\t\t\t\t\tduration: 1,\r\n\t\t\t\t\ttask: ev\r\n\t\t\t\t});\r\n\t\t\t\tvar duration_val = Math.round(ev[mapping.duration]) || gantt.calculateDuration({\r\n\t\t\t\t\tstart_date: start_date,\r\n\t\t\t\t\tend_date: end_date,\r\n\t\t\t\t\ttask: ev\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgantt.form_blocks._fill_lightbox_select(s, 0, start_date, map, cfg);\r\n\t\t\t\tduration.value = duration_val;\r\n\t\t\t\t_calc_date();\r\n\t\t\t},\r\n\r\n\t\t\t_get_start_date: function (node, config) {\r\n\t\t\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\t\t\tvar map = config._time_format_order;\r\n\t\t\t\tvar hours = 0;\r\n\t\t\t\tvar minutes = 0;\r\n\t\t\t\tif (gantt.defined(map[3])) {\r\n\t\t\t\t\tvar input = s[map[3]];\r\n\t\t\t\t\tvar time = parseInt(input.value, 10);\r\n\t\t\t\t\tif (isNaN(time) && input.hasAttribute(\"data-value\")) {\r\n\t\t\t\t\t\ttime = parseInt(input.getAttribute(\"data-value\"), 10);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\thours = Math.floor(time / 60);\r\n\t\t\t\t\tminutes = time % 60;\r\n\t\t\t\t}\r\n\t\t\t\treturn new Date(s[map[2]].value, s[map[1]].value, s[map[0]].value, hours, minutes);\r\n\t\t\t},\r\n\t\t\t_get_duration: function (node, config) {\r\n\t\t\t\tvar duration = node.getElementsByTagName(\"input\")[1];\r\n\t\t\t\tduration = parseInt(duration.value, 10);\r\n\t\t\t\tif (!duration || window.isNaN(duration)) duration = 1;\r\n\t\t\t\tif (duration < 0) duration *= -1;\r\n\t\t\t\treturn duration;\r\n\t\t\t},\r\n\r\n\t\t\tget_value: function (node, ev, config) {\r\n\t\t\t\tvar start_date = gantt.form_blocks.duration._get_start_date(node, config);\r\n\t\t\t\tvar duration = gantt.form_blocks.duration._get_duration(node, config);\r\n\r\n\t\t\t\tvar end_date = gantt.calculateEndDate({start_date: start_date, duration: duration, task: ev});\r\n\t\t\t\tvar mapped_fields = gantt._resolve_default_mapping(config);\r\n\t\t\t\tvar res = {\r\n\t\t\t\t\tstart_date: new Date(start_date),\r\n\t\t\t\t\tend_date: new Date(end_date),\r\n\t\t\t\t\tduration: duration\r\n\t\t\t\t};\r\n\t\t\t\tif (typeof mapped_fields == \"string\") {\r\n\t\t\t\t\treturn res.start_date;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn res;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfocus: function (node) {\r\n\t\t\t\tgantt._focus(node.getElementsByTagName(\"select\")[0]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tparent: {\r\n\t\t\t_filter: function (options, config, item_id) {\r\n\t\t\t\tvar filter = config.filter || function () {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t};\r\n\r\n\t\t\t\toptions = options.slice(0);\r\n\r\n\t\t\t\tfor (var i = 0; i < options.length; i++) {\r\n\t\t\t\t\tvar task = options[i];\r\n\t\t\t\t\tif (task.id == item_id || gantt.isChildOf(task.id, item_id) || filter(task.id, task) === false) {\r\n\t\t\t\t\t\toptions.splice(i, 1);\r\n\t\t\t\t\t\ti--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn options;\r\n\t\t\t},\r\n\r\n\t\t\t_display: function (config, item_id) {\r\n\t\t\t\tvar tasks = [],\r\n\t\t\t\t\toptions = [];\r\n\t\t\t\tif (item_id) {\r\n\t\t\t\t\ttasks = gantt.getTaskByTime();\r\n\t\t\t\t\tif (config.allow_root) {\r\n\t\t\t\t\t\ttasks.unshift({id: gantt.config.root_id, text: config.root_label || \"\"});\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttasks = this._filter(tasks, config, item_id);\r\n\t\t\t\t\tif (config.sort) {\r\n\t\t\t\t\t\ttasks.sort(config.sort);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar text = config.template || gantt.templates.task_text;\r\n\t\t\t\tfor (var i = 0; i < tasks.length; i++) {\r\n\t\t\t\t\tvar label = text.apply(gantt, [tasks[i].start_date, tasks[i].end_date, tasks[i]]);\r\n\t\t\t\t\tif (label === undefined) {\r\n\t\t\t\t\t\tlabel = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\toptions.push({\r\n\t\t\t\t\t\tkey: tasks[i].id,\r\n\t\t\t\t\t\tlabel: label\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tconfig.options = options;\r\n\t\t\t\tconfig.map_to = config.map_to || \"parent\";\r\n\t\t\t\treturn gantt.form_blocks.select.render.apply(this, arguments);\r\n\t\t\t},\r\n\t\t\trender: function (sns) {\r\n\t\t\t\treturn gantt.form_blocks.parent._display(sns, false);\r\n\t\t\t},\r\n\t\t\tset_value: function (node, value, ev, config) {\r\n\t\t\t\tvar tmpDom = document.createElement(\"div\");\r\n\t\t\t\ttmpDom.innerHTML = gantt.form_blocks.parent._display(config, ev.id);\r\n\t\t\t\tvar newOptions = tmpDom.removeChild(tmpDom.firstChild);\r\n\t\t\t\tnode.onselect = null;\r\n\t\t\t\tnode.parentNode.replaceChild(newOptions, node);\r\n\r\n\t\t\t\treturn gantt.form_blocks.select.set_value.apply(gantt, [newOptions, value, ev, config]);\r\n\t\t\t},\r\n\t\t\tget_value: function () {\r\n\t\t\t\treturn gantt.form_blocks.select.get_value.apply(gantt, arguments);\r\n\t\t\t},\r\n\t\t\tfocus: function () {\r\n\t\t\t\treturn gantt.form_blocks.select.focus.apply(gantt, arguments);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._is_lightbox_timepicker = function () {\r\n\t\tvar s = this._get_typed_lightbox_config();\r\n\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\tif (s[i].name == \"time\" && s[i].type == \"time\")\r\n\t\t\t\treturn true;\r\n\t\treturn false;\r\n\t};\r\n\r\n\tgantt._dhtmlx_confirm = function (message, title, callback, ok) {\r\n\t\tif (!message)\r\n\t\t\treturn callback();\r\n\t\tvar opts = {text: message};\r\n\t\tif (title)\r\n\t\t\topts.title = title;\r\n\t\tif (ok) {\r\n\t\t\topts.ok = ok;\r\n\t\t}\r\n\t\tif (callback) {\r\n\t\t\topts.callback = function (result) {\r\n\t\t\t\tif (result)\r\n\t\t\t\t\tcallback();\r\n\t\t\t};\r\n\t\t}\r\n\t\tgantt.confirm(opts);\r\n\t};\r\n\r\n\tfunction _get_type_name(type_value) {\r\n\t\tfor (var i in this.config.types) {\r\n\t\t\tif (this.config.types[i] == type_value) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"task\";\r\n\t}\r\n\r\n\tgantt._get_typed_lightbox_config = function (type) {\r\n\t\tif (type === undefined) {\r\n\t\t\ttype = this.getLightboxType();\r\n\t\t}\r\n\r\n\t\tvar field = _get_type_name.call(this, type);\r\n\r\n\t\tif (gantt.config.lightbox[field + \"_sections\"]) {\r\n\t\t\treturn gantt.config.lightbox[field + \"_sections\"];\r\n\t\t} else {\r\n\t\t\treturn gantt.config.lightbox.sections;\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._silent_redraw_lightbox = function (type) {\r\n\t\tvar oldType = this.getLightboxType();\r\n\r\n\t\tif (this.getState().lightbox) {\r\n\t\t\tvar taskId = this.getState().lightbox;\r\n\t\t\tvar formData = this.getLightboxValues(),\r\n\t\t\t\ttask = this.copy(this.getTask(taskId));\r\n\r\n\t\t\tthis.resetLightbox();\r\n\r\n\t\t\tvar updTask = this.mixin(task, formData, true);\r\n\t\t\tvar box = this.getLightbox(type ? type : undefined);\r\n\t\t\tthis._center_lightbox(this.getLightbox());\r\n\t\t\tthis._set_lightbox_values(updTask, box);\r\n\t\t} else {\r\n\t\t\tthis.resetLightbox();\r\n\t\t\tthis.getLightbox(type ? type : undefined);\r\n\t\t}\r\n\t\tthis.callEvent(\"onLightboxChange\", [oldType, this.getLightboxType()]);\r\n\t};\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/lightbox.js\n// module id = 93\n// module chunks = 0","module.exports = function(gantt) {\r\n\r\n\tgantt._extend_to_optional = function (lightbox_block) {\r\n\r\n\t\tvar duration = lightbox_block;\r\n\t\tvar optional_time = {\r\n\t\t\trender: duration.render,\r\n\t\t\tfocus: duration.focus,\r\n\t\t\tset_value: function (node, value, task, section) {\r\n\t\t\t\tvar mapping = gantt._resolve_default_mapping(section);\r\n\t\t\t\tif (!task[mapping.start_date] || (mapping.start_date == \"start_date\" && this._isAllowedUnscheduledTask(task))) {\r\n\t\t\t\t\toptional_time.disable(node, section);\r\n\t\t\t\t\tvar val = {};\r\n\r\n\t\t\t\t\tfor (var i in mapping) {\r\n\t\t\t\t\t\t//take default values from the time control from task start/end dates\r\n\t\t\t\t\t\tval[mapping[i]] = task[i];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn duration.set_value.call(gantt, node, value, val, section);//set default value\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptional_time.enable(node, section);\r\n\t\t\t\t\treturn duration.set_value.call(gantt, node, value, task, section);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tget_value: function (node, task, section) {\r\n\t\t\t\tif (section.disabled) {\r\n\t\t\t\t\treturn {start_date: null};\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn duration.get_value.call(gantt, node, task, section);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tupdate_block: function (node, section) {\r\n\t\t\t\tgantt.callEvent(\"onSectionToggle\", [gantt._lightbox_id, section]);\r\n\t\t\t\tnode.style.display = section.disabled ? \"none\" : \"block\";\r\n\r\n\t\t\t\tif (section.button) {\r\n\t\t\t\t\tvar button = node.previousSibling.querySelector(\".gantt_custom_button_label\"),\r\n\t\t\t\t\t\tlabels = gantt.locale.labels;\r\n\r\n\t\t\t\t\tvar button_text = section.disabled ? labels[section.name + \"_enable_button\"] : labels[section.name + \"_disable_button\"];\r\n\r\n\t\t\t\t\tbutton.innerHTML = button_text;\r\n\t\t\t\t}\r\n\t\t\t\tgantt.resizeLightbox();\r\n\t\t\t},\r\n\t\t\tdisable: function (node, section) {\r\n\t\t\t\tsection.disabled = true;\r\n\t\t\t\toptional_time.update_block(node, section);\r\n\r\n\t\t\t},\r\n\t\t\tenable: function (node, section) {\r\n\t\t\t\tsection.disabled = false;\r\n\t\t\t\toptional_time.update_block(node, section);\r\n\t\t\t},\r\n\t\t\tbutton_click: function (index, el, section, container) {\r\n\t\t\t\tif (gantt.callEvent(\"onSectionButton\", [gantt._lightbox_id, section]) === false) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar config = gantt._get_typed_lightbox_config()[index];\r\n\t\t\t\tif (config.disabled) {\r\n\t\t\t\t\toptional_time.enable(container, config);\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptional_time.disable(container, config);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn optional_time;\r\n\t};\r\n\r\n\tgantt.form_blocks.duration_optional = gantt._extend_to_optional(gantt.form_blocks.duration);\r\n\tgantt.form_blocks.time_optional = gantt._extend_to_optional(gantt.form_blocks.time);\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/lightbox_optional_time.js\n// module id = 94\n// module chunks = 0","module.exports = function(gantt) {\r\n\r\n\tgantt.getTaskType = function (type) {\r\n\t\tvar checkType = type;\r\n\t\tif(type && typeof type == \"object\"){\r\n\t\t\tcheckType = type.type;\r\n\t\t}\r\n\r\n\t\tfor (var i in this.config.types) {\r\n\t\t\tif (this.config.types[i] == checkType) {\r\n\t\t\t\treturn checkType;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn gantt.config.types.task;\r\n\t};\r\n\r\n\tgantt.form_blocks.typeselect = {\r\n\t\trender: function (sns) {\r\n\t\t\tvar types = gantt.config.types,\r\n\t\t\t\tlocale = gantt.locale.labels,\r\n\t\t\t\toptions = [];\r\n\r\n\t\t\tvar filter = sns.filter || function () {\r\n\t\t\t\treturn true;\r\n\t\t\t};\r\n\t\t\tfor (var i in types) {\r\n\t\t\t\tif (!filter(i, types[i]) === false) {\r\n\t\t\t\t\toptions.push({key: types[i], label: locale[\"type_\" + i]});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tsns.options = options;\r\n\r\n\t\t\tvar oldOnChange = sns.onchange;\r\n\t\t\tsns.onchange = function () {\r\n\t\t\t\tvar tId = gantt.getState().lightbox;\r\n\r\n\t\t\t\tgantt.changeLightboxType(this.value);\r\n\t\t\t\tif (typeof oldOnChange == 'function') {\r\n\t\t\t\t\toldOnChange.apply(this, arguments);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\treturn gantt.form_blocks.select.render.apply(gantt, arguments);\r\n\t\t},\r\n\t\tset_value: function () {\r\n\t\t\treturn gantt.form_blocks.select.set_value.apply(gantt, arguments);\r\n\t\t},\r\n\t\tget_value: function () {\r\n\t\t\treturn gantt.form_blocks.select.get_value.apply(gantt, arguments);\r\n\t\t},\r\n\t\tfocus: function () {\r\n\t\t\treturn gantt.form_blocks.select.focus.apply(this, arguments);\r\n\t\t}\r\n\t};\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/data_task_types.js\n// module id = 95\n// module chunks = 0","/*\r\n reuse results of functions that can be recalculated during rendering\r\n greatly increases the rendering speed when critical path enabled\r\n Sample - 94_dev/critical_path.html\r\n\r\n */\r\nmodule.exports = function(gantt){\r\n\r\ngantt._cached_functions = {\r\n\tcache: {},\r\n\tmode: false,\r\n\tcritical_path_mode: false,\r\n\twrap_methods : function(methods, object){\r\n\t\tif(object._prefetch_originals){\r\n\t\t\tfor(var i in object._prefetch_originals){\r\n\t\t\t\tobject[i] = object._prefetch_originals[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\tobject._prefetch_originals = {};\r\n\t\tfor(var i = 0; i < methods.length; i++)\r\n\t\t\tthis.prefetch(methods[i], object);\r\n\r\n\t},\r\n\tprefetch : function(methodname, host){\r\n\t\tvar original = host[methodname];\r\n\t\tif(original){\r\n\t\t\tvar optimizer = this;\r\n\r\n\t\t\thost._prefetch_originals[methodname] = original;\r\n\t\t\thost[methodname] = function get_prefetched_value(){\r\n\r\n\t\t\t\tvar argumentsArray = new Array(arguments.length);\r\n\t\t\t\tfor (var i = 0, l = arguments.length; i < l; i++) {\r\n\t\t\t\t\targumentsArray[i] = arguments[i];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(optimizer.active){\r\n\t\t\t\t\tvar args = optimizer.get_arguments_hash(Array.prototype.slice.call(argumentsArray));\r\n\t\t\t\t\tif(!optimizer.cache[methodname]){\r\n\t\t\t\t\t\toptimizer.cache[methodname] = {};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar cached_values = optimizer.cache[methodname];\r\n\r\n\t\t\t\t\tif(optimizer.has_cached_value(cached_values, args)){\r\n\t\t\t\t\t\treturn optimizer.get_cached_value(cached_values, args);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar value = original.apply(this, argumentsArray);\r\n\t\t\t\t\t\toptimizer.cache_value(cached_values, args, value);\r\n\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn original.apply(this, argumentsArray);\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn original;\r\n\t},\r\n\tcache_value: function(cache, arguments_hash, value){\r\n\t\tif(this.is_date(value))\r\n\t\t\tvalue = new Date(value);\r\n\t\tcache[arguments_hash] = value;\r\n\t},\r\n\thas_cached_value: function(cache, arguments_hash){\r\n\t\treturn cache.hasOwnProperty(arguments_hash);\r\n\t},\r\n\tget_cached_value: function(cache, arguments_hash){\r\n\t\tvar data = cache[arguments_hash];\r\n\r\n\t\t//for cached dates - return copy\r\n\t\tif(this.is_date(data)){\r\n\t\t\tdata = new Date(data);\r\n\t\t}\r\n\t\treturn data;\r\n\t},\r\n\tis_date: function(value){\r\n\t\treturn (value && value.getUTCDate);\r\n\t},\r\n\tget_arguments_hash:function(args){\r\n\t\tvar values = [];\r\n\t\tfor(var i = 0; i < args.length; i++){\r\n\t\t\tvalues.push(this.stringify_argument(args[i]));\r\n\t\t}\r\n\t\treturn \"(\" + values.join(\";\") + \")\";\r\n\t},\r\n\tstringify_argument: function(value){\r\n\t\t//expecting task or link, or any other data entries, dates and primitive values\r\n\t\tvar ret = \"\";\r\n\t\tif(value.id){\r\n\t\t\tret = value.id;\r\n\t\t}else if(this.is_date(value)){\r\n\t\t\tret = value.valueOf();\r\n\t\t}else{\r\n\t\t\tret = value;\r\n\t\t}\r\n\t\treturn ret + \"\";\r\n\t},\r\n\tactivate: function(){\r\n\t\tthis.clear();\r\n\t\tthis.active = true;\r\n\t},\r\n\tdeactivate: function(){\r\n\t\tthis.clear();\r\n\t\tthis.active = false;\r\n\t},\r\n\tclear: function(){\r\n\t\tthis.cache = {};\r\n\t},\r\n\r\n\tsetup: function(gantt){\r\n\t\tvar override_gantt = [];\r\n\r\n\t\tvar gantt_methods  = [\r\n\t\t\t'_isCriticalTask',\r\n\t\t\t'isCriticalLink',\r\n\t\t\t'_isProjectEnd',\r\n\t\t\t'_getProjectEnd',\r\n\t\t\t'_getSlack'\r\n\t\t];\r\n\r\n\r\n\r\n\t\tif(this.mode == 'auto'){\r\n\t\t\tif(gantt.config.highlight_critical_path){\r\n\t\t\t\toverride_gantt = gantt_methods;\r\n\t\t\t}\r\n\t\t}else if(this.mode === true){\r\n\t\t\toverride_gantt = gantt_methods;\r\n\t\t}\r\n\r\n\t\tthis.wrap_methods(override_gantt, gantt);\r\n\r\n\t},\r\n\tupdate_if_changed: function(gantt){\r\n\t\tvar changed = (this.critical_path_mode != gantt.config.highlight_critical_path ||\r\n\t\t\t\t\t\tthis.mode !== gantt.config.optimize_render);\r\n\t\tif(changed){\r\n\t\t\tthis.critical_path_mode = gantt.config.highlight_critical_path;\r\n\t\t\tthis.mode = gantt.config.optimize_render;\r\n\t\t\tthis.setup(gantt);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nfunction activate(){\r\n\tgantt._cached_functions.update_if_changed(gantt);\r\n\tif(!gantt._cached_functions.active){\r\n\t\tgantt._cached_functions.activate();\r\n\t}\r\n\treturn true;\r\n}\r\ngantt.attachEvent(\"onBeforeGanttRender\", activate);\r\ngantt.attachEvent(\"onBeforeDataRender\", activate);\r\ngantt.attachEvent(\"onBeforeSmartRender\",  function(){\r\n\tactivate();\r\n});\r\ngantt.attachEvent(\"onBeforeParse\", activate);\r\ngantt.attachEvent(\"onDataRender\", function(){\r\n\tgantt._cached_functions.deactivate();\r\n});\r\nvar deactivTimeout = null;\r\ngantt.attachEvent(\"onSmartRender\", function(){\r\n\tif(deactivTimeout)\r\n\t\tclearTimeout(deactivTimeout);\r\n\tdeactivTimeout = setTimeout(function(){\r\n\t\tgantt._cached_functions.deactivate();\r\n\t}, 1000);\r\n});\r\n\r\ngantt.attachEvent(\"onBeforeGanttReady\", function(){\r\n\tgantt._cached_functions.update_if_changed(gantt);\r\n\treturn true;\r\n});\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/cached_functions.js\n// module id = 96\n// module chunks = 0","function _configure(col, data, force) {\r\n\tfor (var key in data)\r\n\t\tif (typeof col[key] == \"undefined\" || force)\r\n\t\t\tcol[key] = data[key];\r\n}\r\n\r\nfunction _get_skin(force, gantt) {\r\n\tvar skin = gantt.skin;\r\n\tif (!skin || force) {\r\n\t\tvar links = document.getElementsByTagName(\"link\");\r\n\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\tvar res = links[i].href.match(\"dhtmlxgantt_([a-z\\_]+).css\");\r\n\t\t\tif (res) {\r\n\t\t\t\tif (gantt.skins[res[1]] || !skin) {\r\n\t\t\t\t\tskin = res[1];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.skin = skin || \"terrace\";\r\n\tvar skinset = gantt.skins[gantt.skin] || gantt.skins[\"terrace\"];\r\n\r\n\t//apply skin related settings\r\n\t_configure(gantt.config, skinset.config, force);\r\n\r\n\tvar config = gantt.getGridColumns();\r\n\tif (config[1] && !gantt.defined(config[1].width))\r\n\t\tconfig[1].width = skinset._second_column_width;\r\n\tif (config[2] && !gantt.defined(config[2].width))\r\n\t\tconfig[2].width = skinset._third_column_width;\r\n\t\r\n\tfor (var i=0; i<config.length; i++) {\r\n\t\tvar column = config[i];\r\n\t\tif (column.name == \"add\") {\r\n\t\t\tif(!column.width){\r\n\t\t\t\tcolumn.width = 44;\r\n\t\t\t}\r\n\t\t\tif (!(gantt.defined(column.min_width) && gantt.defined(column.max_width))) {\r\n\t\t\t\tcolumn.min_width = column.min_width || column.width;\r\n\t\t\t\tcolumn.max_width = column.max_width || column.width;\r\n\t\t\t}\r\n\t\t\tif (column.min_width)\r\n\t\t\t\tcolumn.min_width = +column.min_width;\r\n\t\t\tif (column.max_width)\r\n\t\t\t\tcolumn.max_width = +column.max_width;\r\n\t\t\tif (column.width) {\r\n\t\t\t\tcolumn.width = +column.width;\r\n\t\t\t\tcolumn.width = (column.min_width && column.min_width > column.width) ? column.min_width : column.width;\r\n\t\t\t\tcolumn.width = (column.max_width && column.max_width < column.width) ? column.max_width : column.width;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif (skinset.config.task_height)\r\n\t\tgantt.config.task_height = skinset.config.task_height || \"full\"; \r\n\r\n\tif (skinset._lightbox_template)\r\n\t\tgantt._lightbox_template = skinset._lightbox_template;\r\n\r\n\tif (skinset._redefine_lightbox_buttons) {\r\n\t\tgantt.config.buttons_right = skinset._redefine_lightbox_buttons[\"buttons_right\"];\r\n\t\tgantt.config.buttons_left = skinset._redefine_lightbox_buttons[\"buttons_left\"];\r\n\t}\r\n\r\n\r\n\tgantt.resetLightbox();\r\n}\r\n\r\nmodule.exports = function(gantt) {\r\n\tif(!gantt.resetSkin){\r\n\t\tgantt.resetSkin = function () {\r\n\t\t\tthis.skin = \"\";\r\n\t\t\t_get_skin(true, this);\r\n\t\t};\r\n\t\tgantt.skins = {};\r\n\r\n\t\tgantt.attachEvent(\"onGanttLayoutReady\", function(){\r\n\t\t\t_get_skin(false, this);\r\n\t\t});\r\n\t}\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/skin.js\n// module id = 97\n// module chunks = 0","module.exports = function(gantt) {\r\ngantt.skins.skyblue = {\r\n\tconfig:{\r\n\t\tgrid_width:350,\r\n\t\trow_height: 27,\r\n\t\tscale_height: 27,\r\n\t\tlink_line_width:1,\r\n\t\tlink_arrow_size:8,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:95,\r\n\t_third_column_width:80\r\n};\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/css/skins/skyblue.js\n// module id = 98\n// module chunks = 0","module.exports = function(gantt) {\r\ngantt.skins.meadow = {\r\n\tconfig:{\r\n\t\tgrid_width:350,\r\n\t\trow_height: 27,\r\n\t\tscale_height: 30,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:72\r\n\t},\r\n\t_second_column_width:95,\r\n\t_third_column_width:80\r\n};\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/css/skins/meadow.js\n// module id = 99\n// module chunks = 0","module.exports = function(gantt) {\r\ngantt.skins.terrace = {\r\n\tconfig:{\r\n\t\tgrid_width:360,\r\n\t\trow_height: 35,\r\n\t\tscale_height: 35,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:90,\r\n\t_third_column_width:70\t\t\r\n};\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/css/skins/terrace.js\n// module id = 100\n// module chunks = 0","\r\n\r\nmodule.exports = function(gantt) {\r\n\tgantt.skins.broadway = {\r\n\t\tconfig: {\r\n\t\t\tgrid_width: 360,\r\n\t\t\trow_height: 35,\r\n\t\t\tscale_height: 35,\r\n\t\t\tlink_line_width: 1,\r\n\t\t\tlink_arrow_size: 7,\r\n\t\t\tlightbox_additional_height: 86\r\n\t\t},\r\n\t\t_second_column_width: 90,\r\n\t\t_third_column_width: 80,\r\n\r\n\t\t_lightbox_template: \"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span><div class='gantt_cancel_btn'></div></div><div class='gantt_cal_larea'></div>\",\r\n\t\t_config_buttons_left: {},\r\n\t\t_config_buttons_right: {\r\n\t\t\t\"gantt_delete_btn\": \"icon_delete\",\r\n\t\t\t\"gantt_save_btn\": \"icon_save\"\r\n\t\t}\r\n\t};\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/css/skins/broadway.js\n// module id = 101\n// module chunks = 0","module.exports = function(gantt) {\r\n\tgantt.skins.material = {\r\n\t\tconfig: {\r\n\t\t\tgrid_width: 411,\r\n\t\t\trow_height: 34,\r\n\t\t\ttask_height_offset: 6,\r\n\t\t\tscale_height: 36,\r\n\t\t\tlink_line_width: 2,\r\n\t\t\tlink_arrow_size: 6,\r\n\t\t\tlightbox_additional_height: 80\r\n\t\t},\r\n\t\t_second_column_width: 110,\r\n\t\t_third_column_width: 75,\r\n\t\t_redefine_lightbox_buttons: {\r\n\t\t\t\"buttons_left\": [\"dhx_delete_btn\"],\r\n\t\t\t\"buttons_right\": [\"dhx_save_btn\", \"dhx_cancel_btn\"]\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onAfterTaskDrag\", function (id) {\r\n\t\tvar t = gantt.getTaskNode(id);\r\n\t\tif (t) {\r\n\t\t\tt.className += \" gantt_drag_animation\";\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tvar indx = t.className.indexOf(\" gantt_drag_animation\");\r\n\t\t\t\tif (indx > -1) {\r\n\t\t\t\t\tt.className = t.className.slice(0, indx);\r\n\t\t\t\t}\r\n\t\t\t}, 200);\r\n\t\t}\r\n\t});\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/css/skins/material.js\n// module id = 102\n// module chunks = 0","module.exports = function(gantt) {\r\ngantt.skins[\"contrast_black\"] = {\r\n\tconfig:{\r\n\t\tgrid_width:360,\r\n\t\trow_height: 35,\r\n\t\tscale_height: 35,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:100,\r\n\t_third_column_width:80\r\n};\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/css/skins/contrast_black.js\n// module id = 103\n// module chunks = 0","module.exports = function(gantt) {\r\ngantt.skins[\"contrast_white\"] = {\r\n\tconfig:{\r\n\t\tgrid_width:360,\r\n\t\trow_height: 35,\r\n\t\tscale_height: 35,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:100,\r\n\t_third_column_width:80\r\n};\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/css/skins/contrast_white.js\n// module id = 104\n// module chunks = 0","module.exports = function(gantt) {\r\n\r\n\tgantt.config.touch_drag = 500; //nearly immediate dnd\r\n\tgantt.config.touch = true;\r\n\tgantt.config.touch_feedback = true;\r\n\tgantt.config.touch_feedback_duration = 1;\r\n\tgantt._prevent_touch_scroll = false;\r\n\r\n\r\n\tgantt._touch_feedback = function () {\r\n\t\tif (gantt.config.touch_feedback) {\r\n\t\t\tif (navigator.vibrate)\r\n\t\t\t\tnavigator.vibrate(gantt.config.touch_feedback_duration);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onGanttReady\", gantt.bind(function(){\r\n\t\tif (this.config.touch != \"force\")\r\n\t\t\tthis.config.touch = this.config.touch &&\r\n\t\t\t\t((navigator.userAgent.indexOf(\"Mobile\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"iPad\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"Android\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"Touch\") != -1));\r\n\r\n\t\tif (this.config.touch) {\r\n\r\n\t\t\tvar touchEventsSupported = true;\r\n\t\t\ttry {\r\n\t\t\t\tdocument.createEvent(\"TouchEvent\");\r\n\t\t\t} catch (e) {\r\n\t\t\t\ttouchEventsSupported = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (touchEventsSupported) {\r\n\t\t\t\tthis._touch_events([\"touchmove\", \"touchstart\", \"touchend\"], function (ev) {\r\n\t\t\t\t\tif (ev.touches && ev.touches.length > 1) return null;\r\n\t\t\t\t\tif (ev.touches[0])\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\ttarget: ev.target,\r\n\t\t\t\t\t\t\tpageX: ev.touches[0].pageX,\r\n\t\t\t\t\t\t\tpageY: ev.touches[0].pageY,\r\n\t\t\t\t\t\t\tclientX: ev.touches[0].clientX,\r\n\t\t\t\t\t\t\tclientY: ev.touches[0].clientY\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function () {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t} else if (window.navigator.pointerEnabled) {\r\n\t\t\t\tthis._touch_events([\"pointermove\", \"pointerdown\", \"pointerup\"], function (ev) {\r\n\t\t\t\t\tif (ev.pointerType == \"mouse\") return null;\r\n\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function (ev) {\r\n\t\t\t\t\treturn (!ev || (ev.pointerType == \"mouse\" ));\r\n\t\t\t\t});\r\n\t\t\t} else if (window.navigator.msPointerEnabled) {\r\n\t\t\t\tthis._touch_events([\"MSPointerMove\", \"MSPointerDown\", \"MSPointerUp\"], function (ev) {\r\n\t\t\t\t\tif (ev.pointerType == ev.MSPOINTER_TYPE_MOUSE) return null;\r\n\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function (ev) {\r\n\t\t\t\t\treturn (!ev || ev.pointerType == ev.MSPOINTER_TYPE_MOUSE);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}, gantt));\r\n\r\n\r\n\tfunction getTaskDND(){\r\n\t\tvar _tasks_dnd;\r\n\t\tif(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t_tasks_dnd = gantt.$ui.getView(\"timeline\")._tasks_dnd;\r\n\t\t}\r\n\t\treturn _tasks_dnd;\r\n\t}\r\n\r\n\tvar touchHandlers = [];\r\n\r\n//we can't use native scrolling, as we need to sync momentum between different parts\r\n//so we will block native scroll and use the custom one\r\n//in future we can add custom momentum\r\n\tgantt._touch_events = function (names, accessor, ignore) {\r\n\t\t//webkit on android need to be handled separately\r\n\t\tvar dblclicktime = 0;\r\n\t\tvar action_mode = false;\r\n\t\tvar scroll_mode = false;\r\n\t\tvar dblclick_timer = 0;\r\n\t\tvar action_start = null;\r\n\t\tvar scroll_state;\r\n\t\tvar long_tap_timer = null;\r\n\t\tvar current_target = null;\r\n\r\n\r\n\r\n\t\tfor(var i = 0; i < touchHandlers.length; i++){\r\n\t\t\tgantt.eventRemove(touchHandlers[i][0], touchHandlers[i][1], touchHandlers[i][2]);\r\n\t\t}\r\n\t\ttouchHandlers = [];\r\n\r\n\t\t//touch move\r\n\t\ttouchHandlers.push([gantt.$container, names[0], function (e) {\r\n\t\t\tvar _tasks_dnd = getTaskDND();\r\n\r\n\t\t\t\tif (ignore(e)) return;\r\n\r\n\t\t\t\t//ignore common and scrolling moves\r\n\t\t\t\tif (!action_mode) return;\r\n\r\n\t\t\t\tif (long_tap_timer) clearTimeout(long_tap_timer);\r\n\r\n\t\t\t\tvar source = accessor(e);\r\n\t\t\t\tif (_tasks_dnd && (_tasks_dnd.drag.id || _tasks_dnd.drag.start_drag)) {\r\n\t\t\t\t\t_tasks_dnd.on_mouse_move(source);\r\n\t\t\t\t\tif (e.preventDefault)\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\te.cancelBubble = true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (!gantt._prevent_touch_scroll) {\r\n\t\t\t\t\tif (source && action_start) {\r\n\t\t\t\t\t\tvar dx = action_start.pageX - source.pageX;\r\n\t\t\t\t\t\tvar dy = action_start.pageY - source.pageY;\r\n\t\t\t\t\t\tif (!scroll_mode && (Math.abs(dx) > 5 || Math.abs(dy) > 5)) {\r\n\t\t\t\t\t\t\tgantt._touch_scroll_active = scroll_mode = true;\r\n\t\t\t\t\t\t\tdblclicktime = 0;\r\n\t\t\t\t\t\t\tscroll_state = gantt.getScrollState();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (scroll_mode) {\r\n\t\t\t\t\t\t\tgantt.scrollTo(scroll_state.x + dx, scroll_state.y + dy);\r\n\t\t\t\t\t\t\tvar new_scroll_state = gantt.getScrollState();\r\n\r\n\t\t\t\t\t\t\tif ((scroll_state.x != new_scroll_state.x && dy > 2 * dx) ||\r\n\t\t\t\t\t\t\t\t(scroll_state.y != new_scroll_state.y && dx > 2 * dy )) {\r\n\t\t\t\t\t\t\t\treturn block_action(e);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn block_action(e);\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}]);\r\n\r\n\r\n\t\t//block touch context menu in IE10\r\n\t\ttouchHandlers.push([this.$container, \"contextmenu\", function (e) {\r\n\t\t\tif (action_mode)\r\n\t\t\t\treturn block_action(e);\r\n\t\t}]);\r\n\r\n\t\t//touch start\r\n\t\ttouchHandlers.push([this.$container, names[1], function (e) {\r\n\t\t\tif (ignore(e)) return;\r\n\t\t\tif (e.touches && e.touches.length > 1) {\r\n\t\t\t\taction_mode = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\taction_start = accessor(e);\r\n\t\t\tif (!gantt._locate_css(action_start, \"gantt_hor_scroll\") && !gantt._locate_css(action_start, \"gantt_ver_scroll\")) {\r\n\t\t\t\taction_mode = true;\r\n\t\t\t}\r\n\t\t\tvar _tasks_dnd = getTaskDND();\r\n\r\n\t\t\t//long tap\r\n\t\t\tlong_tap_timer = setTimeout(function () {\r\n\t\t\t\tvar taskId = gantt.locate(action_start);\r\n\t\t\t\tif (_tasks_dnd && (taskId && !gantt._locate_css(action_start, \"gantt_link_control\") && !gantt._locate_css(action_start, \"gantt_grid_data\"))) {\r\n\t\t\t\t\t_tasks_dnd.on_mouse_down(action_start);\r\n\r\n\t\t\t\t\tif (_tasks_dnd.drag && _tasks_dnd.drag.start_drag) {\r\n\t\t\t\t\t\tcloneTaskRendered(taskId);\r\n\t\t\t\t\t\t_tasks_dnd._start_dnd(action_start);\r\n\t\t\t\t\t\tgantt._touch_drag = true;\r\n\r\n\t\t\t\t\t\tgantt.refreshTask(taskId);\r\n\r\n\t\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlong_tap_timer = null;\r\n\t\t\t}, gantt.config.touch_drag);\r\n\t\t}]);\r\n\r\n\t\t//touch end\r\n\t\ttouchHandlers.push([this.$container, names[2], function (e) {\r\n\t\t\tif (ignore(e)) return;\r\n\t\t\tif (long_tap_timer) clearTimeout(long_tap_timer);\r\n\t\t\tgantt._touch_drag = false;\r\n\t\t\taction_mode = false;\r\n\t\t\tvar source = accessor(e);\r\n\r\n\t\t\tvar _tasks_dnd = getTaskDND();\r\n\r\n\t\t\tif(_tasks_dnd)\r\n\t\t\t\t_tasks_dnd.on_mouse_up(source);\r\n\r\n\t\t\tif (current_target) {\r\n\t\t\t\tgantt.refreshTask(gantt.locate(current_target));\r\n\t\t\t\tif (current_target.parentNode) {\r\n\t\t\t\t\tcurrent_target.parentNode.removeChild(current_target);\r\n\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tgantt._touch_scroll_active = action_mode = scroll_mode = false;\r\n\t\t\tcurrent_target = null;\r\n\r\n\t\t\t//dbl-tap handling\r\n\t\t\tif (action_start && dblclicktime) {\r\n\t\t\t\tvar now = new Date();\r\n\t\t\t\tif ((now - dblclicktime) < 500) {\r\n\r\n\t\t\t\t\tvar mouseEvents = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\t\t\tmouseEvents.onDoubleClick(action_start);\r\n\t\t\t\t\tblock_action(e);\r\n\t\t\t\t} else\r\n\t\t\t\t\tdblclicktime = now;\r\n\t\t\t} else {\r\n\t\t\t\tdblclicktime = new Date();\r\n\t\t\t}\r\n\t\t}]);\r\n\r\n\t\tfor(var i = 0; i < touchHandlers.length; i++){\r\n\t\t\tgantt.event(touchHandlers[i][0], touchHandlers[i][1], touchHandlers[i][2]);\r\n\t\t}\r\n\r\n\t\t//common helper, prevents event\r\n\t\tfunction block_action(e) {\r\n\t\t\tif (e && e.preventDefault)\r\n\t\t\t\te.preventDefault();\r\n\t\t\t(e || event).cancelBubble = true;\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfunction cloneTaskRendered(taskId) {\r\n\t\t\tvar renders = gantt._getTaskLayers();\r\n\t\t\tvar task = gantt.getTask(taskId);\r\n\t\t\tif (task && gantt.isTaskVisible(taskId)) {\r\n\t\t\t\tfor (var i = 0; i < renders.length; i++) {\r\n\t\t\t\t\ttask = renders[i].rendered[taskId];\r\n\t\t\t\t\tif (task && task.getAttribute(gantt.config.task_attribute) && task.getAttribute(gantt.config.task_attribute) == taskId) {\r\n\t\t\t\t\t\tvar copy = task.cloneNode(true);\r\n\t\t\t\t\t\tcurrent_target = task;\r\n\t\t\t\t\t\trenders[i].rendered[taskId] = copy;\r\n\t\t\t\t\t\ttask.style.display = \"none\";\r\n\t\t\t\t\t\tcopy.className += \" gantt_drag_move \";\r\n\t\t\t\t\t\ttask.parentNode.appendChild(copy);\r\n\t\t\t\t\t\t//return copy;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/touch.js\n// module id = 105\n// module chunks = 0","module.exports = function(gantt) {\r\n\tgantt.locale = {\r\n\t\tdate: {\r\n\t\t\tmonth_full: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\r\n\t\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\r\n\t\t\tday_full: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\r\n\t\t\tday_short: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"]\r\n\t\t},\r\n\t\tlabels: {\r\n\t\t\tnew_task: \"New task\",\r\n\t\t\ticon_save: \"Save\",\r\n\t\t\ticon_cancel: \"Cancel\",\r\n\t\t\ticon_details: \"Details\",\r\n\t\t\ticon_edit: \"Edit\",\r\n\t\t\ticon_delete: \"Delete\",\r\n\t\t\tconfirm_closing: \"\",//Your changes will be lost, are you sure?\r\n\t\t\tconfirm_deleting: \"Task will be deleted permanently, are you sure?\",\r\n\t\t\tsection_description: \"Description\",\r\n\t\t\tsection_time: \"Time period\",\r\n\t\t\tsection_type: \"Type\",\r\n\r\n\t\t\t/* grid columns */\r\n\t\t\tcolumn_wbs: \"WBS\",\r\n\t\t\tcolumn_text: \"Task name\",\r\n\t\t\tcolumn_start_date: \"Start time\",\r\n\t\t\tcolumn_duration: \"Duration\",\r\n\t\t\tcolumn_add: \"\",\r\n\r\n\t\t\t/* link confirmation */\r\n\t\t\tlink: \"Link\",\r\n\t\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\t\tlink_start: \" (start)\",\r\n\t\t\tlink_end: \" (end)\",\r\n\r\n\t\t\ttype_task: \"Task\",\r\n\t\t\ttype_project: \"Project\",\r\n\t\t\ttype_milestone: \"Milestone\",\r\n\r\n\t\t\tminutes: \"Minutes\",\r\n\t\t\thours: \"Hours\",\r\n\t\t\tdays: \"Days\",\r\n\t\t\tweeks: \"Week\",\r\n\t\t\tmonths: \"Months\",\r\n\t\t\tyears: \"Years\",\r\n\r\n\t\t\t/* message popup */\r\n\t\t\tmessage_ok: \"OK\",\r\n\t\t\tmessage_cancel: \"Cancel\"\r\n\r\n\t\t}\r\n\t};\r\n};\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/locale/locale.js\n// module id = 106\n// module chunks = 0","var domHelpers = require(\"../utils/dom_helpers\"),\r\n\thelpers = require(\"../utils/helpers\");\r\n\r\nmodule.exports = function(gantt){\r\n\tvar calculateScaleRange = require(\"./gantt_data_range\");\r\n\r\n\tgantt.assert = require(\"./common/assert\")(gantt);\r\n\r\n//initial initialization\r\n\tgantt.init = function(node, from, to){\r\n\t\tif(from && to){\r\n\t\t\tthis.config.start_date = this._min_date = new Date(from);\r\n\t\t\tthis.config.end_date = this._max_date = new Date(to);\r\n\t\t}\r\n\t\tthis.date.init();\r\n\r\n\t\tif (!this.config.scroll_size)\r\n\t\t\tthis.config.scroll_size = domHelpers.getScrollSize() || 1;\r\n\r\n\t\tvar resizeDelay;\r\n\t\tgantt.event(window, \"resize\", function(){\r\n\t\t\tclearTimeout(resizeDelay);\r\n\t\t\tresizeDelay = setTimeout(function(){\r\n\t\t\t\tgantt.render();\r\n\t\t\t}, 300);\r\n\t\t});\r\n\r\n\t\t//can be called only once\r\n\t\tthis.init = function(node){\r\n\t\t\tif (this.$container && this.$container.parentNode){\r\n\t\t\t\tthis.$container.parentNode.removeChild(this.$container);\r\n\t\t\t\tthis.$container = null;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.$layout){\r\n\t\t\t\tthis.$layout.clear();\r\n\t\t\t}\r\n\t\t\tthis._reinit(node);\r\n\t\t};\r\n\r\n\t\tthis._reinit(node);\r\n\t};\r\n\r\n\tgantt._reinit = function(node){\r\n\t\tthis.callEvent(\"onBeforeGanttReady\", []);\r\n\t\t//this._init_tasks_range();\r\n\t\tthis.resetLightbox();\r\n\t\tthis._update_flags();\r\n\r\n\r\n\t\tvar config = this.$services.getService(\"templateLoader\");\r\n\t\tconfig.initTemplates(this);\r\n\r\n\t\tthis._clearTaskLayers();\r\n\t\tthis._clearLinkLayers();\r\n\r\n\t\t//this.clear\r\n\t\tif(this.$layout){\r\n\t\t\tthis.$layout.destructor();\r\n\t\t\tthis.$ui.reset();\r\n\t\t}\r\n\r\n\t\tthis.$root = domHelpers.toNode(node);\r\n\t\tif(this.$root){\r\n\t\t\tthis.$root.innerHTML = \"\";\r\n\t\t}\r\n\t\tthis.$root.gantt = this;\r\n\t\tcalculateScaleRange(this);\r\n\t\tthis.config.layout.id = \"main\";\r\n\t\tthis.$layout = this.$ui.createView(\"layout\", node, this.config.layout);\r\n\r\n\t\tthis.$layout.attachEvent(\"onBeforeResize\", function(){\r\n\t\t\tvar storeNames = gantt.$services.getService(\"datastores\");\r\n\t\t\tfor(var i = 0; i < storeNames.length; i++){\r\n\t\t\t\tgantt.getDatastore(storeNames[i]).filter();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.$layout.attachEvent(\"onResize\", function(){\r\n\t\t\tgantt.refreshData();\r\n\t\t});\r\n\r\n\t\tthis.callEvent(\"onGanttLayoutReady\", []);\r\n\t\tthis.$layout.render();\r\n\r\n\t\tgantt.$container = this.$layout.$container.firstChild;\r\n\t\tthis.callEvent(\"onTemplatesReady\",[]);\r\n\t\tthis.$mouseEvents.reset(this.$root);\r\n\t\tthis.callEvent(\"onGanttReady\", []);\r\n\r\n\t\tthis.render();\r\n\t};\r\n\r\n\tgantt.$click={\r\n\t\tbuttons:{\r\n\t\t\t\"edit\":function(id){\r\n\t\t\t\tgantt.showLightbox(id);\r\n\t\t\t},\r\n\t\t\t\"delete\":function(id){\r\n\t\t\t\tvar question = gantt.locale.labels.confirm_deleting;\r\n\t\t\t\tvar title = gantt.locale.labels.confirm_deleting_title;\r\n\r\n\t\t\t\tgantt._dhtmlx_confirm(question, title, function(){\r\n\t\t\t\t\tif(!gantt.isTaskExists(id)){\r\n\t\t\t\t\t\tgantt.hideLightbox();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar task = gantt.getTask(id);\r\n\t\t\t\t\tif(task.$new){\r\n\t\t\t\t\t\tgantt.silent(function(){\r\n\t\t\t\t\t\t\tgantt.deleteTask(id, true);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tgantt.refreshData();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tgantt.deleteTask(id);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgantt.hideLightbox();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n//renders self\r\n\tgantt.render = function(){\r\n\t\tthis.callEvent(\"onBeforeGanttRender\", []);\r\n\r\n\t\tvar pos = this.getScrollState();\r\n\t\tvar posX = pos ? pos.x : 0;\r\n\t\tif(this._getHorizontalScrollbar()){\r\n\t\t\tvar scrollbar = this._getHorizontalScrollbar();\r\n\t\t\tposX = scrollbar.$config.codeScrollLeft || posX || 0;\r\n\t\t}\r\n\r\n\r\n\t\tvar visible_date = null;\r\n\t\tif(posX){\r\n\t\t\tvisible_date = gantt.dateFromPos(posX + this.config.task_scroll_offset);\r\n\t\t}\r\n\t\tcalculateScaleRange(this);\r\n\r\n\t\tthis.$layout.$config.autosize = this.config.autosize;\r\n\t\tthis.$layout.resize();\r\n\r\n\t\tif(this.config.preserve_scroll && pos){\r\n\r\n\t\t\tif(posX){\r\n\t\t\t\tvar new_pos = gantt.getScrollState();\r\n\t\t\t\tvar new_date = gantt.dateFromPos(new_pos.x);\r\n\t\t\t\tif(!(+visible_date == +new_date && new_pos.y == pos.y)){\r\n\t\t\t\t\tif(visible_date){\r\n\t\t\t\t\t\tthis.showDate(visible_date);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(pos.y)\r\n\t\t\t\t\t\tgantt.scrollTo(undefined, pos.y);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onGanttRender\", []);\r\n\t};\r\n\r\n\t//TODO: add layout.resize method that wouldn't trigger data repaint\r\n\tgantt.setSizes = gantt.render;\r\n\r\n\tgantt.locate = function(e) {\r\n\t\tvar trg = domHelpers.getTargetNode(e);\r\n\r\n\t\t//ignore empty cells\r\n\t\tvar className = domHelpers.getClassName(trg);\r\n\t\tif ((className || \"\").indexOf(\"gantt_task_cell\") >= 0) return null;\r\n\r\n\t\tvar targetAttribute = arguments[1] || this.config.task_attribute;\r\n\r\n\t\tvar node = domHelpers.locateAttribute(trg, targetAttribute);\r\n\t\tif(node){\r\n\t\t\treturn node.getAttribute(targetAttribute);\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._locate_css = function(e, classname, strict){\r\n\t\treturn domHelpers.locateClassName(e, classname, strict);\r\n\t};\r\n\r\n\tgantt._locateHTML = function(e, attribute) {\r\n\t\treturn domHelpers.locateAttribute(e, attribute || this.config.task_attribute);\r\n\t};\r\n\r\n\tgantt.getTaskRowNode = function(id) {\r\n\t\tvar els = this.$grid_data.childNodes;\r\n\t\tvar attribute = this.config.task_attribute;\r\n\t\tfor (var i = 0; i < els.length; i++) {\r\n\t\t\tif (els[i].getAttribute) {\r\n\t\t\t\tvar value = els[i].getAttribute(attribute);\r\n\t\t\t\tif (value == id) return els[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\r\n\tgantt.changeLightboxType = function(type){\r\n\t\tif(this.getLightboxType() == type)\r\n\t\t\treturn true;\r\n\t\tgantt._silent_redraw_lightbox(type);\r\n\t};\r\n\r\n\r\n\tgantt._get_link_type = function (from_start, to_start) {\r\n\t\tvar type = null;\r\n\t\tif (from_start && to_start) {\r\n\t\t\ttype = gantt.config.links.start_to_start;\r\n\t\t} else if (!from_start && to_start) {\r\n\t\t\ttype = gantt.config.links.finish_to_start;\r\n\t\t} else if (!from_start && !to_start) {\r\n\t\t\ttype = gantt.config.links.finish_to_finish;\r\n\t\t} else if (from_start && !to_start) {\r\n\t\t\ttype = gantt.config.links.start_to_finish;\r\n\t\t}\r\n\t\treturn type;\r\n\t};\r\n\r\n\tgantt.isLinkAllowed = function (from, to, from_start, to_start) {\r\n\t\tvar link = null;\r\n\t\tif (typeof(from) == \"object\") {\r\n\t\t\tlink = from;\r\n\t\t} else {\r\n\t\t\tlink = {source: from, target: to, type: this._get_link_type(from_start, to_start)};\r\n\t\t}\r\n\r\n\t\tif (!link) return false;\r\n\t\tif (!(link.source && link.target && link.type)) return false;\r\n\t\tif (link.source == link.target) return false;\r\n\r\n\t\tvar res = true;\r\n\t\t//any custom rules\r\n\t\tif (this.checkEvent(\"onLinkValidation\"))\r\n\t\t\tres = this.callEvent(\"onLinkValidation\", [link]);\r\n\r\n\t\treturn res;\r\n\t};\r\n\r\n\r\n\tgantt._correct_dst_change = function(date, prevOffset, step, unit){\r\n\t\tvar time_unit = helpers.getSecondsInUnit(unit) * step;\r\n\t\tif(time_unit > 60*60 && time_unit < 60*60*24){\r\n\t\t\t//correct dst change only if current unit is more than one hour and less than day (days have own checking), e.g. 12h\r\n\t\t\tvar offsetChanged = date.getTimezoneOffset() - prevOffset;\r\n\t\t\tif(offsetChanged){\r\n\t\t\t\tdate = gantt.date.add(date, offsetChanged, \"minute\");\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn date;\r\n\t};\r\n\r\n\tgantt.getGridColumns = function(){\r\n\t\treturn gantt.config.columns.slice();\r\n\t};\r\n\r\n\tgantt._is_icon_open_click = function(e) {\r\n\t\tif (!e)\r\n\t\t\treturn false;\r\n\t\tvar target = e.target || e.srcElement;\r\n\t\tif (!(target && target.className))\r\n\t\t\treturn false;\r\n\t\tvar className = domHelpers.getClassName(target);\r\n\t\tif (className.indexOf(\"gantt_tree_icon\") !== -1 && (className.indexOf(\"gantt_close\") !== -1 || className.indexOf(\"gantt_open\") !== -1))\r\n\t\t\treturn true;\r\n\t\treturn false;\r\n\t};\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/gantt_core.js\n// module id = 107\n// module chunks = 0","/*\r\n \tasserts will be removed in final code, so you can place them anythere\r\n\twithout caring about performance impacts\r\n*/\r\n\r\nmodule.exports = function(gantt){\r\n\treturn function assert(check, message){\r\n\t\t//jshint -W087\r\n\t\tif (!check){\r\n\t\t\tif(gantt.config.show_errors && gantt.callEvent(\"onError\",[message]) !== false) {\r\n\t\t\t\tgantt.message({type: \"error\", text: message, expire: -1});\r\n\t\t\t\tdebugger;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/common/assert.js\n// module id = 108\n// module chunks = 0","function extend(gantt){\r\n\r\n\tgantt.destructor = function(){\r\n\t\tgantt.callEvent(\"onDestroy\", []);\r\n\r\n\t\tthis.clearAll();\r\n\t\tthis.detachAllEvents();\r\n\r\n\t\tif(this.$root){\r\n\t\t\tdelete this.$root.gantt;\r\n\t\t}\r\n\r\n\t\tthis._eventRemoveAll();\r\n\t\tif(this.$layout){\r\n\t\t\tthis.$layout.destructor();\r\n\t\t}\r\n\r\n\t\tthis.resetLightbox();\r\n\r\n\t\tif(this._dp && this._dp.destructor){\r\n\t\t\tthis._dp.destructor();\r\n\t\t}\r\n\r\n\t\tthis.$services.destructor();\r\n\r\n\t\tfor(var i in this){\r\n\t\t\tif(i.indexOf(\"$\") === 0){\r\n\t\t\t\tdelete this[i];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = extend;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/destructor.js\n// module id = 109\n// module chunks = 0","module.exports = function(gantt){\r\n\r\n\tfunction deprecated(badCode, goodCode) {\r\n\r\n\t\tvar formatting = gantt.env.isIE ? \"\" : \"%c\";\r\n\r\n\r\n\t\tvar message = [\r\n\t\t\tformatting, \"\\\"\", badCode, \"\\\"\",  formatting,\r\n\t\t\t\" has been deprecated in dhtmlxGantt v4.0 and will stop working in v6.0. Use \",\r\n\t\t\tformatting, \"\\\"\", goodCode, \"\\\"\",  formatting,\r\n\t\t\t\" instead. \\nSee more details at http://docs.dhtmlx.com/gantt/migrating.html \"\r\n\t\t].join(\"\");\r\n\r\n\t\tvar log = window.console.warn || window.console.log;\r\n\r\n\t\tvar args = [message];\r\n\t\tif(!gantt.env.isIE){\r\n\t\t\targs = args.concat([\"font-weight:bold\", \"font-weight:normal\", \"font-weight:bold\", \"font-weight:normal\"]);\r\n\t\t}\r\n\r\n\t\tlog.apply(window.console, args);\r\n\t}\r\n\r\n\tfunction wrapDeprecated(method) {\r\n\t\treturn function () {\r\n\t\t\tdeprecated(\"dhtmlx.\" + method, \"gantt.\" + method);\r\n\t\t\treturn gantt[method].apply(gantt, arguments);\r\n\t\t};\r\n\t}\r\n\r\n\t/* dhtmlx */\r\n\r\n\r\n\tif (!window.dhtmlx)\r\n\t\twindow.dhtmlx = {};\r\n\r\n\tvar dhtmlxMethods = [\r\n\t\t\"message\",\r\n\t\t\"alert\",\r\n\t\t\"confirm\",\r\n\t\t\"modalbox\",\r\n\t\t\"uid\",\r\n\t\t\"copy\",\r\n\t\t\"mixin\",\r\n\t\t\"defined\",\r\n\t\t\"bind\",\r\n\t\t\"assert\"\r\n\t];\r\n\r\n\tvar dynMethods = [];\r\n\r\n\tfor(var i = 0; i < dhtmlxMethods.length; i++){\r\n\t\t// wrap dhtmlx methods with 'deprecated' warnings\r\n\t\t// do not wrap if methods are defined by dhtmlxSuite\r\n\t\tif(!window.dhtmlx[dhtmlxMethods[i]]){\r\n\t\t\tdynMethods.push(dhtmlxMethods[i]);\r\n\t\t\tdhtmlx[dhtmlxMethods[i]] = wrapDeprecated(dhtmlxMethods[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\tfor(var i = 0; i < dynMethods.length; i++){\r\n\t\t\tdelete window.dhtmlx[dynMethods[i]];\r\n\t\t}\r\n\t\tdynMethods = null;\r\n\r\n\t});\r\n\r\n\t/* global functions */\r\n\r\n\r\n\tif (!window.dataProcessor) {\r\n\t\twindow.dataProcessor = function (url) {\r\n\t\t\tdeprecated(\"new dataProcessor(url)\", \"new gantt.dataProcessor(url)\");\r\n\t\t\treturn new gantt.dataProcessor(url);\r\n\t\t};\r\n\t\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\t\twindow.dataProcessor = null;\r\n\t\t});\r\n\t}\r\n\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/core/deprecated_warnings.js\n// module id = 110\n// module chunks = 0"],"sourceRoot":""}