{"version":3,"sources":["webpack:///dhtmlxgantt_grouping.js","webpack:///webpack/bootstrap 9278c35520642ffbe1b9","webpack:///./sources/ext/grouping.js"],"names":["Gantt","plugin","gantt","modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","11","12","_groups","relation_property","relation_id_property","group_id","group_text","loading","loaded","init","self","this","attachEvent","clear","originalGetParent","$data","tasksStore","getParent","task","is_active","get_parent","apply","arguments","originalSetParent","setParent","new_pid","isTaskExists","parent","getTask","_setParentInner","id","type","config","types","project","$virtual","eachTask","bind","t","tasks","undefined","_groups_pull","parent_id","root_id","find_parent","getTaskByTime","relation","root","length","generate_sections","list","groups_type","groups","group","copy","open","readonly","text","push","clear_temp_tasks","splice","generate_data","links","getLinks","categories","data","concat","update_settings","group_tasks","groups_array","_clear_data","parse","groupBy"],"mappings":"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","file":"dhtmlxgantt_grouping.js","sourcesContent":["/*!\n * @license\r\n * \r\n * dhtmlxGantt v.5.1.5 Professional\r\n * This software is covered by DHTMLX Enterprise License. Usage without proper license is prohibited.\r\n * \r\n * (c) Dinamenta, UAB.\r\n * \n */\nGantt.plugin(function(gantt){\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 11);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 11:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(12);\n\n\n/***/ }),\n\n/***/ 12:\n/***/ (function(module, exports) {\n\ngantt._groups = {\r\n\trelation_property: null,\r\n\trelation_id_property: '$group_id',\r\n\tgroup_id:null,\r\n\tgroup_text:null,\r\n\tloading: false,\r\n\tloaded:0,\r\n\tinit: function(gantt){\r\n\t\tvar self = this;\r\n\r\n\t\tgantt.attachEvent(\"onClear\", function(){\r\n\t\t\tself.clear();\r\n\t\t});\r\n\t\tself.clear();\r\n\r\n\t\tvar originalGetParent = gantt.$data.tasksStore.getParent;// gantt._get_parent_id;\r\n\t\tgantt.$data.tasksStore.getParent = function(task){\r\n\t\t\tif(self.is_active()){\r\n\t\t\t\treturn self.get_parent(gantt, task);\r\n\t\t\t}else{\r\n\t\t\t\treturn originalGetParent.apply(this, arguments);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar originalSetParent = gantt.$data.tasksStore.setParent;\r\n\t\tgantt.$data.tasksStore.setParent = function(task, new_pid){\r\n\t\t\tif(!self.is_active()){\r\n\t\t\t\treturn originalSetParent.apply(this, arguments);\r\n\t\t\t}else if(gantt.isTaskExists(new_pid)){\r\n\t\t\t\tvar parent = gantt.getTask(new_pid);\r\n\t\t\t\ttask[self.relation_property] = parent[self.relation_id_property];\r\n\t\t\t\tthis._setParentInner.apply(this, arguments);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tgantt.attachEvent(\"onBeforeTaskDisplay\", function(id, task){\r\n\t\t\tif(self.is_active()){\r\n\t\t\t\tif(task.type == gantt.config.types.project && !task.$virtual)\r\n\t\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onBeforeParse\", function(){\r\n\t\t\tself.loading = true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onTaskLoading\", function(){\r\n\t\t\tif(self.is_active()){\r\n\t\t\t\tself.loaded--;\r\n\t\t\t\tif(self.loaded <= 0){\r\n\t\t\t\t\tself.loading = false;\r\n\t\t\t\t\tgantt.eachTask(gantt.bind(function(t){\r\n\t\t\t\t\t\tthis.get_parent(gantt, t);\r\n\t\t\t\t\t}, self));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onParse\", function(){\r\n\t\t\tself.loading = false;\r\n\t\t\tself.loaded = 0;\r\n\t\t});\r\n\t},\r\n\r\n\tget_parent: function(gantt, task, tasks){\r\n\r\n\t\tif(task.id === undefined){\r\n\t\t\ttask = gantt.getTask(task);\r\n\t\t}\r\n\r\n\t\tvar group_id = task[this.relation_property];\r\n\r\n\t\tif(this._groups_pull[group_id] !== undefined)\r\n\t\t\treturn this._groups_pull[group_id];\r\n\t\tvar parent_id = gantt.config.root_id;\r\n\r\n\t\tif(!this.loading){\r\n\t\t\tparent_id = this.find_parent(tasks || gantt.getTaskByTime(), group_id, this.relation_id_property, gantt.config.root_id);\r\n\t\t\tthis._groups_pull[group_id] = parent_id;\r\n\t\t}\r\n\r\n\t\treturn parent_id;\r\n\t},\r\n\tfind_parent: function(tasks, group_id, relation, root){\r\n\t\tfor(var i = 0; i < tasks.length; i++){\r\n\t\t\tvar task = tasks[i];\r\n\t\t\tif(task[relation] !== undefined && task[relation] == group_id){\r\n\t\t\t\treturn task.id;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn root;\r\n\t},\r\n\tclear: function(){\r\n\t\tthis._groups_pull = {};\r\n\t\tthis.relation_property = null;\r\n\t\tthis.group_id = null;\r\n\t\tthis.group_text = null;\r\n\t},\r\n\tis_active: function(){\r\n\t\treturn !!(this.relation_property);\r\n\t},\r\n\tgenerate_sections: function(list, groups_type){\r\n\t\tvar groups = [];\r\n\t\tfor(var i = 0; i < list.length; i++){\r\n\t\t\tvar group = gantt.copy(list[i]);\r\n\t\t\tgroup.type = groups_type;\r\n\t\t\tgroup.open = true;\r\n\t\t\tgroup.$virtual = true;\r\n\t\t\tgroup.readonly = true;\r\n\t\t\tgroup[this.relation_id_property] = group[this.group_id];\r\n\t\t\tgroup.text = group[this.group_text];\r\n\t\t\tgroups.push(group);\r\n\t\t}\r\n\t\treturn groups;\r\n\r\n\t},\r\n\tclear_temp_tasks: function(tasks){\r\n\t\tfor(var i =0; i < tasks.length; i++){\r\n\t\t\tif(tasks[i].$virtual){\r\n\t\t\t\ttasks.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tgenerate_data: function(gantt, groups){\r\n\t\tvar links = gantt.getLinks();\r\n\t\tvar tasks = gantt.getTaskByTime();\r\n\r\n\t\tthis.clear_temp_tasks(tasks);\r\n\r\n\t\tvar categories = [];\r\n\t\tif(this.is_active() && groups && groups.length){\r\n\t\t\tcategories = this.generate_sections(groups, gantt.config.types.project);\r\n\t\t}\r\n\r\n\t\tvar data = {links: links};\r\n\t\tdata.data = categories.concat(tasks);\r\n\r\n\t\treturn data;\r\n\t},\r\n\tupdate_settings: function(relation, group_id, group_text){\r\n\t\tthis.clear();\r\n\t\tthis.relation_property = relation;\r\n\t\tthis.group_id = group_id;\r\n\t\tthis.group_text = group_text;\r\n\t},\r\n\tgroup_tasks: function (gantt, groups_array, relation_property, group_id, group_text){\r\n\t\tthis.update_settings(relation_property, group_id, group_text);\r\n\t\tvar data = this.generate_data(gantt, groups_array);\r\n\t\tthis.loaded = data.data.length;\r\n\t\tgantt._clear_data();\r\n\t\tgantt.parse(data);\r\n\t}\r\n};\r\n\r\ngantt._groups.init(gantt);\r\ngantt.groupBy = function(config){\r\n\tconfig = config || {};\r\n\r\n\tvar groups = config.groups || null,\r\n\t\trelation_property = config.relation_property || null,\r\n\t\tgroup_id = config.group_id||\"key\",\r\n\t\tgroup_text = config.group_text||\"label\";\r\n\r\n\tthis._groups.group_tasks(this, groups, relation_property, group_id, group_text);\r\n};\r\n\n\n/***/ })\n\n/******/ });\n});\n\n\n// WEBPACK FOOTER //\n// dhtmlxgantt_grouping.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 11);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9278c35520642ffbe1b9","gantt._groups = {\r\n\trelation_property: null,\r\n\trelation_id_property: '$group_id',\r\n\tgroup_id:null,\r\n\tgroup_text:null,\r\n\tloading: false,\r\n\tloaded:0,\r\n\tinit: function(gantt){\r\n\t\tvar self = this;\r\n\r\n\t\tgantt.attachEvent(\"onClear\", function(){\r\n\t\t\tself.clear();\r\n\t\t});\r\n\t\tself.clear();\r\n\r\n\t\tvar originalGetParent = gantt.$data.tasksStore.getParent;// gantt._get_parent_id;\r\n\t\tgantt.$data.tasksStore.getParent = function(task){\r\n\t\t\tif(self.is_active()){\r\n\t\t\t\treturn self.get_parent(gantt, task);\r\n\t\t\t}else{\r\n\t\t\t\treturn originalGetParent.apply(this, arguments);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar originalSetParent = gantt.$data.tasksStore.setParent;\r\n\t\tgantt.$data.tasksStore.setParent = function(task, new_pid){\r\n\t\t\tif(!self.is_active()){\r\n\t\t\t\treturn originalSetParent.apply(this, arguments);\r\n\t\t\t}else if(gantt.isTaskExists(new_pid)){\r\n\t\t\t\tvar parent = gantt.getTask(new_pid);\r\n\t\t\t\ttask[self.relation_property] = parent[self.relation_id_property];\r\n\t\t\t\tthis._setParentInner.apply(this, arguments);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tgantt.attachEvent(\"onBeforeTaskDisplay\", function(id, task){\r\n\t\t\tif(self.is_active()){\r\n\t\t\t\tif(task.type == gantt.config.types.project && !task.$virtual)\r\n\t\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onBeforeParse\", function(){\r\n\t\t\tself.loading = true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onTaskLoading\", function(){\r\n\t\t\tif(self.is_active()){\r\n\t\t\t\tself.loaded--;\r\n\t\t\t\tif(self.loaded <= 0){\r\n\t\t\t\t\tself.loading = false;\r\n\t\t\t\t\tgantt.eachTask(gantt.bind(function(t){\r\n\t\t\t\t\t\tthis.get_parent(gantt, t);\r\n\t\t\t\t\t}, self));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onParse\", function(){\r\n\t\t\tself.loading = false;\r\n\t\t\tself.loaded = 0;\r\n\t\t});\r\n\t},\r\n\r\n\tget_parent: function(gantt, task, tasks){\r\n\r\n\t\tif(task.id === undefined){\r\n\t\t\ttask = gantt.getTask(task);\r\n\t\t}\r\n\r\n\t\tvar group_id = task[this.relation_property];\r\n\r\n\t\tif(this._groups_pull[group_id] !== undefined)\r\n\t\t\treturn this._groups_pull[group_id];\r\n\t\tvar parent_id = gantt.config.root_id;\r\n\r\n\t\tif(!this.loading){\r\n\t\t\tparent_id = this.find_parent(tasks || gantt.getTaskByTime(), group_id, this.relation_id_property, gantt.config.root_id);\r\n\t\t\tthis._groups_pull[group_id] = parent_id;\r\n\t\t}\r\n\r\n\t\treturn parent_id;\r\n\t},\r\n\tfind_parent: function(tasks, group_id, relation, root){\r\n\t\tfor(var i = 0; i < tasks.length; i++){\r\n\t\t\tvar task = tasks[i];\r\n\t\t\tif(task[relation] !== undefined && task[relation] == group_id){\r\n\t\t\t\treturn task.id;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn root;\r\n\t},\r\n\tclear: function(){\r\n\t\tthis._groups_pull = {};\r\n\t\tthis.relation_property = null;\r\n\t\tthis.group_id = null;\r\n\t\tthis.group_text = null;\r\n\t},\r\n\tis_active: function(){\r\n\t\treturn !!(this.relation_property);\r\n\t},\r\n\tgenerate_sections: function(list, groups_type){\r\n\t\tvar groups = [];\r\n\t\tfor(var i = 0; i < list.length; i++){\r\n\t\t\tvar group = gantt.copy(list[i]);\r\n\t\t\tgroup.type = groups_type;\r\n\t\t\tgroup.open = true;\r\n\t\t\tgroup.$virtual = true;\r\n\t\t\tgroup.readonly = true;\r\n\t\t\tgroup[this.relation_id_property] = group[this.group_id];\r\n\t\t\tgroup.text = group[this.group_text];\r\n\t\t\tgroups.push(group);\r\n\t\t}\r\n\t\treturn groups;\r\n\r\n\t},\r\n\tclear_temp_tasks: function(tasks){\r\n\t\tfor(var i =0; i < tasks.length; i++){\r\n\t\t\tif(tasks[i].$virtual){\r\n\t\t\t\ttasks.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tgenerate_data: function(gantt, groups){\r\n\t\tvar links = gantt.getLinks();\r\n\t\tvar tasks = gantt.getTaskByTime();\r\n\r\n\t\tthis.clear_temp_tasks(tasks);\r\n\r\n\t\tvar categories = [];\r\n\t\tif(this.is_active() && groups && groups.length){\r\n\t\t\tcategories = this.generate_sections(groups, gantt.config.types.project);\r\n\t\t}\r\n\r\n\t\tvar data = {links: links};\r\n\t\tdata.data = categories.concat(tasks);\r\n\r\n\t\treturn data;\r\n\t},\r\n\tupdate_settings: function(relation, group_id, group_text){\r\n\t\tthis.clear();\r\n\t\tthis.relation_property = relation;\r\n\t\tthis.group_id = group_id;\r\n\t\tthis.group_text = group_text;\r\n\t},\r\n\tgroup_tasks: function (gantt, groups_array, relation_property, group_id, group_text){\r\n\t\tthis.update_settings(relation_property, group_id, group_text);\r\n\t\tvar data = this.generate_data(gantt, groups_array);\r\n\t\tthis.loaded = data.data.length;\r\n\t\tgantt._clear_data();\r\n\t\tgantt.parse(data);\r\n\t}\r\n};\r\n\r\ngantt._groups.init(gantt);\r\ngantt.groupBy = function(config){\r\n\tconfig = config || {};\r\n\r\n\tvar groups = config.groups || null,\r\n\t\trelation_property = config.relation_property || null,\r\n\t\tgroup_id = config.group_id||\"key\",\r\n\t\tgroup_text = config.group_text||\"label\";\r\n\r\n\tthis._groups.group_tasks(this, groups, relation_property, group_id, group_text);\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/ext/grouping.js\n// module id = 12\n// module chunks = 9"],"sourceRoot":""}